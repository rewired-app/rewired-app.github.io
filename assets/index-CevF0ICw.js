function xC(t,o){for(var a=0;a<o.length;a++){const i=o[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(t,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();function ju(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ff={exports:{}},al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function bC(){if(dy)return al;dy=1;var t=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function a(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var f in l)f!=="key"&&(c[f]=l[f])}else c=l;return l=c.ref,{$$typeof:t,type:i,key:u,ref:l!==void 0?l:null,props:c}}return al.Fragment=o,al.jsx=a,al.jsxs=a,al}var fy;function vC(){return fy||(fy=1,Ff.exports=bC()),Ff.exports}var v=vC(),Gf={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function AC(){if(hy)return Ve;hy=1;var t=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function b(O){return O===null||typeof O!="object"?null:(O=m&&O[m]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function S(O,U,L){this.props=O,this.context=U,this.refs=A,this.updater=L||w}S.prototype.isReactComponent={},S.prototype.setState=function(O,U){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,U,"setState")},S.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function R(){}R.prototype=S.prototype;function M(O,U,L){this.props=O,this.context=U,this.refs=A,this.updater=L||w}var E=M.prototype=new R;E.constructor=M,C(E,S.prototype),E.isPureReactComponent=!0;var k=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function D(O,U,L,Y,q,J){return L=J.ref,{$$typeof:t,type:O,key:U,ref:L!==void 0?L:null,props:J}}function j(O,U){return D(O.type,U,void 0,void 0,void 0,O.props)}function $(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function F(O){var U={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(L){return U[L]})}var X=/\/+/g;function Z(O,U){return typeof O=="object"&&O!==null&&O.key!=null?F(""+O.key):U.toString(36)}function K(){}function te(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(K,K):(O.status="pending",O.then(function(U){O.status==="pending"&&(O.status="fulfilled",O.value=U)},function(U){O.status==="pending"&&(O.status="rejected",O.reason=U)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Q(O,U,L,Y,q){var J=typeof O;(J==="undefined"||J==="boolean")&&(O=null);var oe=!1;if(O===null)oe=!0;else switch(J){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(O.$$typeof){case t:case o:oe=!0;break;case g:return oe=O._init,Q(oe(O._payload),U,L,Y,q)}}if(oe)return q=q(O),oe=Y===""?"."+Z(O,0):Y,k(q)?(L="",oe!=null&&(L=oe.replace(X,"$&/")+"/"),Q(q,U,L,"",function(ge){return ge})):q!=null&&($(q)&&(q=j(q,L+(q.key==null||O&&O.key===q.key?"":(""+q.key).replace(X,"$&/")+"/")+oe)),U.push(q)),1;oe=0;var le=Y===""?".":Y+":";if(k(O))for(var fe=0;fe<O.length;fe++)Y=O[fe],J=le+Z(Y,fe),oe+=Q(Y,U,L,J,q);else if(fe=b(O),typeof fe=="function")for(O=fe.call(O),fe=0;!(Y=O.next()).done;)Y=Y.value,J=le+Z(Y,fe++),oe+=Q(Y,U,L,J,q);else if(J==="object"){if(typeof O.then=="function")return Q(te(O),U,L,Y,q);throw U=String(O),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return oe}function _(O,U,L){if(O==null)return O;var Y=[],q=0;return Q(O,Y,"","",function(J){return U.call(L,J,q++)}),Y}function H(O){if(O._status===-1){var U=O._result;U=U(),U.then(function(L){(O._status===0||O._status===-1)&&(O._status=1,O._result=L)},function(L){(O._status===0||O._status===-1)&&(O._status=2,O._result=L)}),O._status===-1&&(O._status=0,O._result=U)}if(O._status===1)return O._result.default;throw O._result}var N=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function P(){}return Ve.Children={map:_,forEach:function(O,U,L){_(O,function(){U.apply(this,arguments)},L)},count:function(O){var U=0;return _(O,function(){U++}),U},toArray:function(O){return _(O,function(U){return U})||[]},only:function(O){if(!$(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ve.Component=S,Ve.Fragment=a,Ve.Profiler=l,Ve.PureComponent=M,Ve.StrictMode=i,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return I.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cloneElement=function(O,U,L){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var Y=C({},O.props),q=O.key,J=void 0;if(U!=null)for(oe in U.ref!==void 0&&(J=void 0),U.key!==void 0&&(q=""+U.key),U)!z.call(U,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&U.ref===void 0||(Y[oe]=U[oe]);var oe=arguments.length-2;if(oe===1)Y.children=L;else if(1<oe){for(var le=Array(oe),fe=0;fe<oe;fe++)le[fe]=arguments[fe+2];Y.children=le}return D(O.type,q,void 0,void 0,J,Y)},Ve.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ve.createElement=function(O,U,L){var Y,q={},J=null;if(U!=null)for(Y in U.key!==void 0&&(J=""+U.key),U)z.call(U,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(q[Y]=U[Y]);var oe=arguments.length-2;if(oe===1)q.children=L;else if(1<oe){for(var le=Array(oe),fe=0;fe<oe;fe++)le[fe]=arguments[fe+2];q.children=le}if(O&&O.defaultProps)for(Y in oe=O.defaultProps,oe)q[Y]===void 0&&(q[Y]=oe[Y]);return D(O,J,void 0,void 0,null,q)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:f,render:O}},Ve.isValidElement=$,Ve.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:H}},Ve.memo=function(O,U){return{$$typeof:h,type:O,compare:U===void 0?null:U}},Ve.startTransition=function(O){var U=I.T,L={};I.T=L;try{var Y=O(),q=I.S;q!==null&&q(L,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(P,N)}catch(J){N(J)}finally{I.T=U}},Ve.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ve.use=function(O){return I.H.use(O)},Ve.useActionState=function(O,U,L){return I.H.useActionState(O,U,L)},Ve.useCallback=function(O,U){return I.H.useCallback(O,U)},Ve.useContext=function(O){return I.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,U){return I.H.useDeferredValue(O,U)},Ve.useEffect=function(O,U,L){var Y=I.H;if(typeof L=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(O,U)},Ve.useId=function(){return I.H.useId()},Ve.useImperativeHandle=function(O,U,L){return I.H.useImperativeHandle(O,U,L)},Ve.useInsertionEffect=function(O,U){return I.H.useInsertionEffect(O,U)},Ve.useLayoutEffect=function(O,U){return I.H.useLayoutEffect(O,U)},Ve.useMemo=function(O,U){return I.H.useMemo(O,U)},Ve.useOptimistic=function(O,U){return I.H.useOptimistic(O,U)},Ve.useReducer=function(O,U,L){return I.H.useReducer(O,U,L)},Ve.useRef=function(O){return I.H.useRef(O)},Ve.useState=function(O){return I.H.useState(O)},Ve.useSyncExternalStore=function(O,U,L){return I.H.useSyncExternalStore(O,U,L)},Ve.useTransition=function(){return I.H.useTransition()},Ve.version="19.1.1",Ve}var py;function rp(){return py||(py=1,Gf.exports=AC()),Gf.exports}var x=rp();const Ce=ju(x),ub=xC({__proto__:null,default:Ce},[x]);var Wf={exports:{}},il={},qf={exports:{}},Vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function wC(){return my||(my=1,(function(t){function o(_,H){var N=_.length;_.push(H);e:for(;0<N;){var P=N-1>>>1,O=_[P];if(0<l(O,H))_[P]=H,_[N]=O,N=P;else break e}}function a(_){return _.length===0?null:_[0]}function i(_){if(_.length===0)return null;var H=_[0],N=_.pop();if(N!==H){_[0]=N;e:for(var P=0,O=_.length,U=O>>>1;P<U;){var L=2*(P+1)-1,Y=_[L],q=L+1,J=_[q];if(0>l(Y,N))q<O&&0>l(J,Y)?(_[P]=J,_[q]=N,P=q):(_[P]=Y,_[L]=N,P=L);else if(q<O&&0>l(J,N))_[P]=J,_[q]=N,P=q;else break e}}return H}function l(_,H){var N=_.sortIndex-H.sortIndex;return N!==0?N:_.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();t.unstable_now=function(){return u.now()-f}}var p=[],h=[],g=1,m=null,b=3,w=!1,C=!1,A=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(_){for(var H=a(h);H!==null;){if(H.callback===null)i(h);else if(H.startTime<=_)i(h),H.sortIndex=H.expirationTime,o(p,H);else break;H=a(h)}}function I(_){if(A=!1,k(_),!C)if(a(p)!==null)C=!0,z||(z=!0,Z());else{var H=a(h);H!==null&&Q(I,H.startTime-_)}}var z=!1,D=-1,j=5,$=-1;function F(){return S?!0:!(t.unstable_now()-$<j)}function X(){if(S=!1,z){var _=t.unstable_now();$=_;var H=!0;try{e:{C=!1,A&&(A=!1,M(D),D=-1),w=!0;var N=b;try{t:{for(k(_),m=a(p);m!==null&&!(m.expirationTime>_&&F());){var P=m.callback;if(typeof P=="function"){m.callback=null,b=m.priorityLevel;var O=P(m.expirationTime<=_);if(_=t.unstable_now(),typeof O=="function"){m.callback=O,k(_),H=!0;break t}m===a(p)&&i(p),k(_)}else i(p);m=a(p)}if(m!==null)H=!0;else{var U=a(h);U!==null&&Q(I,U.startTime-_),H=!1}}break e}finally{m=null,b=N,w=!1}H=void 0}}finally{H?Z():z=!1}}}var Z;if(typeof E=="function")Z=function(){E(X)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,te=K.port2;K.port1.onmessage=X,Z=function(){te.postMessage(null)}}else Z=function(){R(X,0)};function Q(_,H){D=R(function(){_(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(_){_.callback=null},t.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<_?Math.floor(1e3/_):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(_){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var N=b;b=H;try{return _()}finally{b=N}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(_,H){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var N=b;b=_;try{return H()}finally{b=N}},t.unstable_scheduleCallback=function(_,H,N){var P=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?P+N:P):N=P,_){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=N+O,_={id:g++,callback:H,priorityLevel:_,startTime:N,expirationTime:O,sortIndex:-1},N>P?(_.sortIndex=N,o(h,_),a(p)===null&&_===a(h)&&(A?(M(D),D=-1):A=!0,Q(I,N-P))):(_.sortIndex=O,o(p,_),C||w||(C=!0,z||(z=!0,Z()))),_},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(_){var H=b;return function(){var N=b;b=H;try{return _.apply(this,arguments)}finally{b=N}}}})(Vf)),Vf}var gy;function CC(){return gy||(gy=1,qf.exports=wC()),qf.exports}var Zf={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function SC(){if(yy)return Yn;yy=1;var t=rp();function o(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,h,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:m==null?null:""+m,children:p,containerInfo:h,implementation:g}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(p,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(o(299));return c(p,h,null,g)},Yn.flushSync=function(p){var h=u.T,g=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=g,i.d.f()}},Yn.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},Yn.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Yn.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var g=h.as,m=f(g,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:w}):g==="script"&&i.d.X(p,{crossOrigin:m,integrity:b,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Yn.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=f(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},Yn.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,m=f(g,h.crossOrigin);i.d.L(p,g,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Yn.preloadModule=function(p,h){if(typeof p=="string")if(h){var g=f(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},Yn.requestFormReset=function(p){i.d.r(p)},Yn.unstable_batchedUpdates=function(p,h){return p(h)},Yn.useFormState=function(p,h,g){return u.H.useFormState(p,h,g)},Yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Yn.version="19.1.1",Yn}var xy;function db(){if(xy)return Zf.exports;xy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(o){console.error(o)}}return t(),Zf.exports=SC(),Zf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function EC(){if(by)return il;by=1;var t=CC(),o=rp(),a=db();function i(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function u(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function f(e){if(c(e)!==e)throw Error(i(188))}function p(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(i(188));return n!==e?null:e}for(var r=e,s=n;;){var d=r.return;if(d===null)break;var y=d.alternate;if(y===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===y.child){for(y=d.child;y;){if(y===r)return f(d),e;if(y===s)return f(d),n;y=y.sibling}throw Error(i(188))}if(r.return!==s.return)r=d,s=y;else{for(var T=!1,B=d.child;B;){if(B===r){T=!0,r=d,s=y;break}if(B===s){T=!0,s=d,r=y;break}B=B.sibling}if(!T){for(B=y.child;B;){if(B===r){T=!0,r=y,s=d;break}if(B===s){T=!0,s=y,r=d;break}B=B.sibling}if(!T)throw Error(i(189))}}if(r.alternate!==s)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:n}function h(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=h(e),n!==null)return n;e=e.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=X&&e[X]||e["@@iterator"],typeof e=="function"?e:null)}var K=Symbol.for("react.client.reference");function te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===K?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case z:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case E:return(e.displayName||"Context")+".Provider";case M:return(e._context.displayName||"Context")+".Consumer";case k:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return n=e.displayName||null,n!==null?n:te(e.type)||"Memo";case j:n=e._payload,e=e._init;try{return te(e(n))}catch{}}return null}var Q=Array.isArray,_=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},P=[],O=-1;function U(e){return{current:e}}function L(e){0>O||(e.current=P[O],P[O]=null,O--)}function Y(e,n){O++,P[O]=e.current,e.current=n}var q=U(null),J=U(null),oe=U(null),le=U(null);function fe(e,n){switch(Y(oe,n),Y(J,e),Y(q,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?L0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=L0(n),e=H0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(q),Y(q,e)}function ge(){L(q),L(J),L(oe)}function Se(e){e.memoizedState!==null&&Y(le,e);var n=q.current,r=H0(n,e.type);n!==r&&(Y(J,e),Y(q,r))}function De(e){J.current===e&&(L(q),L(J)),le.current===e&&(L(le),el._currentValue=N)}var xe=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,Ae=t.unstable_cancelCallback,Oe=t.unstable_shouldYield,Le=t.unstable_requestPaint,Pe=t.unstable_now,gt=t.unstable_getCurrentPriorityLevel,At=t.unstable_ImmediatePriority,zt=t.unstable_UserBlockingPriority,Qe=t.unstable_NormalPriority,Re=t.unstable_LowPriority,Xe=t.unstable_IdlePriority,je=t.log,Nt=t.unstable_setDisableYieldValue,Ze=null,Je=null;function ht(e){if(typeof je=="function"&&Nt(e),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Ze,e)}catch{}}var pe=Math.clz32?Math.clz32:$e,He=Math.log,Ye=Math.LN2;function $e(e){return e>>>=0,e===0?32:31-(He(e)/Ye|0)|0}var ot=256,rt=4194304;function ct(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ut(e,n,r){var s=e.pendingLanes;if(s===0)return 0;var d=0,y=e.suspendedLanes,T=e.pingedLanes;e=e.warmLanes;var B=s&134217727;return B!==0?(s=B&~y,s!==0?d=ct(s):(T&=B,T!==0?d=ct(T):r||(r=B&~e,r!==0&&(d=ct(r))))):(B=s&~y,B!==0?d=ct(B):T!==0?d=ct(T):r||(r=s&~e,r!==0&&(d=ct(r)))),d===0?0:n!==0&&n!==d&&(n&y)===0&&(y=d&-d,r=n&-n,y>=r||y===32&&(r&4194048)!==0)?n:d}function Fe(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Ee(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function We(){var e=ot;return ot<<=1,(ot&4194048)===0&&(ot=256),e}function qe(){var e=rt;return rt<<=1,(rt&62914560)===0&&(rt=4194304),e}function _t(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function yn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jn(e,n,r,s,d,y){var T=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var B=e.entanglements,G=e.expirationTimes,re=e.hiddenUpdates;for(r=T&~r;0<r;){var ce=31-pe(r),he=1<<ce;B[ce]=0,G[ce]=-1;var ae=re[ce];if(ae!==null)for(re[ce]=null,ce=0;ce<ae.length;ce++){var ie=ae[ce];ie!==null&&(ie.lane&=-536870913)}r&=~he}s!==0&&xo(e,s,0),y!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=y&~(T&~n))}function xo(e,n,r){e.pendingLanes|=n,e.suspendedLanes&=~n;var s=31-pe(n);e.entangledLanes|=n,e.entanglements[s]=e.entanglements[s]|1073741824|r&4194090}function bo(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var s=31-pe(r),d=1<<s;d&n|e[s]&n&&(e[s]|=n),r&=~d}}function Bn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Pn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Lo(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:ay(e.type))}function no(e,n){var r=H.p;try{return H.p=e,n()}finally{H.p=r}}var Wt=Math.random().toString(36).slice(2),pt="__reactFiber$"+Wt,wt="__reactProps$"+Wt,St="__reactContainer$"+Wt,Ue="__reactEvents$"+Wt,qt="__reactListeners$"+Wt,vo="__reactHandles$"+Wt,Ho="__reactResources$"+Wt,Ao="__reactMarker$"+Wt;function pr(e){delete e[pt],delete e[wt],delete e[Ue],delete e[qt],delete e[vo]}function cn(e){var n=e[pt];if(n)return n;for(var r=e.parentNode;r;){if(n=r[St]||r[pt]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=X0(e);e!==null;){if(r=e[pt])return r;e=X0(e)}return n}e=r,r=e.parentNode}return null}function oo(e){if(e=e[pt]||e[St]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Vn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(i(33))}function Xt(e){var n=e[Ho];return n||(n=e[Ho]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ft(e){e[Ao]=!0}var zn=new Set,Yt={};function Rn(e,n){Et(e,n),Et(e+"Capture",n)}function Et(e,n){for(Yt[e]=n,e=0;e<n.length;e++)zn.add(n[e])}var on=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tt={},Ra={};function hn(e){return xe.call(Ra,e)?!0:xe.call(Tt,e)?!1:on.test(e)?Ra[e]=!0:(Tt[e]=!0,!1)}function Hr(e,n,r){if(hn(n))if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+r)}}function xt(e,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+r)}}function de(e,n,r,s){if(s===null)e.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(n,r,""+s)}}var be,et;function at(e){if(be===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);be=n&&n[1]||"",et=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+e+et}var ke=!1;function rn(e,n){if(!e||ke)return"";ke=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var ae=ie}Reflect.construct(e,[],he)}else{try{he.call()}catch(ie){ae=ie}e.call(he.prototype)}}else{try{throw Error()}catch(ie){ae=ie}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&ae&&typeof ie.stack=="string")return[ie.stack,ae.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=s.DetermineComponentFrameRoot(),T=y[0],B=y[1];if(T&&B){var G=T.split(`
`),re=B.split(`
`);for(d=s=0;s<G.length&&!G[s].includes("DetermineComponentFrameRoot");)s++;for(;d<re.length&&!re[d].includes("DetermineComponentFrameRoot");)d++;if(s===G.length||d===re.length)for(s=G.length-1,d=re.length-1;1<=s&&0<=d&&G[s]!==re[d];)d--;for(;1<=s&&0<=d;s--,d--)if(G[s]!==re[d]){if(s!==1||d!==1)do if(s--,d--,0>d||G[s]!==re[d]){var ce=`
`+G[s].replace(" at new "," at ");return e.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",e.displayName)),ce}while(1<=s&&0<=d);break}}}finally{ke=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?at(r):""}function kn(e){switch(e.tag){case 26:case 27:case 5:return at(e.type);case 16:return at("Lazy");case 13:return at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return rn(e.type,!1);case 11:return rn(e.type.render,!1);case 1:return rn(e.type,!0);case 31:return at("Activity");default:return""}}function Lt(e){try{var n="";do n+=kn(e),e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ka(e){var n=Yo(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,y=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(T){s=""+T,y.call(this,T)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Mt(e){e._valueTracker||(e._valueTracker=ka(e))}function $t(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return e&&(s=Yo(e)?e.checked?"true":"false":e.value),e=s,e!==r?(n.setValue(e),!0):!1}function Dt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Qn=/[\n"\\]/g;function bt(e){return e.replace(Qn,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ln(e,n,r,s,d,y,T,B){e.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.type=T:e.removeAttribute("type"),n!=null?T==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Nn(n)):e.value!==""+Nn(n)&&(e.value=""+Nn(n)):T!=="submit"&&T!=="reset"||e.removeAttribute("value"),n!=null?Yr(e,T,Nn(n)):r!=null?Yr(e,T,Nn(r)):s!=null&&e.removeAttribute("value"),d==null&&y!=null&&(e.defaultChecked=!!y),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?e.name=""+Nn(B):e.removeAttribute("name")}function $o(e,n,r,s,d,y,T,B){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.type=y),n!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||n!=null))return;r=r!=null?""+Nn(r):"",n=n!=null?""+Nn(n):r,B||n===e.value||(e.value=n),e.defaultValue=n}s=s??d,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=B?e.checked:!!s,e.defaultChecked=!!s,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(e.name=T)}function Yr(e,n,r){n==="number"&&Dt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Uo(e,n,r,s){if(e=e.options,n){n={};for(var d=0;d<r.length;d++)n["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=n.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Nn(r),n=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function cs(e,n,r){if(n!=null&&(n=""+Nn(n),n!==e.value&&(e.value=n),r==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=r!=null?""+Nn(r):""}function us(e,n,r,s){if(n==null){if(s!=null){if(r!=null)throw Error(i(92));if(Q(s)){if(1<s.length)throw Error(i(93));s=s[0]}r=s}r==null&&(r=""),n=r}r=Nn(n),e.defaultValue=r,s=e.textContent,s===r&&s!==""&&s!==null&&(e.value=s)}function mr(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var $l=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ds(e,n,r){var s=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,r):typeof r!="number"||r===0||$l.has(n)?n==="float"?e.cssFloat=r:e[n]=(""+r).trim():e[n]=r+"px"}function fs(e,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(e=e.style,r!=null){for(var s in r)!r.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var d in n)s=n[d],n.hasOwnProperty(d)&&r[d]!==s&&ds(e,d,s)}else for(var y in n)n.hasOwnProperty(y)&&ds(e,y,n[y])}function ni(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ta(e){return Xl.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var oi=null;function hs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $r=null,Ur=null;function Ql(e){var n=oo(e);if(n&&(e=n.stateNode)){var r=e[wt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Ln(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+bt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==e&&s.form===e.form){var d=s[wt]||null;if(!d)throw Error(i(90));Ln(s,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<r.length;n++)s=r[n],s.form===e.form&&$t(s)}break e;case"textarea":cs(e,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&Uo(e,!!r.multiple,n,!1)}}}var ps=!1;function Fl(e,n,r){if(ps)return e(n,r);ps=!0;try{var s=e(n);return s}finally{if(ps=!1,($r!==null||Ur!==null)&&(Rc(),$r&&(n=$r,e=Ur,Ur=$r=null,Ql(n),e)))for(n=0;n<e.length;n++)Ql(e[n])}}function Ia(e,n){var r=e.stateNode;if(r===null)return null;var s=r[wt]||null;if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xr=!1;if(xn)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){Xr=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{Xr=!1}var Zo=null,ri=null,V=null;function ye(){if(V)return V;var e,n=ri,r=n.length,s,d="value"in Zo?Zo.value:Zo.textContent,y=d.length;for(e=0;e<r&&n[e]===d[e];e++);var T=r-e;for(s=1;s<=T&&n[r-s]===d[y-s];s++);return V=d.slice(e,1<s?1-s:void 0)}function me(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ie(){return!0}function it(){return!1}function ze(e){function n(r,s,d,y,T){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var B in e)e.hasOwnProperty(B)&&(r=e[B],this[B]=r?r(y):y[B]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ie:it,this.isPropagationStopped=it,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ie)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ie)},persist:function(){},isPersistent:Ie}),n}var st={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=ze(st),an=g({},st,{view:0,detail:0}),Vu=ze(an),ms,Zu,gs,Gl=g({},an,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ju,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gs&&(gs&&e.type==="mousemove"?(ms=e.screenX-gs.screenX,Zu=e.screenY-gs.screenY):Zu=ms=0,gs=e),ms)},movementY:function(e){return"movementY"in e?e.movementY:Zu}}),Qp=ze(Gl),bA=g({},Gl,{dataTransfer:0}),vA=ze(bA),AA=g({},an,{relatedTarget:0}),Ku=ze(AA),wA=g({},st,{animationName:0,elapsedTime:0,pseudoElement:0}),CA=ze(wA),SA=g({},st,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),EA=ze(SA),MA=g({},st,{data:0}),Fp=ze(MA),RA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IA(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=TA[e])?!!n[e]:!1}function Ju(){return IA}var OA=g({},an,{key:function(e){if(e.key){var n=RA[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=me(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kA[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ju,charCode:function(e){return e.type==="keypress"?me(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?me(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_A=ze(OA),DA=g({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gp=ze(DA),jA=g({},an,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ju}),BA=ze(jA),PA=g({},st,{propertyName:0,elapsedTime:0,pseudoElement:0}),zA=ze(PA),NA=g({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LA=ze(NA),HA=g({},st,{newState:0,oldState:0}),YA=ze(HA),$A=[9,13,27,32],ed=xn&&"CompositionEvent"in window,ys=null;xn&&"documentMode"in document&&(ys=document.documentMode);var UA=xn&&"TextEvent"in window&&!ys,Wp=xn&&(!ed||ys&&8<ys&&11>=ys),qp=" ",Vp=!1;function Zp(e,n){switch(e){case"keyup":return $A.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ai=!1;function XA(e,n){switch(e){case"compositionend":return Kp(n);case"keypress":return n.which!==32?null:(Vp=!0,qp);case"textInput":return e=n.data,e===qp&&Vp?null:e;default:return null}}function QA(e,n){if(ai)return e==="compositionend"||!ed&&Zp(e,n)?(e=ye(),V=ri=Zo=null,ai=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Wp&&n.locale!=="ko"?null:n.data;default:return null}}var FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!FA[e.type]:n==="textarea"}function em(e,n,r,s){$r?Ur?Ur.push(s):Ur=[s]:$r=s,n=Dc(n,"onChange"),0<n.length&&(r=new bn("onChange","change",null,r,s),e.push({event:r,listeners:n}))}var xs=null,bs=null;function GA(e){j0(e,0)}function Wl(e){var n=Vn(e);if($t(n))return e}function tm(e,n){if(e==="change")return n}var nm=!1;if(xn){var td;if(xn){var nd="oninput"in document;if(!nd){var om=document.createElement("div");om.setAttribute("oninput","return;"),nd=typeof om.oninput=="function"}td=nd}else td=!1;nm=td&&(!document.documentMode||9<document.documentMode)}function rm(){xs&&(xs.detachEvent("onpropertychange",am),bs=xs=null)}function am(e){if(e.propertyName==="value"&&Wl(bs)){var n=[];em(n,bs,e,hs(e)),Fl(GA,n)}}function WA(e,n,r){e==="focusin"?(rm(),xs=n,bs=r,xs.attachEvent("onpropertychange",am)):e==="focusout"&&rm()}function qA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wl(bs)}function VA(e,n){if(e==="click")return Wl(n)}function ZA(e,n){if(e==="input"||e==="change")return Wl(n)}function KA(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ro=typeof Object.is=="function"?Object.is:KA;function vs(e,n){if(ro(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!xe.call(n,d)||!ro(e[d],n[d]))return!1}return!0}function im(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sm(e,n){var r=im(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=n&&s>=n)return{node:r,offset:n-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=im(r)}}function lm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?lm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function cm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Dt(e.document);n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=Dt(e.document)}return n}function od(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var JA=xn&&"documentMode"in document&&11>=document.documentMode,ii=null,rd=null,As=null,ad=!1;function um(e,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ad||ii==null||ii!==Dt(s)||(s=ii,"selectionStart"in s&&od(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),As&&vs(As,s)||(As=s,s=Dc(rd,"onSelect"),0<s.length&&(n=new bn("onSelect","select",null,n,r),e.push({event:n,listeners:s}),n.target=ii)))}function _a(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var si={animationend:_a("Animation","AnimationEnd"),animationiteration:_a("Animation","AnimationIteration"),animationstart:_a("Animation","AnimationStart"),transitionrun:_a("Transition","TransitionRun"),transitionstart:_a("Transition","TransitionStart"),transitioncancel:_a("Transition","TransitionCancel"),transitionend:_a("Transition","TransitionEnd")},id={},dm={};xn&&(dm=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function Da(e){if(id[e])return id[e];if(!si[e])return e;var n=si[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in dm)return id[e]=n[r];return e}var fm=Da("animationend"),hm=Da("animationiteration"),pm=Da("animationstart"),ew=Da("transitionrun"),tw=Da("transitionstart"),nw=Da("transitioncancel"),mm=Da("transitionend"),gm=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function Xo(e,n){gm.set(e,n),Rn(n,[e])}var ym=new WeakMap;function wo(e,n){if(typeof e=="object"&&e!==null){var r=ym.get(e);return r!==void 0?r:(n={value:e,source:n,stack:Lt(n)},ym.set(e,n),n)}return{value:e,source:n,stack:Lt(n)}}var Co=[],li=0,ld=0;function ql(){for(var e=li,n=ld=li=0;n<e;){var r=Co[n];Co[n++]=null;var s=Co[n];Co[n++]=null;var d=Co[n];Co[n++]=null;var y=Co[n];if(Co[n++]=null,s!==null&&d!==null){var T=s.pending;T===null?d.next=d:(d.next=T.next,T.next=d),s.pending=d}y!==0&&xm(r,d,y)}}function Vl(e,n,r,s){Co[li++]=e,Co[li++]=n,Co[li++]=r,Co[li++]=s,ld|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function cd(e,n,r,s){return Vl(e,n,r,s),Zl(e)}function ci(e,n){return Vl(e,null,null,n),Zl(e)}function xm(e,n,r){e.lanes|=r;var s=e.alternate;s!==null&&(s.lanes|=r);for(var d=!1,y=e.return;y!==null;)y.childLanes|=r,s=y.alternate,s!==null&&(s.childLanes|=r),y.tag===22&&(e=y.stateNode,e===null||e._visibility&1||(d=!0)),e=y,y=y.return;return e.tag===3?(y=e.stateNode,d&&n!==null&&(d=31-pe(r),e=y.hiddenUpdates,s=e[d],s===null?e[d]=[n]:s.push(n),n.lane=r|536870912),y):null}function Zl(e){if(50<Fs)throw Fs=0,gf=null,Error(i(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ui={};function ow(e,n,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(e,n,r,s){return new ow(e,n,r,s)}function ud(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gr(e,n){var r=e.alternate;return r===null?(r=ao(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function bm(e,n){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,n=r.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Kl(e,n,r,s,d,y){var T=0;if(s=e,typeof e=="function")ud(e)&&(T=1);else if(typeof e=="string")T=aC(e,r,q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=ao(31,r,n,d),e.elementType=$,e.lanes=y,e;case C:return ja(r.children,d,y,n);case A:T=8,d|=24;break;case S:return e=ao(12,r,n,d|2),e.elementType=S,e.lanes=y,e;case I:return e=ao(13,r,n,d),e.elementType=I,e.lanes=y,e;case z:return e=ao(19,r,n,d),e.elementType=z,e.lanes=y,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:case E:T=10;break e;case M:T=9;break e;case k:T=11;break e;case D:T=14;break e;case j:T=16,s=null;break e}T=29,r=Error(i(130,e===null?"null":typeof e,"")),s=null}return n=ao(T,r,n,d),n.elementType=e,n.type=s,n.lanes=y,n}function ja(e,n,r,s){return e=ao(7,e,s,n),e.lanes=r,e}function dd(e,n,r){return e=ao(6,e,null,n),e.lanes=r,e}function fd(e,n,r){return n=ao(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var di=[],fi=0,Jl=null,ec=0,So=[],Eo=0,Ba=null,yr=1,xr="";function Pa(e,n){di[fi++]=ec,di[fi++]=Jl,Jl=e,ec=n}function vm(e,n,r){So[Eo++]=yr,So[Eo++]=xr,So[Eo++]=Ba,Ba=e;var s=yr;e=xr;var d=32-pe(s)-1;s&=~(1<<d),r+=1;var y=32-pe(n)+d;if(30<y){var T=d-d%5;y=(s&(1<<T)-1).toString(32),s>>=T,d-=T,yr=1<<32-pe(n)+d|r<<d|s,xr=y+e}else yr=1<<y|r<<d|s,xr=e}function hd(e){e.return!==null&&(Pa(e,1),vm(e,1,0))}function pd(e){for(;e===Jl;)Jl=di[--fi],di[fi]=null,ec=di[--fi],di[fi]=null;for(;e===Ba;)Ba=So[--Eo],So[Eo]=null,xr=So[--Eo],So[Eo]=null,yr=So[--Eo],So[Eo]=null}var Fn=null,Jt=null,Ct=!1,za=null,Ko=!1,md=Error(i(519));function Na(e){var n=Error(i(418,""));throw Ss(wo(n,e)),md}function Am(e){var n=e.stateNode,r=e.type,s=e.memoizedProps;switch(n[pt]=e,n[wt]=s,r){case"dialog":ft("cancel",n),ft("close",n);break;case"iframe":case"object":case"embed":ft("load",n);break;case"video":case"audio":for(r=0;r<Ws.length;r++)ft(Ws[r],n);break;case"source":ft("error",n);break;case"img":case"image":case"link":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"input":ft("invalid",n),$o(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),Mt(n);break;case"select":ft("invalid",n);break;case"textarea":ft("invalid",n),us(n,s.value,s.defaultValue,s.children),Mt(n)}r=s.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||s.suppressHydrationWarning===!0||N0(n.textContent,r)?(s.popover!=null&&(ft("beforetoggle",n),ft("toggle",n)),s.onScroll!=null&&ft("scroll",n),s.onScrollEnd!=null&&ft("scrollend",n),s.onClick!=null&&(n.onclick=jc),n=!0):n=!1,n||Na(e)}function wm(e){for(Fn=e.return;Fn;)switch(Fn.tag){case 5:case 13:Ko=!1;return;case 27:case 3:Ko=!0;return;default:Fn=Fn.return}}function ws(e){if(e!==Fn)return!1;if(!Ct)return wm(e),Ct=!0,!1;var n=e.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||_f(e.type,e.memoizedProps)),r=!r),r&&Jt&&Na(e),wm(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(r=e.data,r==="/$"){if(n===0){Jt=Fo(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;e=e.nextSibling}Jt=null}}else n===27?(n=Jt,ia(e.type)?(e=Pf,Pf=null,Jt=e):Jt=n):Jt=Fn?Fo(e.stateNode.nextSibling):null;return!0}function Cs(){Jt=Fn=null,Ct=!1}function Cm(){var e=za;return e!==null&&(Jn===null?Jn=e:Jn.push.apply(Jn,e),za=null),e}function Ss(e){za===null?za=[e]:za.push(e)}var gd=U(null),La=null,br=null;function Qr(e,n,r){Y(gd,n._currentValue),n._currentValue=r}function vr(e){e._currentValue=gd.current,L(gd)}function yd(e,n,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===r)break;e=e.return}}function xd(e,n,r,s){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var y=d.dependencies;if(y!==null){var T=d.child;y=y.firstContext;e:for(;y!==null;){var B=y;y=d;for(var G=0;G<n.length;G++)if(B.context===n[G]){y.lanes|=r,B=y.alternate,B!==null&&(B.lanes|=r),yd(y.return,r,e),s||(T=null);break e}y=B.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=r,y=T.alternate,y!==null&&(y.lanes|=r),yd(T,r,e),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===e){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Es(e,n,r,s){e=null;for(var d=n,y=!1;d!==null;){if(!y){if((d.flags&524288)!==0)y=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var B=d.type;ro(d.pendingProps.value,T.value)||(e!==null?e.push(B):e=[B])}}else if(d===le.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(el):e=[el])}d=d.return}e!==null&&xd(n,e,r,s),n.flags|=262144}function tc(e){for(e=e.firstContext;e!==null;){if(!ro(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ha(e){La=e,br=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Hn(e){return Sm(La,e)}function nc(e,n){return La===null&&Ha(e),Sm(e,n)}function Sm(e,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},br===null){if(e===null)throw Error(i(308));br=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else br=br.next=n;return r}var rw=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(r,s){e.push(s)}};this.abort=function(){n.aborted=!0,e.forEach(function(r){return r()})}},aw=t.unstable_scheduleCallback,iw=t.unstable_NormalPriority,pn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new rw,data:new Map,refCount:0}}function Ms(e){e.refCount--,e.refCount===0&&aw(iw,function(){e.controller.abort()})}var Rs=null,vd=0,hi=0,pi=null;function sw(e,n){if(Rs===null){var r=Rs=[];vd=0,hi=Cf(),pi={status:"pending",value:void 0,then:function(s){r.push(s)}}}return vd++,n.then(Em,Em),n}function Em(){if(--vd===0&&Rs!==null){pi!==null&&(pi.status="fulfilled");var e=Rs;Rs=null,hi=0,pi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function lw(e,n){var r=[],s={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return e.then(function(){s.status="fulfilled",s.value=n;for(var d=0;d<r.length;d++)(0,r[d])(n)},function(d){for(s.status="rejected",s.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),s}var Mm=_.S;_.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&sw(e,n),Mm!==null&&Mm(e,n)};var Ya=U(null);function Ad(){var e=Ya.current;return e!==null?e:Ut.pooledCache}function oc(e,n){n===null?Y(Ya,Ya.current):Y(Ya,n.pool)}function Rm(){var e=Ad();return e===null?null:{parent:pn._currentValue,pool:e}}var ks=Error(i(460)),km=Error(i(474)),rc=Error(i(542)),wd={then:function(){}};function Tm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ac(){}function Im(e,n,r){switch(r=e[r],r===void 0?e.push(n):r!==n&&(n.then(ac,ac),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_m(e),e;default:if(typeof n.status=="string")n.then(ac,ac);else{if(e=Ut,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=n,e.status="pending",e.then(function(s){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=s}},function(s){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_m(e),e}throw Ts=n,ks}}var Ts=null;function Om(){if(Ts===null)throw Error(i(459));var e=Ts;return Ts=null,e}function _m(e){if(e===ks||e===rc)throw Error(i(483))}var Fr=!1;function Cd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sd(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Gr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(e,n,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(It&2)!==0){var d=s.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),s.pending=n,n=Zl(e),xm(e,null,r),n}return Vl(e,s,n,r),Zl(e)}function Is(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,bo(e,r)}}function Ed(e,n){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var T={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?d=y=T:y=y.next=T,r=r.next}while(r!==null);y===null?d=y=n:y=y.next=n}else d=y=n;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:y,shared:s.shared,callbacks:s.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}var Md=!1;function Os(){if(Md){var e=pi;if(e!==null)throw e}}function _s(e,n,r,s){Md=!1;var d=e.updateQueue;Fr=!1;var y=d.firstBaseUpdate,T=d.lastBaseUpdate,B=d.shared.pending;if(B!==null){d.shared.pending=null;var G=B,re=G.next;G.next=null,T===null?y=re:T.next=re,T=G;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,B=ce.lastBaseUpdate,B!==T&&(B===null?ce.firstBaseUpdate=re:B.next=re,ce.lastBaseUpdate=G))}if(y!==null){var he=d.baseState;T=0,ce=re=G=null,B=y;do{var ae=B.lane&-536870913,ie=ae!==B.lane;if(ie?(yt&ae)===ae:(s&ae)===ae){ae!==0&&ae===hi&&(Md=!0),ce!==null&&(ce=ce.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ne=e,_e=B;ae=n;var Pt=r;switch(_e.tag){case 1:if(Ne=_e.payload,typeof Ne=="function"){he=Ne.call(Pt,he,ae);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=_e.payload,ae=typeof Ne=="function"?Ne.call(Pt,he,ae):Ne,ae==null)break e;he=g({},he,ae);break e;case 2:Fr=!0}}ae=B.callback,ae!==null&&(e.flags|=64,ie&&(e.flags|=8192),ie=d.callbacks,ie===null?d.callbacks=[ae]:ie.push(ae))}else ie={lane:ae,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ce===null?(re=ce=ie,G=he):ce=ce.next=ie,T|=ae;if(B=B.next,B===null){if(B=d.shared.pending,B===null)break;ie=B,B=ie.next,ie.next=null,d.lastBaseUpdate=ie,d.shared.pending=null}}while(!0);ce===null&&(G=he),d.baseState=G,d.firstBaseUpdate=re,d.lastBaseUpdate=ce,y===null&&(d.shared.lanes=0),na|=T,e.lanes=T,e.memoizedState=he}}function Dm(e,n){if(typeof e!="function")throw Error(i(191,e));e.call(n)}function jm(e,n){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Dm(r[e],n)}var mi=U(null),ic=U(0);function Bm(e,n){e=Rr,Y(ic,e),Y(mi,n),Rr=e|n.baseLanes}function Rd(){Y(ic,Rr),Y(mi,mi.current)}function kd(){Rr=ic.current,L(mi),L(ic)}var qr=0,tt=null,jt=null,un=null,sc=!1,gi=!1,$a=!1,lc=0,Ds=0,yi=null,cw=0;function sn(){throw Error(i(321))}function Td(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!ro(e[r],n[r]))return!1;return!0}function Id(e,n,r,s,d,y){return qr=y,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,_.H=e===null||e.memoizedState===null?xg:bg,$a=!1,y=r(s,d),$a=!1,gi&&(y=zm(n,r,s,d)),Pm(e),y}function Pm(e){_.H=pc;var n=jt!==null&&jt.next!==null;if(qr=0,un=jt=tt=null,sc=!1,Ds=0,yi=null,n)throw Error(i(300));e===null||vn||(e=e.dependencies,e!==null&&tc(e)&&(vn=!0))}function zm(e,n,r,s){tt=e;var d=0;do{if(gi&&(yi=null),Ds=0,gi=!1,25<=d)throw Error(i(301));if(d+=1,un=jt=null,e.updateQueue!=null){var y=e.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}_.H=gw,y=n(r,s)}while(gi);return y}function uw(){var e=_.H,n=e.useState()[0];return n=typeof n.then=="function"?js(n):n,e=e.useState()[0],(jt!==null?jt.memoizedState:null)!==e&&(tt.flags|=1024),n}function Od(){var e=lc!==0;return lc=0,e}function _d(e,n,r){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~r}function Dd(e){if(sc){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}sc=!1}qr=0,un=jt=tt=null,gi=!1,Ds=lc=0,yi=null}function Zn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return un===null?tt.memoizedState=un=e:un=un.next=e,un}function dn(){if(jt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=jt.next;var n=un===null?tt.memoizedState:un.next;if(n!==null)un=n,jt=e;else{if(e===null)throw tt.alternate===null?Error(i(467)):Error(i(310));jt=e,e={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},un===null?tt.memoizedState=un=e:un=un.next=e}return un}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function js(e){var n=Ds;return Ds+=1,yi===null&&(yi=[]),e=Im(yi,e,n),n=tt,(un===null?n.memoizedState:un.next)===null&&(n=n.alternate,_.H=n===null||n.memoizedState===null?xg:bg),e}function cc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return js(e);if(e.$$typeof===E)return Hn(e)}throw Error(i(438,String(e)))}function Bd(e){var n=null,r=tt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var s=tt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=jd(),tt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(e),s=0;s<e;s++)r[s]=F;return n.index++,r}function Ar(e,n){return typeof n=="function"?n(e):n}function uc(e){var n=dn();return Pd(n,jt,e)}function Pd(e,n,r){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=r;var d=e.baseQueue,y=s.pending;if(y!==null){if(d!==null){var T=d.next;d.next=y.next,y.next=T}n.baseQueue=d=y,s.pending=null}if(y=e.baseState,d===null)e.memoizedState=y;else{n=d.next;var B=T=null,G=null,re=n,ce=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(yt&he)===he:(qr&he)===he){var ae=re.revertLane;if(ae===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===hi&&(ce=!0);else if((qr&ae)===ae){re=re.next,ae===hi&&(ce=!0);continue}else he={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(B=G=he,T=y):G=G.next=he,tt.lanes|=ae,na|=ae;he=re.action,$a&&r(y,he),y=re.hasEagerState?re.eagerState:r(y,he)}else ae={lane:he,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},G===null?(B=G=ae,T=y):G=G.next=ae,tt.lanes|=he,na|=he;re=re.next}while(re!==null&&re!==n);if(G===null?T=y:G.next=B,!ro(y,e.memoizedState)&&(vn=!0,ce&&(r=pi,r!==null)))throw r;e.memoizedState=y,e.baseState=T,e.baseQueue=G,s.lastRenderedState=y}return d===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function zd(e){var n=dn(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,y=n.memoizedState;if(d!==null){r.pending=null;var T=d=d.next;do y=e(y,T.action),T=T.next;while(T!==d);ro(y,n.memoizedState)||(vn=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),r.lastRenderedState=y}return[y,s]}function Nm(e,n,r){var s=tt,d=dn(),y=Ct;if(y){if(r===void 0)throw Error(i(407));r=r()}else r=n();var T=!ro((jt||d).memoizedState,r);T&&(d.memoizedState=r,vn=!0),d=d.queue;var B=Ym.bind(null,s,d,e);if(Bs(2048,8,B,[e]),d.getSnapshot!==n||T||un!==null&&un.memoizedState.tag&1){if(s.flags|=2048,xi(9,dc(),Hm.bind(null,s,d,r,n),null),Ut===null)throw Error(i(349));y||(qr&124)!==0||Lm(s,n,r)}return r}function Lm(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=tt.updateQueue,n===null?(n=jd(),tt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function Hm(e,n,r,s){n.value=r,n.getSnapshot=s,$m(n)&&Um(e)}function Ym(e,n,r){return r(function(){$m(n)&&Um(e)})}function $m(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!ro(e,r)}catch{return!0}}function Um(e){var n=ci(e,2);n!==null&&uo(n,e,2)}function Nd(e){var n=Zn();if(typeof e=="function"){var r=e;if(e=r(),$a){ht(!0);try{r()}finally{ht(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:e},n}function Xm(e,n,r,s){return e.baseState=r,Pd(e,jt,typeof s=="function"?s:Ar)}function dw(e,n,r,s,d){if(hc(e))throw Error(i(485));if(e=n.action,e!==null){var y={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};_.T!==null?r(!0):y.isTransition=!1,s(y),r=n.pending,r===null?(y.next=n.pending=y,Qm(n,y)):(y.next=r.next,n.pending=r.next=y)}}function Qm(e,n){var r=n.action,s=n.payload,d=e.state;if(n.isTransition){var y=_.T,T={};_.T=T;try{var B=r(d,s),G=_.S;G!==null&&G(T,B),Fm(e,n,B)}catch(re){Ld(e,n,re)}finally{_.T=y}}else try{y=r(d,s),Fm(e,n,y)}catch(re){Ld(e,n,re)}}function Fm(e,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(s){Gm(e,n,s)},function(s){return Ld(e,n,s)}):Gm(e,n,r)}function Gm(e,n,r){n.status="fulfilled",n.value=r,Wm(n),e.state=r,n=e.pending,n!==null&&(r=n.next,r===n?e.pending=null:(r=r.next,n.next=r,Qm(e,r)))}function Ld(e,n,r){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=r,Wm(n),n=n.next;while(n!==s)}e.action=null}function Wm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function qm(e,n){return n}function Vm(e,n){if(Ct){var r=Ut.formState;if(r!==null){e:{var s=tt;if(Ct){if(Jt){t:{for(var d=Jt,y=Ko;d.nodeType!==8;){if(!y){d=null;break t}if(d=Fo(d.nextSibling),d===null){d=null;break t}}y=d.data,d=y==="F!"||y==="F"?d:null}if(d){Jt=Fo(d.nextSibling),s=d.data==="F!";break e}}Na(s)}s=!1}s&&(n=r[0])}}return r=Zn(),r.memoizedState=r.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qm,lastRenderedState:n},r.queue=s,r=mg.bind(null,tt,s),s.dispatch=r,s=Nd(!1),y=Xd.bind(null,tt,!1,s.queue),s=Zn(),d={state:n,dispatch:null,action:e,pending:null},s.queue=d,r=dw.bind(null,tt,d,y,r),d.dispatch=r,s.memoizedState=e,[n,r,!1]}function Zm(e){var n=dn();return Km(n,jt,e)}function Km(e,n,r){if(n=Pd(e,n,qm)[0],e=uc(Ar)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=js(n)}catch(T){throw T===ks?rc:T}else s=n;n=dn();var d=n.queue,y=d.dispatch;return r!==n.memoizedState&&(tt.flags|=2048,xi(9,dc(),fw.bind(null,d,r),null)),[s,y,e]}function fw(e,n){e.action=n}function Jm(e){var n=dn(),r=jt;if(r!==null)return Km(n,r,e);dn(),n=n.memoizedState,r=dn();var s=r.queue.dispatch;return r.memoizedState=e,[n,s,!1]}function xi(e,n,r,s){return e={tag:e,create:r,deps:s,inst:n,next:null},n=tt.updateQueue,n===null&&(n=jd(),tt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,n.lastEffect=e),e}function dc(){return{destroy:void 0,resource:void 0}}function eg(){return dn().memoizedState}function fc(e,n,r,s){var d=Zn();s=s===void 0?null:s,tt.flags|=e,d.memoizedState=xi(1|n,dc(),r,s)}function Bs(e,n,r,s){var d=dn();s=s===void 0?null:s;var y=d.memoizedState.inst;jt!==null&&s!==null&&Td(s,jt.memoizedState.deps)?d.memoizedState=xi(n,y,r,s):(tt.flags|=e,d.memoizedState=xi(1|n,y,r,s))}function tg(e,n){fc(8390656,8,e,n)}function ng(e,n){Bs(2048,8,e,n)}function og(e,n){return Bs(4,2,e,n)}function rg(e,n){return Bs(4,4,e,n)}function ag(e,n){if(typeof n=="function"){e=e();var r=n(e);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ig(e,n,r){r=r!=null?r.concat([e]):null,Bs(4,4,ag.bind(null,n,e),r)}function Hd(){}function sg(e,n){var r=dn();n=n===void 0?null:n;var s=r.memoizedState;return n!==null&&Td(n,s[1])?s[0]:(r.memoizedState=[e,n],e)}function lg(e,n){var r=dn();n=n===void 0?null:n;var s=r.memoizedState;if(n!==null&&Td(n,s[1]))return s[0];if(s=e(),$a){ht(!0);try{e()}finally{ht(!1)}}return r.memoizedState=[s,n],s}function Yd(e,n,r){return r===void 0||(qr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=r,e=d0(),tt.lanes|=e,na|=e,r)}function cg(e,n,r,s){return ro(r,n)?r:mi.current!==null?(e=Yd(e,r,s),ro(e,n)||(vn=!0),e):(qr&42)===0?(vn=!0,e.memoizedState=r):(e=d0(),tt.lanes|=e,na|=e,n)}function ug(e,n,r,s,d){var y=H.p;H.p=y!==0&&8>y?y:8;var T=_.T,B={};_.T=B,Xd(e,!1,n,r);try{var G=d(),re=_.S;if(re!==null&&re(B,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ce=lw(G,s);Ps(e,n,ce,co(e))}else Ps(e,n,s,co(e))}catch(he){Ps(e,n,{then:function(){},status:"rejected",reason:he},co())}finally{H.p=y,_.T=T}}function hw(){}function $d(e,n,r,s){if(e.tag!==5)throw Error(i(476));var d=dg(e).queue;ug(e,d,n,N,r===null?hw:function(){return fg(e),r(s)})}function dg(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:N},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ar,lastRenderedState:r},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function fg(e){var n=dg(e).next.queue;Ps(e,n,{},co())}function Ud(){return Hn(el)}function hg(){return dn().memoizedState}function pg(){return dn().memoizedState}function pw(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var r=co();e=Gr(r);var s=Wr(n,e,r);s!==null&&(uo(s,n,r),Is(s,n,r)),n={cache:bd()},e.payload=n;return}n=n.return}}function mw(e,n,r){var s=co();r={lane:s,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},hc(e)?gg(n,r):(r=cd(e,n,r,s),r!==null&&(uo(r,e,s),yg(r,n,s)))}function mg(e,n,r){var s=co();Ps(e,n,r,s)}function Ps(e,n,r,s){var d={lane:s,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(hc(e))gg(n,d);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var T=n.lastRenderedState,B=y(T,r);if(d.hasEagerState=!0,d.eagerState=B,ro(B,T))return Vl(e,n,d,0),Ut===null&&ql(),!1}catch{}finally{}if(r=cd(e,n,d,s),r!==null)return uo(r,e,s),yg(r,n,s),!0}return!1}function Xd(e,n,r,s){if(s={lane:2,revertLane:Cf(),action:s,hasEagerState:!1,eagerState:null,next:null},hc(e)){if(n)throw Error(i(479))}else n=cd(e,r,s,2),n!==null&&uo(n,e,2)}function hc(e){var n=e.alternate;return e===tt||n!==null&&n===tt}function gg(e,n){gi=sc=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function yg(e,n,r){if((r&4194048)!==0){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,bo(e,r)}}var pc={readContext:Hn,use:cc,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn},xg={readContext:Hn,use:cc,useCallback:function(e,n){return Zn().memoizedState=[e,n===void 0?null:n],e},useContext:Hn,useEffect:tg,useImperativeHandle:function(e,n,r){r=r!=null?r.concat([e]):null,fc(4194308,4,ag.bind(null,n,e),r)},useLayoutEffect:function(e,n){return fc(4194308,4,e,n)},useInsertionEffect:function(e,n){fc(4,2,e,n)},useMemo:function(e,n){var r=Zn();n=n===void 0?null:n;var s=e();if($a){ht(!0);try{e()}finally{ht(!1)}}return r.memoizedState=[s,n],s},useReducer:function(e,n,r){var s=Zn();if(r!==void 0){var d=r(n);if($a){ht(!0);try{r(n)}finally{ht(!1)}}}else d=n;return s.memoizedState=s.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},s.queue=e,e=e.dispatch=mw.bind(null,tt,e),[s.memoizedState,e]},useRef:function(e){var n=Zn();return e={current:e},n.memoizedState=e},useState:function(e){e=Nd(e);var n=e.queue,r=mg.bind(null,tt,n);return n.dispatch=r,[e.memoizedState,r]},useDebugValue:Hd,useDeferredValue:function(e,n){var r=Zn();return Yd(r,e,n)},useTransition:function(){var e=Nd(!1);return e=ug.bind(null,tt,e.queue,!0,!1),Zn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,r){var s=tt,d=Zn();if(Ct){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Ut===null)throw Error(i(349));(yt&124)!==0||Lm(s,n,r)}d.memoizedState=r;var y={value:r,getSnapshot:n};return d.queue=y,tg(Ym.bind(null,s,y,e),[e]),s.flags|=2048,xi(9,dc(),Hm.bind(null,s,y,r,n),null),r},useId:function(){var e=Zn(),n=Ut.identifierPrefix;if(Ct){var r=xr,s=yr;r=(s&~(1<<32-pe(s)-1)).toString(32)+r,n=""+n+"R"+r,r=lc++,0<r&&(n+="H"+r.toString(32)),n+=""}else r=cw++,n=""+n+"r"+r.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:Ud,useFormState:Vm,useActionState:Vm,useOptimistic:function(e){var n=Zn();n.memoizedState=n.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Xd.bind(null,tt,!0,r),r.dispatch=n,[e,n]},useMemoCache:Bd,useCacheRefresh:function(){return Zn().memoizedState=pw.bind(null,tt)}},bg={readContext:Hn,use:cc,useCallback:sg,useContext:Hn,useEffect:ng,useImperativeHandle:ig,useInsertionEffect:og,useLayoutEffect:rg,useMemo:lg,useReducer:uc,useRef:eg,useState:function(){return uc(Ar)},useDebugValue:Hd,useDeferredValue:function(e,n){var r=dn();return cg(r,jt.memoizedState,e,n)},useTransition:function(){var e=uc(Ar)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:js(e),n]},useSyncExternalStore:Nm,useId:hg,useHostTransitionStatus:Ud,useFormState:Zm,useActionState:Zm,useOptimistic:function(e,n){var r=dn();return Xm(r,jt,e,n)},useMemoCache:Bd,useCacheRefresh:pg},gw={readContext:Hn,use:cc,useCallback:sg,useContext:Hn,useEffect:ng,useImperativeHandle:ig,useInsertionEffect:og,useLayoutEffect:rg,useMemo:lg,useReducer:zd,useRef:eg,useState:function(){return zd(Ar)},useDebugValue:Hd,useDeferredValue:function(e,n){var r=dn();return jt===null?Yd(r,e,n):cg(r,jt.memoizedState,e,n)},useTransition:function(){var e=zd(Ar)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:js(e),n]},useSyncExternalStore:Nm,useId:hg,useHostTransitionStatus:Ud,useFormState:Jm,useActionState:Jm,useOptimistic:function(e,n){var r=dn();return jt!==null?Xm(r,jt,e,n):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Bd,useCacheRefresh:pg},bi=null,zs=0;function mc(e){var n=zs;return zs+=1,bi===null&&(bi=[]),Im(bi,e,n)}function Ns(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function gc(e,n){throw n.$$typeof===m?Error(i(525)):(e=Object.prototype.toString.call(n),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function vg(e){var n=e._init;return n(e._payload)}function Ag(e){function n(ee,W){if(e){var ne=ee.deletions;ne===null?(ee.deletions=[W],ee.flags|=16):ne.push(W)}}function r(ee,W){if(!e)return null;for(;W!==null;)n(ee,W),W=W.sibling;return null}function s(ee){for(var W=new Map;ee!==null;)ee.key!==null?W.set(ee.key,ee):W.set(ee.index,ee),ee=ee.sibling;return W}function d(ee,W){return ee=gr(ee,W),ee.index=0,ee.sibling=null,ee}function y(ee,W,ne){return ee.index=ne,e?(ne=ee.alternate,ne!==null?(ne=ne.index,ne<W?(ee.flags|=67108866,W):ne):(ee.flags|=67108866,W)):(ee.flags|=1048576,W)}function T(ee){return e&&ee.alternate===null&&(ee.flags|=67108866),ee}function B(ee,W,ne,ue){return W===null||W.tag!==6?(W=dd(ne,ee.mode,ue),W.return=ee,W):(W=d(W,ne),W.return=ee,W)}function G(ee,W,ne,ue){var ve=ne.type;return ve===C?ce(ee,W,ne.props.children,ue,ne.key):W!==null&&(W.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===j&&vg(ve)===W.type)?(W=d(W,ne.props),Ns(W,ne),W.return=ee,W):(W=Kl(ne.type,ne.key,ne.props,null,ee.mode,ue),Ns(W,ne),W.return=ee,W)}function re(ee,W,ne,ue){return W===null||W.tag!==4||W.stateNode.containerInfo!==ne.containerInfo||W.stateNode.implementation!==ne.implementation?(W=fd(ne,ee.mode,ue),W.return=ee,W):(W=d(W,ne.children||[]),W.return=ee,W)}function ce(ee,W,ne,ue,ve){return W===null||W.tag!==7?(W=ja(ne,ee.mode,ue,ve),W.return=ee,W):(W=d(W,ne),W.return=ee,W)}function he(ee,W,ne){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=dd(""+W,ee.mode,ne),W.return=ee,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return ne=Kl(W.type,W.key,W.props,null,ee.mode,ne),Ns(ne,W),ne.return=ee,ne;case w:return W=fd(W,ee.mode,ne),W.return=ee,W;case j:var ue=W._init;return W=ue(W._payload),he(ee,W,ne)}if(Q(W)||Z(W))return W=ja(W,ee.mode,ne,null),W.return=ee,W;if(typeof W.then=="function")return he(ee,mc(W),ne);if(W.$$typeof===E)return he(ee,nc(ee,W),ne);gc(ee,W)}return null}function ae(ee,W,ne,ue){var ve=W!==null?W.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ve!==null?null:B(ee,W,""+ne,ue);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return ne.key===ve?G(ee,W,ne,ue):null;case w:return ne.key===ve?re(ee,W,ne,ue):null;case j:return ve=ne._init,ne=ve(ne._payload),ae(ee,W,ne,ue)}if(Q(ne)||Z(ne))return ve!==null?null:ce(ee,W,ne,ue,null);if(typeof ne.then=="function")return ae(ee,W,mc(ne),ue);if(ne.$$typeof===E)return ae(ee,W,nc(ee,ne),ue);gc(ee,ne)}return null}function ie(ee,W,ne,ue,ve){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ee=ee.get(ne)||null,B(W,ee,""+ue,ve);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return ee=ee.get(ue.key===null?ne:ue.key)||null,G(W,ee,ue,ve);case w:return ee=ee.get(ue.key===null?ne:ue.key)||null,re(W,ee,ue,ve);case j:var lt=ue._init;return ue=lt(ue._payload),ie(ee,W,ne,ue,ve)}if(Q(ue)||Z(ue))return ee=ee.get(ne)||null,ce(W,ee,ue,ve,null);if(typeof ue.then=="function")return ie(ee,W,ne,mc(ue),ve);if(ue.$$typeof===E)return ie(ee,W,ne,nc(W,ue),ve);gc(W,ue)}return null}function Ne(ee,W,ne,ue){for(var ve=null,lt=null,Me=W,Be=W=0,wn=null;Me!==null&&Be<ne.length;Be++){Me.index>Be?(wn=Me,Me=null):wn=Me.sibling;var vt=ae(ee,Me,ne[Be],ue);if(vt===null){Me===null&&(Me=wn);break}e&&Me&&vt.alternate===null&&n(ee,Me),W=y(vt,W,Be),lt===null?ve=vt:lt.sibling=vt,lt=vt,Me=wn}if(Be===ne.length)return r(ee,Me),Ct&&Pa(ee,Be),ve;if(Me===null){for(;Be<ne.length;Be++)Me=he(ee,ne[Be],ue),Me!==null&&(W=y(Me,W,Be),lt===null?ve=Me:lt.sibling=Me,lt=Me);return Ct&&Pa(ee,Be),ve}for(Me=s(Me);Be<ne.length;Be++)wn=ie(Me,ee,Be,ne[Be],ue),wn!==null&&(e&&wn.alternate!==null&&Me.delete(wn.key===null?Be:wn.key),W=y(wn,W,Be),lt===null?ve=wn:lt.sibling=wn,lt=wn);return e&&Me.forEach(function(da){return n(ee,da)}),Ct&&Pa(ee,Be),ve}function _e(ee,W,ne,ue){if(ne==null)throw Error(i(151));for(var ve=null,lt=null,Me=W,Be=W=0,wn=null,vt=ne.next();Me!==null&&!vt.done;Be++,vt=ne.next()){Me.index>Be?(wn=Me,Me=null):wn=Me.sibling;var da=ae(ee,Me,vt.value,ue);if(da===null){Me===null&&(Me=wn);break}e&&Me&&da.alternate===null&&n(ee,Me),W=y(da,W,Be),lt===null?ve=da:lt.sibling=da,lt=da,Me=wn}if(vt.done)return r(ee,Me),Ct&&Pa(ee,Be),ve;if(Me===null){for(;!vt.done;Be++,vt=ne.next())vt=he(ee,vt.value,ue),vt!==null&&(W=y(vt,W,Be),lt===null?ve=vt:lt.sibling=vt,lt=vt);return Ct&&Pa(ee,Be),ve}for(Me=s(Me);!vt.done;Be++,vt=ne.next())vt=ie(Me,ee,Be,vt.value,ue),vt!==null&&(e&&vt.alternate!==null&&Me.delete(vt.key===null?Be:vt.key),W=y(vt,W,Be),lt===null?ve=vt:lt.sibling=vt,lt=vt);return e&&Me.forEach(function(yC){return n(ee,yC)}),Ct&&Pa(ee,Be),ve}function Pt(ee,W,ne,ue){if(typeof ne=="object"&&ne!==null&&ne.type===C&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:e:{for(var ve=ne.key;W!==null;){if(W.key===ve){if(ve=ne.type,ve===C){if(W.tag===7){r(ee,W.sibling),ue=d(W,ne.props.children),ue.return=ee,ee=ue;break e}}else if(W.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===j&&vg(ve)===W.type){r(ee,W.sibling),ue=d(W,ne.props),Ns(ue,ne),ue.return=ee,ee=ue;break e}r(ee,W);break}else n(ee,W);W=W.sibling}ne.type===C?(ue=ja(ne.props.children,ee.mode,ue,ne.key),ue.return=ee,ee=ue):(ue=Kl(ne.type,ne.key,ne.props,null,ee.mode,ue),Ns(ue,ne),ue.return=ee,ee=ue)}return T(ee);case w:e:{for(ve=ne.key;W!==null;){if(W.key===ve)if(W.tag===4&&W.stateNode.containerInfo===ne.containerInfo&&W.stateNode.implementation===ne.implementation){r(ee,W.sibling),ue=d(W,ne.children||[]),ue.return=ee,ee=ue;break e}else{r(ee,W);break}else n(ee,W);W=W.sibling}ue=fd(ne,ee.mode,ue),ue.return=ee,ee=ue}return T(ee);case j:return ve=ne._init,ne=ve(ne._payload),Pt(ee,W,ne,ue)}if(Q(ne))return Ne(ee,W,ne,ue);if(Z(ne)){if(ve=Z(ne),typeof ve!="function")throw Error(i(150));return ne=ve.call(ne),_e(ee,W,ne,ue)}if(typeof ne.then=="function")return Pt(ee,W,mc(ne),ue);if(ne.$$typeof===E)return Pt(ee,W,nc(ee,ne),ue);gc(ee,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,W!==null&&W.tag===6?(r(ee,W.sibling),ue=d(W,ne),ue.return=ee,ee=ue):(r(ee,W),ue=dd(ne,ee.mode,ue),ue.return=ee,ee=ue),T(ee)):r(ee,W)}return function(ee,W,ne,ue){try{zs=0;var ve=Pt(ee,W,ne,ue);return bi=null,ve}catch(Me){if(Me===ks||Me===rc)throw Me;var lt=ao(29,Me,null,ee.mode);return lt.lanes=ue,lt.return=ee,lt}finally{}}}var vi=Ag(!0),wg=Ag(!1),Mo=U(null),Jo=null;function Vr(e){var n=e.alternate;Y(mn,mn.current&1),Y(Mo,e),Jo===null&&(n===null||mi.current!==null||n.memoizedState!==null)&&(Jo=e)}function Cg(e){if(e.tag===22){if(Y(mn,mn.current),Y(Mo,e),Jo===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(Jo=e)}}else Zr()}function Zr(){Y(mn,mn.current),Y(Mo,Mo.current)}function wr(e){L(Mo),Jo===e&&(Jo=null),L(mn)}var mn=U(0);function yc(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Bf(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Qd(e,n,r,s){n=e.memoizedState,r=r(s,n),r=r==null?n:g({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Fd={enqueueSetState:function(e,n,r){e=e._reactInternals;var s=co(),d=Gr(s);d.payload=n,r!=null&&(d.callback=r),n=Wr(e,d,s),n!==null&&(uo(n,e,s),Is(n,e,s))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var s=co(),d=Gr(s);d.tag=1,d.payload=n,r!=null&&(d.callback=r),n=Wr(e,d,s),n!==null&&(uo(n,e,s),Is(n,e,s))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=co(),s=Gr(r);s.tag=2,n!=null&&(s.callback=n),n=Wr(e,s,r),n!==null&&(uo(n,e,r),Is(n,e,r))}};function Sg(e,n,r,s,d,y,T){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,y,T):n.prototype&&n.prototype.isPureReactComponent?!vs(r,s)||!vs(d,y):!0}function Eg(e,n,r,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==e&&Fd.enqueueReplaceState(n,n.state,null)}function Ua(e,n){var r=n;if("ref"in n){r={};for(var s in n)s!=="ref"&&(r[s]=n[s])}if(e=e.defaultProps){r===n&&(r=g({},r));for(var d in e)r[d]===void 0&&(r[d]=e[d])}return r}var xc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Mg(e){xc(e)}function Rg(e){console.error(e)}function kg(e){xc(e)}function bc(e,n){try{var r=e.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function Tg(e,n,r){try{var s=e.onCaughtError;s(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Gd(e,n,r){return r=Gr(r),r.tag=3,r.payload={element:null},r.callback=function(){bc(e,n)},r}function Ig(e){return e=Gr(e),e.tag=3,e}function Og(e,n,r,s){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var y=s.value;e.payload=function(){return d(y)},e.callback=function(){Tg(n,r,s)}}var T=r.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(e.callback=function(){Tg(n,r,s),typeof d!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var B=s.stack;this.componentDidCatch(s.value,{componentStack:B!==null?B:""})})}function yw(e,n,r,s,d){if(r.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=r.alternate,n!==null&&Es(n,r,d,!0),r=Mo.current,r!==null){switch(r.tag){case 13:return Jo===null?xf():r.alternate===null&&en===0&&(en=3),r.flags&=-257,r.flags|=65536,r.lanes=d,s===wd?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([s]):n.add(s),vf(e,s,d)),!1;case 22:return r.flags|=65536,s===wd?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([s]):r.add(s)),vf(e,s,d)),!1}throw Error(i(435,r.tag))}return vf(e,s,d),xf(),!1}if(Ct)return n=Mo.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,s!==md&&(e=Error(i(422),{cause:s}),Ss(wo(e,r)))):(s!==md&&(n=Error(i(423),{cause:s}),Ss(wo(n,r))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,s=wo(s,r),d=Gd(e.stateNode,s,d),Ed(e,d),en!==4&&(en=2)),!1;var y=Error(i(520),{cause:s});if(y=wo(y,r),Qs===null?Qs=[y]:Qs.push(y),en!==4&&(en=2),n===null)return!0;s=wo(s,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,e=d&-d,r.lanes|=e,e=Gd(r.stateNode,s,e),Ed(r,e),!1;case 1:if(n=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(oa===null||!oa.has(y))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Ig(d),Og(d,e,r,s),Ed(r,d),!1}r=r.return}while(r!==null);return!1}var _g=Error(i(461)),vn=!1;function Tn(e,n,r,s){n.child=e===null?wg(n,null,r,s):vi(n,e.child,r,s)}function Dg(e,n,r,s,d){r=r.render;var y=n.ref;if("ref"in s){var T={};for(var B in s)B!=="ref"&&(T[B]=s[B])}else T=s;return Ha(n),s=Id(e,n,r,T,y,d),B=Od(),e!==null&&!vn?(_d(e,n,d),Cr(e,n,d)):(Ct&&B&&hd(n),n.flags|=1,Tn(e,n,s,d),n.child)}function jg(e,n,r,s,d){if(e===null){var y=r.type;return typeof y=="function"&&!ud(y)&&y.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=y,Bg(e,n,y,s,d)):(e=Kl(r.type,null,s,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(y=e.child,!tf(e,d)){var T=y.memoizedProps;if(r=r.compare,r=r!==null?r:vs,r(T,s)&&e.ref===n.ref)return Cr(e,n,d)}return n.flags|=1,e=gr(y,s),e.ref=n.ref,e.return=n,n.child=e}function Bg(e,n,r,s,d){if(e!==null){var y=e.memoizedProps;if(vs(y,s)&&e.ref===n.ref)if(vn=!1,n.pendingProps=s=y,tf(e,d))(e.flags&131072)!==0&&(vn=!0);else return n.lanes=e.lanes,Cr(e,n,d)}return Wd(e,n,r,s,d)}function Pg(e,n,r){var s=n.pendingProps,d=s.children,y=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((n.flags&128)!==0){if(s=y!==null?y.baseLanes|r:r,e!==null){for(d=n.child=e.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;n.childLanes=y&~s}else n.childLanes=0,n.child=null;return zg(e,n,s,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&oc(n,y!==null?y.cachePool:null),y!==null?Bm(n,y):Rd(),Cg(n);else return n.lanes=n.childLanes=536870912,zg(e,n,y!==null?y.baseLanes|r:r,r)}else y!==null?(oc(n,y.cachePool),Bm(n,y),Zr(),n.memoizedState=null):(e!==null&&oc(n,null),Rd(),Zr());return Tn(e,n,d,r),n.child}function zg(e,n,r,s){var d=Ad();return d=d===null?null:{parent:pn._currentValue,pool:d},n.memoizedState={baseLanes:r,cachePool:d},e!==null&&oc(n,null),Rd(),Cg(n),e!==null&&Es(e,n,s,!0),null}function vc(e,n){var r=n.ref;if(r===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(n.flags|=4194816)}}function Wd(e,n,r,s,d){return Ha(n),r=Id(e,n,r,s,void 0,d),s=Od(),e!==null&&!vn?(_d(e,n,d),Cr(e,n,d)):(Ct&&s&&hd(n),n.flags|=1,Tn(e,n,r,d),n.child)}function Ng(e,n,r,s,d,y){return Ha(n),n.updateQueue=null,r=zm(n,s,r,d),Pm(e),s=Od(),e!==null&&!vn?(_d(e,n,y),Cr(e,n,y)):(Ct&&s&&hd(n),n.flags|=1,Tn(e,n,r,y),n.child)}function Lg(e,n,r,s,d){if(Ha(n),n.stateNode===null){var y=ui,T=r.contextType;typeof T=="object"&&T!==null&&(y=Hn(T)),y=new r(s,y),n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Fd,n.stateNode=y,y._reactInternals=n,y=n.stateNode,y.props=s,y.state=n.memoizedState,y.refs={},Cd(n),T=r.contextType,y.context=typeof T=="object"&&T!==null?Hn(T):ui,y.state=n.memoizedState,T=r.getDerivedStateFromProps,typeof T=="function"&&(Qd(n,r,T,s),y.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Fd.enqueueReplaceState(y,y.state,null),_s(n,s,y,d),Os(),y.state=n.memoizedState),typeof y.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(e===null){y=n.stateNode;var B=n.memoizedProps,G=Ua(r,B);y.props=G;var re=y.context,ce=r.contextType;T=ui,typeof ce=="object"&&ce!==null&&(T=Hn(ce));var he=r.getDerivedStateFromProps;ce=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function",B=n.pendingProps!==B,ce||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(B||re!==T)&&Eg(n,y,s,T),Fr=!1;var ae=n.memoizedState;y.state=ae,_s(n,s,y,d),Os(),re=n.memoizedState,B||ae!==re||Fr?(typeof he=="function"&&(Qd(n,r,he,s),re=n.memoizedState),(G=Fr||Sg(n,r,G,s,ae,re,T))?(ce||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=re),y.props=s,y.state=re,y.context=T,s=G):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{y=n.stateNode,Sd(e,n),T=n.memoizedProps,ce=Ua(r,T),y.props=ce,he=n.pendingProps,ae=y.context,re=r.contextType,G=ui,typeof re=="object"&&re!==null&&(G=Hn(re)),B=r.getDerivedStateFromProps,(re=typeof B=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==he||ae!==G)&&Eg(n,y,s,G),Fr=!1,ae=n.memoizedState,y.state=ae,_s(n,s,y,d),Os();var ie=n.memoizedState;T!==he||ae!==ie||Fr||e!==null&&e.dependencies!==null&&tc(e.dependencies)?(typeof B=="function"&&(Qd(n,r,B,s),ie=n.memoizedState),(ce=Fr||Sg(n,r,ce,s,ae,ie,G)||e!==null&&e.dependencies!==null&&tc(e.dependencies))?(re||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,ie,G),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,ie,G)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=ie),y.props=s,y.state=ie,y.context=G,s=ce):(typeof y.componentDidUpdate!="function"||T===e.memoizedProps&&ae===e.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===e.memoizedProps&&ae===e.memoizedState||(n.flags|=1024),s=!1)}return y=s,vc(e,n),s=(n.flags&128)!==0,y||s?(y=n.stateNode,r=s&&typeof r.getDerivedStateFromError!="function"?null:y.render(),n.flags|=1,e!==null&&s?(n.child=vi(n,e.child,null,d),n.child=vi(n,null,r,d)):Tn(e,n,r,d),n.memoizedState=y.state,e=n.child):e=Cr(e,n,d),e}function Hg(e,n,r,s){return Cs(),n.flags|=256,Tn(e,n,r,s),n.child}var qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(e){return{baseLanes:e,cachePool:Rm()}}function Zd(e,n,r){return e=e!==null?e.childLanes&~r:0,n&&(e|=Ro),e}function Yg(e,n,r){var s=n.pendingProps,d=!1,y=(n.flags&128)!==0,T;if((T=y)||(T=e!==null&&e.memoizedState===null?!1:(mn.current&2)!==0),T&&(d=!0,n.flags&=-129),T=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ct){if(d?Vr(n):Zr(),Ct){var B=Jt,G;if(G=B){e:{for(G=B,B=Ko;G.nodeType!==8;){if(!B){B=null;break e}if(G=Fo(G.nextSibling),G===null){B=null;break e}}B=G}B!==null?(n.memoizedState={dehydrated:B,treeContext:Ba!==null?{id:yr,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},G=ao(18,null,null,0),G.stateNode=B,G.return=n,n.child=G,Fn=n,Jt=null,G=!0):G=!1}G||Na(n)}if(B=n.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return Bf(B)?n.lanes=32:n.lanes=536870912,null;wr(n)}return B=s.children,s=s.fallback,d?(Zr(),d=n.mode,B=Ac({mode:"hidden",children:B},d),s=ja(s,d,r,null),B.return=n,s.return=n,B.sibling=s,n.child=B,d=n.child,d.memoizedState=Vd(r),d.childLanes=Zd(e,T,r),n.memoizedState=qd,s):(Vr(n),Kd(n,B))}if(G=e.memoizedState,G!==null&&(B=G.dehydrated,B!==null)){if(y)n.flags&256?(Vr(n),n.flags&=-257,n=Jd(e,n,r)):n.memoizedState!==null?(Zr(),n.child=e.child,n.flags|=128,n=null):(Zr(),d=s.fallback,B=n.mode,s=Ac({mode:"visible",children:s.children},B),d=ja(d,B,r,null),d.flags|=2,s.return=n,d.return=n,s.sibling=d,n.child=s,vi(n,e.child,null,r),s=n.child,s.memoizedState=Vd(r),s.childLanes=Zd(e,T,r),n.memoizedState=qd,n=d);else if(Vr(n),Bf(B)){if(T=B.nextSibling&&B.nextSibling.dataset,T)var re=T.dgst;T=re,s=Error(i(419)),s.stack="",s.digest=T,Ss({value:s,source:null,stack:null}),n=Jd(e,n,r)}else if(vn||Es(e,n,r,!1),T=(r&e.childLanes)!==0,vn||T){if(T=Ut,T!==null&&(s=r&-r,s=(s&42)!==0?1:Bn(s),s=(s&(T.suspendedLanes|r))!==0?0:s,s!==0&&s!==G.retryLane))throw G.retryLane=s,ci(e,s),uo(T,e,s),_g;B.data==="$?"||xf(),n=Jd(e,n,r)}else B.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=G.treeContext,Jt=Fo(B.nextSibling),Fn=n,Ct=!0,za=null,Ko=!1,e!==null&&(So[Eo++]=yr,So[Eo++]=xr,So[Eo++]=Ba,yr=e.id,xr=e.overflow,Ba=n),n=Kd(n,s.children),n.flags|=4096);return n}return d?(Zr(),d=s.fallback,B=n.mode,G=e.child,re=G.sibling,s=gr(G,{mode:"hidden",children:s.children}),s.subtreeFlags=G.subtreeFlags&65011712,re!==null?d=gr(re,d):(d=ja(d,B,r,null),d.flags|=2),d.return=n,s.return=n,s.sibling=d,n.child=s,s=d,d=n.child,B=e.child.memoizedState,B===null?B=Vd(r):(G=B.cachePool,G!==null?(re=pn._currentValue,G=G.parent!==re?{parent:re,pool:re}:G):G=Rm(),B={baseLanes:B.baseLanes|r,cachePool:G}),d.memoizedState=B,d.childLanes=Zd(e,T,r),n.memoizedState=qd,s):(Vr(n),r=e.child,e=r.sibling,r=gr(r,{mode:"visible",children:s.children}),r.return=n,r.sibling=null,e!==null&&(T=n.deletions,T===null?(n.deletions=[e],n.flags|=16):T.push(e)),n.child=r,n.memoizedState=null,r)}function Kd(e,n){return n=Ac({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Ac(e,n){return e=ao(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Jd(e,n,r){return vi(n,e.child,null,r),e=Kd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function $g(e,n,r){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),yd(e.return,n,r)}function ef(e,n,r,s,d){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=s,y.tail=r,y.tailMode=d)}function Ug(e,n,r){var s=n.pendingProps,d=s.revealOrder,y=s.tail;if(Tn(e,n,s.children,r),s=mn.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$g(e,r,n);else if(e.tag===19)$g(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(Y(mn,s),d){case"forwards":for(r=n.child,d=null;r!==null;)e=r.alternate,e!==null&&yc(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=n.child,n.child=null):(d=r.sibling,r.sibling=null),ef(n,!1,d,r,y);break;case"backwards":for(r=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&yc(e)===null){n.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}ef(n,!0,r,null,y);break;case"together":ef(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Cr(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),na|=n.lanes,(r&n.childLanes)===0)if(e!==null){if(Es(e,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(i(153));if(n.child!==null){for(e=n.child,r=gr(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=gr(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function tf(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&tc(e)))}function xw(e,n,r){switch(n.tag){case 3:fe(n,n.stateNode.containerInfo),Qr(n,pn,e.memoizedState.cache),Cs();break;case 27:case 5:Se(n);break;case 4:fe(n,n.stateNode.containerInfo);break;case 10:Qr(n,n.type,n.memoizedProps.value);break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(Vr(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Yg(e,n,r):(Vr(n),e=Cr(e,n,r),e!==null?e.sibling:null);Vr(n);break;case 19:var d=(e.flags&128)!==0;if(s=(r&n.childLanes)!==0,s||(Es(e,n,r,!1),s=(r&n.childLanes)!==0),d){if(s)return Ug(e,n,r);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Y(mn,mn.current),s)break;return null;case 22:case 23:return n.lanes=0,Pg(e,n,r);case 24:Qr(n,pn,e.memoizedState.cache)}return Cr(e,n,r)}function Xg(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps)vn=!0;else{if(!tf(e,r)&&(n.flags&128)===0)return vn=!1,xw(e,n,r);vn=(e.flags&131072)!==0}else vn=!1,Ct&&(n.flags&1048576)!==0&&vm(n,ec,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var s=n.elementType,d=s._init;if(s=d(s._payload),n.type=s,typeof s=="function")ud(s)?(e=Ua(s,e),n.tag=1,n=Lg(null,n,s,e,r)):(n.tag=0,n=Wd(null,n,s,e,r));else{if(s!=null){if(d=s.$$typeof,d===k){n.tag=11,n=Dg(null,n,s,e,r);break e}else if(d===D){n.tag=14,n=jg(null,n,s,e,r);break e}}throw n=te(s)||s,Error(i(306,n,""))}}return n;case 0:return Wd(e,n,n.type,n.pendingProps,r);case 1:return s=n.type,d=Ua(s,n.pendingProps),Lg(e,n,s,d,r);case 3:e:{if(fe(n,n.stateNode.containerInfo),e===null)throw Error(i(387));s=n.pendingProps;var y=n.memoizedState;d=y.element,Sd(e,n),_s(n,s,null,r);var T=n.memoizedState;if(s=T.cache,Qr(n,pn,s),s!==y.cache&&xd(n,[pn],r,!0),Os(),s=T.element,y.isDehydrated)if(y={element:s,isDehydrated:!1,cache:T.cache},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){n=Hg(e,n,s,r);break e}else if(s!==d){d=wo(Error(i(424)),n),Ss(d),n=Hg(e,n,s,r);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Jt=Fo(e.firstChild),Fn=n,Ct=!0,za=null,Ko=!0,r=wg(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Cs(),s===d){n=Cr(e,n,r);break e}Tn(e,n,s,r)}n=n.child}return n;case 26:return vc(e,n),e===null?(r=W0(n.type,null,n.pendingProps,null))?n.memoizedState=r:Ct||(r=n.type,e=n.pendingProps,s=Bc(oe.current).createElement(r),s[pt]=n,s[wt]=e,On(s,r,e),Ft(s),n.stateNode=s):n.memoizedState=W0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Se(n),e===null&&Ct&&(s=n.stateNode=Q0(n.type,n.pendingProps,oe.current),Fn=n,Ko=!0,d=Jt,ia(n.type)?(Pf=d,Jt=Fo(s.firstChild)):Jt=d),Tn(e,n,n.pendingProps.children,r),vc(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ct&&((d=s=Jt)&&(s=Fw(s,n.type,n.pendingProps,Ko),s!==null?(n.stateNode=s,Fn=n,Jt=Fo(s.firstChild),Ko=!1,d=!0):d=!1),d||Na(n)),Se(n),d=n.type,y=n.pendingProps,T=e!==null?e.memoizedProps:null,s=y.children,_f(d,y)?s=null:T!==null&&_f(d,T)&&(n.flags|=32),n.memoizedState!==null&&(d=Id(e,n,uw,null,null,r),el._currentValue=d),vc(e,n),Tn(e,n,s,r),n.child;case 6:return e===null&&Ct&&((e=r=Jt)&&(r=Gw(r,n.pendingProps,Ko),r!==null?(n.stateNode=r,Fn=n,Jt=null,e=!0):e=!1),e||Na(n)),null;case 13:return Yg(e,n,r);case 4:return fe(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=vi(n,null,s,r):Tn(e,n,s,r),n.child;case 11:return Dg(e,n,n.type,n.pendingProps,r);case 7:return Tn(e,n,n.pendingProps,r),n.child;case 8:return Tn(e,n,n.pendingProps.children,r),n.child;case 12:return Tn(e,n,n.pendingProps.children,r),n.child;case 10:return s=n.pendingProps,Qr(n,n.type,s.value),Tn(e,n,s.children,r),n.child;case 9:return d=n.type._context,s=n.pendingProps.children,Ha(n),d=Hn(d),s=s(d),n.flags|=1,Tn(e,n,s,r),n.child;case 14:return jg(e,n,n.type,n.pendingProps,r);case 15:return Bg(e,n,n.type,n.pendingProps,r);case 19:return Ug(e,n,r);case 31:return s=n.pendingProps,r=n.mode,s={mode:s.mode,children:s.children},e===null?(r=Ac(s,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=gr(e.child,s),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Pg(e,n,r);case 24:return Ha(n),s=Hn(pn),e===null?(d=Ad(),d===null&&(d=Ut,y=bd(),d.pooledCache=y,y.refCount++,y!==null&&(d.pooledCacheLanes|=r),d=y),n.memoizedState={parent:s,cache:d},Cd(n),Qr(n,pn,d)):((e.lanes&r)!==0&&(Sd(e,n),_s(n,null,null,r),Os()),d=e.memoizedState,y=n.memoizedState,d.parent!==s?(d={parent:s,cache:s},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),Qr(n,pn,s)):(s=y.cache,Qr(n,pn,s),s!==d.cache&&xd(n,[pn],r,!0))),Tn(e,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function Sr(e){e.flags|=4}function Qg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!J0(n)){if(n=Mo.current,n!==null&&((yt&4194048)===yt?Jo!==null:(yt&62914560)!==yt&&(yt&536870912)===0||n!==Jo))throw Ts=wd,km;e.flags|=8192}}function wc(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?qe():536870912,e.lanes|=n,Si|=n)}function Ls(e,n){if(!Ct)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Vt(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(n)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&65011712,s|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,n}function bw(e,n,r){var s=n.pendingProps;switch(pd(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(n),null;case 1:return Vt(n),null;case 3:return r=n.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),vr(pn),ge(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ws(n)?Sr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Cm())),Vt(n),null;case 26:return r=n.memoizedState,e===null?(Sr(n),r!==null?(Vt(n),Qg(n,r)):(Vt(n),n.flags&=-16777217)):r?r!==e.memoizedState?(Sr(n),Vt(n),Qg(n,r)):(Vt(n),n.flags&=-16777217):(e.memoizedProps!==s&&Sr(n),Vt(n),n.flags&=-16777217),null;case 27:De(n),r=oe.current;var d=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Sr(n);else{if(!s){if(n.stateNode===null)throw Error(i(166));return Vt(n),null}e=q.current,ws(n)?Am(n):(e=Q0(d,s,r),n.stateNode=e,Sr(n))}return Vt(n),null;case 5:if(De(n),r=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Sr(n);else{if(!s){if(n.stateNode===null)throw Error(i(166));return Vt(n),null}if(e=q.current,ws(n))Am(n);else{switch(d=Bc(oe.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?d.createElement("select",{is:s.is}):d.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?d.createElement(r,{is:s.is}):d.createElement(r)}}e[pt]=n,e[wt]=s;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=e;e:switch(On(e,r,s),r){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Sr(n)}}return Vt(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==s&&Sr(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(i(166));if(e=oe.current,ws(n)){if(e=n.stateNode,r=n.memoizedProps,s=null,d=Fn,d!==null)switch(d.tag){case 27:case 5:s=d.memoizedProps}e[pt]=n,e=!!(e.nodeValue===r||s!==null&&s.suppressHydrationWarning===!0||N0(e.nodeValue,r)),e||Na(n)}else e=Bc(e).createTextNode(s),e[pt]=n,n.stateNode=e}return Vt(n),null;case 13:if(s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ws(n),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[pt]=n}else Cs(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Vt(n),d=!1}else d=Cm(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(wr(n),n):(wr(n),null)}if(wr(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=s!==null,e=e!==null&&e.memoizedState!==null,r){s=n.child,d=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(d=s.alternate.memoizedState.cachePool.pool);var y=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(y=s.memoizedState.cachePool.pool),y!==d&&(s.flags|=2048)}return r!==e&&r&&(n.child.flags|=8192),wc(n,n.updateQueue),Vt(n),null;case 4:return ge(),e===null&&Rf(n.stateNode.containerInfo),Vt(n),null;case 10:return vr(n.type),Vt(n),null;case 19:if(L(mn),d=n.memoizedState,d===null)return Vt(n),null;if(s=(n.flags&128)!==0,y=d.rendering,y===null)if(s)Ls(d,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(y=yc(e),y!==null){for(n.flags|=128,Ls(d,!1),e=y.updateQueue,n.updateQueue=e,wc(n,e),n.subtreeFlags=0,e=r,r=n.child;r!==null;)bm(r,e),r=r.sibling;return Y(mn,mn.current&1|2),n.child}e=e.sibling}d.tail!==null&&Pe()>Ec&&(n.flags|=128,s=!0,Ls(d,!1),n.lanes=4194304)}else{if(!s)if(e=yc(y),e!==null){if(n.flags|=128,s=!0,e=e.updateQueue,n.updateQueue=e,wc(n,e),Ls(d,!0),d.tail===null&&d.tailMode==="hidden"&&!y.alternate&&!Ct)return Vt(n),null}else 2*Pe()-d.renderingStartTime>Ec&&r!==536870912&&(n.flags|=128,s=!0,Ls(d,!1),n.lanes=4194304);d.isBackwards?(y.sibling=n.child,n.child=y):(e=d.last,e!==null?e.sibling=y:n.child=y,d.last=y)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Pe(),n.sibling=null,e=mn.current,Y(mn,s?e&1|2:e&1),n):(Vt(n),null);case 22:case 23:return wr(n),kd(),s=n.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(r&536870912)!==0&&(n.flags&128)===0&&(Vt(n),n.subtreeFlags&6&&(n.flags|=8192)):Vt(n),r=n.updateQueue,r!==null&&wc(n,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==r&&(n.flags|=2048),e!==null&&L(Ya),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),vr(pn),Vt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function vw(e,n){switch(pd(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return vr(pn),ge(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return De(n),null;case 13:if(wr(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(i(340));Cs()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return L(mn),null;case 4:return ge(),null;case 10:return vr(n.type),null;case 22:case 23:return wr(n),kd(),e!==null&&L(Ya),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return vr(pn),null;case 25:return null;default:return null}}function Fg(e,n){switch(pd(n),n.tag){case 3:vr(pn),ge();break;case 26:case 27:case 5:De(n);break;case 4:ge();break;case 13:wr(n);break;case 19:L(mn);break;case 10:vr(n.type);break;case 22:case 23:wr(n),kd(),e!==null&&L(Ya);break;case 24:vr(pn)}}function Hs(e,n){try{var r=n.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var d=s.next;r=d;do{if((r.tag&e)===e){s=void 0;var y=r.create,T=r.inst;s=y(),T.destroy=s}r=r.next}while(r!==d)}}catch(B){Ht(n,n.return,B)}}function Kr(e,n,r){try{var s=n.updateQueue,d=s!==null?s.lastEffect:null;if(d!==null){var y=d.next;s=y;do{if((s.tag&e)===e){var T=s.inst,B=T.destroy;if(B!==void 0){T.destroy=void 0,d=n;var G=r,re=B;try{re()}catch(ce){Ht(d,G,ce)}}}s=s.next}while(s!==y)}}catch(ce){Ht(n,n.return,ce)}}function Gg(e){var n=e.updateQueue;if(n!==null){var r=e.stateNode;try{jm(n,r)}catch(s){Ht(e,e.return,s)}}}function Wg(e,n,r){r.props=Ua(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(s){Ht(e,n,s)}}function Ys(e,n){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof r=="function"?e.refCleanup=r(s):r.current=s}}catch(d){Ht(e,n,d)}}function er(e,n){var r=e.ref,s=e.refCleanup;if(r!==null)if(typeof s=="function")try{s()}catch(d){Ht(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Ht(e,n,d)}else r.current=null}function qg(e){var n=e.type,r=e.memoizedProps,s=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&s.focus();break e;case"img":r.src?s.src=r.src:r.srcSet&&(s.srcset=r.srcSet)}}catch(d){Ht(e,e.return,d)}}function nf(e,n,r){try{var s=e.stateNode;Yw(s,e.type,r,n),s[wt]=n}catch(d){Ht(e,e.return,d)}}function Vg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ia(e.type)||e.tag===4}function of(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ia(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rf(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(e),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=jc));else if(s!==4&&(s===27&&ia(e.type)&&(r=e.stateNode,n=null),e=e.child,e!==null))for(rf(e,n,r),e=e.sibling;e!==null;)rf(e,n,r),e=e.sibling}function Cc(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(s!==4&&(s===27&&ia(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(Cc(e,n,r),e=e.sibling;e!==null;)Cc(e,n,r),e=e.sibling}function Zg(e){var n=e.stateNode,r=e.memoizedProps;try{for(var s=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);On(n,s,r),n[pt]=e,n[wt]=r}catch(y){Ht(e,e.return,y)}}var Er=!1,ln=!1,af=!1,Kg=typeof WeakSet=="function"?WeakSet:Set,An=null;function Aw(e,n){if(e=e.containerInfo,If=Yc,e=cm(e),od(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,y=s.focusNode;s=s.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var T=0,B=-1,G=-1,re=0,ce=0,he=e,ae=null;t:for(;;){for(var ie;he!==r||d!==0&&he.nodeType!==3||(B=T+d),he!==y||s!==0&&he.nodeType!==3||(G=T+s),he.nodeType===3&&(T+=he.nodeValue.length),(ie=he.firstChild)!==null;)ae=he,he=ie;for(;;){if(he===e)break t;if(ae===r&&++re===d&&(B=T),ae===y&&++ce===s&&(G=T),(ie=he.nextSibling)!==null)break;he=ae,ae=he.parentNode}he=ie}r=B===-1||G===-1?null:{start:B,end:G}}else r=null}r=r||{start:0,end:0}}else r=null;for(Of={focusedElem:e,selectionRange:r},Yc=!1,An=n;An!==null;)if(n=An,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,An=e;else for(;An!==null;){switch(n=An,y=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&y!==null){e=void 0,r=n,d=y.memoizedProps,y=y.memoizedState,s=r.stateNode;try{var Ne=Ua(r.type,d,r.elementType===r.type);e=s.getSnapshotBeforeUpdate(Ne,y),s.__reactInternalSnapshotBeforeUpdate=e}catch(_e){Ht(r,r.return,_e)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,r=e.nodeType,r===9)jf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=n.sibling,e!==null){e.return=n.return,An=e;break}An=n.return}}function Jg(e,n,r){var s=r.flags;switch(r.tag){case 0:case 11:case 15:Jr(e,r),s&4&&Hs(5,r);break;case 1:if(Jr(e,r),s&4)if(e=r.stateNode,n===null)try{e.componentDidMount()}catch(T){Ht(r,r.return,T)}else{var d=Ua(r.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Ht(r,r.return,T)}}s&64&&Gg(r),s&512&&Ys(r,r.return);break;case 3:if(Jr(e,r),s&64&&(e=r.updateQueue,e!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{jm(e,n)}catch(T){Ht(r,r.return,T)}}break;case 27:n===null&&s&4&&Zg(r);case 26:case 5:Jr(e,r),n===null&&s&4&&qg(r),s&512&&Ys(r,r.return);break;case 12:Jr(e,r);break;case 13:Jr(e,r),s&4&&n0(e,r),s&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=Iw.bind(null,r),Ww(e,r))));break;case 22:if(s=r.memoizedState!==null||Er,!s){n=n!==null&&n.memoizedState!==null||ln,d=Er;var y=ln;Er=s,(ln=n)&&!y?ea(e,r,(r.subtreeFlags&8772)!==0):Jr(e,r),Er=d,ln=y}break;case 30:break;default:Jr(e,r)}}function e0(e){var n=e.alternate;n!==null&&(e.alternate=null,e0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&pr(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Gt=null,Kn=!1;function Mr(e,n,r){for(r=r.child;r!==null;)t0(e,n,r),r=r.sibling}function t0(e,n,r){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Ze,r)}catch{}switch(r.tag){case 26:ln||er(r,n),Mr(e,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ln||er(r,n);var s=Gt,d=Kn;ia(r.type)&&(Gt=r.stateNode,Kn=!1),Mr(e,n,r),Vs(r.stateNode),Gt=s,Kn=d;break;case 5:ln||er(r,n);case 6:if(s=Gt,d=Kn,Gt=null,Mr(e,n,r),Gt=s,Kn=d,Gt!==null)if(Kn)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(r.stateNode)}catch(y){Ht(r,n,y)}else try{Gt.removeChild(r.stateNode)}catch(y){Ht(r,n,y)}break;case 18:Gt!==null&&(Kn?(e=Gt,U0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),rl(e)):U0(Gt,r.stateNode));break;case 4:s=Gt,d=Kn,Gt=r.stateNode.containerInfo,Kn=!0,Mr(e,n,r),Gt=s,Kn=d;break;case 0:case 11:case 14:case 15:ln||Kr(2,r,n),ln||Kr(4,r,n),Mr(e,n,r);break;case 1:ln||(er(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"&&Wg(r,n,s)),Mr(e,n,r);break;case 21:Mr(e,n,r);break;case 22:ln=(s=ln)||r.memoizedState!==null,Mr(e,n,r),ln=s;break;default:Mr(e,n,r)}}function n0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{rl(e)}catch(r){Ht(n,n.return,r)}}function ww(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Kg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Kg),n;default:throw Error(i(435,e.tag))}}function sf(e,n){var r=ww(e);n.forEach(function(s){var d=Ow.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}function io(e,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s],y=e,T=n,B=T;e:for(;B!==null;){switch(B.tag){case 27:if(ia(B.type)){Gt=B.stateNode,Kn=!1;break e}break;case 5:Gt=B.stateNode,Kn=!1;break e;case 3:case 4:Gt=B.stateNode.containerInfo,Kn=!0;break e}B=B.return}if(Gt===null)throw Error(i(160));t0(y,T,d),Gt=null,Kn=!1,y=d.alternate,y!==null&&(y.return=null),d.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)o0(n,e),n=n.sibling}var Qo=null;function o0(e,n){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:io(n,e),so(e),s&4&&(Kr(3,e,e.return),Hs(3,e),Kr(5,e,e.return));break;case 1:io(n,e),so(e),s&512&&(ln||r===null||er(r,r.return)),s&64&&Er&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?s:r.concat(s))));break;case 26:var d=Qo;if(io(n,e),so(e),s&512&&(ln||r===null||er(r,r.return)),s&4){var y=r!==null?r.memoizedState:null;if(s=e.memoizedState,r===null)if(s===null)if(e.stateNode===null){e:{s=e.type,r=e.memoizedProps,d=d.ownerDocument||d;t:switch(s){case"title":y=d.getElementsByTagName("title")[0],(!y||y[Ao]||y[pt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=d.createElement(s),d.head.insertBefore(y,d.querySelector("head > title"))),On(y,s,r),y[pt]=e,Ft(y),s=y;break e;case"link":var T=Z0("link","href",d).get(s+(r.href||""));if(T){for(var B=0;B<T.length;B++)if(y=T[B],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){T.splice(B,1);break t}}y=d.createElement(s),On(y,s,r),d.head.appendChild(y);break;case"meta":if(T=Z0("meta","content",d).get(s+(r.content||""))){for(B=0;B<T.length;B++)if(y=T[B],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){T.splice(B,1);break t}}y=d.createElement(s),On(y,s,r),d.head.appendChild(y);break;default:throw Error(i(468,s))}y[pt]=e,Ft(y),s=y}e.stateNode=s}else K0(d,e.type,e.stateNode);else e.stateNode=V0(d,s,e.memoizedProps);else y!==s?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,s===null?K0(d,e.type,e.stateNode):V0(d,s,e.memoizedProps)):s===null&&e.stateNode!==null&&nf(e,e.memoizedProps,r.memoizedProps)}break;case 27:io(n,e),so(e),s&512&&(ln||r===null||er(r,r.return)),r!==null&&s&4&&nf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(io(n,e),so(e),s&512&&(ln||r===null||er(r,r.return)),e.flags&32){d=e.stateNode;try{mr(d,"")}catch(ie){Ht(e,e.return,ie)}}s&4&&e.stateNode!=null&&(d=e.memoizedProps,nf(e,d,r!==null?r.memoizedProps:d)),s&1024&&(af=!0);break;case 6:if(io(n,e),so(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,r=e.stateNode;try{r.nodeValue=s}catch(ie){Ht(e,e.return,ie)}}break;case 3:if(Nc=null,d=Qo,Qo=Pc(n.containerInfo),io(n,e),Qo=d,so(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{rl(n.containerInfo)}catch(ie){Ht(e,e.return,ie)}af&&(af=!1,r0(e));break;case 4:s=Qo,Qo=Pc(e.stateNode.containerInfo),io(n,e),so(e),Qo=s;break;case 12:io(n,e),so(e);break;case 13:io(n,e),so(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(hf=Pe()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sf(e,s)));break;case 22:d=e.memoizedState!==null;var G=r!==null&&r.memoizedState!==null,re=Er,ce=ln;if(Er=re||d,ln=ce||G,io(n,e),ln=ce,Er=re,so(e),s&8192)e:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(r===null||G||Er||ln||Xa(e)),r=null,n=e;;){if(n.tag===5||n.tag===26){if(r===null){G=r=n;try{if(y=G.stateNode,d)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{B=G.stateNode;var he=G.memoizedProps.style,ae=he!=null&&he.hasOwnProperty("display")?he.display:null;B.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(ie){Ht(G,G.return,ie)}}}else if(n.tag===6){if(r===null){G=n;try{G.stateNode.nodeValue=d?"":G.memoizedProps}catch(ie){Ht(G,G.return,ie)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=e.updateQueue,s!==null&&(r=s.retryQueue,r!==null&&(s.retryQueue=null,sf(e,r))));break;case 19:io(n,e),so(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sf(e,s)));break;case 30:break;case 21:break;default:io(n,e),so(e)}}function so(e){var n=e.flags;if(n&2){try{for(var r,s=e.return;s!==null;){if(Vg(s)){r=s;break}s=s.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,y=of(e);Cc(e,y,d);break;case 5:var T=r.stateNode;r.flags&32&&(mr(T,""),r.flags&=-33);var B=of(e);Cc(e,B,T);break;case 3:case 4:var G=r.stateNode.containerInfo,re=of(e);rf(e,re,G);break;default:throw Error(i(161))}}catch(ce){Ht(e,e.return,ce)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function r0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;r0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Jr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jg(e,n.alternate,n),n=n.sibling}function Xa(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Kr(4,n,n.return),Xa(n);break;case 1:er(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Wg(n,n.return,r),Xa(n);break;case 27:Vs(n.stateNode);case 26:case 5:er(n,n.return),Xa(n);break;case 22:n.memoizedState===null&&Xa(n);break;case 30:Xa(n);break;default:Xa(n)}e=e.sibling}}function ea(e,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,d=e,y=n,T=y.flags;switch(y.tag){case 0:case 11:case 15:ea(d,y,r),Hs(4,y);break;case 1:if(ea(d,y,r),s=y,d=s.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(re){Ht(s,s.return,re)}if(s=y,d=s.updateQueue,d!==null){var B=s.stateNode;try{var G=d.shared.hiddenCallbacks;if(G!==null)for(d.shared.hiddenCallbacks=null,d=0;d<G.length;d++)Dm(G[d],B)}catch(re){Ht(s,s.return,re)}}r&&T&64&&Gg(y),Ys(y,y.return);break;case 27:Zg(y);case 26:case 5:ea(d,y,r),r&&s===null&&T&4&&qg(y),Ys(y,y.return);break;case 12:ea(d,y,r);break;case 13:ea(d,y,r),r&&T&4&&n0(d,y);break;case 22:y.memoizedState===null&&ea(d,y,r),Ys(y,y.return);break;case 30:break;default:ea(d,y,r)}n=n.sibling}}function lf(e,n){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Ms(r))}function cf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ms(e))}function tr(e,n,r,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)a0(e,n,r,s),n=n.sibling}function a0(e,n,r,s){var d=n.flags;switch(n.tag){case 0:case 11:case 15:tr(e,n,r,s),d&2048&&Hs(9,n);break;case 1:tr(e,n,r,s);break;case 3:tr(e,n,r,s),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ms(e)));break;case 12:if(d&2048){tr(e,n,r,s),e=n.stateNode;try{var y=n.memoizedProps,T=y.id,B=y.onPostCommit;typeof B=="function"&&B(T,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(G){Ht(n,n.return,G)}}else tr(e,n,r,s);break;case 13:tr(e,n,r,s);break;case 23:break;case 22:y=n.stateNode,T=n.alternate,n.memoizedState!==null?y._visibility&2?tr(e,n,r,s):$s(e,n):y._visibility&2?tr(e,n,r,s):(y._visibility|=2,Ai(e,n,r,s,(n.subtreeFlags&10256)!==0)),d&2048&&lf(T,n);break;case 24:tr(e,n,r,s),d&2048&&cf(n.alternate,n);break;default:tr(e,n,r,s)}}function Ai(e,n,r,s,d){for(d=d&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var y=e,T=n,B=r,G=s,re=T.flags;switch(T.tag){case 0:case 11:case 15:Ai(y,T,B,G,d),Hs(8,T);break;case 23:break;case 22:var ce=T.stateNode;T.memoizedState!==null?ce._visibility&2?Ai(y,T,B,G,d):$s(y,T):(ce._visibility|=2,Ai(y,T,B,G,d)),d&&re&2048&&lf(T.alternate,T);break;case 24:Ai(y,T,B,G,d),d&&re&2048&&cf(T.alternate,T);break;default:Ai(y,T,B,G,d)}n=n.sibling}}function $s(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=e,s=n,d=s.flags;switch(s.tag){case 22:$s(r,s),d&2048&&lf(s.alternate,s);break;case 24:$s(r,s),d&2048&&cf(s.alternate,s);break;default:$s(r,s)}n=n.sibling}}var Us=8192;function wi(e){if(e.subtreeFlags&Us)for(e=e.child;e!==null;)i0(e),e=e.sibling}function i0(e){switch(e.tag){case 26:wi(e),e.flags&Us&&e.memoizedState!==null&&sC(Qo,e.memoizedState,e.memoizedProps);break;case 5:wi(e);break;case 3:case 4:var n=Qo;Qo=Pc(e.stateNode.containerInfo),wi(e),Qo=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Us,Us=16777216,wi(e),Us=n):wi(e));break;default:wi(e)}}function s0(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Xs(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];An=s,c0(s,e)}s0(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)l0(e),e=e.sibling}function l0(e){switch(e.tag){case 0:case 11:case 15:Xs(e),e.flags&2048&&Kr(9,e,e.return);break;case 3:Xs(e);break;case 12:Xs(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Sc(e)):Xs(e);break;default:Xs(e)}}function Sc(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];An=s,c0(s,e)}s0(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Kr(8,n,n.return),Sc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,Sc(n));break;default:Sc(n)}e=e.sibling}}function c0(e,n){for(;An!==null;){var r=An;switch(r.tag){case 0:case 11:case 15:Kr(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var s=r.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ms(r.memoizedState.cache)}if(s=r.child,s!==null)s.return=r,An=s;else e:for(r=e;An!==null;){s=An;var d=s.sibling,y=s.return;if(e0(s),s===r){An=null;break e}if(d!==null){d.return=y,An=d;break e}An=y}}}var Cw={getCacheForType:function(e){var n=Hn(pn),r=n.data.get(e);return r===void 0&&(r=e(),n.data.set(e,r)),r}},Sw=typeof WeakMap=="function"?WeakMap:Map,It=0,Ut=null,dt=null,yt=0,Ot=0,lo=null,ta=!1,Ci=!1,uf=!1,Rr=0,en=0,na=0,Qa=0,df=0,Ro=0,Si=0,Qs=null,Jn=null,ff=!1,hf=0,Ec=1/0,Mc=null,oa=null,In=0,ra=null,Ei=null,Mi=0,pf=0,mf=null,u0=null,Fs=0,gf=null;function co(){if((It&2)!==0&&yt!==0)return yt&-yt;if(_.T!==null){var e=hi;return e!==0?e:Cf()}return Lo()}function d0(){Ro===0&&(Ro=(yt&536870912)===0||Ct?We():536870912);var e=Mo.current;return e!==null&&(e.flags|=32),Ro}function uo(e,n,r){(e===Ut&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(Ri(e,0),aa(e,yt,Ro,!1)),yn(e,r),((It&2)===0||e!==Ut)&&(e===Ut&&((It&2)===0&&(Qa|=r),en===4&&aa(e,yt,Ro,!1)),nr(e))}function f0(e,n,r){if((It&6)!==0)throw Error(i(327));var s=!r&&(n&124)===0&&(n&e.expiredLanes)===0||Fe(e,n),d=s?Rw(e,n):bf(e,n,!0),y=s;do{if(d===0){Ci&&!s&&aa(e,n,0,!1);break}else{if(r=e.current.alternate,y&&!Ew(r)){d=bf(e,n,!1),y=!1;continue}if(d===2){if(y=n,e.errorRecoveryDisabledLanes&y)var T=0;else T=e.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){n=T;e:{var B=e;d=Qs;var G=B.current.memoizedState.isDehydrated;if(G&&(Ri(B,T).flags|=256),T=bf(B,T,!1),T!==2){if(uf&&!G){B.errorRecoveryDisabledLanes|=y,Qa|=y,d=4;break e}y=Jn,Jn=d,y!==null&&(Jn===null?Jn=y:Jn.push.apply(Jn,y))}d=T}if(y=!1,d!==2)continue}}if(d===1){Ri(e,0),aa(e,n,0,!0);break}e:{switch(s=e,y=d,y){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:aa(s,n,Ro,!ta);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(d=hf+300-Pe(),10<d)){if(aa(s,n,Ro,!ta),ut(s,0,!0)!==0)break e;s.timeoutHandle=Y0(h0.bind(null,s,r,Jn,Mc,ff,n,Ro,Qa,Si,ta,y,2,-0,0),d);break e}h0(s,r,Jn,Mc,ff,n,Ro,Qa,Si,ta,y,0,-0,0)}}break}while(!0);nr(e)}function h0(e,n,r,s,d,y,T,B,G,re,ce,he,ae,ie){if(e.timeoutHandle=-1,he=n.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Js={stylesheets:null,count:0,unsuspend:iC},i0(n),he=lC(),he!==null)){e.cancelPendingCommit=he(v0.bind(null,e,n,y,r,s,d,T,B,G,ce,1,ae,ie)),aa(e,y,T,!re);return}v0(e,n,y,r,s,d,T,B,G)}function Ew(e){for(var n=e;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var s=0;s<r.length;s++){var d=r[s],y=d.getSnapshot;d=d.value;try{if(!ro(y(),d))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function aa(e,n,r,s){n&=~df,n&=~Qa,e.suspendedLanes|=n,e.pingedLanes&=~n,s&&(e.warmLanes|=n),s=e.expirationTimes;for(var d=n;0<d;){var y=31-pe(d),T=1<<y;s[y]=-1,d&=~T}r!==0&&xo(e,r,n)}function Rc(){return(It&6)===0?(Gs(0),!1):!0}function yf(){if(dt!==null){if(Ot===0)var e=dt.return;else e=dt,br=La=null,Dd(e),bi=null,zs=0,e=dt;for(;e!==null;)Fg(e.alternate,e),e=e.return;dt=null}}function Ri(e,n){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Uw(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),yf(),Ut=e,dt=r=gr(e.current,null),yt=n,Ot=0,lo=null,ta=!1,Ci=Fe(e,n),uf=!1,Si=Ro=df=Qa=na=en=0,Jn=Qs=null,ff=!1,(n&8)!==0&&(n|=n&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=n;0<s;){var d=31-pe(s),y=1<<d;n|=e[d],s&=~y}return Rr=n,ql(),r}function p0(e,n){tt=null,_.H=pc,n===ks||n===rc?(n=Om(),Ot=3):n===km?(n=Om(),Ot=4):Ot=n===_g?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,lo=n,dt===null&&(en=1,bc(e,wo(n,e.current)))}function m0(){var e=_.H;return _.H=pc,e===null?pc:e}function g0(){var e=_.A;return _.A=Cw,e}function xf(){en=4,ta||(yt&4194048)!==yt&&Mo.current!==null||(Ci=!0),(na&134217727)===0&&(Qa&134217727)===0||Ut===null||aa(Ut,yt,Ro,!1)}function bf(e,n,r){var s=It;It|=2;var d=m0(),y=g0();(Ut!==e||yt!==n)&&(Mc=null,Ri(e,n)),n=!1;var T=en;e:do try{if(Ot!==0&&dt!==null){var B=dt,G=lo;switch(Ot){case 8:yf(),T=6;break e;case 3:case 2:case 9:case 6:Mo.current===null&&(n=!0);var re=Ot;if(Ot=0,lo=null,ki(e,B,G,re),r&&Ci){T=0;break e}break;default:re=Ot,Ot=0,lo=null,ki(e,B,G,re)}}Mw(),T=en;break}catch(ce){p0(e,ce)}while(!0);return n&&e.shellSuspendCounter++,br=La=null,It=s,_.H=d,_.A=y,dt===null&&(Ut=null,yt=0,ql()),T}function Mw(){for(;dt!==null;)y0(dt)}function Rw(e,n){var r=It;It|=2;var s=m0(),d=g0();Ut!==e||yt!==n?(Mc=null,Ec=Pe()+500,Ri(e,n)):Ci=Fe(e,n);e:do try{if(Ot!==0&&dt!==null){n=dt;var y=lo;t:switch(Ot){case 1:Ot=0,lo=null,ki(e,n,y,1);break;case 2:case 9:if(Tm(y)){Ot=0,lo=null,x0(n);break}n=function(){Ot!==2&&Ot!==9||Ut!==e||(Ot=7),nr(e)},y.then(n,n);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Tm(y)?(Ot=0,lo=null,x0(n)):(Ot=0,lo=null,ki(e,n,y,7));break;case 5:var T=null;switch(dt.tag){case 26:T=dt.memoizedState;case 5:case 27:var B=dt;if(!T||J0(T)){Ot=0,lo=null;var G=B.sibling;if(G!==null)dt=G;else{var re=B.return;re!==null?(dt=re,kc(re)):dt=null}break t}}Ot=0,lo=null,ki(e,n,y,5);break;case 6:Ot=0,lo=null,ki(e,n,y,6);break;case 8:yf(),en=6;break e;default:throw Error(i(462))}}kw();break}catch(ce){p0(e,ce)}while(!0);return br=La=null,_.H=s,_.A=d,It=r,dt!==null?0:(Ut=null,yt=0,ql(),en)}function kw(){for(;dt!==null&&!Oe();)y0(dt)}function y0(e){var n=Xg(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,n===null?kc(e):dt=n}function x0(e){var n=e,r=n.alternate;switch(n.tag){case 15:case 0:n=Ng(r,n,n.pendingProps,n.type,void 0,yt);break;case 11:n=Ng(r,n,n.pendingProps,n.type.render,n.ref,yt);break;case 5:Dd(n);default:Fg(r,n),n=dt=bm(n,Rr),n=Xg(r,n,Rr)}e.memoizedProps=e.pendingProps,n===null?kc(e):dt=n}function ki(e,n,r,s){br=La=null,Dd(n),bi=null,zs=0;var d=n.return;try{if(yw(e,d,n,r,yt)){en=1,bc(e,wo(r,e.current)),dt=null;return}}catch(y){if(d!==null)throw dt=d,y;en=1,bc(e,wo(r,e.current)),dt=null;return}n.flags&32768?(Ct||s===1?e=!0:Ci||(yt&536870912)!==0?e=!1:(ta=e=!0,(s===2||s===9||s===3||s===6)&&(s=Mo.current,s!==null&&s.tag===13&&(s.flags|=16384))),b0(n,e)):kc(n)}function kc(e){var n=e;do{if((n.flags&32768)!==0){b0(n,ta);return}e=n.return;var r=bw(n.alternate,n,Rr);if(r!==null){dt=r;return}if(n=n.sibling,n!==null){dt=n;return}dt=n=e}while(n!==null);en===0&&(en=5)}function b0(e,n){do{var r=vw(e.alternate,e);if(r!==null){r.flags&=32767,dt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(e=e.sibling,e!==null)){dt=e;return}dt=e=r}while(e!==null);en=6,dt=null}function v0(e,n,r,s,d,y,T,B,G){e.cancelPendingCommit=null;do Tc();while(In!==0);if((It&6)!==0)throw Error(i(327));if(n!==null){if(n===e.current)throw Error(i(177));if(y=n.lanes|n.childLanes,y|=ld,jn(e,r,y,T,B,G),e===Ut&&(dt=Ut=null,yt=0),Ei=n,ra=e,Mi=r,pf=y,mf=d,u0=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,_w(Qe,function(){return E0(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=_.T,_.T=null,d=H.p,H.p=2,T=It,It|=4;try{Aw(e,n,r)}finally{It=T,H.p=d,_.T=s}}In=1,A0(),w0(),C0()}}function A0(){if(In===1){In=0;var e=ra,n=Ei,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=_.T,_.T=null;var s=H.p;H.p=2;var d=It;It|=4;try{o0(n,e);var y=Of,T=cm(e.containerInfo),B=y.focusedElem,G=y.selectionRange;if(T!==B&&B&&B.ownerDocument&&lm(B.ownerDocument.documentElement,B)){if(G!==null&&od(B)){var re=G.start,ce=G.end;if(ce===void 0&&(ce=re),"selectionStart"in B)B.selectionStart=re,B.selectionEnd=Math.min(ce,B.value.length);else{var he=B.ownerDocument||document,ae=he&&he.defaultView||window;if(ae.getSelection){var ie=ae.getSelection(),Ne=B.textContent.length,_e=Math.min(G.start,Ne),Pt=G.end===void 0?_e:Math.min(G.end,Ne);!ie.extend&&_e>Pt&&(T=Pt,Pt=_e,_e=T);var ee=sm(B,_e),W=sm(B,Pt);if(ee&&W&&(ie.rangeCount!==1||ie.anchorNode!==ee.node||ie.anchorOffset!==ee.offset||ie.focusNode!==W.node||ie.focusOffset!==W.offset)){var ne=he.createRange();ne.setStart(ee.node,ee.offset),ie.removeAllRanges(),_e>Pt?(ie.addRange(ne),ie.extend(W.node,W.offset)):(ne.setEnd(W.node,W.offset),ie.addRange(ne))}}}}for(he=[],ie=B;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<he.length;B++){var ue=he[B];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Yc=!!If,Of=If=null}finally{It=d,H.p=s,_.T=r}}e.current=n,In=2}}function w0(){if(In===2){In=0;var e=ra,n=Ei,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=_.T,_.T=null;var s=H.p;H.p=2;var d=It;It|=4;try{Jg(e,n.alternate,n)}finally{It=d,H.p=s,_.T=r}}In=3}}function C0(){if(In===4||In===3){In=0,Le();var e=ra,n=Ei,r=Mi,s=u0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?In=5:(In=0,Ei=ra=null,S0(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(oa=null),Pn(r),n=n.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Ze,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=_.T,d=H.p,H.p=2,_.T=null;try{for(var y=e.onRecoverableError,T=0;T<s.length;T++){var B=s[T];y(B.value,{componentStack:B.stack})}}finally{_.T=n,H.p=d}}(Mi&3)!==0&&Tc(),nr(e),d=e.pendingLanes,(r&4194090)!==0&&(d&42)!==0?e===gf?Fs++:(Fs=0,gf=e):Fs=0,Gs(0)}}function S0(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ms(n)))}function Tc(e){return A0(),w0(),C0(),E0()}function E0(){if(In!==5)return!1;var e=ra,n=pf;pf=0;var r=Pn(Mi),s=_.T,d=H.p;try{H.p=32>r?32:r,_.T=null,r=mf,mf=null;var y=ra,T=Mi;if(In=0,Ei=ra=null,Mi=0,(It&6)!==0)throw Error(i(331));var B=It;if(It|=4,l0(y.current),a0(y,y.current,T,r),It=B,Gs(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Ze,y)}catch{}return!0}finally{H.p=d,_.T=s,S0(e,n)}}function M0(e,n,r){n=wo(r,n),n=Gd(e.stateNode,n,2),e=Wr(e,n,2),e!==null&&(yn(e,2),nr(e))}function Ht(e,n,r){if(e.tag===3)M0(e,e,r);else for(;n!==null;){if(n.tag===3){M0(n,e,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(oa===null||!oa.has(s))){e=wo(r,e),r=Ig(2),s=Wr(n,r,2),s!==null&&(Og(r,s,n,e),yn(s,2),nr(s));break}}n=n.return}}function vf(e,n,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Sw;var d=new Set;s.set(n,d)}else d=s.get(n),d===void 0&&(d=new Set,s.set(n,d));d.has(r)||(uf=!0,d.add(r),e=Tw.bind(null,e,n,r),n.then(e,e))}function Tw(e,n,r){var s=e.pingCache;s!==null&&s.delete(n),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Ut===e&&(yt&r)===r&&(en===4||en===3&&(yt&62914560)===yt&&300>Pe()-hf?(It&2)===0&&Ri(e,0):df|=r,Si===yt&&(Si=0)),nr(e)}function R0(e,n){n===0&&(n=qe()),e=ci(e,n),e!==null&&(yn(e,n),nr(e))}function Iw(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),R0(e,r)}function Ow(e,n){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(n),R0(e,r)}function _w(e,n){return Te(e,n)}var Ic=null,Ti=null,Af=!1,Oc=!1,wf=!1,Fa=0;function nr(e){e!==Ti&&e.next===null&&(Ti===null?Ic=Ti=e:Ti=Ti.next=e),Oc=!0,Af||(Af=!0,jw())}function Gs(e,n){if(!wf&&Oc){wf=!0;do for(var r=!1,s=Ic;s!==null;){if(e!==0){var d=s.pendingLanes;if(d===0)var y=0;else{var T=s.suspendedLanes,B=s.pingedLanes;y=(1<<31-pe(42|e)+1)-1,y&=d&~(T&~B),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,O0(s,y))}else y=yt,y=ut(s,s===Ut?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(y&3)===0||Fe(s,y)||(r=!0,O0(s,y));s=s.next}while(r);wf=!1}}function Dw(){k0()}function k0(){Oc=Af=!1;var e=0;Fa!==0&&($w()&&(e=Fa),Fa=0);for(var n=Pe(),r=null,s=Ic;s!==null;){var d=s.next,y=T0(s,n);y===0?(s.next=null,r===null?Ic=d:r.next=d,d===null&&(Ti=r)):(r=s,(e!==0||(y&3)!==0)&&(Oc=!0)),s=d}Gs(e)}function T0(e,n){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,y=e.pendingLanes&-62914561;0<y;){var T=31-pe(y),B=1<<T,G=d[T];G===-1?((B&r)===0||(B&s)!==0)&&(d[T]=Ee(B,n)):G<=n&&(e.expiredLanes|=B),y&=~B}if(n=Ut,r=yt,r=ut(e,e===n?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,r===0||e===n&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Ae(s),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||Fe(e,r)){if(n=r&-r,n===e.callbackPriority)return n;switch(s!==null&&Ae(s),Pn(r)){case 2:case 8:r=zt;break;case 32:r=Qe;break;case 268435456:r=Xe;break;default:r=Qe}return s=I0.bind(null,e),r=Te(r,s),e.callbackPriority=n,e.callbackNode=r,n}return s!==null&&s!==null&&Ae(s),e.callbackPriority=2,e.callbackNode=null,2}function I0(e,n){if(In!==0&&In!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Tc()&&e.callbackNode!==r)return null;var s=yt;return s=ut(e,e===Ut?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(f0(e,s,n),T0(e,Pe()),e.callbackNode!=null&&e.callbackNode===r?I0.bind(null,e):null)}function O0(e,n){if(Tc())return null;f0(e,n,!0)}function jw(){Xw(function(){(It&6)!==0?Te(At,Dw):k0()})}function Cf(){return Fa===0&&(Fa=We()),Fa}function _0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ta(""+e)}function D0(e,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,e.id&&r.setAttribute("form",e.id),n.parentNode.insertBefore(r,n),e=new FormData(e),r.parentNode.removeChild(r),e}function Bw(e,n,r,s,d){if(n==="submit"&&r&&r.stateNode===d){var y=_0((d[wt]||null).action),T=s.submitter;T&&(n=(n=T[wt]||null)?_0(n.formAction):T.getAttribute("formAction"),n!==null&&(y=n,T=null));var B=new bn("action","action",null,s,d);e.push({event:B,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Fa!==0){var G=T?D0(d,T):new FormData(d);$d(r,{pending:!0,data:G,method:d.method,action:y},null,G)}}else typeof y=="function"&&(B.preventDefault(),G=T?D0(d,T):new FormData(d),$d(r,{pending:!0,data:G,method:d.method,action:y},y,G))},currentTarget:d}]})}}for(var Sf=0;Sf<sd.length;Sf++){var Ef=sd[Sf],Pw=Ef.toLowerCase(),zw=Ef[0].toUpperCase()+Ef.slice(1);Xo(Pw,"on"+zw)}Xo(fm,"onAnimationEnd"),Xo(hm,"onAnimationIteration"),Xo(pm,"onAnimationStart"),Xo("dblclick","onDoubleClick"),Xo("focusin","onFocus"),Xo("focusout","onBlur"),Xo(ew,"onTransitionRun"),Xo(tw,"onTransitionStart"),Xo(nw,"onTransitionCancel"),Xo(mm,"onTransitionEnd"),Et("onMouseEnter",["mouseout","mouseover"]),Et("onMouseLeave",["mouseout","mouseover"]),Et("onPointerEnter",["pointerout","pointerover"]),Et("onPointerLeave",["pointerout","pointerover"]),Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ws));function j0(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var y=void 0;if(n)for(var T=s.length-1;0<=T;T--){var B=s[T],G=B.instance,re=B.currentTarget;if(B=B.listener,G!==y&&d.isPropagationStopped())break e;y=B,d.currentTarget=re;try{y(d)}catch(ce){xc(ce)}d.currentTarget=null,y=G}else for(T=0;T<s.length;T++){if(B=s[T],G=B.instance,re=B.currentTarget,B=B.listener,G!==y&&d.isPropagationStopped())break e;y=B,d.currentTarget=re;try{y(d)}catch(ce){xc(ce)}d.currentTarget=null,y=G}}}}function ft(e,n){var r=n[Ue];r===void 0&&(r=n[Ue]=new Set);var s=e+"__bubble";r.has(s)||(B0(n,e,2,!1),r.add(s))}function Mf(e,n,r){var s=0;n&&(s|=4),B0(r,e,s,n)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Rf(e){if(!e[_c]){e[_c]=!0,zn.forEach(function(r){r!=="selectionchange"&&(Nw.has(r)||Mf(r,!1,e),Mf(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[_c]||(n[_c]=!0,Mf("selectionchange",!1,n))}}function B0(e,n,r,s){switch(ay(n)){case 2:var d=dC;break;case 8:d=fC;break;default:d=Yf}r=d.bind(null,n,r,e),d=void 0,!Xr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(n,r,{capture:!0,passive:d}):e.addEventListener(n,r,!0):d!==void 0?e.addEventListener(n,r,{passive:d}):e.addEventListener(n,r,!1)}function kf(e,n,r,s,d){var y=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var T=s.tag;if(T===3||T===4){var B=s.stateNode.containerInfo;if(B===d)break;if(T===4)for(T=s.return;T!==null;){var G=T.tag;if((G===3||G===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;B!==null;){if(T=cn(B),T===null)return;if(G=T.tag,G===5||G===6||G===26||G===27){s=y=T;continue e}B=B.parentNode}}s=s.return}Fl(function(){var re=y,ce=hs(r),he=[];e:{var ae=gm.get(e);if(ae!==void 0){var ie=bn,Ne=e;switch(e){case"keypress":if(me(r)===0)break e;case"keydown":case"keyup":ie=_A;break;case"focusin":Ne="focus",ie=Ku;break;case"focusout":Ne="blur",ie=Ku;break;case"beforeblur":case"afterblur":ie=Ku;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Qp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=vA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=BA;break;case fm:case hm:case pm:ie=CA;break;case mm:ie=zA;break;case"scroll":case"scrollend":ie=Vu;break;case"wheel":ie=LA;break;case"copy":case"cut":case"paste":ie=EA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Gp;break;case"toggle":case"beforetoggle":ie=YA}var _e=(n&4)!==0,Pt=!_e&&(e==="scroll"||e==="scrollend"),ee=_e?ae!==null?ae+"Capture":null:ae;_e=[];for(var W=re,ne;W!==null;){var ue=W;if(ne=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||ne===null||ee===null||(ue=Ia(W,ee),ue!=null&&_e.push(qs(W,ue,ne))),Pt)break;W=W.return}0<_e.length&&(ae=new ie(ae,Ne,null,r,ce),he.push({event:ae,listeners:_e}))}}if((n&7)===0){e:{if(ae=e==="mouseover"||e==="pointerover",ie=e==="mouseout"||e==="pointerout",ae&&r!==oi&&(Ne=r.relatedTarget||r.fromElement)&&(cn(Ne)||Ne[St]))break e;if((ie||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,ie?(Ne=r.relatedTarget||r.toElement,ie=re,Ne=Ne?cn(Ne):null,Ne!==null&&(Pt=c(Ne),_e=Ne.tag,Ne!==Pt||_e!==5&&_e!==27&&_e!==6)&&(Ne=null)):(ie=null,Ne=re),ie!==Ne)){if(_e=Qp,ue="onMouseLeave",ee="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Gp,ue="onPointerLeave",ee="onPointerEnter",W="pointer"),Pt=ie==null?ae:Vn(ie),ne=Ne==null?ae:Vn(Ne),ae=new _e(ue,W+"leave",ie,r,ce),ae.target=Pt,ae.relatedTarget=ne,ue=null,cn(ce)===re&&(_e=new _e(ee,W+"enter",Ne,r,ce),_e.target=ne,_e.relatedTarget=Pt,ue=_e),Pt=ue,ie&&Ne)t:{for(_e=ie,ee=Ne,W=0,ne=_e;ne;ne=Ii(ne))W++;for(ne=0,ue=ee;ue;ue=Ii(ue))ne++;for(;0<W-ne;)_e=Ii(_e),W--;for(;0<ne-W;)ee=Ii(ee),ne--;for(;W--;){if(_e===ee||ee!==null&&_e===ee.alternate)break t;_e=Ii(_e),ee=Ii(ee)}_e=null}else _e=null;ie!==null&&P0(he,ae,ie,_e,!1),Ne!==null&&Pt!==null&&P0(he,Pt,Ne,_e,!0)}}e:{if(ae=re?Vn(re):window,ie=ae.nodeName&&ae.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ae.type==="file")var ve=tm;else if(Jp(ae))if(nm)ve=ZA;else{ve=qA;var lt=WA}else ie=ae.nodeName,!ie||ie.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?re&&ni(re.elementType)&&(ve=tm):ve=VA;if(ve&&(ve=ve(e,re))){em(he,ve,r,ce);break e}lt&&lt(e,ae,re),e==="focusout"&&re&&ae.type==="number"&&re.memoizedProps.value!=null&&Yr(ae,"number",ae.value)}switch(lt=re?Vn(re):window,e){case"focusin":(Jp(lt)||lt.contentEditable==="true")&&(ii=lt,rd=re,As=null);break;case"focusout":As=rd=ii=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,um(he,r,ce);break;case"selectionchange":if(JA)break;case"keydown":case"keyup":um(he,r,ce)}var Me;if(ed)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ai?Zp(e,r)&&(Be="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Be="onCompositionStart");Be&&(Wp&&r.locale!=="ko"&&(ai||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ai&&(Me=ye()):(Zo=ce,ri="value"in Zo?Zo.value:Zo.textContent,ai=!0)),lt=Dc(re,Be),0<lt.length&&(Be=new Fp(Be,e,null,r,ce),he.push({event:Be,listeners:lt}),Me?Be.data=Me:(Me=Kp(r),Me!==null&&(Be.data=Me)))),(Me=UA?XA(e,r):QA(e,r))&&(Be=Dc(re,"onBeforeInput"),0<Be.length&&(lt=new Fp("onBeforeInput","beforeinput",null,r,ce),he.push({event:lt,listeners:Be}),lt.data=Me)),Bw(he,e,re,r,ce)}j0(he,n)})}function qs(e,n,r){return{instance:e,listener:n,currentTarget:r}}function Dc(e,n){for(var r=n+"Capture",s=[];e!==null;){var d=e,y=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||y===null||(d=Ia(e,r),d!=null&&s.unshift(qs(e,d,y)),d=Ia(e,n),d!=null&&s.push(qs(e,d,y))),e.tag===3)return s;e=e.return}return[]}function Ii(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function P0(e,n,r,s,d){for(var y=n._reactName,T=[];r!==null&&r!==s;){var B=r,G=B.alternate,re=B.stateNode;if(B=B.tag,G!==null&&G===s)break;B!==5&&B!==26&&B!==27||re===null||(G=re,d?(re=Ia(r,y),re!=null&&T.unshift(qs(r,re,G))):d||(re=Ia(r,y),re!=null&&T.push(qs(r,re,G)))),r=r.return}T.length!==0&&e.push({event:n,listeners:T})}var Lw=/\r\n?/g,Hw=/\u0000|\uFFFD/g;function z0(e){return(typeof e=="string"?e:""+e).replace(Lw,`
`).replace(Hw,"")}function N0(e,n){return n=z0(n),z0(e)===n}function jc(){}function Bt(e,n,r,s,d,y){switch(r){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||mr(e,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&mr(e,""+s);break;case"className":xt(e,"class",s);break;case"tabIndex":xt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":xt(e,r,s);break;case"style":fs(e,s,y);break;case"data":if(n!=="object"){xt(e,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||r!=="href")){e.removeAttribute(r);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=Ta(""+s),e.setAttribute(r,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(n!=="input"&&Bt(e,n,"name",d.name,d,null),Bt(e,n,"formEncType",d.formEncType,d,null),Bt(e,n,"formMethod",d.formMethod,d,null),Bt(e,n,"formTarget",d.formTarget,d,null)):(Bt(e,n,"encType",d.encType,d,null),Bt(e,n,"method",d.method,d,null),Bt(e,n,"target",d.target,d,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(r);break}s=Ta(""+s),e.setAttribute(r,s);break;case"onClick":s!=null&&(e.onclick=jc);break;case"onScroll":s!=null&&ft("scroll",e);break;case"onScrollEnd":s!=null&&ft("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(r=s.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}r=Ta(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""+s):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":s===!0?e.setAttribute(r,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(r,s):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(r,s):e.removeAttribute(r);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(r):e.setAttribute(r,s);break;case"popover":ft("beforetoggle",e),ft("toggle",e),Hr(e,"popover",s);break;case"xlinkActuate":de(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":de(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":de(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":de(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":de(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":de(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":de(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":de(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":de(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Hr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ul.get(r)||r,Hr(e,r,s))}}function Tf(e,n,r,s,d,y){switch(r){case"style":fs(e,s,y);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(r=s.__html,r!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof s=="string"?mr(e,s):(typeof s=="number"||typeof s=="bigint")&&mr(e,""+s);break;case"onScroll":s!=null&&ft("scroll",e);break;case"onScrollEnd":s!=null&&ft("scrollend",e);break;case"onClick":s!=null&&(e.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yt.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),n=r.slice(2,d?r.length-7:void 0),y=e[wt]||null,y=y!=null?y[r]:null,typeof y=="function"&&e.removeEventListener(n,y,d),typeof s=="function")){typeof y!="function"&&y!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(n,s,d);break e}r in e?e[r]=s:s===!0?e.setAttribute(r,""):Hr(e,r,s)}}}function On(e,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",e),ft("load",e);var s=!1,d=!1,y;for(y in r)if(r.hasOwnProperty(y)){var T=r[y];if(T!=null)switch(y){case"src":s=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(e,n,y,T,r,null)}}d&&Bt(e,n,"srcSet",r.srcSet,r,null),s&&Bt(e,n,"src",r.src,r,null);return;case"input":ft("invalid",e);var B=y=T=d=null,G=null,re=null;for(s in r)if(r.hasOwnProperty(s)){var ce=r[s];if(ce!=null)switch(s){case"name":d=ce;break;case"type":T=ce;break;case"checked":G=ce;break;case"defaultChecked":re=ce;break;case"value":y=ce;break;case"defaultValue":B=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,n));break;default:Bt(e,n,s,ce,r,null)}}$o(e,y,B,G,re,T,d,!1),Mt(e);return;case"select":ft("invalid",e),s=T=y=null;for(d in r)if(r.hasOwnProperty(d)&&(B=r[d],B!=null))switch(d){case"value":y=B;break;case"defaultValue":T=B;break;case"multiple":s=B;default:Bt(e,n,d,B,r,null)}n=y,r=T,e.multiple=!!s,n!=null?Uo(e,!!s,n,!1):r!=null&&Uo(e,!!s,r,!0);return;case"textarea":ft("invalid",e),y=d=s=null;for(T in r)if(r.hasOwnProperty(T)&&(B=r[T],B!=null))switch(T){case"value":s=B;break;case"defaultValue":d=B;break;case"children":y=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(91));break;default:Bt(e,n,T,B,r,null)}us(e,s,d,y),Mt(e);return;case"option":for(G in r)if(r.hasOwnProperty(G)&&(s=r[G],s!=null))switch(G){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Bt(e,n,G,s,r,null)}return;case"dialog":ft("beforetoggle",e),ft("toggle",e),ft("cancel",e),ft("close",e);break;case"iframe":case"object":ft("load",e);break;case"video":case"audio":for(s=0;s<Ws.length;s++)ft(Ws[s],e);break;case"image":ft("error",e),ft("load",e);break;case"details":ft("toggle",e);break;case"embed":case"source":case"link":ft("error",e),ft("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in r)if(r.hasOwnProperty(re)&&(s=r[re],s!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(e,n,re,s,r,null)}return;default:if(ni(n)){for(ce in r)r.hasOwnProperty(ce)&&(s=r[ce],s!==void 0&&Tf(e,n,ce,s,r,void 0));return}}for(B in r)r.hasOwnProperty(B)&&(s=r[B],s!=null&&Bt(e,n,B,s,r,null))}function Yw(e,n,r,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,y=null,T=null,B=null,G=null,re=null,ce=null;for(ie in r){var he=r[ie];if(r.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":G=he;default:s.hasOwnProperty(ie)||Bt(e,n,ie,null,s,he)}}for(var ae in s){var ie=s[ae];if(he=r[ae],s.hasOwnProperty(ae)&&(ie!=null||he!=null))switch(ae){case"type":y=ie;break;case"name":d=ie;break;case"checked":re=ie;break;case"defaultChecked":ce=ie;break;case"value":T=ie;break;case"defaultValue":B=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,n));break;default:ie!==he&&Bt(e,n,ae,ie,s,he)}}Ln(e,T,B,G,re,ce,y,d);return;case"select":ie=T=B=ae=null;for(y in r)if(G=r[y],r.hasOwnProperty(y)&&G!=null)switch(y){case"value":break;case"multiple":ie=G;default:s.hasOwnProperty(y)||Bt(e,n,y,null,s,G)}for(d in s)if(y=s[d],G=r[d],s.hasOwnProperty(d)&&(y!=null||G!=null))switch(d){case"value":ae=y;break;case"defaultValue":B=y;break;case"multiple":T=y;default:y!==G&&Bt(e,n,d,y,s,G)}n=B,r=T,s=ie,ae!=null?Uo(e,!!r,ae,!1):!!s!=!!r&&(n!=null?Uo(e,!!r,n,!0):Uo(e,!!r,r?[]:"",!1));return;case"textarea":ie=ae=null;for(B in r)if(d=r[B],r.hasOwnProperty(B)&&d!=null&&!s.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Bt(e,n,B,null,s,d)}for(T in s)if(d=s[T],y=r[T],s.hasOwnProperty(T)&&(d!=null||y!=null))switch(T){case"value":ae=d;break;case"defaultValue":ie=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==y&&Bt(e,n,T,d,s,y)}cs(e,ae,ie);return;case"option":for(var Ne in r)if(ae=r[Ne],r.hasOwnProperty(Ne)&&ae!=null&&!s.hasOwnProperty(Ne))switch(Ne){case"selected":e.selected=!1;break;default:Bt(e,n,Ne,null,s,ae)}for(G in s)if(ae=s[G],ie=r[G],s.hasOwnProperty(G)&&ae!==ie&&(ae!=null||ie!=null))switch(G){case"selected":e.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Bt(e,n,G,ae,s,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in r)ae=r[_e],r.hasOwnProperty(_e)&&ae!=null&&!s.hasOwnProperty(_e)&&Bt(e,n,_e,null,s,ae);for(re in s)if(ae=s[re],ie=r[re],s.hasOwnProperty(re)&&ae!==ie&&(ae!=null||ie!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,n));break;default:Bt(e,n,re,ae,s,ie)}return;default:if(ni(n)){for(var Pt in r)ae=r[Pt],r.hasOwnProperty(Pt)&&ae!==void 0&&!s.hasOwnProperty(Pt)&&Tf(e,n,Pt,void 0,s,ae);for(ce in s)ae=s[ce],ie=r[ce],!s.hasOwnProperty(ce)||ae===ie||ae===void 0&&ie===void 0||Tf(e,n,ce,ae,s,ie);return}}for(var ee in r)ae=r[ee],r.hasOwnProperty(ee)&&ae!=null&&!s.hasOwnProperty(ee)&&Bt(e,n,ee,null,s,ae);for(he in s)ae=s[he],ie=r[he],!s.hasOwnProperty(he)||ae===ie||ae==null&&ie==null||Bt(e,n,he,ae,s,ie)}var If=null,Of=null;function Bc(e){return e.nodeType===9?e:e.ownerDocument}function L0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function H0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function _f(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Df=null;function $w(){var e=window.event;return e&&e.type==="popstate"?e===Df?!1:(Df=e,!0):(Df=null,!1)}var Y0=typeof setTimeout=="function"?setTimeout:void 0,Uw=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,Xw=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(e){return $0.resolve(null).then(e).catch(Qw)}:Y0;function Qw(e){setTimeout(function(){throw e})}function ia(e){return e==="head"}function U0(e,n){var r=n,s=0,d=0;do{var y=r.nextSibling;if(e.removeChild(r),y&&y.nodeType===8)if(r=y.data,r==="/$"){if(0<s&&8>s){r=s;var T=e.ownerDocument;if(r&1&&Vs(T.documentElement),r&2&&Vs(T.body),r&4)for(r=T.head,Vs(r),T=r.firstChild;T;){var B=T.nextSibling,G=T.nodeName;T[Ao]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&T.rel.toLowerCase()==="stylesheet"||r.removeChild(T),T=B}}if(d===0){e.removeChild(y),rl(n);return}d--}else r==="$"||r==="$?"||r==="$!"?d++:s=r.charCodeAt(0)-48;else s=0;r=y}while(r);rl(n)}function jf(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":jf(r),pr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Fw(e,n,r,s){for(;e.nodeType===1;){var d=r;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Ao])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(y=e.getAttribute("rel"),y==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(y!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(y=e.getAttribute("src"),(y!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&y&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var y=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===y)return e}else return e;if(e=Fo(e.nextSibling),e===null)break}return null}function Gw(e,n,r){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Fo(e.nextSibling),e===null))return null;return e}function Bf(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ww(e,n){var r=e.ownerDocument;if(e.data!=="$?"||r.readyState==="complete")n();else{var s=function(){n(),r.removeEventListener("DOMContentLoaded",s)};r.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Fo(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var Pf=null;function X0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}function Q0(e,n,r){switch(n=Bc(r),e){case"html":if(e=n.documentElement,!e)throw Error(i(452));return e;case"head":if(e=n.head,!e)throw Error(i(453));return e;case"body":if(e=n.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Vs(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);pr(e)}var ko=new Map,F0=new Set;function Pc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var kr=H.d;H.d={f:qw,r:Vw,D:Zw,C:Kw,L:Jw,m:eC,X:nC,S:tC,M:oC};function qw(){var e=kr.f(),n=Rc();return e||n}function Vw(e){var n=oo(e);n!==null&&n.tag===5&&n.type==="form"?fg(n):kr.r(e)}var Oi=typeof document>"u"?null:document;function G0(e,n,r){var s=Oi;if(s&&typeof n=="string"&&n){var d=bt(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),F0.has(d)||(F0.add(d),e={rel:e,crossOrigin:r,href:n},s.querySelector(d)===null&&(n=s.createElement("link"),On(n,"link",e),Ft(n),s.head.appendChild(n)))}}function Zw(e){kr.D(e),G0("dns-prefetch",e,null)}function Kw(e,n){kr.C(e,n),G0("preconnect",e,n)}function Jw(e,n,r){kr.L(e,n,r);var s=Oi;if(s&&e&&n){var d='link[rel="preload"][as="'+bt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+bt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+bt(r.imageSizes)+'"]')):d+='[href="'+bt(e)+'"]';var y=d;switch(n){case"style":y=_i(e);break;case"script":y=Di(e)}ko.has(y)||(e=g({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:e,as:n},r),ko.set(y,e),s.querySelector(d)!==null||n==="style"&&s.querySelector(Zs(y))||n==="script"&&s.querySelector(Ks(y))||(n=s.createElement("link"),On(n,"link",e),Ft(n),s.head.appendChild(n)))}}function eC(e,n){kr.m(e,n);var r=Oi;if(r&&e){var s=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+bt(s)+'"][href="'+bt(e)+'"]',y=d;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Di(e)}if(!ko.has(y)&&(e=g({rel:"modulepreload",href:e},n),ko.set(y,e),r.querySelector(d)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ks(y)))return}s=r.createElement("link"),On(s,"link",e),Ft(s),r.head.appendChild(s)}}}function tC(e,n,r){kr.S(e,n,r);var s=Oi;if(s&&e){var d=Xt(s).hoistableStyles,y=_i(e);n=n||"default";var T=d.get(y);if(!T){var B={loading:0,preload:null};if(T=s.querySelector(Zs(y)))B.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":n},r),(r=ko.get(y))&&zf(e,r);var G=T=s.createElement("link");Ft(G),On(G,"link",e),G._p=new Promise(function(re,ce){G.onload=re,G.onerror=ce}),G.addEventListener("load",function(){B.loading|=1}),G.addEventListener("error",function(){B.loading|=2}),B.loading|=4,zc(T,n,s)}T={type:"stylesheet",instance:T,count:1,state:B},d.set(y,T)}}}function nC(e,n){kr.X(e,n);var r=Oi;if(r&&e){var s=Xt(r).hoistableScripts,d=Di(e),y=s.get(d);y||(y=r.querySelector(Ks(d)),y||(e=g({src:e,async:!0},n),(n=ko.get(d))&&Nf(e,n),y=r.createElement("script"),Ft(y),On(y,"link",e),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},s.set(d,y))}}function oC(e,n){kr.M(e,n);var r=Oi;if(r&&e){var s=Xt(r).hoistableScripts,d=Di(e),y=s.get(d);y||(y=r.querySelector(Ks(d)),y||(e=g({src:e,async:!0,type:"module"},n),(n=ko.get(d))&&Nf(e,n),y=r.createElement("script"),Ft(y),On(y,"link",e),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},s.set(d,y))}}function W0(e,n,r,s){var d=(d=oe.current)?Pc(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=_i(r.href),r=Xt(d).hoistableStyles,s=r.get(n),s||(s={type:"style",instance:null,count:0,state:null},r.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=_i(r.href);var y=Xt(d).hoistableStyles,T=y.get(e);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(e,T),(y=d.querySelector(Zs(e)))&&!y._p&&(T.instance=y,T.state.loading=5),ko.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ko.set(e,r),y||rC(d,e,r,T.state))),n&&s===null)throw Error(i(528,""));return T}if(n&&s!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Di(r),r=Xt(d).hoistableScripts,s=r.get(n),s||(s={type:"script",instance:null,count:0,state:null},r.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function _i(e){return'href="'+bt(e)+'"'}function Zs(e){return'link[rel="stylesheet"]['+e+"]"}function q0(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function rC(e,n,r,s){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=e.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),On(n,"link",r),Ft(n),e.head.appendChild(n))}function Di(e){return'[src="'+bt(e)+'"]'}function Ks(e){return"script[async]"+e}function V0(e,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var s=e.querySelector('style[data-href~="'+bt(r.href)+'"]');if(s)return n.instance=s,Ft(s),s;var d=g({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ft(s),On(s,"style",d),zc(s,r.precedence,e),n.instance=s;case"stylesheet":d=_i(r.href);var y=e.querySelector(Zs(d));if(y)return n.state.loading|=4,n.instance=y,Ft(y),y;s=q0(r),(d=ko.get(d))&&zf(s,d),y=(e.ownerDocument||e).createElement("link"),Ft(y);var T=y;return T._p=new Promise(function(B,G){T.onload=B,T.onerror=G}),On(y,"link",s),n.state.loading|=4,zc(y,r.precedence,e),n.instance=y;case"script":return y=Di(r.src),(d=e.querySelector(Ks(y)))?(n.instance=d,Ft(d),d):(s=r,(d=ko.get(y))&&(s=g({},r),Nf(s,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ft(d),On(d,"link",s),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,zc(s,r.precedence,e));return n.instance}function zc(e,n,r){for(var s=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=s.length?s[s.length-1]:null,y=d,T=0;T<s.length;T++){var B=s[T];if(B.dataset.precedence===n)y=B;else if(y!==d)break}y?y.parentNode.insertBefore(e,y.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(e,n.firstChild))}function zf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Nf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Nc=null;function Z0(e,n,r){if(Nc===null){var s=new Map,d=Nc=new Map;d.set(r,s)}else d=Nc,s=d.get(r),s||(s=new Map,d.set(r,s));if(s.has(e))return s;for(s.set(e,null),r=r.getElementsByTagName(e),d=0;d<r.length;d++){var y=r[d];if(!(y[Ao]||y[pt]||e==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(n)||"";T=e+T;var B=s.get(T);B?B.push(y):s.set(T,[y])}}return s}function K0(e,n,r){e=e.ownerDocument||e,e.head.insertBefore(r,n==="title"?e.querySelector("head > title"):null)}function aC(e,n,r){if(r===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function J0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Js=null;function iC(){}function sC(e,n,r){if(Js===null)throw Error(i(475));var s=Js;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var d=_i(r.href),y=e.querySelector(Zs(d));if(y){e=y._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Lc.bind(s),e.then(s,s)),n.state.loading|=4,n.instance=y,Ft(y);return}y=e.ownerDocument||e,r=q0(r),(d=ko.get(d))&&zf(r,d),y=y.createElement("link"),Ft(y);var T=y;T._p=new Promise(function(B,G){T.onload=B,T.onerror=G}),On(y,"link",r),n.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(s.count++,n=Lc.bind(s),e.addEventListener("load",n),e.addEventListener("error",n))}}function lC(){if(Js===null)throw Error(i(475));var e=Js;return e.stylesheets&&e.count===0&&Lf(e,e.stylesheets),0<e.count?function(n){var r=setTimeout(function(){if(e.stylesheets&&Lf(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r)}}:null}function Lc(){if(this.count--,this.count===0){if(this.stylesheets)Lf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hc=null;function Lf(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hc=new Map,n.forEach(cC,e),Hc=null,Lc.call(e))}function cC(e,n){if(!(n.state.loading&4)){var r=Hc.get(e);if(r)var s=r.get(null);else{r=new Map,Hc.set(e,r);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<d.length;y++){var T=d[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(r.set(T.dataset.precedence,T),s=T)}s&&r.set(null,s)}d=n.instance,T=d.getAttribute("data-precedence"),y=r.get(T)||s,y===s&&r.set(null,d),r.set(T,d),this.count++,s=Lc.bind(this),d.addEventListener("load",s),d.addEventListener("error",s),y?y.parentNode.insertBefore(d,y.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var el={$$typeof:E,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function uC(e,n,r,s,d,y,T,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.hiddenUpdates=_t(null),this.identifierPrefix=s,this.onUncaughtError=d,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function ey(e,n,r,s,d,y,T,B,G,re,ce,he){return e=new uC(e,n,r,T,B,G,re,he),n=1,y===!0&&(n|=24),y=ao(3,null,null,n),e.current=y,y.stateNode=e,n=bd(),n.refCount++,e.pooledCache=n,n.refCount++,y.memoizedState={element:s,isDehydrated:r,cache:n},Cd(y),e}function ty(e){return e?(e=ui,e):ui}function ny(e,n,r,s,d,y){d=ty(d),s.context===null?s.context=d:s.pendingContext=d,s=Gr(n),s.payload={element:r},y=y===void 0?null:y,y!==null&&(s.callback=y),r=Wr(e,s,n),r!==null&&(uo(r,e,n),Is(r,e,n))}function oy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Hf(e,n){oy(e,n),(e=e.alternate)&&oy(e,n)}function ry(e){if(e.tag===13){var n=ci(e,67108864);n!==null&&uo(n,e,67108864),Hf(e,67108864)}}var Yc=!0;function dC(e,n,r,s){var d=_.T;_.T=null;var y=H.p;try{H.p=2,Yf(e,n,r,s)}finally{H.p=y,_.T=d}}function fC(e,n,r,s){var d=_.T;_.T=null;var y=H.p;try{H.p=8,Yf(e,n,r,s)}finally{H.p=y,_.T=d}}function Yf(e,n,r,s){if(Yc){var d=$f(s);if(d===null)kf(e,n,s,$c,r),iy(e,s);else if(pC(d,e,n,r,s))s.stopPropagation();else if(iy(e,s),n&4&&-1<hC.indexOf(e)){for(;d!==null;){var y=oo(d);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=ct(y.pendingLanes);if(T!==0){var B=y;for(B.pendingLanes|=2,B.entangledLanes|=2;T;){var G=1<<31-pe(T);B.entanglements[1]|=G,T&=~G}nr(y),(It&6)===0&&(Ec=Pe()+500,Gs(0))}}break;case 13:B=ci(y,2),B!==null&&uo(B,y,2),Rc(),Hf(y,2)}if(y=$f(s),y===null&&kf(e,n,s,$c,r),y===d)break;d=y}d!==null&&s.stopPropagation()}else kf(e,n,s,null,r)}}function $f(e){return e=hs(e),Uf(e)}var $c=null;function Uf(e){if($c=null,e=cn(e),e!==null){var n=c(e);if(n===null)e=null;else{var r=n.tag;if(r===13){if(e=u(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return $c=e,null}function ay(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case At:return 2;case zt:return 8;case Qe:case Re:return 32;case Xe:return 268435456;default:return 32}default:return 32}}var Xf=!1,sa=null,la=null,ca=null,tl=new Map,nl=new Map,ua=[],hC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iy(e,n){switch(e){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":tl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(n.pointerId)}}function ol(e,n,r,s,d,y){return e===null||e.nativeEvent!==y?(e={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:y,targetContainers:[d]},n!==null&&(n=oo(n),n!==null&&ry(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function pC(e,n,r,s,d){switch(n){case"focusin":return sa=ol(sa,e,n,r,s,d),!0;case"dragenter":return la=ol(la,e,n,r,s,d),!0;case"mouseover":return ca=ol(ca,e,n,r,s,d),!0;case"pointerover":var y=d.pointerId;return tl.set(y,ol(tl.get(y)||null,e,n,r,s,d)),!0;case"gotpointercapture":return y=d.pointerId,nl.set(y,ol(nl.get(y)||null,e,n,r,s,d)),!0}return!1}function sy(e){var n=cn(e.target);if(n!==null){var r=c(n);if(r!==null){if(n=r.tag,n===13){if(n=u(r),n!==null){e.blockedOn=n,no(e.priority,function(){if(r.tag===13){var s=co();s=Bn(s);var d=ci(r,s);d!==null&&uo(d,r,s),Hf(r,s)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=$f(e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);oi=s,r.target.dispatchEvent(s),oi=null}else return n=oo(r),n!==null&&ry(n),e.blockedOn=r,!1;n.shift()}return!0}function ly(e,n,r){Uc(e)&&r.delete(n)}function mC(){Xf=!1,sa!==null&&Uc(sa)&&(sa=null),la!==null&&Uc(la)&&(la=null),ca!==null&&Uc(ca)&&(ca=null),tl.forEach(ly),nl.forEach(ly)}function Xc(e,n){e.blockedOn===n&&(e.blockedOn=null,Xf||(Xf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mC)))}var Qc=null;function cy(e){Qc!==e&&(Qc=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Qc===e&&(Qc=null);for(var n=0;n<e.length;n+=3){var r=e[n],s=e[n+1],d=e[n+2];if(typeof s!="function"){if(Uf(s||r)===null)continue;break}var y=oo(r);y!==null&&(e.splice(n,3),n-=3,$d(y,{pending:!0,data:d,method:r.method,action:s},s,d))}}))}function rl(e){function n(G){return Xc(G,e)}sa!==null&&Xc(sa,e),la!==null&&Xc(la,e),ca!==null&&Xc(ca,e),tl.forEach(n),nl.forEach(n);for(var r=0;r<ua.length;r++){var s=ua[r];s.blockedOn===e&&(s.blockedOn=null)}for(;0<ua.length&&(r=ua[0],r.blockedOn===null);)sy(r),r.blockedOn===null&&ua.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(s=0;s<r.length;s+=3){var d=r[s],y=r[s+1],T=d[wt]||null;if(typeof y=="function")T||cy(r);else if(T){var B=null;if(y&&y.hasAttribute("formAction")){if(d=y,T=y[wt]||null)B=T.formAction;else if(Uf(d)!==null)continue}else B=T.action;typeof B=="function"?r[s+1]=B:(r.splice(s,3),s-=3),cy(r)}}}function Qf(e){this._internalRoot=e}Fc.prototype.render=Qf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,s=co();ny(r,s,e,n,null,null)},Fc.prototype.unmount=Qf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;ny(e.current,2,null,e,null,null),Rc(),n[St]=null}};function Fc(e){this._internalRoot=e}Fc.prototype.unstable_scheduleHydration=function(e){if(e){var n=Lo();e={blockedOn:null,target:e,priority:n};for(var r=0;r<ua.length&&n!==0&&n<ua[r].priority;r++);ua.splice(r,0,e),r===0&&sy(e)}};var uy=o.version;if(uy!=="19.1.1")throw Error(i(527,uy,"19.1.1"));H.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(n),e=e!==null?h(e):null,e=e===null?null:e.stateNode,e};var gC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:_,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{Ze=Gc.inject(gC),Je=Gc}catch{}}return il.createRoot=function(e,n){if(!l(e))throw Error(i(299));var r=!1,s="",d=Mg,y=Rg,T=kg,B=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(y=n.onCaughtError),n.onRecoverableError!==void 0&&(T=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(B=n.unstable_transitionCallbacks)),n=ey(e,1,!1,null,null,r,s,d,y,T,B,null),e[St]=n.current,Rf(e),new Qf(n)},il.hydrateRoot=function(e,n,r){if(!l(e))throw Error(i(299));var s=!1,d="",y=Mg,T=Rg,B=kg,G=null,re=null;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(T=r.onCaughtError),r.onRecoverableError!==void 0&&(B=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(G=r.unstable_transitionCallbacks),r.formState!==void 0&&(re=r.formState)),n=ey(e,1,!0,n,r??null,s,d,y,T,B,G,re),n.context=ty(null),r=n.current,s=co(),s=Bn(s),d=Gr(s),d.callback=null,Wr(r,d,s),r=s,n.current.lanes=r,yn(n,r),nr(n),e[St]=n.current,Rf(e),new Fc(n)},il.version="19.1.1",il}var vy;function MC(){if(vy)return Wf.exports;vy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(o){console.error(o)}}return t(),Wf.exports=EC(),Wf.exports}var RC=MC();const kC=ju(RC),_n=[];for(let t=0;t<256;++t)_n.push((t+256).toString(16).slice(1));function TC(t,o=0){return(_n[t[o+0]]+_n[t[o+1]]+_n[t[o+2]]+_n[t[o+3]]+"-"+_n[t[o+4]]+_n[t[o+5]]+"-"+_n[t[o+6]]+_n[t[o+7]]+"-"+_n[t[o+8]]+_n[t[o+9]]+"-"+_n[t[o+10]]+_n[t[o+11]]+_n[t[o+12]]+_n[t[o+13]]+_n[t[o+14]]+_n[t[o+15]]).toLowerCase()}let Kf;const IC=new Uint8Array(16);function OC(){if(!Kf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Kf=crypto.getRandomValues.bind(crypto)}return Kf(IC)}const _C=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ay={randomUUID:_C};function DC(t,o,a){t=t||{};const i=t.random??t.rng?.()??OC();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,TC(i)}function to(t,o,a){return Ay.randomUUID&&!t?Ay.randomUUID():DC(t)}var nn=function(){return nn=Object.assign||function(o){for(var a,i=1,l=arguments.length;i<l;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},nn.apply(this,arguments)};function fb(t,o){var a={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&o.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(t);l<i.length;l++)o.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(t,i[l])&&(a[i[l]]=t[i[l]]);return a}function Cl(t,o,a){if(a||arguments.length===2)for(var i=0,l=o.length,c;i<l;i++)(c||!(i in o))&&(c||(c=Array.prototype.slice.call(o,0,i)),c[i]=o[i]);return t.concat(c||Array.prototype.slice.call(o))}var Qt="-ms-",bl="-moz-",Rt="-webkit-",hb="comm",Bu="rule",ap="decl",jC="@import",pb="@keyframes",BC="@layer",mb=Math.abs,ip=String.fromCharCode,Oh=Object.assign;function PC(t,o){return En(t,0)^45?(((o<<2^En(t,0))<<2^En(t,1))<<2^En(t,2))<<2^En(t,3):0}function gb(t){return t.trim()}function Or(t,o){return(t=o.exec(t))?t[0]:t}function Ke(t,o,a){return t.replace(o,a)}function su(t,o,a){return t.indexOf(o,a)}function En(t,o){return t.charCodeAt(o)|0}function qi(t,o,a){return t.slice(o,a)}function rr(t){return t.length}function yb(t){return t.length}function pl(t,o){return o.push(t),t}function zC(t,o){return t.map(o).join("")}function wy(t,o){return t.filter(function(a){return!Or(a,o)})}var Pu=1,Vi=1,xb=0,zo=0,fn=0,ns="";function zu(t,o,a,i,l,c,u,f){return{value:t,root:o,parent:a,type:i,props:l,children:c,line:Pu,column:Vi,length:u,return:"",siblings:f}}function ha(t,o){return Oh(zu("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},o)}function ji(t){for(;t.root;)t=ha(t.root,{children:[t]});pl(t,t.siblings)}function NC(){return fn}function LC(){return fn=zo>0?En(ns,--zo):0,Vi--,fn===10&&(Vi=1,Pu--),fn}function Wo(){return fn=zo<xb?En(ns,zo++):0,Vi++,fn===10&&(Vi=1,Pu++),fn}function qa(){return En(ns,zo)}function lu(){return zo}function Nu(t,o){return qi(ns,t,o)}function _h(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HC(t){return Pu=Vi=1,xb=rr(ns=t),zo=0,[]}function YC(t){return ns="",t}function Jf(t){return gb(Nu(zo-1,Dh(t===91?t+2:t===40?t+1:t)))}function $C(t){for(;(fn=qa())&&fn<33;)Wo();return _h(t)>2||_h(fn)>3?"":" "}function UC(t,o){for(;--o&&Wo()&&!(fn<48||fn>102||fn>57&&fn<65||fn>70&&fn<97););return Nu(t,lu()+(o<6&&qa()==32&&Wo()==32))}function Dh(t){for(;Wo();)switch(fn){case t:return zo;case 34:case 39:t!==34&&t!==39&&Dh(fn);break;case 40:t===41&&Dh(t);break;case 92:Wo();break}return zo}function XC(t,o){for(;Wo()&&t+fn!==57;)if(t+fn===84&&qa()===47)break;return"/*"+Nu(o,zo-1)+"*"+ip(t===47?t:Wo())}function QC(t){for(;!_h(qa());)Wo();return Nu(t,zo)}function FC(t){return YC(cu("",null,null,null,[""],t=HC(t),0,[0],t))}function cu(t,o,a,i,l,c,u,f,p){for(var h=0,g=0,m=u,b=0,w=0,C=0,A=1,S=1,R=1,M=0,E="",k=l,I=c,z=i,D=E;S;)switch(C=M,M=Wo()){case 40:if(C!=108&&En(D,m-1)==58){su(D+=Ke(Jf(M),"&","&\f"),"&\f",mb(h?f[h-1]:0))!=-1&&(R=-1);break}case 34:case 39:case 91:D+=Jf(M);break;case 9:case 10:case 13:case 32:D+=$C(C);break;case 92:D+=UC(lu()-1,7);continue;case 47:switch(qa()){case 42:case 47:pl(GC(XC(Wo(),lu()),o,a,p),p);break;default:D+="/"}break;case 123*A:f[h++]=rr(D)*R;case 125*A:case 59:case 0:switch(M){case 0:case 125:S=0;case 59+g:R==-1&&(D=Ke(D,/\f/g,"")),w>0&&rr(D)-m&&pl(w>32?Sy(D+";",i,a,m-1,p):Sy(Ke(D," ","")+";",i,a,m-2,p),p);break;case 59:D+=";";default:if(pl(z=Cy(D,o,a,h,g,l,f,E,k=[],I=[],m,c),c),M===123)if(g===0)cu(D,o,z,z,k,c,m,f,I);else switch(b===99&&En(D,3)===110?100:b){case 100:case 108:case 109:case 115:cu(t,z,z,i&&pl(Cy(t,z,z,0,0,l,f,E,l,k=[],m,I),I),l,I,m,f,i?k:I);break;default:cu(D,z,z,z,[""],I,0,f,I)}}h=g=w=0,A=R=1,E=D="",m=u;break;case 58:m=1+rr(D),w=C;default:if(A<1){if(M==123)--A;else if(M==125&&A++==0&&LC()==125)continue}switch(D+=ip(M),M*A){case 38:R=g>0?1:(D+="\f",-1);break;case 44:f[h++]=(rr(D)-1)*R,R=1;break;case 64:qa()===45&&(D+=Jf(Wo())),b=qa(),g=m=rr(E=D+=QC(lu())),M++;break;case 45:C===45&&rr(D)==2&&(A=0)}}return c}function Cy(t,o,a,i,l,c,u,f,p,h,g,m){for(var b=l-1,w=l===0?c:[""],C=yb(w),A=0,S=0,R=0;A<i;++A)for(var M=0,E=qi(t,b+1,b=mb(S=u[A])),k=t;M<C;++M)(k=gb(S>0?w[M]+" "+E:Ke(E,/&\f/g,w[M])))&&(p[R++]=k);return zu(t,o,a,l===0?Bu:f,p,h,g,m)}function GC(t,o,a,i){return zu(t,o,a,hb,ip(NC()),qi(t,2,-2),0,i)}function Sy(t,o,a,i,l){return zu(t,o,a,ap,qi(t,0,i),qi(t,i+1,-1),i,l)}function bb(t,o,a){switch(PC(t,o)){case 5103:return Rt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rt+t+t;case 4789:return bl+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Rt+t+bl+t+Qt+t+t;case 5936:switch(En(t,o+11)){case 114:return Rt+t+Qt+Ke(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Rt+t+Qt+Ke(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Rt+t+Qt+Ke(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Rt+t+Qt+t+t;case 6165:return Rt+t+Qt+"flex-"+t+t;case 5187:return Rt+t+Ke(t,/(\w+).+(:[^]+)/,Rt+"box-$1$2"+Qt+"flex-$1$2")+t;case 5443:return Rt+t+Qt+"flex-item-"+Ke(t,/flex-|-self/g,"")+(Or(t,/flex-|baseline/)?"":Qt+"grid-row-"+Ke(t,/flex-|-self/g,""))+t;case 4675:return Rt+t+Qt+"flex-line-pack"+Ke(t,/align-content|flex-|-self/g,"")+t;case 5548:return Rt+t+Qt+Ke(t,"shrink","negative")+t;case 5292:return Rt+t+Qt+Ke(t,"basis","preferred-size")+t;case 6060:return Rt+"box-"+Ke(t,"-grow","")+Rt+t+Qt+Ke(t,"grow","positive")+t;case 4554:return Rt+Ke(t,/([^-])(transform)/g,"$1"+Rt+"$2")+t;case 6187:return Ke(Ke(Ke(t,/(zoom-|grab)/,Rt+"$1"),/(image-set)/,Rt+"$1"),t,"")+t;case 5495:case 3959:return Ke(t,/(image-set\([^]*)/,Rt+"$1$`$1");case 4968:return Ke(Ke(t,/(.+:)(flex-)?(.*)/,Rt+"box-pack:$3"+Qt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rt+t+t;case 4200:if(!Or(t,/flex-|baseline/))return Qt+"grid-column-align"+qi(t,o)+t;break;case 2592:case 3360:return Qt+Ke(t,"template-","")+t;case 4384:case 3616:return a&&a.some(function(i,l){return o=l,Or(i.props,/grid-\w+-end/)})?~su(t+(a=a[o].value),"span",0)?t:Qt+Ke(t,"-start","")+t+Qt+"grid-row-span:"+(~su(a,"span",0)?Or(a,/\d+/):+Or(a,/\d+/)-+Or(t,/\d+/))+";":Qt+Ke(t,"-start","")+t;case 4896:case 4128:return a&&a.some(function(i){return Or(i.props,/grid-\w+-start/)})?t:Qt+Ke(Ke(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return Ke(t,/(.+)-inline(.+)/,Rt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rr(t)-1-o>6)switch(En(t,o+1)){case 109:if(En(t,o+4)!==45)break;case 102:return Ke(t,/(.+:)(.+)-([^]+)/,"$1"+Rt+"$2-$3$1"+bl+(En(t,o+3)==108?"$3":"$2-$3"))+t;case 115:return~su(t,"stretch",0)?bb(Ke(t,"stretch","fill-available"),o,a)+t:t}break;case 5152:case 5920:return Ke(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,l,c,u,f,p,h){return Qt+l+":"+c+h+(u?Qt+l+"-span:"+(f?p:+p-+c)+h:"")+t});case 4949:if(En(t,o+6)===121)return Ke(t,":",":"+Rt)+t;break;case 6444:switch(En(t,En(t,14)===45?18:11)){case 120:return Ke(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Rt+(En(t,14)===45?"inline-":"")+"box$3$1"+Rt+"$2$3$1"+Qt+"$2box$3")+t;case 100:return Ke(t,":",":"+Qt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ke(t,"scroll-","scroll-snap-")+t}return t}function gu(t,o){for(var a="",i=0;i<t.length;i++)a+=o(t[i],i,t,o)||"";return a}function WC(t,o,a,i){switch(t.type){case BC:if(t.children.length)break;case jC:case ap:return t.return=t.return||t.value;case hb:return"";case pb:return t.return=t.value+"{"+gu(t.children,i)+"}";case Bu:if(!rr(t.value=t.props.join(",")))return""}return rr(a=gu(t.children,i))?t.return=t.value+"{"+a+"}":""}function qC(t){var o=yb(t);return function(a,i,l,c){for(var u="",f=0;f<o;f++)u+=t[f](a,i,l,c)||"";return u}}function VC(t){return function(o){o.root||(o=o.return)&&t(o)}}function ZC(t,o,a,i){if(t.length>-1&&!t.return)switch(t.type){case ap:t.return=bb(t.value,t.length,a);return;case pb:return gu([ha(t,{value:Ke(t.value,"@","@"+Rt)})],i);case Bu:if(t.length)return zC(a=t.props,function(l){switch(Or(l,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ji(ha(t,{props:[Ke(l,/:(read-\w+)/,":"+bl+"$1")]})),ji(ha(t,{props:[l]})),Oh(t,{props:wy(a,i)});break;case"::placeholder":ji(ha(t,{props:[Ke(l,/:(plac\w+)/,":"+Rt+"input-$1")]})),ji(ha(t,{props:[Ke(l,/:(plac\w+)/,":"+bl+"$1")]})),ji(ha(t,{props:[Ke(l,/:(plac\w+)/,Qt+"input-$1")]})),ji(ha(t,{props:[l]})),Oh(t,{props:wy(a,i)});break}return""})}}var KC={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fo={},Zi=typeof process<"u"&&fo!==void 0&&(fo.REACT_APP_SC_ATTR||fo.SC_ATTR)||"data-styled",vb="active",Ab="data-styled-version",Lu="6.1.19",sp=`/*!sc*/
`,yu=typeof window<"u"&&typeof document<"u",JC=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&fo!==void 0&&fo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&fo.REACT_APP_SC_DISABLE_SPEEDY!==""?fo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&fo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&fo!==void 0&&fo.SC_DISABLE_SPEEDY!==void 0&&fo.SC_DISABLE_SPEEDY!==""&&fo.SC_DISABLE_SPEEDY!=="false"&&fo.SC_DISABLE_SPEEDY),Hu=Object.freeze([]),Ki=Object.freeze({});function eS(t,o,a){return a===void 0&&(a=Ki),t.theme!==a.theme&&t.theme||o||a.theme}var wb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),tS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,nS=/(^-|-$)/g;function Ey(t){return t.replace(tS,"-").replace(nS,"")}var oS=/(a)(d)/gi,Wc=52,My=function(t){return String.fromCharCode(t+(t>25?39:97))};function jh(t){var o,a="";for(o=Math.abs(t);o>Wc;o=o/Wc|0)a=My(o%Wc)+a;return(My(o%Wc)+a).replace(oS,"$1-$2")}var eh,Cb=5381,Qi=function(t,o){for(var a=o.length;a;)t=33*t^o.charCodeAt(--a);return t},Sb=function(t){return Qi(Cb,t)};function rS(t){return jh(Sb(t)>>>0)}function aS(t){return t.displayName||t.name||"Component"}function th(t){return typeof t=="string"&&!0}var Eb=typeof Symbol=="function"&&Symbol.for,Mb=Eb?Symbol.for("react.memo"):60115,iS=Eb?Symbol.for("react.forward_ref"):60112,sS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Rb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cS=((eh={})[iS]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eh[Mb]=Rb,eh);function Ry(t){return("type"in(o=t)&&o.type.$$typeof)===Mb?Rb:"$$typeof"in t?cS[t.$$typeof]:sS;var o}var uS=Object.defineProperty,dS=Object.getOwnPropertyNames,ky=Object.getOwnPropertySymbols,fS=Object.getOwnPropertyDescriptor,hS=Object.getPrototypeOf,Ty=Object.prototype;function kb(t,o,a){if(typeof o!="string"){if(Ty){var i=hS(o);i&&i!==Ty&&kb(t,i,a)}var l=dS(o);ky&&(l=l.concat(ky(o)));for(var c=Ry(t),u=Ry(o),f=0;f<l.length;++f){var p=l[f];if(!(p in lS||a&&a[p]||u&&p in u||c&&p in c)){var h=fS(o,p);try{uS(t,p,h)}catch{}}}}return t}function Ji(t){return typeof t=="function"}function lp(t){return typeof t=="object"&&"styledComponentId"in t}function Wa(t,o){return t&&o?"".concat(t," ").concat(o):t||o||""}function Iy(t,o){if(t.length===0)return"";for(var a=t[0],i=1;i<t.length;i++)a+=t[i];return a}function Sl(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function Bh(t,o,a){if(a===void 0&&(a=!1),!a&&!Sl(t)&&!Array.isArray(t))return o;if(Array.isArray(o))for(var i=0;i<o.length;i++)t[i]=Bh(t[i],o[i]);else if(Sl(o))for(var i in o)t[i]=Bh(t[i],o[i]);return t}function cp(t,o){Object.defineProperty(t,"toString",{value:o})}function Ol(t){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(o.length>0?" Args: ".concat(o.join(", ")):""))}var pS=(function(){function t(o){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=o}return t.prototype.indexOfGroup=function(o){for(var a=0,i=0;i<o;i++)a+=this.groupSizes[i];return a},t.prototype.insertRules=function(o,a){if(o>=this.groupSizes.length){for(var i=this.groupSizes,l=i.length,c=l;o>=c;)if((c<<=1)<0)throw Ol(16,"".concat(o));this.groupSizes=new Uint32Array(c),this.groupSizes.set(i),this.length=c;for(var u=l;u<c;u++)this.groupSizes[u]=0}for(var f=this.indexOfGroup(o+1),p=(u=0,a.length);u<p;u++)this.tag.insertRule(f,a[u])&&(this.groupSizes[o]++,f++)},t.prototype.clearGroup=function(o){if(o<this.length){var a=this.groupSizes[o],i=this.indexOfGroup(o),l=i+a;this.groupSizes[o]=0;for(var c=i;c<l;c++)this.tag.deleteRule(i)}},t.prototype.getGroup=function(o){var a="";if(o>=this.length||this.groupSizes[o]===0)return a;for(var i=this.groupSizes[o],l=this.indexOfGroup(o),c=l+i,u=l;u<c;u++)a+="".concat(this.tag.getRule(u)).concat(sp);return a},t})(),uu=new Map,xu=new Map,du=1,qc=function(t){if(uu.has(t))return uu.get(t);for(;xu.has(du);)du++;var o=du++;return uu.set(t,o),xu.set(o,t),o},mS=function(t,o){du=o+1,uu.set(t,o),xu.set(o,t)},gS="style[".concat(Zi,"][").concat(Ab,'="').concat(Lu,'"]'),yS=new RegExp("^".concat(Zi,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),xS=function(t,o,a){for(var i,l=a.split(","),c=0,u=l.length;c<u;c++)(i=l[c])&&t.registerName(o,i)},bS=function(t,o){for(var a,i=((a=o.textContent)!==null&&a!==void 0?a:"").split(sp),l=[],c=0,u=i.length;c<u;c++){var f=i[c].trim();if(f){var p=f.match(yS);if(p){var h=0|parseInt(p[1],10),g=p[2];h!==0&&(mS(g,h),xS(t,g,p[3]),t.getTag().insertRules(h,l)),l.length=0}else l.push(f)}}},Oy=function(t){for(var o=document.querySelectorAll(gS),a=0,i=o.length;a<i;a++){var l=o[a];l&&l.getAttribute(Zi)!==vb&&(bS(t,l),l.parentNode&&l.parentNode.removeChild(l))}};function vS(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Tb=function(t){var o=document.head,a=t||o,i=document.createElement("style"),l=(function(f){var p=Array.from(f.querySelectorAll("style[".concat(Zi,"]")));return p[p.length-1]})(a),c=l!==void 0?l.nextSibling:null;i.setAttribute(Zi,vb),i.setAttribute(Ab,Lu);var u=vS();return u&&i.setAttribute("nonce",u),a.insertBefore(i,c),i},AS=(function(){function t(o){this.element=Tb(o),this.element.appendChild(document.createTextNode("")),this.sheet=(function(a){if(a.sheet)return a.sheet;for(var i=document.styleSheets,l=0,c=i.length;l<c;l++){var u=i[l];if(u.ownerNode===a)return u}throw Ol(17)})(this.element),this.length=0}return t.prototype.insertRule=function(o,a){try{return this.sheet.insertRule(a,o),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(o){this.sheet.deleteRule(o),this.length--},t.prototype.getRule=function(o){var a=this.sheet.cssRules[o];return a&&a.cssText?a.cssText:""},t})(),wS=(function(){function t(o){this.element=Tb(o),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(o,a){if(o<=this.length&&o>=0){var i=document.createTextNode(a);return this.element.insertBefore(i,this.nodes[o]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(o){this.element.removeChild(this.nodes[o]),this.length--},t.prototype.getRule=function(o){return o<this.length?this.nodes[o].textContent:""},t})(),CS=(function(){function t(o){this.rules=[],this.length=0}return t.prototype.insertRule=function(o,a){return o<=this.length&&(this.rules.splice(o,0,a),this.length++,!0)},t.prototype.deleteRule=function(o){this.rules.splice(o,1),this.length--},t.prototype.getRule=function(o){return o<this.length?this.rules[o]:""},t})(),_y=yu,SS={isServer:!yu,useCSSOMInjection:!JC},Ib=(function(){function t(o,a,i){o===void 0&&(o=Ki),a===void 0&&(a={});var l=this;this.options=nn(nn({},SS),o),this.gs=a,this.names=new Map(i),this.server=!!o.isServer,!this.server&&yu&&_y&&(_y=!1,Oy(this)),cp(this,function(){return(function(c){for(var u=c.getTag(),f=u.length,p="",h=function(m){var b=(function(R){return xu.get(R)})(m);if(b===void 0)return"continue";var w=c.names.get(b),C=u.getGroup(m);if(w===void 0||!w.size||C.length===0)return"continue";var A="".concat(Zi,".g").concat(m,'[id="').concat(b,'"]'),S="";w!==void 0&&w.forEach(function(R){R.length>0&&(S+="".concat(R,","))}),p+="".concat(C).concat(A,'{content:"').concat(S,'"}').concat(sp)},g=0;g<f;g++)h(g);return p})(l)})}return t.registerId=function(o){return qc(o)},t.prototype.rehydrate=function(){!this.server&&yu&&Oy(this)},t.prototype.reconstructWithOptions=function(o,a){return a===void 0&&(a=!0),new t(nn(nn({},this.options),o),this.gs,a&&this.names||void 0)},t.prototype.allocateGSInstance=function(o){return this.gs[o]=(this.gs[o]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(o=(function(a){var i=a.useCSSOMInjection,l=a.target;return a.isServer?new CS(l):i?new AS(l):new wS(l)})(this.options),new pS(o)));var o},t.prototype.hasNameForId=function(o,a){return this.names.has(o)&&this.names.get(o).has(a)},t.prototype.registerName=function(o,a){if(qc(o),this.names.has(o))this.names.get(o).add(a);else{var i=new Set;i.add(a),this.names.set(o,i)}},t.prototype.insertRules=function(o,a,i){this.registerName(o,a),this.getTag().insertRules(qc(o),i)},t.prototype.clearNames=function(o){this.names.has(o)&&this.names.get(o).clear()},t.prototype.clearRules=function(o){this.getTag().clearGroup(qc(o)),this.clearNames(o)},t.prototype.clearTag=function(){this.tag=void 0},t})(),ES=/&/g,MS=/^\s*\/\/.*$/gm;function Ob(t,o){return t.map(function(a){return a.type==="rule"&&(a.value="".concat(o," ").concat(a.value),a.value=a.value.replaceAll(",",",".concat(o," ")),a.props=a.props.map(function(i){return"".concat(o," ").concat(i)})),Array.isArray(a.children)&&a.type!=="@keyframes"&&(a.children=Ob(a.children,o)),a})}function RS(t){var o,a,i,l=Ki,c=l.options,u=c===void 0?Ki:c,f=l.plugins,p=f===void 0?Hu:f,h=function(b,w,C){return C.startsWith(a)&&C.endsWith(a)&&C.replaceAll(a,"").length>0?".".concat(o):b},g=p.slice();g.push(function(b){b.type===Bu&&b.value.includes("&")&&(b.props[0]=b.props[0].replace(ES,a).replace(i,h))}),u.prefix&&g.push(ZC),g.push(WC);var m=function(b,w,C,A){w===void 0&&(w=""),C===void 0&&(C=""),A===void 0&&(A="&"),o=A,a=w,i=new RegExp("\\".concat(a,"\\b"),"g");var S=b.replace(MS,""),R=FC(C||w?"".concat(C," ").concat(w," { ").concat(S," }"):S);u.namespace&&(R=Ob(R,u.namespace));var M=[];return gu(R,qC(g.concat(VC(function(E){return M.push(E)})))),M};return m.hash=p.length?p.reduce(function(b,w){return w.name||Ol(15),Qi(b,w.name)},Cb).toString():"",m}var kS=new Ib,Ph=RS(),_b=Ce.createContext({shouldForwardProp:void 0,styleSheet:kS,stylis:Ph});_b.Consumer;Ce.createContext(void 0);function Dy(){return x.useContext(_b)}var TS=(function(){function t(o,a){var i=this;this.inject=function(l,c){c===void 0&&(c=Ph);var u=i.name+c.hash;l.hasNameForId(i.id,u)||l.insertRules(i.id,u,c(i.rules,u,"@keyframes"))},this.name=o,this.id="sc-keyframes-".concat(o),this.rules=a,cp(this,function(){throw Ol(12,String(i.name))})}return t.prototype.getName=function(o){return o===void 0&&(o=Ph),this.name+o.hash},t})(),IS=function(t){return t>="A"&&t<="Z"};function jy(t){for(var o="",a=0;a<t.length;a++){var i=t[a];if(a===1&&i==="-"&&t[0]==="-")return t;IS(i)?o+="-"+i.toLowerCase():o+=i}return o.startsWith("ms-")?"-"+o:o}var Db=function(t){return t==null||t===!1||t===""},jb=function(t){var o,a,i=[];for(var l in t){var c=t[l];t.hasOwnProperty(l)&&!Db(c)&&(Array.isArray(c)&&c.isCss||Ji(c)?i.push("".concat(jy(l),":"),c,";"):Sl(c)?i.push.apply(i,Cl(Cl(["".concat(l," {")],jb(c),!1),["}"],!1)):i.push("".concat(jy(l),": ").concat((o=l,(a=c)==null||typeof a=="boolean"||a===""?"":typeof a!="number"||a===0||o in KC||o.startsWith("--")?String(a).trim():"".concat(a,"px")),";")))}return i};function Va(t,o,a,i){if(Db(t))return[];if(lp(t))return[".".concat(t.styledComponentId)];if(Ji(t)){if(!Ji(c=t)||c.prototype&&c.prototype.isReactComponent||!o)return[t];var l=t(o);return Va(l,o,a,i)}var c;return t instanceof TS?a?(t.inject(a,i),[t.getName(i)]):[t]:Sl(t)?jb(t):Array.isArray(t)?Array.prototype.concat.apply(Hu,t.map(function(u){return Va(u,o,a,i)})):[t.toString()]}function OS(t){for(var o=0;o<t.length;o+=1){var a=t[o];if(Ji(a)&&!lp(a))return!1}return!0}var _S=Sb(Lu),DS=(function(){function t(o,a,i){this.rules=o,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&OS(o),this.componentId=a,this.baseHash=Qi(_S,a),this.baseStyle=i,Ib.registerId(a)}return t.prototype.generateAndInjectStyles=function(o,a,i){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(o,a,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&a.hasNameForId(this.componentId,this.staticRulesId))l=Wa(l,this.staticRulesId);else{var c=Iy(Va(this.rules,o,a,i)),u=jh(Qi(this.baseHash,c)>>>0);if(!a.hasNameForId(this.componentId,u)){var f=i(c,".".concat(u),void 0,this.componentId);a.insertRules(this.componentId,u,f)}l=Wa(l,u),this.staticRulesId=u}else{for(var p=Qi(this.baseHash,i.hash),h="",g=0;g<this.rules.length;g++){var m=this.rules[g];if(typeof m=="string")h+=m;else if(m){var b=Iy(Va(m,o,a,i));p=Qi(p,b+g),h+=b}}if(h){var w=jh(p>>>0);a.hasNameForId(this.componentId,w)||a.insertRules(this.componentId,w,i(h,".".concat(w),void 0,this.componentId)),l=Wa(l,w)}}return l},t})(),Bb=Ce.createContext(void 0);Bb.Consumer;var nh={};function jS(t,o,a){var i=lp(t),l=t,c=!th(t),u=o.attrs,f=u===void 0?Hu:u,p=o.componentId,h=p===void 0?(function(k,I){var z=typeof k!="string"?"sc":Ey(k);nh[z]=(nh[z]||0)+1;var D="".concat(z,"-").concat(rS(Lu+z+nh[z]));return I?"".concat(I,"-").concat(D):D})(o.displayName,o.parentComponentId):p,g=o.displayName,m=g===void 0?(function(k){return th(k)?"styled.".concat(k):"Styled(".concat(aS(k),")")})(t):g,b=o.displayName&&o.componentId?"".concat(Ey(o.displayName),"-").concat(o.componentId):o.componentId||h,w=i&&l.attrs?l.attrs.concat(f).filter(Boolean):f,C=o.shouldForwardProp;if(i&&l.shouldForwardProp){var A=l.shouldForwardProp;if(o.shouldForwardProp){var S=o.shouldForwardProp;C=function(k,I){return A(k,I)&&S(k,I)}}else C=A}var R=new DS(a,b,i?l.componentStyle:void 0);function M(k,I){return(function(z,D,j){var $=z.attrs,F=z.componentStyle,X=z.defaultProps,Z=z.foldedComponentIds,K=z.styledComponentId,te=z.target,Q=Ce.useContext(Bb),_=Dy(),H=z.shouldForwardProp||_.shouldForwardProp,N=eS(D,Q,X)||Ki,P=(function(J,oe,le){for(var fe,ge=nn(nn({},oe),{className:void 0,theme:le}),Se=0;Se<J.length;Se+=1){var De=Ji(fe=J[Se])?fe(ge):fe;for(var xe in De)ge[xe]=xe==="className"?Wa(ge[xe],De[xe]):xe==="style"?nn(nn({},ge[xe]),De[xe]):De[xe]}return oe.className&&(ge.className=Wa(ge.className,oe.className)),ge})($,D,N),O=P.as||te,U={};for(var L in P)P[L]===void 0||L[0]==="$"||L==="as"||L==="theme"&&P.theme===N||(L==="forwardedAs"?U.as=P.forwardedAs:H&&!H(L,O)||(U[L]=P[L]));var Y=(function(J,oe){var le=Dy(),fe=J.generateAndInjectStyles(oe,le.styleSheet,le.stylis);return fe})(F,P),q=Wa(Z,K);return Y&&(q+=" "+Y),P.className&&(q+=" "+P.className),U[th(O)&&!wb.has(O)?"class":"className"]=q,j&&(U.ref=j),x.createElement(O,U)})(E,k,I)}M.displayName=m;var E=Ce.forwardRef(M);return E.attrs=w,E.componentStyle=R,E.displayName=m,E.shouldForwardProp=C,E.foldedComponentIds=i?Wa(l.foldedComponentIds,l.styledComponentId):"",E.styledComponentId=b,E.target=i?l.target:t,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=i?(function(I){for(var z=[],D=1;D<arguments.length;D++)z[D-1]=arguments[D];for(var j=0,$=z;j<$.length;j++)Bh(I,$[j],!0);return I})({},l.defaultProps,k):k}}),cp(E,function(){return".".concat(E.styledComponentId)}),c&&kb(E,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function By(t,o){for(var a=[t[0]],i=0,l=o.length;i<l;i+=1)a.push(o[i],t[i+1]);return a}var Py=function(t){return Object.assign(t,{isCss:!0})};function lr(t){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(Ji(t)||Sl(t))return Py(Va(By(Hu,Cl([t],o,!0))));var i=t;return o.length===0&&i.length===1&&typeof i[0]=="string"?Va(i):Py(Va(By(i,o)))}function zh(t,o,a){if(a===void 0&&(a=Ki),!o)throw Ol(1,o);var i=function(l){for(var c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];return t(o,a,lr.apply(void 0,Cl([l],c,!1)))};return i.attrs=function(l){return zh(t,o,nn(nn({},a),{attrs:Array.prototype.concat(a.attrs,l).filter(Boolean)}))},i.withConfig=function(l){return zh(t,o,nn(nn({},a),l))},i}var Pb=function(t){return zh(jS,t)},se=Pb;wb.forEach(function(t){se[t]=Pb(t)});const BS=se.div`
  display: flex;
  height: 100vh;
  width: 100vw;
  background: #f8f9fa;
`,PS=se.div.attrs(t=>({style:{marginLeft:`${t.$libraryWidth}px`,width:`calc(100vw - ${t.$libraryWidth}px)`}}))`
  margin-top: 60px;
  height: calc(100vh - 60px - 34px);
  position: relative;
  overflow: hidden;
`,zS=se.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: white;
  border-bottom: 1px solid #e1e5e9;
  z-index: 1000;
  display: flex;
  align-items: center;
  padding: 6px 12px 6px 20px;
  gap: 15px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
`,NS=se.div`
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
`,LS=se.img`
  width: 48px;
  height: 48px;
  flex-shrink: 0;
`,HS=se.div`
  display: flex;
  grid-column: 1;
  grid-row: 2;
  justify-self: stretch;
  min-width: 0;
  width: 100%;
`,YS=se.div`
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
`,$S=se.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
  width: 100%;
  grid-column: 1;
  grid-row: 1;
`,US=se.div`
  display: flex;
  align-items: center;
  min-width: 0;
  width: 220px;
  justify-content: space-between;
  gap: 8px;
  grid-column: 1;
  grid-row: 1;
`,XS=se.button`
  border: none;
  background: none;
  font-size: 16px;
  font-weight: 600;
  color: #2c3e50;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 6px;
  width: 220px;
  text-align: left;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;

  &:hover {
    background: rgba(33, 37, 41, 0.05);
  }
`,QS=se.input`
  font-size: 16px;
  font-weight: 600;
  color: #2c3e50;
  border: 1px solid rgba(108, 117, 125, 0.35);
  border-radius: 6px;
  padding: 4px 6px;
  width: 100%;
  max-width: 220px;
  outline: none;
  text-align: left;

  &:focus {
    border-color: #1d6ff2;
    box-shadow: 0 0 0 2px rgba(29, 111, 242, 0.2);
  }
`,FS=se.div`
  display: inline-grid;
  grid-template-columns: minmax(200px, max-content);
  grid-auto-rows: auto;
  row-gap: 0;
  align-items: center;
`,GS=se.div`
  position: ${t=>t.$visible?"absolute":"static"};
  right: 20px;
  top: 50%;
  transform: ${t=>t.$visible?"translateY(-50%)":"none"};
  display: ${t=>t.$visible?"flex":"none"};
  align-items: center;
  justify-content: flex-end;
  pointer-events: none;
  gap: 12px;
  z-index: 1;

  > * {
    pointer-events: auto;
  }
`,WS=se.div`
  margin-left: auto;
  padding-left: ${t=>t.$hasDocked?"32px":"0"};
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
`,qS=se.div`
  font-size: 12px;
  color: rgba(108, 117, 125, 0.55);
  text-align: left;
  white-space: nowrap;
  min-height: 18px;
  flex-shrink: 0;
  align-self: baseline;
`;function _l(t,o=[]){let a=[];function i(c,u){const f=x.createContext(u),p=a.length;a=[...a,u];const h=m=>{const{scope:b,children:w,...C}=m,A=b?.[t]?.[p]||f,S=x.useMemo(()=>C,Object.values(C));return v.jsx(A.Provider,{value:S,children:w})};h.displayName=c+"Provider";function g(m,b){const w=b?.[t]?.[p]||f,C=x.useContext(w);if(C)return C;if(u!==void 0)return u;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,g]}const l=()=>{const c=a.map(u=>x.createContext(u));return function(f){const p=f?.[t]||c;return x.useMemo(()=>({[`__scope${t}`]:{...f,[t]:p}}),[f,p])}};return l.scopeName=t,[i,VS(l,...o)]}function VS(...t){const o=t[0];if(t.length===1)return o;const a=()=>{const i=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const u=i.reduce((f,{useScope:p,scopeName:h})=>{const m=p(c)[`__scope${h}`];return{...f,...m}},{});return x.useMemo(()=>({[`__scope${o.scopeName}`]:u}),[u])}};return a.scopeName=o.scopeName,a}function zy(t,o){if(typeof t=="function")return t(o);t!=null&&(t.current=o)}function up(...t){return o=>{let a=!1;const i=t.map(l=>{const c=zy(l,o);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let l=0;l<i.length;l++){const c=i[l];typeof c=="function"?c():zy(t[l],null)}}}}function qn(...t){return x.useCallback(up(...t),t)}function bu(t){const o=ZS(t),a=x.forwardRef((i,l)=>{const{children:c,...u}=i,f=x.Children.toArray(c),p=f.find(JS);if(p){const h=p.props.children,g=f.map(m=>m===p?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return v.jsx(o,{...u,ref:l,children:x.isValidElement(h)?x.cloneElement(h,void 0,g):null})}return v.jsx(o,{...u,ref:l,children:c})});return a.displayName=`${t}.Slot`,a}function ZS(t){const o=x.forwardRef((a,i)=>{const{children:l,...c}=a;if(x.isValidElement(l)){const u=tE(l),f=eE(c,l.props);return l.type!==x.Fragment&&(f.ref=i?up(i,u):u),x.cloneElement(l,f)}return x.Children.count(l)>1?x.Children.only(null):null});return o.displayName=`${t}.SlotClone`,o}var KS=Symbol("radix.slottable");function JS(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===KS}function eE(t,o){const a={...o};for(const i in o){const l=t[i],c=o[i];/^on[A-Z]/.test(i)?l&&c?a[i]=(...f)=>{const p=c(...f);return l(...f),p}:l&&(a[i]=l):i==="style"?a[i]={...l,...c}:i==="className"&&(a[i]=[l,c].filter(Boolean).join(" "))}return{...t,...a}}function tE(t){let o=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning;return a?t.ref:(o=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}function dp(t){const o=t+"CollectionProvider",[a,i]=_l(o),[l,c]=a(o,{collectionRef:{current:null},itemMap:new Map}),u=A=>{const{scope:S,children:R}=A,M=Ce.useRef(null),E=Ce.useRef(new Map).current;return v.jsx(l,{scope:S,itemMap:E,collectionRef:M,children:R})};u.displayName=o;const f=t+"CollectionSlot",p=bu(f),h=Ce.forwardRef((A,S)=>{const{scope:R,children:M}=A,E=c(f,R),k=qn(S,E.collectionRef);return v.jsx(p,{ref:k,children:M})});h.displayName=f;const g=t+"CollectionItemSlot",m="data-radix-collection-item",b=bu(g),w=Ce.forwardRef((A,S)=>{const{scope:R,children:M,...E}=A,k=Ce.useRef(null),I=qn(S,k),z=c(g,R);return Ce.useEffect(()=>(z.itemMap.set(k,{ref:k,...E}),()=>void z.itemMap.delete(k))),v.jsx(b,{[m]:"",ref:I,children:M})});w.displayName=g;function C(A){const S=c(t+"CollectionConsumer",A);return Ce.useCallback(()=>{const M=S.collectionRef.current;if(!M)return[];const E=Array.from(M.querySelectorAll(`[${m}]`));return Array.from(S.itemMap.values()).sort((z,D)=>E.indexOf(z.ref.current)-E.indexOf(D.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:u,Slot:h,ItemSlot:w},C,i]}var nE=x.createContext(void 0);function fp(t){const o=x.useContext(nE);return t||o||"ltr"}function nt(t,o,{checkForDefaultPrevented:a=!0}={}){return function(l){if(t?.(l),a===!1||!l.defaultPrevented)return o?.(l)}}var Ca=globalThis?.document?x.useLayoutEffect:()=>{},oE=ub[" useId ".trim().toString()]||(()=>{}),rE=0;function Fi(t){const[o,a]=x.useState(oE());return Ca(()=>{a(i=>i??String(rE++))},[t]),o?`radix-${o}`:""}var Lr=db();const aE=ju(Lr);var iE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Un=iE.reduce((t,o)=>{const a=bu(`Primitive.${o}`),i=x.forwardRef((l,c)=>{const{asChild:u,...f}=l,p=u?a:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(p,{...f,ref:c})});return i.displayName=`Primitive.${o}`,{...t,[o]:i}},{});function zb(t,o){t&&Lr.flushSync(()=>t.dispatchEvent(o))}function cr(t){const o=x.useRef(t);return x.useEffect(()=>{o.current=t}),x.useMemo(()=>(...a)=>o.current?.(...a),[])}function sE(t,o=globalThis?.document){const a=cr(t);x.useEffect(()=>{const i=l=>{l.key==="Escape"&&a(l)};return o.addEventListener("keydown",i,{capture:!0}),()=>o.removeEventListener("keydown",i,{capture:!0})},[a,o])}var lE="DismissableLayer",Nh="dismissableLayer.update",cE="dismissableLayer.pointerDownOutside",uE="dismissableLayer.focusOutside",Ny,Nb=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lb=x.forwardRef((t,o)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,onDismiss:f,...p}=t,h=x.useContext(Nb),[g,m]=x.useState(null),b=g?.ownerDocument??globalThis?.document,[,w]=x.useState({}),C=qn(o,D=>m(D)),A=Array.from(h.layers),[S]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),R=A.indexOf(S),M=g?A.indexOf(g):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,k=M>=R,I=hE(D=>{const j=D.target,$=[...h.branches].some(F=>F.contains(j));!k||$||(l?.(D),u?.(D),D.defaultPrevented||f?.())},b),z=pE(D=>{const j=D.target;[...h.branches].some(F=>F.contains(j))||(c?.(D),u?.(D),D.defaultPrevented||f?.())},b);return sE(D=>{M===h.layers.size-1&&(i?.(D),!D.defaultPrevented&&f&&(D.preventDefault(),f()))},b),x.useEffect(()=>{if(g)return a&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Ny=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),Ly(),()=>{a&&h.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Ny)}},[g,b,a,h]),x.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),Ly())},[g,h]),x.useEffect(()=>{const D=()=>w({});return document.addEventListener(Nh,D),()=>document.removeEventListener(Nh,D)},[]),v.jsx(Un.div,{...p,ref:C,style:{pointerEvents:E?k?"auto":"none":void 0,...t.style},onFocusCapture:nt(t.onFocusCapture,z.onFocusCapture),onBlurCapture:nt(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:nt(t.onPointerDownCapture,I.onPointerDownCapture)})});Lb.displayName=lE;var dE="DismissableLayerBranch",fE=x.forwardRef((t,o)=>{const a=x.useContext(Nb),i=x.useRef(null),l=qn(o,i);return x.useEffect(()=>{const c=i.current;if(c)return a.branches.add(c),()=>{a.branches.delete(c)}},[a.branches]),v.jsx(Un.div,{...t,ref:l})});fE.displayName=dE;function hE(t,o=globalThis?.document){const a=cr(t),i=x.useRef(!1),l=x.useRef(()=>{});return x.useEffect(()=>{const c=f=>{if(f.target&&!i.current){let p=function(){Hb(cE,a,h,{discrete:!0})};const h={originalEvent:f};f.pointerType==="touch"?(o.removeEventListener("click",l.current),l.current=p,o.addEventListener("click",l.current,{once:!0})):p()}else o.removeEventListener("click",l.current);i.current=!1},u=window.setTimeout(()=>{o.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),o.removeEventListener("pointerdown",c),o.removeEventListener("click",l.current)}},[o,a]),{onPointerDownCapture:()=>i.current=!0}}function pE(t,o=globalThis?.document){const a=cr(t),i=x.useRef(!1);return x.useEffect(()=>{const l=c=>{c.target&&!i.current&&Hb(uE,a,{originalEvent:c},{discrete:!1})};return o.addEventListener("focusin",l),()=>o.removeEventListener("focusin",l)},[o,a]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Ly(){const t=new CustomEvent(Nh);document.dispatchEvent(t)}function Hb(t,o,a,{discrete:i}){const l=a.originalEvent.target,c=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});o&&l.addEventListener(t,o,{once:!0}),i?zb(l,c):l.dispatchEvent(c)}var oh=0;function mE(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hy()),document.body.insertAdjacentElement("beforeend",t[1]??Hy()),oh++,()=>{oh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),oh--}},[])}function Hy(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var rh="focusScope.autoFocusOnMount",ah="focusScope.autoFocusOnUnmount",Yy={bubbles:!1,cancelable:!0},gE="FocusScope",Yb=x.forwardRef((t,o)=>{const{loop:a=!1,trapped:i=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...u}=t,[f,p]=x.useState(null),h=cr(l),g=cr(c),m=x.useRef(null),b=qn(o,A=>p(A)),w=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let A=function(E){if(w.paused||!f)return;const k=E.target;f.contains(k)?m.current=k:pa(m.current,{select:!0})},S=function(E){if(w.paused||!f)return;const k=E.relatedTarget;k!==null&&(f.contains(k)||pa(m.current,{select:!0}))},R=function(E){if(document.activeElement===document.body)for(const I of E)I.removedNodes.length>0&&pa(f)};document.addEventListener("focusin",A),document.addEventListener("focusout",S);const M=new MutationObserver(R);return f&&M.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",A),document.removeEventListener("focusout",S),M.disconnect()}}},[i,f,w.paused]),x.useEffect(()=>{if(f){Uy.add(w);const A=document.activeElement;if(!f.contains(A)){const R=new CustomEvent(rh,Yy);f.addEventListener(rh,h),f.dispatchEvent(R),R.defaultPrevented||(yE(wE($b(f)),{select:!0}),document.activeElement===A&&pa(f))}return()=>{f.removeEventListener(rh,h),setTimeout(()=>{const R=new CustomEvent(ah,Yy);f.addEventListener(ah,g),f.dispatchEvent(R),R.defaultPrevented||pa(A??document.body,{select:!0}),f.removeEventListener(ah,g),Uy.remove(w)},0)}}},[f,h,g,w]);const C=x.useCallback(A=>{if(!a&&!i||w.paused)return;const S=A.key==="Tab"&&!A.altKey&&!A.ctrlKey&&!A.metaKey,R=document.activeElement;if(S&&R){const M=A.currentTarget,[E,k]=xE(M);E&&k?!A.shiftKey&&R===k?(A.preventDefault(),a&&pa(E,{select:!0})):A.shiftKey&&R===E&&(A.preventDefault(),a&&pa(k,{select:!0})):R===M&&A.preventDefault()}},[a,i,w.paused]);return v.jsx(Un.div,{tabIndex:-1,...u,ref:b,onKeyDown:C})});Yb.displayName=gE;function yE(t,{select:o=!1}={}){const a=document.activeElement;for(const i of t)if(pa(i,{select:o}),document.activeElement!==a)return}function xE(t){const o=$b(t),a=$y(o,t),i=$y(o.reverse(),t);return[a,i]}function $b(t){const o=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const l=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||l?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)o.push(a.currentNode);return o}function $y(t,o){for(const a of t)if(!bE(a,{upTo:o}))return a}function bE(t,{upTo:o}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(o!==void 0&&t===o)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function vE(t){return t instanceof HTMLInputElement&&"select"in t}function pa(t,{select:o=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&vE(t)&&o&&t.select()}}var Uy=AE();function AE(){let t=[];return{add(o){const a=t[0];o!==a&&a?.pause(),t=Xy(t,o),t.unshift(o)},remove(o){t=Xy(t,o),t[0]?.resume()}}}function Xy(t,o){const a=[...t],i=a.indexOf(o);return i!==-1&&a.splice(i,1),a}function wE(t){return t.filter(o=>o.tagName!=="A")}const CE=["top","right","bottom","left"],Sa=Math.min,ho=Math.max,vu=Math.round,Vc=Math.floor,sr=t=>({x:t,y:t}),SE={left:"right",right:"left",bottom:"top",top:"bottom"},EE={start:"end",end:"start"};function Lh(t,o,a){return ho(t,Sa(o,a))}function zr(t,o){return typeof t=="function"?t(o):t}function Nr(t){return t.split("-")[0]}function os(t){return t.split("-")[1]}function hp(t){return t==="x"?"y":"x"}function pp(t){return t==="y"?"height":"width"}const ME=new Set(["top","bottom"]);function ir(t){return ME.has(Nr(t))?"y":"x"}function mp(t){return hp(ir(t))}function RE(t,o,a){a===void 0&&(a=!1);const i=os(t),l=mp(t),c=pp(l);let u=l==="x"?i===(a?"end":"start")?"right":"left":i==="start"?"bottom":"top";return o.reference[c]>o.floating[c]&&(u=Au(u)),[u,Au(u)]}function kE(t){const o=Au(t);return[Hh(t),o,Hh(o)]}function Hh(t){return t.replace(/start|end/g,o=>EE[o])}const Qy=["left","right"],Fy=["right","left"],TE=["top","bottom"],IE=["bottom","top"];function OE(t,o,a){switch(t){case"top":case"bottom":return a?o?Fy:Qy:o?Qy:Fy;case"left":case"right":return o?TE:IE;default:return[]}}function _E(t,o,a,i){const l=os(t);let c=OE(Nr(t),a==="start",i);return l&&(c=c.map(u=>u+"-"+l),o&&(c=c.concat(c.map(Hh)))),c}function Au(t){return t.replace(/left|right|bottom|top/g,o=>SE[o])}function DE(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ub(t){return typeof t!="number"?DE(t):{top:t,right:t,bottom:t,left:t}}function wu(t){const{x:o,y:a,width:i,height:l}=t;return{width:i,height:l,top:a,left:o,right:o+i,bottom:a+l,x:o,y:a}}function Gy(t,o,a){let{reference:i,floating:l}=t;const c=ir(o),u=mp(o),f=pp(u),p=Nr(o),h=c==="y",g=i.x+i.width/2-l.width/2,m=i.y+i.height/2-l.height/2,b=i[f]/2-l[f]/2;let w;switch(p){case"top":w={x:g,y:i.y-l.height};break;case"bottom":w={x:g,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y:m};break;case"left":w={x:i.x-l.width,y:m};break;default:w={x:i.x,y:i.y}}switch(os(o)){case"start":w[u]-=b*(a&&h?-1:1);break;case"end":w[u]+=b*(a&&h?-1:1);break}return w}const jE=async(t,o,a)=>{const{placement:i="bottom",strategy:l="absolute",middleware:c=[],platform:u}=a,f=c.filter(Boolean),p=await(u.isRTL==null?void 0:u.isRTL(o));let h=await u.getElementRects({reference:t,floating:o,strategy:l}),{x:g,y:m}=Gy(h,i,p),b=i,w={},C=0;for(let A=0;A<f.length;A++){const{name:S,fn:R}=f[A],{x:M,y:E,data:k,reset:I}=await R({x:g,y:m,initialPlacement:i,placement:b,strategy:l,middlewareData:w,rects:h,platform:u,elements:{reference:t,floating:o}});g=M??g,m=E??m,w={...w,[S]:{...w[S],...k}},I&&C<=50&&(C++,typeof I=="object"&&(I.placement&&(b=I.placement),I.rects&&(h=I.rects===!0?await u.getElementRects({reference:t,floating:o,strategy:l}):I.rects),{x:g,y:m}=Gy(h,b,p)),A=-1)}return{x:g,y:m,placement:b,strategy:l,middlewareData:w}};async function El(t,o){var a;o===void 0&&(o={});const{x:i,y:l,platform:c,rects:u,elements:f,strategy:p}=t,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:b=!1,padding:w=0}=zr(o,t),C=Ub(w),S=f[b?m==="floating"?"reference":"floating":m],R=wu(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(S)))==null||a?S:S.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(f.floating)),boundary:h,rootBoundary:g,strategy:p})),M=m==="floating"?{x:i,y:l,width:u.floating.width,height:u.floating.height}:u.reference,E=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f.floating)),k=await(c.isElement==null?void 0:c.isElement(E))?await(c.getScale==null?void 0:c.getScale(E))||{x:1,y:1}:{x:1,y:1},I=wu(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:M,offsetParent:E,strategy:p}):M);return{top:(R.top-I.top+C.top)/k.y,bottom:(I.bottom-R.bottom+C.bottom)/k.y,left:(R.left-I.left+C.left)/k.x,right:(I.right-R.right+C.right)/k.x}}const BE=t=>({name:"arrow",options:t,async fn(o){const{x:a,y:i,placement:l,rects:c,platform:u,elements:f,middlewareData:p}=o,{element:h,padding:g=0}=zr(t,o)||{};if(h==null)return{};const m=Ub(g),b={x:a,y:i},w=mp(l),C=pp(w),A=await u.getDimensions(h),S=w==="y",R=S?"top":"left",M=S?"bottom":"right",E=S?"clientHeight":"clientWidth",k=c.reference[C]+c.reference[w]-b[w]-c.floating[C],I=b[w]-c.reference[w],z=await(u.getOffsetParent==null?void 0:u.getOffsetParent(h));let D=z?z[E]:0;(!D||!await(u.isElement==null?void 0:u.isElement(z)))&&(D=f.floating[E]||c.floating[C]);const j=k/2-I/2,$=D/2-A[C]/2-1,F=Sa(m[R],$),X=Sa(m[M],$),Z=F,K=D-A[C]-X,te=D/2-A[C]/2+j,Q=Lh(Z,te,K),_=!p.arrow&&os(l)!=null&&te!==Q&&c.reference[C]/2-(te<Z?F:X)-A[C]/2<0,H=_?te<Z?te-Z:te-K:0;return{[w]:b[w]+H,data:{[w]:Q,centerOffset:te-Q-H,..._&&{alignmentOffset:H}},reset:_}}}),PE=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(o){var a,i;const{placement:l,middlewareData:c,rects:u,initialPlacement:f,platform:p,elements:h}=o,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:b,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:A=!0,...S}=zr(t,o);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const R=Nr(l),M=ir(f),E=Nr(f)===f,k=await(p.isRTL==null?void 0:p.isRTL(h.floating)),I=b||(E||!A?[Au(f)]:kE(f)),z=C!=="none";!b&&z&&I.push(..._E(f,A,C,k));const D=[f,...I],j=await El(o,S),$=[];let F=((i=c.flip)==null?void 0:i.overflows)||[];if(g&&$.push(j[R]),m){const te=RE(l,u,k);$.push(j[te[0]],j[te[1]])}if(F=[...F,{placement:l,overflows:$}],!$.every(te=>te<=0)){var X,Z;const te=(((X=c.flip)==null?void 0:X.index)||0)+1,Q=D[te];if(Q&&(!(m==="alignment"?M!==ir(Q):!1)||F.every(N=>ir(N.placement)===M?N.overflows[0]>0:!0)))return{data:{index:te,overflows:F},reset:{placement:Q}};let _=(Z=F.filter(H=>H.overflows[0]<=0).sort((H,N)=>H.overflows[1]-N.overflows[1])[0])==null?void 0:Z.placement;if(!_)switch(w){case"bestFit":{var K;const H=(K=F.filter(N=>{if(z){const P=ir(N.placement);return P===M||P==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(P=>P>0).reduce((P,O)=>P+O,0)]).sort((N,P)=>N[1]-P[1])[0])==null?void 0:K[0];H&&(_=H);break}case"initialPlacement":_=f;break}if(l!==_)return{reset:{placement:_}}}return{}}}};function Wy(t,o){return{top:t.top-o.height,right:t.right-o.width,bottom:t.bottom-o.height,left:t.left-o.width}}function qy(t){return CE.some(o=>t[o]>=0)}const zE=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(o){const{rects:a}=o,{strategy:i="referenceHidden",...l}=zr(t,o);switch(i){case"referenceHidden":{const c=await El(o,{...l,elementContext:"reference"}),u=Wy(c,a.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:qy(u)}}}case"escaped":{const c=await El(o,{...l,altBoundary:!0}),u=Wy(c,a.floating);return{data:{escapedOffsets:u,escaped:qy(u)}}}default:return{}}}}},Xb=new Set(["left","top"]);async function NE(t,o){const{placement:a,platform:i,elements:l}=t,c=await(i.isRTL==null?void 0:i.isRTL(l.floating)),u=Nr(a),f=os(a),p=ir(a)==="y",h=Xb.has(u)?-1:1,g=c&&p?-1:1,m=zr(o,t);let{mainAxis:b,crossAxis:w,alignmentAxis:C}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return f&&typeof C=="number"&&(w=f==="end"?C*-1:C),p?{x:w*g,y:b*h}:{x:b*h,y:w*g}}const LE=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(o){var a,i;const{x:l,y:c,placement:u,middlewareData:f}=o,p=await NE(o,t);return u===((a=f.offset)==null?void 0:a.placement)&&(i=f.arrow)!=null&&i.alignmentOffset?{}:{x:l+p.x,y:c+p.y,data:{...p,placement:u}}}}},HE=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(o){const{x:a,y:i,placement:l}=o,{mainAxis:c=!0,crossAxis:u=!1,limiter:f={fn:S=>{let{x:R,y:M}=S;return{x:R,y:M}}},...p}=zr(t,o),h={x:a,y:i},g=await El(o,p),m=ir(Nr(l)),b=hp(m);let w=h[b],C=h[m];if(c){const S=b==="y"?"top":"left",R=b==="y"?"bottom":"right",M=w+g[S],E=w-g[R];w=Lh(M,w,E)}if(u){const S=m==="y"?"top":"left",R=m==="y"?"bottom":"right",M=C+g[S],E=C-g[R];C=Lh(M,C,E)}const A=f.fn({...o,[b]:w,[m]:C});return{...A,data:{x:A.x-a,y:A.y-i,enabled:{[b]:c,[m]:u}}}}}},YE=function(t){return t===void 0&&(t={}),{options:t,fn(o){const{x:a,y:i,placement:l,rects:c,middlewareData:u}=o,{offset:f=0,mainAxis:p=!0,crossAxis:h=!0}=zr(t,o),g={x:a,y:i},m=ir(l),b=hp(m);let w=g[b],C=g[m];const A=zr(f,o),S=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(p){const E=b==="y"?"height":"width",k=c.reference[b]-c.floating[E]+S.mainAxis,I=c.reference[b]+c.reference[E]-S.mainAxis;w<k?w=k:w>I&&(w=I)}if(h){var R,M;const E=b==="y"?"width":"height",k=Xb.has(Nr(l)),I=c.reference[m]-c.floating[E]+(k&&((R=u.offset)==null?void 0:R[m])||0)+(k?0:S.crossAxis),z=c.reference[m]+c.reference[E]+(k?0:((M=u.offset)==null?void 0:M[m])||0)-(k?S.crossAxis:0);C<I?C=I:C>z&&(C=z)}return{[b]:w,[m]:C}}}},$E=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(o){var a,i;const{placement:l,rects:c,platform:u,elements:f}=o,{apply:p=()=>{},...h}=zr(t,o),g=await El(o,h),m=Nr(l),b=os(l),w=ir(l)==="y",{width:C,height:A}=c.floating;let S,R;m==="top"||m==="bottom"?(S=m,R=b===(await(u.isRTL==null?void 0:u.isRTL(f.floating))?"start":"end")?"left":"right"):(R=m,S=b==="end"?"top":"bottom");const M=A-g.top-g.bottom,E=C-g.left-g.right,k=Sa(A-g[S],M),I=Sa(C-g[R],E),z=!o.middlewareData.shift;let D=k,j=I;if((a=o.middlewareData.shift)!=null&&a.enabled.x&&(j=E),(i=o.middlewareData.shift)!=null&&i.enabled.y&&(D=M),z&&!b){const F=ho(g.left,0),X=ho(g.right,0),Z=ho(g.top,0),K=ho(g.bottom,0);w?j=C-2*(F!==0||X!==0?F+X:ho(g.left,g.right)):D=A-2*(Z!==0||K!==0?Z+K:ho(g.top,g.bottom))}await p({...o,availableWidth:j,availableHeight:D});const $=await u.getDimensions(f.floating);return C!==$.width||A!==$.height?{reset:{rects:!0}}:{}}}};function Yu(){return typeof window<"u"}function rs(t){return Qb(t)?(t.nodeName||"").toLowerCase():"#document"}function mo(t){var o;return(t==null||(o=t.ownerDocument)==null?void 0:o.defaultView)||window}function hr(t){var o;return(o=(Qb(t)?t.ownerDocument:t.document)||window.document)==null?void 0:o.documentElement}function Qb(t){return Yu()?t instanceof Node||t instanceof mo(t).Node:!1}function qo(t){return Yu()?t instanceof Element||t instanceof mo(t).Element:!1}function ur(t){return Yu()?t instanceof HTMLElement||t instanceof mo(t).HTMLElement:!1}function Vy(t){return!Yu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof mo(t).ShadowRoot}const UE=new Set(["inline","contents"]);function Dl(t){const{overflow:o,overflowX:a,overflowY:i,display:l}=Vo(t);return/auto|scroll|overlay|hidden|clip/.test(o+i+a)&&!UE.has(l)}const XE=new Set(["table","td","th"]);function QE(t){return XE.has(rs(t))}const FE=[":popover-open",":modal"];function $u(t){return FE.some(o=>{try{return t.matches(o)}catch{return!1}})}const GE=["transform","translate","scale","rotate","perspective"],WE=["transform","translate","scale","rotate","perspective","filter"],qE=["paint","layout","strict","content"];function gp(t){const o=yp(),a=qo(t)?Vo(t):t;return GE.some(i=>a[i]?a[i]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!o&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!o&&(a.filter?a.filter!=="none":!1)||WE.some(i=>(a.willChange||"").includes(i))||qE.some(i=>(a.contain||"").includes(i))}function VE(t){let o=Ea(t);for(;ur(o)&&!es(o);){if(gp(o))return o;if($u(o))return null;o=Ea(o)}return null}function yp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZE=new Set(["html","body","#document"]);function es(t){return ZE.has(rs(t))}function Vo(t){return mo(t).getComputedStyle(t)}function Uu(t){return qo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ea(t){if(rs(t)==="html")return t;const o=t.assignedSlot||t.parentNode||Vy(t)&&t.host||hr(t);return Vy(o)?o.host:o}function Fb(t){const o=Ea(t);return es(o)?t.ownerDocument?t.ownerDocument.body:t.body:ur(o)&&Dl(o)?o:Fb(o)}function Ml(t,o,a){var i;o===void 0&&(o=[]),a===void 0&&(a=!0);const l=Fb(t),c=l===((i=t.ownerDocument)==null?void 0:i.body),u=mo(l);if(c){const f=Yh(u);return o.concat(u,u.visualViewport||[],Dl(l)?l:[],f&&a?Ml(f):[])}return o.concat(l,Ml(l,[],a))}function Yh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Gb(t){const o=Vo(t);let a=parseFloat(o.width)||0,i=parseFloat(o.height)||0;const l=ur(t),c=l?t.offsetWidth:a,u=l?t.offsetHeight:i,f=vu(a)!==c||vu(i)!==u;return f&&(a=c,i=u),{width:a,height:i,$:f}}function xp(t){return qo(t)?t:t.contextElement}function Gi(t){const o=xp(t);if(!ur(o))return sr(1);const a=o.getBoundingClientRect(),{width:i,height:l,$:c}=Gb(o);let u=(c?vu(a.width):a.width)/i,f=(c?vu(a.height):a.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!f||!Number.isFinite(f))&&(f=1),{x:u,y:f}}const KE=sr(0);function Wb(t){const o=mo(t);return!yp()||!o.visualViewport?KE:{x:o.visualViewport.offsetLeft,y:o.visualViewport.offsetTop}}function JE(t,o,a){return o===void 0&&(o=!1),!a||o&&a!==mo(t)?!1:o}function Za(t,o,a,i){o===void 0&&(o=!1),a===void 0&&(a=!1);const l=t.getBoundingClientRect(),c=xp(t);let u=sr(1);o&&(i?qo(i)&&(u=Gi(i)):u=Gi(t));const f=JE(c,a,i)?Wb(c):sr(0);let p=(l.left+f.x)/u.x,h=(l.top+f.y)/u.y,g=l.width/u.x,m=l.height/u.y;if(c){const b=mo(c),w=i&&qo(i)?mo(i):i;let C=b,A=Yh(C);for(;A&&i&&w!==C;){const S=Gi(A),R=A.getBoundingClientRect(),M=Vo(A),E=R.left+(A.clientLeft+parseFloat(M.paddingLeft))*S.x,k=R.top+(A.clientTop+parseFloat(M.paddingTop))*S.y;p*=S.x,h*=S.y,g*=S.x,m*=S.y,p+=E,h+=k,C=mo(A),A=Yh(C)}}return wu({width:g,height:m,x:p,y:h})}function Xu(t,o){const a=Uu(t).scrollLeft;return o?o.left+a:Za(hr(t)).left+a}function qb(t,o){const a=t.getBoundingClientRect(),i=a.left+o.scrollLeft-Xu(t,a),l=a.top+o.scrollTop;return{x:i,y:l}}function e2(t){let{elements:o,rect:a,offsetParent:i,strategy:l}=t;const c=l==="fixed",u=hr(i),f=o?$u(o.floating):!1;if(i===u||f&&c)return a;let p={scrollLeft:0,scrollTop:0},h=sr(1);const g=sr(0),m=ur(i);if((m||!m&&!c)&&((rs(i)!=="body"||Dl(u))&&(p=Uu(i)),ur(i))){const w=Za(i);h=Gi(i),g.x=w.x+i.clientLeft,g.y=w.y+i.clientTop}const b=u&&!m&&!c?qb(u,p):sr(0);return{width:a.width*h.x,height:a.height*h.y,x:a.x*h.x-p.scrollLeft*h.x+g.x+b.x,y:a.y*h.y-p.scrollTop*h.y+g.y+b.y}}function t2(t){return Array.from(t.getClientRects())}function n2(t){const o=hr(t),a=Uu(t),i=t.ownerDocument.body,l=ho(o.scrollWidth,o.clientWidth,i.scrollWidth,i.clientWidth),c=ho(o.scrollHeight,o.clientHeight,i.scrollHeight,i.clientHeight);let u=-a.scrollLeft+Xu(t);const f=-a.scrollTop;return Vo(i).direction==="rtl"&&(u+=ho(o.clientWidth,i.clientWidth)-l),{width:l,height:c,x:u,y:f}}const Zy=25;function o2(t,o){const a=mo(t),i=hr(t),l=a.visualViewport;let c=i.clientWidth,u=i.clientHeight,f=0,p=0;if(l){c=l.width,u=l.height;const g=yp();(!g||g&&o==="fixed")&&(f=l.offsetLeft,p=l.offsetTop)}const h=Xu(i);if(h<=0){const g=i.ownerDocument,m=g.body,b=getComputedStyle(m),w=g.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,C=Math.abs(i.clientWidth-m.clientWidth-w);C<=Zy&&(c-=C)}else h<=Zy&&(c+=h);return{width:c,height:u,x:f,y:p}}const r2=new Set(["absolute","fixed"]);function a2(t,o){const a=Za(t,!0,o==="fixed"),i=a.top+t.clientTop,l=a.left+t.clientLeft,c=ur(t)?Gi(t):sr(1),u=t.clientWidth*c.x,f=t.clientHeight*c.y,p=l*c.x,h=i*c.y;return{width:u,height:f,x:p,y:h}}function Ky(t,o,a){let i;if(o==="viewport")i=o2(t,a);else if(o==="document")i=n2(hr(t));else if(qo(o))i=a2(o,a);else{const l=Wb(t);i={x:o.x-l.x,y:o.y-l.y,width:o.width,height:o.height}}return wu(i)}function Vb(t,o){const a=Ea(t);return a===o||!qo(a)||es(a)?!1:Vo(a).position==="fixed"||Vb(a,o)}function i2(t,o){const a=o.get(t);if(a)return a;let i=Ml(t,[],!1).filter(f=>qo(f)&&rs(f)!=="body"),l=null;const c=Vo(t).position==="fixed";let u=c?Ea(t):t;for(;qo(u)&&!es(u);){const f=Vo(u),p=gp(u);!p&&f.position==="fixed"&&(l=null),(c?!p&&!l:!p&&f.position==="static"&&!!l&&r2.has(l.position)||Dl(u)&&!p&&Vb(t,u))?i=i.filter(g=>g!==u):l=f,u=Ea(u)}return o.set(t,i),i}function s2(t){let{element:o,boundary:a,rootBoundary:i,strategy:l}=t;const u=[...a==="clippingAncestors"?$u(o)?[]:i2(o,this._c):[].concat(a),i],f=u[0],p=u.reduce((h,g)=>{const m=Ky(o,g,l);return h.top=ho(m.top,h.top),h.right=Sa(m.right,h.right),h.bottom=Sa(m.bottom,h.bottom),h.left=ho(m.left,h.left),h},Ky(o,f,l));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function l2(t){const{width:o,height:a}=Gb(t);return{width:o,height:a}}function c2(t,o,a){const i=ur(o),l=hr(o),c=a==="fixed",u=Za(t,!0,c,o);let f={scrollLeft:0,scrollTop:0};const p=sr(0);function h(){p.x=Xu(l)}if(i||!i&&!c)if((rs(o)!=="body"||Dl(l))&&(f=Uu(o)),i){const w=Za(o,!0,c,o);p.x=w.x+o.clientLeft,p.y=w.y+o.clientTop}else l&&h();c&&!i&&l&&h();const g=l&&!i&&!c?qb(l,f):sr(0),m=u.left+f.scrollLeft-p.x-g.x,b=u.top+f.scrollTop-p.y-g.y;return{x:m,y:b,width:u.width,height:u.height}}function ih(t){return Vo(t).position==="static"}function Jy(t,o){if(!ur(t)||Vo(t).position==="fixed")return null;if(o)return o(t);let a=t.offsetParent;return hr(t)===a&&(a=a.ownerDocument.body),a}function Zb(t,o){const a=mo(t);if($u(t))return a;if(!ur(t)){let l=Ea(t);for(;l&&!es(l);){if(qo(l)&&!ih(l))return l;l=Ea(l)}return a}let i=Jy(t,o);for(;i&&QE(i)&&ih(i);)i=Jy(i,o);return i&&es(i)&&ih(i)&&!gp(i)?a:i||VE(t)||a}const u2=async function(t){const o=this.getOffsetParent||Zb,a=this.getDimensions,i=await a(t.floating);return{reference:c2(t.reference,await o(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function d2(t){return Vo(t).direction==="rtl"}const f2={convertOffsetParentRelativeRectToViewportRelativeRect:e2,getDocumentElement:hr,getClippingRect:s2,getOffsetParent:Zb,getElementRects:u2,getClientRects:t2,getDimensions:l2,getScale:Gi,isElement:qo,isRTL:d2};function Kb(t,o){return t.x===o.x&&t.y===o.y&&t.width===o.width&&t.height===o.height}function h2(t,o){let a=null,i;const l=hr(t);function c(){var f;clearTimeout(i),(f=a)==null||f.disconnect(),a=null}function u(f,p){f===void 0&&(f=!1),p===void 0&&(p=1),c();const h=t.getBoundingClientRect(),{left:g,top:m,width:b,height:w}=h;if(f||o(),!b||!w)return;const C=Vc(m),A=Vc(l.clientWidth-(g+b)),S=Vc(l.clientHeight-(m+w)),R=Vc(g),E={rootMargin:-C+"px "+-A+"px "+-S+"px "+-R+"px",threshold:ho(0,Sa(1,p))||1};let k=!0;function I(z){const D=z[0].intersectionRatio;if(D!==p){if(!k)return u();D?u(!1,D):i=setTimeout(()=>{u(!1,1e-7)},1e3)}D===1&&!Kb(h,t.getBoundingClientRect())&&u(),k=!1}try{a=new IntersectionObserver(I,{...E,root:l.ownerDocument})}catch{a=new IntersectionObserver(I,E)}a.observe(t)}return u(!0),c}function p2(t,o,a,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:f=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,h=xp(t),g=l||c?[...h?Ml(h):[],...Ml(o)]:[];g.forEach(R=>{l&&R.addEventListener("scroll",a,{passive:!0}),c&&R.addEventListener("resize",a)});const m=h&&f?h2(h,a):null;let b=-1,w=null;u&&(w=new ResizeObserver(R=>{let[M]=R;M&&M.target===h&&w&&(w.unobserve(o),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var E;(E=w)==null||E.observe(o)})),a()}),h&&!p&&w.observe(h),w.observe(o));let C,A=p?Za(t):null;p&&S();function S(){const R=Za(t);A&&!Kb(A,R)&&a(),A=R,C=requestAnimationFrame(S)}return a(),()=>{var R;g.forEach(M=>{l&&M.removeEventListener("scroll",a),c&&M.removeEventListener("resize",a)}),m?.(),(R=w)==null||R.disconnect(),w=null,p&&cancelAnimationFrame(C)}}const m2=LE,g2=HE,y2=PE,x2=$E,b2=zE,ex=BE,v2=YE,A2=(t,o,a)=>{const i=new Map,l={platform:f2,...a},c={...l.platform,_c:i};return jE(t,o,{...l,platform:c})};var w2=typeof document<"u",C2=function(){},fu=w2?x.useLayoutEffect:C2;function Cu(t,o){if(t===o)return!0;if(typeof t!=typeof o)return!1;if(typeof t=="function"&&t.toString()===o.toString())return!0;let a,i,l;if(t&&o&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==o.length)return!1;for(i=a;i--!==0;)if(!Cu(t[i],o[i]))return!1;return!0}if(l=Object.keys(t),a=l.length,a!==Object.keys(o).length)return!1;for(i=a;i--!==0;)if(!{}.hasOwnProperty.call(o,l[i]))return!1;for(i=a;i--!==0;){const c=l[i];if(!(c==="_owner"&&t.$$typeof)&&!Cu(t[c],o[c]))return!1}return!0}return t!==t&&o!==o}function Jb(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function tx(t,o){const a=Jb(t);return Math.round(o*a)/a}function sh(t){const o=x.useRef(t);return fu(()=>{o.current=t}),o}function S2(t){t===void 0&&(t={});const{placement:o="bottom",strategy:a="absolute",middleware:i=[],platform:l,elements:{reference:c,floating:u}={},transform:f=!0,whileElementsMounted:p,open:h}=t,[g,m]=x.useState({x:0,y:0,strategy:a,placement:o,middlewareData:{},isPositioned:!1}),[b,w]=x.useState(i);Cu(b,i)||w(i);const[C,A]=x.useState(null),[S,R]=x.useState(null),M=x.useCallback(N=>{N!==z.current&&(z.current=N,A(N))},[]),E=x.useCallback(N=>{N!==D.current&&(D.current=N,R(N))},[]),k=c||C,I=u||S,z=x.useRef(null),D=x.useRef(null),j=x.useRef(g),$=p!=null,F=sh(p),X=sh(l),Z=sh(h),K=x.useCallback(()=>{if(!z.current||!D.current)return;const N={placement:o,strategy:a,middleware:b};X.current&&(N.platform=X.current),A2(z.current,D.current,N).then(P=>{const O={...P,isPositioned:Z.current!==!1};te.current&&!Cu(j.current,O)&&(j.current=O,Lr.flushSync(()=>{m(O)}))})},[b,o,a,X,Z]);fu(()=>{h===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(N=>({...N,isPositioned:!1})))},[h]);const te=x.useRef(!1);fu(()=>(te.current=!0,()=>{te.current=!1}),[]),fu(()=>{if(k&&(z.current=k),I&&(D.current=I),k&&I){if(F.current)return F.current(k,I,K);K()}},[k,I,K,F,$]);const Q=x.useMemo(()=>({reference:z,floating:D,setReference:M,setFloating:E}),[M,E]),_=x.useMemo(()=>({reference:k,floating:I}),[k,I]),H=x.useMemo(()=>{const N={position:a,left:0,top:0};if(!_.floating)return N;const P=tx(_.floating,g.x),O=tx(_.floating,g.y);return f?{...N,transform:"translate("+P+"px, "+O+"px)",...Jb(_.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:P,top:O}},[a,f,_.floating,g.x,g.y]);return x.useMemo(()=>({...g,update:K,refs:Q,elements:_,floatingStyles:H}),[g,K,Q,_,H])}const E2=t=>{function o(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:i,padding:l}=typeof t=="function"?t(a):t;return i&&o(i)?i.current!=null?ex({element:i.current,padding:l}).fn(a):{}:i?ex({element:i,padding:l}).fn(a):{}}}},M2=(t,o)=>({...m2(t),options:[t,o]}),R2=(t,o)=>({...g2(t),options:[t,o]}),k2=(t,o)=>({...v2(t),options:[t,o]}),T2=(t,o)=>({...y2(t),options:[t,o]}),I2=(t,o)=>({...x2(t),options:[t,o]}),O2=(t,o)=>({...b2(t),options:[t,o]}),_2=(t,o)=>({...E2(t),options:[t,o]});var D2="Arrow",ev=x.forwardRef((t,o)=>{const{children:a,width:i=10,height:l=5,...c}=t;return v.jsx(Un.svg,{...c,ref:o,width:i,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});ev.displayName=D2;var j2=ev;function B2(t){const[o,a]=x.useState(void 0);return Ca(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let u,f;if("borderBoxSize"in c){const p=c.borderBoxSize,h=Array.isArray(p)?p[0]:p;u=h.inlineSize,f=h.blockSize}else u=t.offsetWidth,f=t.offsetHeight;a({width:u,height:f})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else a(void 0)},[t]),o}var bp="Popper",[tv,nv]=_l(bp),[P2,ov]=tv(bp),rv=t=>{const{__scopePopper:o,children:a}=t,[i,l]=x.useState(null);return v.jsx(P2,{scope:o,anchor:i,onAnchorChange:l,children:a})};rv.displayName=bp;var av="PopperAnchor",iv=x.forwardRef((t,o)=>{const{__scopePopper:a,virtualRef:i,...l}=t,c=ov(av,a),u=x.useRef(null),f=qn(o,u),p=x.useRef(null);return x.useEffect(()=>{const h=p.current;p.current=i?.current||u.current,h!==p.current&&c.onAnchorChange(p.current)}),i?null:v.jsx(Un.div,{...l,ref:f})});iv.displayName=av;var vp="PopperContent",[z2,N2]=tv(vp),sv=x.forwardRef((t,o)=>{const{__scopePopper:a,side:i="bottom",sideOffset:l=0,align:c="center",alignOffset:u=0,arrowPadding:f=0,avoidCollisions:p=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:b=!1,updatePositionStrategy:w="optimized",onPlaced:C,...A}=t,S=ov(vp,a),[R,M]=x.useState(null),E=qn(o,le=>M(le)),[k,I]=x.useState(null),z=B2(k),D=z?.width??0,j=z?.height??0,$=i+(c!=="center"?"-"+c:""),F=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},X=Array.isArray(h)?h:[h],Z=X.length>0,K={padding:F,boundary:X.filter(H2),altBoundary:Z},{refs:te,floatingStyles:Q,placement:_,isPositioned:H,middlewareData:N}=S2({strategy:"fixed",placement:$,whileElementsMounted:(...le)=>p2(...le,{animationFrame:w==="always"}),elements:{reference:S.anchor},middleware:[M2({mainAxis:l+j,alignmentAxis:u}),p&&R2({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?k2():void 0,...K}),p&&T2({...K}),I2({...K,apply:({elements:le,rects:fe,availableWidth:ge,availableHeight:Se})=>{const{width:De,height:xe}=fe.reference,Te=le.floating.style;Te.setProperty("--radix-popper-available-width",`${ge}px`),Te.setProperty("--radix-popper-available-height",`${Se}px`),Te.setProperty("--radix-popper-anchor-width",`${De}px`),Te.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),k&&_2({element:k,padding:f}),Y2({arrowWidth:D,arrowHeight:j}),b&&O2({strategy:"referenceHidden",...K})]}),[P,O]=uv(_),U=cr(C);Ca(()=>{H&&U?.()},[H,U]);const L=N.arrow?.x,Y=N.arrow?.y,q=N.arrow?.centerOffset!==0,[J,oe]=x.useState();return Ca(()=>{R&&oe(window.getComputedStyle(R).zIndex)},[R]),v.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:H?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:v.jsx(z2,{scope:a,placedSide:P,onArrowChange:I,arrowX:L,arrowY:Y,shouldHideArrow:q,children:v.jsx(Un.div,{"data-side":P,"data-align":O,...A,ref:E,style:{...A.style,animation:H?void 0:"none"}})})})});sv.displayName=vp;var lv="PopperArrow",L2={top:"bottom",right:"left",bottom:"top",left:"right"},cv=x.forwardRef(function(o,a){const{__scopePopper:i,...l}=o,c=N2(lv,i),u=L2[c.placedSide];return v.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:v.jsx(j2,{...l,ref:a,style:{...l.style,display:"block"}})})});cv.displayName=lv;function H2(t){return t!==null}var Y2=t=>({name:"transformOrigin",options:t,fn(o){const{placement:a,rects:i,middlewareData:l}=o,u=l.arrow?.centerOffset!==0,f=u?0:t.arrowWidth,p=u?0:t.arrowHeight,[h,g]=uv(a),m={start:"0%",center:"50%",end:"100%"}[g],b=(l.arrow?.x??0)+f/2,w=(l.arrow?.y??0)+p/2;let C="",A="";return h==="bottom"?(C=u?m:`${b}px`,A=`${-p}px`):h==="top"?(C=u?m:`${b}px`,A=`${i.floating.height+p}px`):h==="right"?(C=`${-p}px`,A=u?m:`${w}px`):h==="left"&&(C=`${i.floating.width+p}px`,A=u?m:`${w}px`),{data:{x:C,y:A}}}});function uv(t){const[o,a="center"]=t.split("-");return[o,a]}var dv=rv,$2=iv,U2=sv,X2=cv,Q2="Portal",fv=x.forwardRef((t,o)=>{const{container:a,...i}=t,[l,c]=x.useState(!1);Ca(()=>c(!0),[]);const u=a||l&&globalThis?.document?.body;return u?aE.createPortal(v.jsx(Un.div,{...i,ref:o}),u):null});fv.displayName=Q2;function F2(t,o){return x.useReducer((a,i)=>o[a][i]??a,t)}var jl=t=>{const{present:o,children:a}=t,i=G2(o),l=typeof a=="function"?a({present:i.isPresent}):x.Children.only(a),c=qn(i.ref,W2(l));return typeof a=="function"||i.isPresent?x.cloneElement(l,{ref:c}):null};jl.displayName="Presence";function G2(t){const[o,a]=x.useState(),i=x.useRef(null),l=x.useRef(t),c=x.useRef("none"),u=t?"mounted":"unmounted",[f,p]=F2(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=Zc(i.current);c.current=f==="mounted"?h:"none"},[f]),Ca(()=>{const h=i.current,g=l.current;if(g!==t){const b=c.current,w=Zc(h);t?p("MOUNT"):w==="none"||h?.display==="none"?p("UNMOUNT"):p(g&&b!==w?"ANIMATION_OUT":"UNMOUNT"),l.current=t}},[t,p]),Ca(()=>{if(o){let h;const g=o.ownerDocument.defaultView??window,m=w=>{const A=Zc(i.current).includes(CSS.escape(w.animationName));if(w.target===o&&A&&(p("ANIMATION_END"),!l.current)){const S=o.style.animationFillMode;o.style.animationFillMode="forwards",h=g.setTimeout(()=>{o.style.animationFillMode==="forwards"&&(o.style.animationFillMode=S)})}},b=w=>{w.target===o&&(c.current=Zc(i.current))};return o.addEventListener("animationstart",b),o.addEventListener("animationcancel",m),o.addEventListener("animationend",m),()=>{g.clearTimeout(h),o.removeEventListener("animationstart",b),o.removeEventListener("animationcancel",m),o.removeEventListener("animationend",m)}}else p("ANIMATION_END")},[o,p]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:x.useCallback(h=>{i.current=h?getComputedStyle(h):null,a(h)},[])}}function Zc(t){return t?.animationName||"none"}function W2(t){let o=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning;return a?t.ref:(o=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var q2=ub[" useInsertionEffect ".trim().toString()]||Ca;function Ap({prop:t,defaultProp:o,onChange:a=()=>{},caller:i}){const[l,c,u]=V2({defaultProp:o,onChange:a}),f=t!==void 0,p=f?t:l;{const g=x.useRef(t!==void 0);x.useEffect(()=>{const m=g.current;m!==f&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=f},[f,i])}const h=x.useCallback(g=>{if(f){const m=Z2(g)?g(t):g;m!==t&&u.current?.(m)}else c(g)},[f,t,c,u]);return[p,h]}function V2({defaultProp:t,onChange:o}){const[a,i]=x.useState(t),l=x.useRef(a),c=x.useRef(o);return q2(()=>{c.current=o},[o]),x.useEffect(()=>{l.current!==a&&(c.current?.(a),l.current=a)},[a,l]),[a,i,c]}function Z2(t){return typeof t=="function"}var lh="rovingFocusGroup.onEntryFocus",K2={bubbles:!1,cancelable:!0},Bl="RovingFocusGroup",[$h,hv,J2]=dp(Bl),[eM,Qu]=_l(Bl,[J2]),[tM,nM]=eM(Bl),pv=x.forwardRef((t,o)=>v.jsx($h.Provider,{scope:t.__scopeRovingFocusGroup,children:v.jsx($h.Slot,{scope:t.__scopeRovingFocusGroup,children:v.jsx(oM,{...t,ref:o})})}));pv.displayName=Bl;var oM=x.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:a,orientation:i,loop:l=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:p,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...m}=t,b=x.useRef(null),w=qn(o,b),C=fp(c),[A,S]=Ap({prop:u,defaultProp:f??null,onChange:p,caller:Bl}),[R,M]=x.useState(!1),E=cr(h),k=hv(a),I=x.useRef(!1),[z,D]=x.useState(0);return x.useEffect(()=>{const j=b.current;if(j)return j.addEventListener(lh,E),()=>j.removeEventListener(lh,E)},[E]),v.jsx(tM,{scope:a,orientation:i,dir:C,loop:l,currentTabStopId:A,onItemFocus:x.useCallback(j=>S(j),[S]),onItemShiftTab:x.useCallback(()=>M(!0),[]),onFocusableItemAdd:x.useCallback(()=>D(j=>j+1),[]),onFocusableItemRemove:x.useCallback(()=>D(j=>j-1),[]),children:v.jsx(Un.div,{tabIndex:R||z===0?-1:0,"data-orientation":i,...m,ref:w,style:{outline:"none",...t.style},onMouseDown:nt(t.onMouseDown,()=>{I.current=!0}),onFocus:nt(t.onFocus,j=>{const $=!I.current;if(j.target===j.currentTarget&&$&&!R){const F=new CustomEvent(lh,K2);if(j.currentTarget.dispatchEvent(F),!F.defaultPrevented){const X=k().filter(_=>_.focusable),Z=X.find(_=>_.active),K=X.find(_=>_.id===A),Q=[Z,K,...X].filter(Boolean).map(_=>_.ref.current);yv(Q,g)}}I.current=!1}),onBlur:nt(t.onBlur,()=>M(!1))})})}),mv="RovingFocusGroupItem",gv=x.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:a,focusable:i=!0,active:l=!1,tabStopId:c,children:u,...f}=t,p=Fi(),h=c||p,g=nM(mv,a),m=g.currentTabStopId===h,b=hv(a),{onFocusableItemAdd:w,onFocusableItemRemove:C,currentTabStopId:A}=g;return x.useEffect(()=>{if(i)return w(),()=>C()},[i,w,C]),v.jsx($h.ItemSlot,{scope:a,id:h,focusable:i,active:l,children:v.jsx(Un.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...f,ref:o,onMouseDown:nt(t.onMouseDown,S=>{i?g.onItemFocus(h):S.preventDefault()}),onFocus:nt(t.onFocus,()=>g.onItemFocus(h)),onKeyDown:nt(t.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){g.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const R=iM(S,g.orientation,g.dir);if(R!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let E=b().filter(k=>k.focusable).map(k=>k.ref.current);if(R==="last")E.reverse();else if(R==="prev"||R==="next"){R==="prev"&&E.reverse();const k=E.indexOf(S.currentTarget);E=g.loop?sM(E,k+1):E.slice(k+1)}setTimeout(()=>yv(E))}}),children:typeof u=="function"?u({isCurrentTabStop:m,hasTabStop:A!=null}):u})})});gv.displayName=mv;var rM={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aM(t,o){return o!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iM(t,o,a){const i=aM(t.key,a);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return rM[i]}function yv(t,o=!1){const a=document.activeElement;for(const i of t)if(i===a||(i.focus({preventScroll:o}),document.activeElement!==a))return}function sM(t,o){return t.map((a,i)=>t[(o+i)%t.length])}var xv=pv,bv=gv,lM=function(t){if(typeof document>"u")return null;var o=Array.isArray(t)?t[0]:t;return o.ownerDocument.body},Bi=new WeakMap,Kc=new WeakMap,Jc={},ch=0,vv=function(t){return t&&(t.host||vv(t.parentNode))},cM=function(t,o){return o.map(function(a){if(t.contains(a))return a;var i=vv(a);return i&&t.contains(i)?i:(console.error("aria-hidden",a,"in not contained inside",t,". Doing nothing"),null)}).filter(function(a){return!!a})},uM=function(t,o,a,i){var l=cM(o,Array.isArray(t)?t:[t]);Jc[a]||(Jc[a]=new WeakMap);var c=Jc[a],u=[],f=new Set,p=new Set(l),h=function(m){!m||f.has(m)||(f.add(m),h(m.parentNode))};l.forEach(h);var g=function(m){!m||p.has(m)||Array.prototype.forEach.call(m.children,function(b){if(f.has(b))g(b);else try{var w=b.getAttribute(i),C=w!==null&&w!=="false",A=(Bi.get(b)||0)+1,S=(c.get(b)||0)+1;Bi.set(b,A),c.set(b,S),u.push(b),A===1&&C&&Kc.set(b,!0),S===1&&b.setAttribute(a,"true"),C||b.setAttribute(i,"true")}catch(R){console.error("aria-hidden: cannot operate on ",b,R)}})};return g(o),f.clear(),ch++,function(){u.forEach(function(m){var b=Bi.get(m)-1,w=c.get(m)-1;Bi.set(m,b),c.set(m,w),b||(Kc.has(m)||m.removeAttribute(i),Kc.delete(m)),w||m.removeAttribute(a)}),ch--,ch||(Bi=new WeakMap,Bi=new WeakMap,Kc=new WeakMap,Jc={})}},dM=function(t,o,a){a===void 0&&(a="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),l=lM(t);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),uM(i,l,a,"aria-hidden")):function(){return null}},hu="right-scroll-bar-position",pu="width-before-scroll-bar",fM="with-scroll-bars-hidden",hM="--removed-body-scroll-bar-size";function uh(t,o){return typeof t=="function"?t(o):t&&(t.current=o),t}function pM(t,o){var a=x.useState(function(){return{value:t,callback:o,facade:{get current(){return a.value},set current(i){var l=a.value;l!==i&&(a.value=i,a.callback(i,l))}}}})[0];return a.callback=o,a.facade}var mM=typeof window<"u"?x.useLayoutEffect:x.useEffect,nx=new WeakMap;function gM(t,o){var a=pM(null,function(i){return t.forEach(function(l){return uh(l,i)})});return mM(function(){var i=nx.get(a);if(i){var l=new Set(i),c=new Set(t),u=a.current;l.forEach(function(f){c.has(f)||uh(f,null)}),c.forEach(function(f){l.has(f)||uh(f,u)})}nx.set(a,t)},[t]),a}function yM(t){return t}function xM(t,o){o===void 0&&(o=yM);var a=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(c){var u=o(c,i);return a.push(u),function(){a=a.filter(function(f){return f!==u})}},assignSyncMedium:function(c){for(i=!0;a.length;){var u=a;a=[],u.forEach(c)}a={push:function(f){return c(f)},filter:function(){return a}}},assignMedium:function(c){i=!0;var u=[];if(a.length){var f=a;a=[],f.forEach(c),u=a}var p=function(){var g=u;u=[],g.forEach(c)},h=function(){return Promise.resolve().then(p)};h(),a={push:function(g){u.push(g),h()},filter:function(g){return u=u.filter(g),a}}}};return l}function bM(t){t===void 0&&(t={});var o=xM(null);return o.options=nn({async:!0,ssr:!1},t),o}var Av=function(t){var o=t.sideCar,a=fb(t,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=o.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,nn({},a))};Av.isSideCarExport=!0;function vM(t,o){return t.useMedium(o),Av}var wv=bM(),dh=function(){},Fu=x.forwardRef(function(t,o){var a=x.useRef(null),i=x.useState({onScrollCapture:dh,onWheelCapture:dh,onTouchMoveCapture:dh}),l=i[0],c=i[1],u=t.forwardProps,f=t.children,p=t.className,h=t.removeScrollBar,g=t.enabled,m=t.shards,b=t.sideCar,w=t.noRelative,C=t.noIsolation,A=t.inert,S=t.allowPinchZoom,R=t.as,M=R===void 0?"div":R,E=t.gapMode,k=fb(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=b,z=gM([a,o]),D=nn(nn({},k),l);return x.createElement(x.Fragment,null,g&&x.createElement(I,{sideCar:wv,removeScrollBar:h,shards:m,noRelative:w,noIsolation:C,inert:A,setCallbacks:c,allowPinchZoom:!!S,lockRef:a,gapMode:E}),u?x.cloneElement(x.Children.only(f),nn(nn({},D),{ref:z})):x.createElement(M,nn({},D,{className:p,ref:z}),f))});Fu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fu.classNames={fullWidth:pu,zeroRight:hu};var AM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function wM(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var o=AM();return o&&t.setAttribute("nonce",o),t}function CM(t,o){t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}function SM(t){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(t)}var EM=function(){var t=0,o=null;return{add:function(a){t==0&&(o=wM())&&(CM(o,a),SM(o)),t++},remove:function(){t--,!t&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}},MM=function(){var t=EM();return function(o,a){x.useEffect(function(){return t.add(o),function(){t.remove()}},[o&&a])}},Cv=function(){var t=MM(),o=function(a){var i=a.styles,l=a.dynamic;return t(i,l),null};return o},RM={left:0,top:0,right:0,gap:0},fh=function(t){return parseInt(t||"",10)||0},kM=function(t){var o=window.getComputedStyle(document.body),a=o[t==="padding"?"paddingLeft":"marginLeft"],i=o[t==="padding"?"paddingTop":"marginTop"],l=o[t==="padding"?"paddingRight":"marginRight"];return[fh(a),fh(i),fh(l)]},TM=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RM;var o=kM(t),a=document.documentElement.clientWidth,i=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,i-a+o[2]-o[0])}},IM=Cv(),Wi="data-scroll-locked",OM=function(t,o,a,i){var l=t.left,c=t.top,u=t.right,f=t.gap;return a===void 0&&(a="margin"),`
  .`.concat(fM,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(f,"px ").concat(i,`;
  }
  body[`).concat(Wi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(i,";"),a==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(i,`;
    `),a==="padding"&&"padding-right: ".concat(f,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hu,` {
    right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(pu,` {
    margin-right: `).concat(f,"px ").concat(i,`;
  }
  
  .`).concat(hu," .").concat(hu,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(pu," .").concat(pu,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Wi,`] {
    `).concat(hM,": ").concat(f,`px;
  }
`)},ox=function(){var t=parseInt(document.body.getAttribute(Wi)||"0",10);return isFinite(t)?t:0},_M=function(){x.useEffect(function(){return document.body.setAttribute(Wi,(ox()+1).toString()),function(){var t=ox()-1;t<=0?document.body.removeAttribute(Wi):document.body.setAttribute(Wi,t.toString())}},[])},DM=function(t){var o=t.noRelative,a=t.noImportant,i=t.gapMode,l=i===void 0?"margin":i;_M();var c=x.useMemo(function(){return TM(l)},[l]);return x.createElement(IM,{styles:OM(c,!o,l,a?"":"!important")})},Uh=!1;if(typeof window<"u")try{var eu=Object.defineProperty({},"passive",{get:function(){return Uh=!0,!0}});window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Uh=!1}var Pi=Uh?{passive:!1}:!1,jM=function(t){return t.tagName==="TEXTAREA"},Sv=function(t,o){if(!(t instanceof Element))return!1;var a=window.getComputedStyle(t);return a[o]!=="hidden"&&!(a.overflowY===a.overflowX&&!jM(t)&&a[o]==="visible")},BM=function(t){return Sv(t,"overflowY")},PM=function(t){return Sv(t,"overflowX")},rx=function(t,o){var a=o.ownerDocument,i=o;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=Ev(t,i);if(l){var c=Mv(t,i),u=c[1],f=c[2];if(u>f)return!0}i=i.parentNode}while(i&&i!==a.body);return!1},zM=function(t){var o=t.scrollTop,a=t.scrollHeight,i=t.clientHeight;return[o,a,i]},NM=function(t){var o=t.scrollLeft,a=t.scrollWidth,i=t.clientWidth;return[o,a,i]},Ev=function(t,o){return t==="v"?BM(o):PM(o)},Mv=function(t,o){return t==="v"?zM(o):NM(o)},LM=function(t,o){return t==="h"&&o==="rtl"?-1:1},HM=function(t,o,a,i,l){var c=LM(t,window.getComputedStyle(o).direction),u=c*i,f=a.target,p=o.contains(f),h=!1,g=u>0,m=0,b=0;do{if(!f)break;var w=Mv(t,f),C=w[0],A=w[1],S=w[2],R=A-S-c*C;(C||R)&&Ev(t,f)&&(m+=R,b+=C);var M=f.parentNode;f=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!p&&f!==document.body||p&&(o.contains(f)||o===f));return(g&&Math.abs(m)<1||!g&&Math.abs(b)<1)&&(h=!0),h},tu=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ax=function(t){return[t.deltaX,t.deltaY]},ix=function(t){return t&&"current"in t?t.current:t},YM=function(t,o){return t[0]===o[0]&&t[1]===o[1]},$M=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UM=0,zi=[];function XM(t){var o=x.useRef([]),a=x.useRef([0,0]),i=x.useRef(),l=x.useState(UM++)[0],c=x.useState(Cv)[0],u=x.useRef(t);x.useEffect(function(){u.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(l));var A=Cl([t.lockRef.current],(t.shards||[]).map(ix),!0).filter(Boolean);return A.forEach(function(S){return S.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),A.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(l))})}}},[t.inert,t.lockRef.current,t.shards]);var f=x.useCallback(function(A,S){if("touches"in A&&A.touches.length===2||A.type==="wheel"&&A.ctrlKey)return!u.current.allowPinchZoom;var R=tu(A),M=a.current,E="deltaX"in A?A.deltaX:M[0]-R[0],k="deltaY"in A?A.deltaY:M[1]-R[1],I,z=A.target,D=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in A&&D==="h"&&z.type==="range")return!1;var j=rx(D,z);if(!j)return!0;if(j?I=D:(I=D==="v"?"h":"v",j=rx(D,z)),!j)return!1;if(!i.current&&"changedTouches"in A&&(E||k)&&(i.current=I),!I)return!0;var $=i.current||I;return HM($,S,A,$==="h"?E:k)},[]),p=x.useCallback(function(A){var S=A;if(!(!zi.length||zi[zi.length-1]!==c)){var R="deltaY"in S?ax(S):tu(S),M=o.current.filter(function(I){return I.name===S.type&&(I.target===S.target||S.target===I.shadowParent)&&YM(I.delta,R)})[0];if(M&&M.should){S.cancelable&&S.preventDefault();return}if(!M){var E=(u.current.shards||[]).map(ix).filter(Boolean).filter(function(I){return I.contains(S.target)}),k=E.length>0?f(S,E[0]):!u.current.noIsolation;k&&S.cancelable&&S.preventDefault()}}},[]),h=x.useCallback(function(A,S,R,M){var E={name:A,delta:S,target:R,should:M,shadowParent:QM(R)};o.current.push(E),setTimeout(function(){o.current=o.current.filter(function(k){return k!==E})},1)},[]),g=x.useCallback(function(A){a.current=tu(A),i.current=void 0},[]),m=x.useCallback(function(A){h(A.type,ax(A),A.target,f(A,t.lockRef.current))},[]),b=x.useCallback(function(A){h(A.type,tu(A),A.target,f(A,t.lockRef.current))},[]);x.useEffect(function(){return zi.push(c),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:b}),document.addEventListener("wheel",p,Pi),document.addEventListener("touchmove",p,Pi),document.addEventListener("touchstart",g,Pi),function(){zi=zi.filter(function(A){return A!==c}),document.removeEventListener("wheel",p,Pi),document.removeEventListener("touchmove",p,Pi),document.removeEventListener("touchstart",g,Pi)}},[]);var w=t.removeScrollBar,C=t.inert;return x.createElement(x.Fragment,null,C?x.createElement(c,{styles:$M(l)}):null,w?x.createElement(DM,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function QM(t){for(var o=null;t!==null;)t instanceof ShadowRoot&&(o=t.host,t=t.host),t=t.parentNode;return o}const FM=vM(wv,XM);var Rv=x.forwardRef(function(t,o){return x.createElement(Fu,nn({},t,{ref:o,sideCar:FM}))});Rv.classNames=Fu.classNames;var Xh=["Enter"," "],GM=["ArrowDown","PageUp","Home"],kv=["ArrowUp","PageDown","End"],WM=[...GM,...kv],qM={ltr:[...Xh,"ArrowRight"],rtl:[...Xh,"ArrowLeft"]},VM={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pl="Menu",[Rl,ZM,KM]=dp(Pl),[Ja,JM]=_l(Pl,[KM,nv,Qu]),zl=nv(),Tv=Qu(),[Iv,Ma]=Ja(Pl),[eR,Nl]=Ja(Pl),Ov=t=>{const{__scopeMenu:o,open:a=!1,children:i,dir:l,onOpenChange:c,modal:u=!0}=t,f=zl(o),[p,h]=x.useState(null),g=x.useRef(!1),m=cr(c),b=fp(l);return x.useEffect(()=>{const w=()=>{g.current=!0,document.addEventListener("pointerdown",C,{capture:!0,once:!0}),document.addEventListener("pointermove",C,{capture:!0,once:!0})},C=()=>g.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",C,{capture:!0}),document.removeEventListener("pointermove",C,{capture:!0})}},[]),v.jsx(dv,{...f,children:v.jsx(Iv,{scope:o,open:a,onOpenChange:m,content:p,onContentChange:h,children:v.jsx(eR,{scope:o,onClose:x.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:b,modal:u,children:i})})})};Ov.displayName=Pl;var tR="MenuAnchor",wp=x.forwardRef((t,o)=>{const{__scopeMenu:a,...i}=t,l=zl(a);return v.jsx($2,{...l,...i,ref:o})});wp.displayName=tR;var Cp="MenuPortal",[nR,_v]=Ja(Cp,{forceMount:void 0}),Dv=t=>{const{__scopeMenu:o,forceMount:a,children:i,container:l}=t,c=Ma(Cp,o);return v.jsx(nR,{scope:o,forceMount:a,children:v.jsx(jl,{present:a||c.open,children:v.jsx(fv,{asChild:!0,container:l,children:i})})})};Dv.displayName=Cp;var jo="MenuContent",[oR,Sp]=Ja(jo),jv=x.forwardRef((t,o)=>{const a=_v(jo,t.__scopeMenu),{forceMount:i=a.forceMount,...l}=t,c=Ma(jo,t.__scopeMenu),u=Nl(jo,t.__scopeMenu);return v.jsx(Rl.Provider,{scope:t.__scopeMenu,children:v.jsx(jl,{present:i||c.open,children:v.jsx(Rl.Slot,{scope:t.__scopeMenu,children:u.modal?v.jsx(rR,{...l,ref:o}):v.jsx(aR,{...l,ref:o})})})})}),rR=x.forwardRef((t,o)=>{const a=Ma(jo,t.__scopeMenu),i=x.useRef(null),l=qn(o,i);return x.useEffect(()=>{const c=i.current;if(c)return dM(c)},[]),v.jsx(Ep,{...t,ref:l,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:nt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),aR=x.forwardRef((t,o)=>{const a=Ma(jo,t.__scopeMenu);return v.jsx(Ep,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),iR=bu("MenuContent.ScrollLock"),Ep=x.forwardRef((t,o)=>{const{__scopeMenu:a,loop:i=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:f,onEntryFocus:p,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:b,onDismiss:w,disableOutsideScroll:C,...A}=t,S=Ma(jo,a),R=Nl(jo,a),M=zl(a),E=Tv(a),k=ZM(a),[I,z]=x.useState(null),D=x.useRef(null),j=qn(o,D,S.onContentChange),$=x.useRef(0),F=x.useRef(""),X=x.useRef(0),Z=x.useRef(null),K=x.useRef("right"),te=x.useRef(0),Q=C?Rv:x.Fragment,_=C?{as:iR,allowPinchZoom:!0}:void 0,H=P=>{const O=F.current+P,U=k().filter(le=>!le.disabled),L=document.activeElement,Y=U.find(le=>le.ref.current===L)?.textValue,q=U.map(le=>le.textValue),J=xR(q,O,Y),oe=U.find(le=>le.textValue===J)?.ref.current;(function le(fe){F.current=fe,window.clearTimeout($.current),fe!==""&&($.current=window.setTimeout(()=>le(""),1e3))})(O),oe&&setTimeout(()=>oe.focus())};x.useEffect(()=>()=>window.clearTimeout($.current),[]),mE();const N=x.useCallback(P=>K.current===Z.current?.side&&vR(P,Z.current?.area),[]);return v.jsx(oR,{scope:a,searchRef:F,onItemEnter:x.useCallback(P=>{N(P)&&P.preventDefault()},[N]),onItemLeave:x.useCallback(P=>{N(P)||(D.current?.focus(),z(null))},[N]),onTriggerLeave:x.useCallback(P=>{N(P)&&P.preventDefault()},[N]),pointerGraceTimerRef:X,onPointerGraceIntentChange:x.useCallback(P=>{Z.current=P},[]),children:v.jsx(Q,{..._,children:v.jsx(Yb,{asChild:!0,trapped:l,onMountAutoFocus:nt(c,P=>{P.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:v.jsx(Lb,{asChild:!0,disableOutsidePointerEvents:f,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:b,onDismiss:w,children:v.jsx(xv,{asChild:!0,...E,dir:R.dir,orientation:"vertical",loop:i,currentTabStopId:I,onCurrentTabStopIdChange:z,onEntryFocus:nt(p,P=>{R.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:v.jsx(U2,{role:"menu","aria-orientation":"vertical","data-state":Zv(S.open),"data-radix-menu-content":"",dir:R.dir,...M,...A,ref:j,style:{outline:"none",...A.style},onKeyDown:nt(A.onKeyDown,P=>{const U=P.target.closest("[data-radix-menu-content]")===P.currentTarget,L=P.ctrlKey||P.altKey||P.metaKey,Y=P.key.length===1;U&&(P.key==="Tab"&&P.preventDefault(),!L&&Y&&H(P.key));const q=D.current;if(P.target!==q||!WM.includes(P.key))return;P.preventDefault();const oe=k().filter(le=>!le.disabled).map(le=>le.ref.current);kv.includes(P.key)&&oe.reverse(),gR(oe)}),onBlur:nt(t.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout($.current),F.current="")}),onPointerMove:nt(t.onPointerMove,kl(P=>{const O=P.target,U=te.current!==P.clientX;if(P.currentTarget.contains(O)&&U){const L=P.clientX>te.current?"right":"left";K.current=L,te.current=P.clientX}}))})})})})})})});jv.displayName=jo;var sR="MenuGroup",Mp=x.forwardRef((t,o)=>{const{__scopeMenu:a,...i}=t;return v.jsx(Un.div,{role:"group",...i,ref:o})});Mp.displayName=sR;var lR="MenuLabel",Bv=x.forwardRef((t,o)=>{const{__scopeMenu:a,...i}=t;return v.jsx(Un.div,{...i,ref:o})});Bv.displayName=lR;var Su="MenuItem",sx="menu.itemSelect",Gu=x.forwardRef((t,o)=>{const{disabled:a=!1,onSelect:i,...l}=t,c=x.useRef(null),u=Nl(Su,t.__scopeMenu),f=Sp(Su,t.__scopeMenu),p=qn(o,c),h=x.useRef(!1),g=()=>{const m=c.current;if(!a&&m){const b=new CustomEvent(sx,{bubbles:!0,cancelable:!0});m.addEventListener(sx,w=>i?.(w),{once:!0}),zb(m,b),b.defaultPrevented?h.current=!1:u.onClose()}};return v.jsx(Pv,{...l,ref:p,disabled:a,onClick:nt(t.onClick,g),onPointerDown:m=>{t.onPointerDown?.(m),h.current=!0},onPointerUp:nt(t.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:nt(t.onKeyDown,m=>{const b=f.searchRef.current!=="";a||b&&m.key===" "||Xh.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Gu.displayName=Su;var Pv=x.forwardRef((t,o)=>{const{__scopeMenu:a,disabled:i=!1,textValue:l,...c}=t,u=Sp(Su,a),f=Tv(a),p=x.useRef(null),h=qn(o,p),[g,m]=x.useState(!1),[b,w]=x.useState("");return x.useEffect(()=>{const C=p.current;C&&w((C.textContent??"").trim())},[c.children]),v.jsx(Rl.ItemSlot,{scope:a,disabled:i,textValue:l??b,children:v.jsx(bv,{asChild:!0,...f,focusable:!i,children:v.jsx(Un.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...c,ref:h,onPointerMove:nt(t.onPointerMove,kl(C=>{i?u.onItemLeave(C):(u.onItemEnter(C),C.defaultPrevented||C.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:nt(t.onPointerLeave,kl(C=>u.onItemLeave(C))),onFocus:nt(t.onFocus,()=>m(!0)),onBlur:nt(t.onBlur,()=>m(!1))})})})}),cR="MenuCheckboxItem",zv=x.forwardRef((t,o)=>{const{checked:a=!1,onCheckedChange:i,...l}=t;return v.jsx($v,{scope:t.__scopeMenu,checked:a,children:v.jsx(Gu,{role:"menuitemcheckbox","aria-checked":Eu(a)?"mixed":a,...l,ref:o,"data-state":Tp(a),onSelect:nt(l.onSelect,()=>i?.(Eu(a)?!0:!a),{checkForDefaultPrevented:!1})})})});zv.displayName=cR;var Nv="MenuRadioGroup",[uR,dR]=Ja(Nv,{value:void 0,onValueChange:()=>{}}),Lv=x.forwardRef((t,o)=>{const{value:a,onValueChange:i,...l}=t,c=cr(i);return v.jsx(uR,{scope:t.__scopeMenu,value:a,onValueChange:c,children:v.jsx(Mp,{...l,ref:o})})});Lv.displayName=Nv;var Hv="MenuRadioItem",Yv=x.forwardRef((t,o)=>{const{value:a,...i}=t,l=dR(Hv,t.__scopeMenu),c=a===l.value;return v.jsx($v,{scope:t.__scopeMenu,checked:c,children:v.jsx(Gu,{role:"menuitemradio","aria-checked":c,...i,ref:o,"data-state":Tp(c),onSelect:nt(i.onSelect,()=>l.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});Yv.displayName=Hv;var Rp="MenuItemIndicator",[$v,fR]=Ja(Rp,{checked:!1}),Uv=x.forwardRef((t,o)=>{const{__scopeMenu:a,forceMount:i,...l}=t,c=fR(Rp,a);return v.jsx(jl,{present:i||Eu(c.checked)||c.checked===!0,children:v.jsx(Un.span,{...l,ref:o,"data-state":Tp(c.checked)})})});Uv.displayName=Rp;var hR="MenuSeparator",Xv=x.forwardRef((t,o)=>{const{__scopeMenu:a,...i}=t;return v.jsx(Un.div,{role:"separator","aria-orientation":"horizontal",...i,ref:o})});Xv.displayName=hR;var pR="MenuArrow",Qv=x.forwardRef((t,o)=>{const{__scopeMenu:a,...i}=t,l=zl(a);return v.jsx(X2,{...l,...i,ref:o})});Qv.displayName=pR;var kp="MenuSub",[mR,Fv]=Ja(kp),Gv=t=>{const{__scopeMenu:o,children:a,open:i=!1,onOpenChange:l}=t,c=Ma(kp,o),u=zl(o),[f,p]=x.useState(null),[h,g]=x.useState(null),m=cr(l);return x.useEffect(()=>(c.open===!1&&m(!1),()=>m(!1)),[c.open,m]),v.jsx(dv,{...u,children:v.jsx(Iv,{scope:o,open:i,onOpenChange:m,content:h,onContentChange:g,children:v.jsx(mR,{scope:o,contentId:Fi(),triggerId:Fi(),trigger:f,onTriggerChange:p,children:a})})})};Gv.displayName=kp;var ml="MenuSubTrigger",Wv=x.forwardRef((t,o)=>{const a=Ma(ml,t.__scopeMenu),i=Nl(ml,t.__scopeMenu),l=Fv(ml,t.__scopeMenu),c=Sp(ml,t.__scopeMenu),u=x.useRef(null),{pointerGraceTimerRef:f,onPointerGraceIntentChange:p}=c,h={__scopeMenu:t.__scopeMenu},g=x.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return x.useEffect(()=>g,[g]),x.useEffect(()=>{const m=f.current;return()=>{window.clearTimeout(m),p(null)}},[f,p]),v.jsx(wp,{asChild:!0,...h,children:v.jsx(Pv,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":l.contentId,"data-state":Zv(a.open),...t,ref:up(o,l.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:nt(t.onPointerMove,kl(m=>{c.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!a.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{a.onOpenChange(!0),g()},100))})),onPointerLeave:nt(t.onPointerLeave,kl(m=>{g();const b=a.content?.getBoundingClientRect();if(b){const w=a.content?.dataset.side,C=w==="right",A=C?-5:5,S=b[C?"left":"right"],R=b[C?"right":"left"];c.onPointerGraceIntentChange({area:[{x:m.clientX+A,y:m.clientY},{x:S,y:b.top},{x:R,y:b.top},{x:R,y:b.bottom},{x:S,y:b.bottom}],side:w}),window.clearTimeout(f.current),f.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(m),m.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:nt(t.onKeyDown,m=>{const b=c.searchRef.current!=="";t.disabled||b&&m.key===" "||qM[i.dir].includes(m.key)&&(a.onOpenChange(!0),a.content?.focus(),m.preventDefault())})})})});Wv.displayName=ml;var qv="MenuSubContent",Vv=x.forwardRef((t,o)=>{const a=_v(jo,t.__scopeMenu),{forceMount:i=a.forceMount,...l}=t,c=Ma(jo,t.__scopeMenu),u=Nl(jo,t.__scopeMenu),f=Fv(qv,t.__scopeMenu),p=x.useRef(null),h=qn(o,p);return v.jsx(Rl.Provider,{scope:t.__scopeMenu,children:v.jsx(jl,{present:i||c.open,children:v.jsx(Rl.Slot,{scope:t.__scopeMenu,children:v.jsx(Ep,{id:f.contentId,"aria-labelledby":f.triggerId,...l,ref:h,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{u.isUsingKeyboardRef.current&&p.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:nt(t.onFocusOutside,g=>{g.target!==f.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:nt(t.onEscapeKeyDown,g=>{u.onClose(),g.preventDefault()}),onKeyDown:nt(t.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),b=VM[u.dir].includes(g.key);m&&b&&(c.onOpenChange(!1),f.trigger?.focus(),g.preventDefault())})})})})})});Vv.displayName=qv;function Zv(t){return t?"open":"closed"}function Eu(t){return t==="indeterminate"}function Tp(t){return Eu(t)?"indeterminate":t?"checked":"unchecked"}function gR(t){const o=document.activeElement;for(const a of t)if(a===o||(a.focus(),document.activeElement!==o))return}function yR(t,o){return t.map((a,i)=>t[(o+i)%t.length])}function xR(t,o,a){const l=o.length>1&&Array.from(o).every(h=>h===o[0])?o[0]:o,c=a?t.indexOf(a):-1;let u=yR(t,Math.max(c,0));l.length===1&&(u=u.filter(h=>h!==a));const p=u.find(h=>h.toLowerCase().startsWith(l.toLowerCase()));return p!==a?p:void 0}function bR(t,o){const{x:a,y:i}=t;let l=!1;for(let c=0,u=o.length-1;c<o.length;u=c++){const f=o[c],p=o[u],h=f.x,g=f.y,m=p.x,b=p.y;g>i!=b>i&&a<(m-h)*(i-g)/(b-g)+h&&(l=!l)}return l}function vR(t,o){if(!o)return!1;const a={x:t.clientX,y:t.clientY};return bR(a,o)}function kl(t){return o=>o.pointerType==="mouse"?t(o):void 0}var AR=Ov,wR=wp,CR=Dv,SR=jv,ER=Mp,MR=Bv,RR=Gu,kR=zv,TR=Lv,IR=Yv,OR=Uv,_R=Xv,DR=Qv,jR=Gv,BR=Wv,PR=Vv,Ll="Menubar",[Qh,zR,NR]=dp(Ll),[Kv]=_l(Ll,[NR,Qu]),Xn=JM(),Jv=Qu(),[LR,Ip]=Kv(Ll),e1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,value:i,onValueChange:l,defaultValue:c,loop:u=!0,dir:f,...p}=t,h=fp(f),g=Jv(a),[m,b]=Ap({prop:i,onChange:l,defaultProp:c??"",caller:Ll}),[w,C]=x.useState(null);return v.jsx(LR,{scope:a,value:m,onMenuOpen:x.useCallback(A=>{b(A),C(A)},[b]),onMenuClose:x.useCallback(()=>b(""),[b]),onMenuToggle:x.useCallback(A=>{b(S=>S?"":A),C(A)},[b]),dir:h,loop:u,children:v.jsx(Qh.Provider,{scope:a,children:v.jsx(Qh.Slot,{scope:a,children:v.jsx(xv,{asChild:!0,...g,orientation:"horizontal",loop:u,dir:h,currentTabStopId:w,onCurrentTabStopIdChange:C,children:v.jsx(Un.div,{role:"menubar",...p,ref:o})})})})})});e1.displayName=Ll;var Op="MenubarMenu",[HR,t1]=Kv(Op),n1=t=>{const{__scopeMenubar:o,value:a,...i}=t,l=Fi(),c=a||l||"LEGACY_REACT_AUTO_VALUE",u=Ip(Op,o),f=Xn(o),p=x.useRef(null),h=x.useRef(!1),g=u.value===c;return x.useEffect(()=>{g||(h.current=!1)},[g]),v.jsx(HR,{scope:o,value:c,triggerId:Fi(),triggerRef:p,contentId:Fi(),wasKeyboardTriggerOpenRef:h,children:v.jsx(AR,{...f,open:g,onOpenChange:m=>{m||u.onMenuClose()},modal:!1,dir:u.dir,...i})})};n1.displayName=Op;var Fh="MenubarTrigger",o1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,disabled:i=!1,...l}=t,c=Jv(a),u=Xn(a),f=Ip(Fh,a),p=t1(Fh,a),h=x.useRef(null),g=qn(o,h,p.triggerRef),[m,b]=x.useState(!1),w=f.value===p.value;return v.jsx(Qh.ItemSlot,{scope:a,value:p.value,disabled:i,children:v.jsx(bv,{asChild:!0,...c,focusable:!i,tabStopId:p.value,children:v.jsx(wR,{asChild:!0,...u,children:v.jsx(Un.button,{type:"button",role:"menuitem",id:p.triggerId,"aria-haspopup":"menu","aria-expanded":w,"aria-controls":w?p.contentId:void 0,"data-highlighted":m?"":void 0,"data-state":w?"open":"closed","data-disabled":i?"":void 0,disabled:i,...l,ref:g,onPointerDown:nt(t.onPointerDown,C=>{!i&&C.button===0&&C.ctrlKey===!1&&(f.onMenuOpen(p.value),w||C.preventDefault())}),onPointerEnter:nt(t.onPointerEnter,()=>{!!f.value&&!w&&(f.onMenuOpen(p.value),h.current?.focus())}),onKeyDown:nt(t.onKeyDown,C=>{i||(["Enter"," "].includes(C.key)&&f.onMenuToggle(p.value),C.key==="ArrowDown"&&f.onMenuOpen(p.value),["Enter"," ","ArrowDown"].includes(C.key)&&(p.wasKeyboardTriggerOpenRef.current=!0,C.preventDefault()))}),onFocus:nt(t.onFocus,()=>b(!0)),onBlur:nt(t.onBlur,()=>b(!1))})})})})});o1.displayName=Fh;var YR="MenubarPortal",r1=t=>{const{__scopeMenubar:o,...a}=t,i=Xn(o);return v.jsx(CR,{...i,...a})};r1.displayName=YR;var Gh="MenubarContent",a1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,align:i="start",...l}=t,c=Xn(a),u=Ip(Gh,a),f=t1(Gh,a),p=zR(a),h=x.useRef(!1);return v.jsx(SR,{id:f.contentId,"aria-labelledby":f.triggerId,"data-radix-menubar-content":"",...c,...l,ref:o,align:i,onCloseAutoFocus:nt(t.onCloseAutoFocus,g=>{!!!u.value&&!h.current&&f.triggerRef.current?.focus(),h.current=!1,g.preventDefault()}),onFocusOutside:nt(t.onFocusOutside,g=>{const m=g.target;p().some(w=>w.ref.current?.contains(m))&&g.preventDefault()}),onInteractOutside:nt(t.onInteractOutside,()=>{h.current=!0}),onEntryFocus:g=>{f.wasKeyboardTriggerOpenRef.current||g.preventDefault()},onKeyDown:nt(t.onKeyDown,g=>{if(["ArrowRight","ArrowLeft"].includes(g.key)){const m=g.target,b=m.hasAttribute("data-radix-menubar-subtrigger"),w=m.closest("[data-radix-menubar-content]")!==g.currentTarget,A=(u.dir==="rtl"?"ArrowRight":"ArrowLeft")===g.key;if(!A&&b||w&&A)return;let M=p().filter(I=>!I.disabled).map(I=>I.value);A&&M.reverse();const E=M.indexOf(f.value);M=u.loop?rk(M,E+1):M.slice(E+1);const[k]=M;k&&u.onMenuOpen(k)}},{checkForDefaultPrevented:!1}),style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});a1.displayName=Gh;var $R="MenubarGroup",UR=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(ER,{...l,...i,ref:o})});UR.displayName=$R;var XR="MenubarLabel",QR=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(MR,{...l,...i,ref:o})});QR.displayName=XR;var FR="MenubarItem",i1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(RR,{...l,...i,ref:o})});i1.displayName=FR;var GR="MenubarCheckboxItem",s1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(kR,{...l,...i,ref:o})});s1.displayName=GR;var WR="MenubarRadioGroup",qR=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(TR,{...l,...i,ref:o})});qR.displayName=WR;var VR="MenubarRadioItem",ZR=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(IR,{...l,...i,ref:o})});ZR.displayName=VR;var KR="MenubarItemIndicator",l1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(OR,{...l,...i,ref:o})});l1.displayName=KR;var JR="MenubarSeparator",c1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(_R,{...l,...i,ref:o})});c1.displayName=JR;var ek="MenubarArrow",tk=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(DR,{...l,...i,ref:o})});tk.displayName=ek;var u1="MenubarSub",d1=t=>{const{__scopeMenubar:o,children:a,open:i,onOpenChange:l,defaultOpen:c}=t,u=Xn(o),[f,p]=Ap({prop:i,defaultProp:c??!1,onChange:l,caller:u1});return v.jsx(jR,{...u,open:f,onOpenChange:p,children:a})};d1.displayName=u1;var nk="MenubarSubTrigger",f1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(BR,{"data-radix-menubar-subtrigger":"",...l,...i,ref:o})});f1.displayName=nk;var ok="MenubarSubContent",h1=x.forwardRef((t,o)=>{const{__scopeMenubar:a,...i}=t,l=Xn(a);return v.jsx(PR,{...l,"data-radix-menubar-content":"",...i,ref:o,style:{...t.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});h1.displayName=ok;function rk(t,o){return t.map((a,i)=>t[(o+i)%t.length])}var ak=e1,ik=n1,sk=o1,lk=r1,ck=a1,uk=i1,dk=s1,fk=l1,hk=c1,pk=d1,mk=f1,gk=h1;const yk=se(ak)`
  display: flex;
  background-color: white;
  padding: 0;
  border-radius: 4px;
`,Ni=ik,Li=se(sk)`
  padding: 6px 10px 6px 6px;
  outline: none;
  user-select: none;
  font-size: 12px;
  line-height: 1;
  border-radius: 4px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  background: transparent;
  border: none;
  cursor: pointer;
  font-family: inherit;

  &:hover {
    background-color: #f5f5f5;
  }

  &[data-state='open'] {
    background-color: #f5f5f5;
  }

  &[data-disabled] {
    color: #94a3b8;
    cursor: not-allowed;
    pointer-events: none;
  }
`,Tr=lk,Hi=se(ck)`
  min-width: 200px;
  background-color: white;
  border-radius: 6px;
  padding: 4px;
  box-shadow: 0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2);
  border: 1px solid #e1e5e9;
  z-index: 1500;
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;

  &[data-side='top'] {
    animation-name: slideDownAndFade;
  }
  &[data-side='right'] {
    animation-name: slideLeftAndFade;
  }
  &[data-side='bottom'] {
    animation-name: slideUpAndFade;
  }
  &[data-side='left'] {
    animation-name: slideRightAndFade;
  }

  @keyframes slideUpAndFade {
    from {
      opacity: 0;
      transform: translateY(2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideRightAndFade {
    from {
      opacity: 0;
      transform: translateX(-2px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideDownAndFade {
    from {
      opacity: 0;
      transform: translateY(-2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideLeftAndFade {
    from {
      opacity: 0;
      transform: translateX(2px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
`,p1=lr`
  all: unset;
  font-size: 12px;
  line-height: 1;
  color: #2c3e50;
  border-radius: 4px;
  display: flex;
  align-items: center;
  height: 28px;
  position: relative;
  user-select: none;
  cursor: pointer;

  &[data-disabled] {
    color: #94a3b8;
    pointer-events: none;
  }

  &[data-highlighted] {
    background-color: #f5f5f5;
    color: #2c3e50;
  }
`,tn=se(uk)`
  ${p1};
  padding: 0 8px;
`,hh=se(dk)`
  ${p1};
  padding: 0 8px 0 28px;
`,ph=se(fk)`
  position: absolute;
  left: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  color: #2c3e50;
`,Yi=se(hk)`
  height: 1px;
  background-color: #e1e5e9;
  margin: 4px;
`,mh=pk,gh=se(mk)`
  all: unset;
  font-size: 12px;
  line-height: 1;
  color: #2c3e50;
  border-radius: 4px;
  display: flex;
  align-items: center;
  height: 28px;
  padding: 0 8px;
  position: relative;
  user-select: none;
  cursor: pointer;

  &[data-state='open'] {
    background-color: #f5f5f5;
  }

  &[data-highlighted] {
    background-color: #f5f5f5;
    color: #2c3e50;
  }

  &[data-disabled] {
    color: #94a3b8;
    pointer-events: none;
  }
`,yh=se(gk)`
  min-width: 200px;
  background-color: white;
  border-radius: 6px;
  padding: 4px;
  box-shadow: 0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2);
  border: 1px solid #e1e5e9;
  z-index: 1500;
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;
`,eo=se.div`
  margin-left: auto;
  padding-left: 20px;
  color: #6c757d;
  font-size: 12px;

  :where([data-highlighted]) & {
    color: #2c3e50;
  }

  :where([data-disabled]) & {
    color: #94a3b8;
  }
`,xh=se.span`
  margin-left: auto;
  padding-left: 12px;
  color: #6c757d;
`,bh=()=>v.jsx("svg",{width:"14.4",height:"14.4",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:v.jsx("path",{d:"M5 12.5L9.5 17L19 7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function xk({onNew:t,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onToggleHistory:f,onToggleSidebar:p,onToggleRulers:h,onOpenBugReport:g,onOpenAbout:m,onSelectionClear:b,onSelectAll:w,onSelectArea:C,onDuplicatePage:A,onDeletePage:S,onUndo:R,onRedo:M,onBringToFront:E,onSendToBack:k,onBringForward:I,onSendBackward:z,onGroup:D,onUngroup:j,canGroup:$,canUngroup:F,hasSelection:X,isHistoryOpen:Z,isSidebarExpanded:K,areRulersVisible:te,canDuplicatePage:Q,canDeletePage:_}){const N=navigator.platform.toUpperCase().indexOf("MAC")>=0?"":"Ctrl";return v.jsxs(yk,{children:[v.jsxs(Ni,{children:[v.jsx(Li,{children:"Project"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsx(tn,{onSelect:t,children:"New"}),v.jsx(Yi,{}),v.jsxs(mh,{children:[v.jsxs(gh,{children:["Export",v.jsx(xh,{children:""})]}),v.jsx(Tr,{children:v.jsx(yh,{alignOffset:-5,children:v.jsxs(tn,{onSelect:c,children:["JSON",v.jsxs(eo,{children:[N,"+S"]})]})})})]}),v.jsxs(tn,{onSelect:u,children:["Import JSON",v.jsxs(eo,{children:[N,"+Shift+O"]})]})]})})]}),v.jsxs(Ni,{children:[v.jsx(Li,{children:"Page"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsxs(mh,{children:[v.jsxs(gh,{children:["Export",v.jsx(xh,{children:""})]}),v.jsx(Tr,{children:v.jsxs(yh,{alignOffset:-5,children:[v.jsx(tn,{onSelect:o,children:"PNG"}),v.jsx(tn,{onSelect:i,children:"JSON"})]})})]}),v.jsx(Yi,{}),v.jsx(tn,{onSelect:l,children:"Import JSON"}),v.jsx(Yi,{}),v.jsx(tn,{onSelect:A,disabled:!Q,children:"Duplicate"}),v.jsx(tn,{onSelect:S,disabled:!_,children:"Delete"})]})})]}),v.jsxs(Ni,{children:[v.jsx(Li,{disabled:!X,children:"Selection"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsx(tn,{onSelect:a,children:"Export as PNG"}),v.jsxs(tn,{onSelect:b,children:["Clear",v.jsx(eo,{children:"Esc"})]})]})})]}),v.jsxs(Ni,{children:[v.jsx(Li,{children:"Edit"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsxs(tn,{onSelect:R,children:["Undo",v.jsxs(eo,{children:[N,"+Z"]})]}),v.jsxs(tn,{onSelect:M,children:["Redo",v.jsxs(eo,{children:[N,"+Shift+Z"]})]}),v.jsx(Yi,{}),v.jsxs(tn,{onSelect:C,children:["Select area",v.jsx(eo,{children:"S"})]}),v.jsxs(tn,{onSelect:w,children:["Select all",v.jsxs(eo,{children:[N,"+A"]})]}),v.jsx(Yi,{}),v.jsxs(mh,{children:[v.jsxs(gh,{children:["Arrange",v.jsx(xh,{children:""})]}),v.jsx(Tr,{children:v.jsxs(yh,{alignOffset:-5,children:[v.jsxs(tn,{disabled:!X,onSelect:E,children:["Bring to Front",v.jsxs(eo,{children:[N,"+Shift+J"]})]}),v.jsxs(tn,{disabled:!X,onSelect:I,children:["Bring Forward",v.jsxs(eo,{children:[N,"+J"]})]}),v.jsxs(tn,{disabled:!X,onSelect:z,children:["Send Backward",v.jsxs(eo,{children:[N,"+K"]})]}),v.jsxs(tn,{disabled:!X,onSelect:k,children:["Send to Back",v.jsxs(eo,{children:[N,"+Shift+K"]})]}),v.jsx(Yi,{}),v.jsxs(tn,{disabled:!$,onSelect:D,children:["Group",v.jsxs(eo,{children:[N,"+G"]})]}),v.jsxs(tn,{disabled:!F,onSelect:j,children:["Ungroup",v.jsxs(eo,{children:[N,"+Shift+G"]})]})]})})]})]})})]}),v.jsxs(Ni,{children:[v.jsx(Li,{children:"View"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsxs(hh,{checked:K,onCheckedChange:()=>p(),children:[v.jsx(ph,{children:v.jsx(bh,{})}),"Sidebar"]}),v.jsxs(hh,{checked:te,onCheckedChange:()=>h(),children:[v.jsx(ph,{children:v.jsx(bh,{})}),"Rulers"]}),v.jsxs(hh,{checked:Z,onCheckedChange:()=>f(),children:[v.jsx(ph,{children:v.jsx(bh,{})}),"History",v.jsxs(eo,{children:[N,"+H"]})]})]})})]}),v.jsxs(Ni,{children:[v.jsx(Li,{children:"Help"}),v.jsx(Tr,{children:v.jsxs(Hi,{align:"start",sideOffset:5,children:[v.jsx(tn,{onSelect:m,children:"About"}),v.jsx(tn,{onSelect:g,children:"Submit bug report"})]})})]})]})}const bk="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='-3%20-3%20126%20126'%20version='1.1'%20id='svg11'%20sodipodi:docname='wiremesh-mark.svg'%20inkscape:version='1.4.2%20(ebf0e940,%202025-05-08)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs11'%20/%3e%3csodipodi:namedview%20id='namedview11'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='4.7161164'%20inkscape:cx='93.615163'%20inkscape:cy='71.881178'%20inkscape:window-width='1712'%20inkscape:window-height='991'%20inkscape:window-x='970'%20inkscape:window-y='134'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20style='opacity:0.45;fill:none;stroke:%233a3a3a;stroke-width:2.507;stroke-dasharray:none;stroke-opacity:1'%20d='m%2021.194645,33.426505%2039.707427,7.844991%2042.290018,-9.00245%20v%20-0.257212'%20id='path1'%20/%3e%3cpath%20d='m%2019.008152,32.272233%2018,52%2024,-45.044883%2024,45.044883%2017.999998,-52'%20style='fill:none;stroke:%233e3e3e;stroke-width:8.1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1'%20id='path2'%20/%3e%3cline%20x1='37.008152'%20y1='84.272232'%20x2='85.008148'%20y2='84.272232'%20style='opacity:0.45;stroke:%233a3a3a;stroke-width:2.5;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1'%20id='line2'%20/%3e%3ccircle%20cx='19.667637'%20cy='34.198151'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle2'%20/%3e%3ccircle%20cx='61.0956'%20cy='40.98053'%20r='9.4874649'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:2.41972;stroke-dasharray:none;stroke-opacity:1'%20id='circle7'%20/%3e%3ccircle%20cx='102.8'%20cy='32.74707'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle8'%20/%3e%3ccircle%20cx='37.31707'%20cy='82.888725'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle9'%20/%3e%3ccircle%20cx='84.621346'%20cy='82.063026'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle10'%20/%3e%3c/svg%3e";function vk({onNew:t,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onToggleHistory:f,onToggleSidebar:p,onToggleRulers:h,onOpenBugReport:g,onClearSelection:m,onSelectAll:b,onSelectArea:w,projectName:C,onProjectNameChange:A,onOpenAbout:S,onDuplicatePage:R,onDeletePage:M,onUndo:E,onRedo:k,onBringToFront:I,onSendToBack:z,onBringForward:D,onSendBackward:j,onGroup:$,onUngroup:F,canGroup:X,canUngroup:Z,lastSaved:K,hasSelection:te,isHistoryOpen:Q,isSidebarExpanded:_,areRulersVisible:H,dockedToolbar:N,canDuplicatePage:P,canDeletePage:O}){const U=x.useRef(null),L=x.useRef(null),[Y,q]=x.useState(!1),[J,oe]=x.useState(C),le=x.useRef(null),[fe,ge]=x.useState(null);x.useEffect(()=>{Y||oe(C)},[C,Y]),x.useEffect(()=>{Y&&le.current&&(le.current.focus(),le.current.select())},[Y]);const Se=x.useCallback(()=>{A(J),q(!1)},[J,A]),De=x.useCallback(()=>{oe(C),q(!1)},[C]);return x.useLayoutEffect(()=>{const xe=L.current;if(!xe)return;const Te=()=>{const Le=(xe.querySelector('[role="menubar"]')??xe).getBoundingClientRect().width,Pe=Math.max(200,Math.round(Le));ge(gt=>gt===Pe?gt:Pe)};if(Te(),typeof ResizeObserver<"u"){const Ae=new ResizeObserver(()=>{Te()});return Ae.observe(xe),()=>Ae.disconnect()}return window.addEventListener("resize",Te),()=>{window.removeEventListener("resize",Te)}},[]),v.jsxs(zS,{"data-testid":"app-toolbar",ref:U,children:[v.jsx(NS,{children:v.jsx(LS,{src:bk,alt:"Wiremesh logo"})}),v.jsx(YS,{children:v.jsxs(FS,{children:[v.jsxs($S,{style:fe?{minWidth:`${fe}px`}:void 0,children:[v.jsx(US,{children:Y?v.jsx(QS,{ref:le,value:J,onChange:xe=>oe(xe.target.value),onBlur:Se,onKeyDown:xe=>{xe.key==="Enter"?(xe.preventDefault(),Se()):xe.key==="Escape"&&(xe.preventDefault(),De())},"data-project-name-input":"true"}):v.jsx(XS,{type:"button",onClick:()=>q(!0),title:"Rename project","data-project-name-display":"true",children:C})}),v.jsx(qS,{"data-save-timestamp":"true",children:K?`auto-saved at ${K.toLocaleTimeString()}`:null})]}),v.jsx(HS,{ref:L,style:fe?{width:`${fe}px`}:void 0,children:v.jsx(xk,{onNew:t,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onToggleHistory:f,onToggleSidebar:p,onToggleRulers:h,onOpenBugReport:g,onSelectionClear:m,onSelectAll:b,onSelectArea:w,onOpenAbout:S,onDuplicatePage:R,onDeletePage:M,onUndo:E,onRedo:k,onBringToFront:I,onSendToBack:z,onBringForward:D,onSendBackward:j,onGroup:$,onUngroup:F,canGroup:X,canUngroup:Z,hasSelection:te,isHistoryOpen:Q,isSidebarExpanded:_,areRulersVisible:H,canDuplicatePage:P,canDeletePage:O})})]})}),v.jsx(GS,{$visible:!!N,children:N}),v.jsx(WS,{$hasDocked:!!N})]})}const dr="Wiremesh",Ak=dr,_p="1.2.0",Hl=dr.toLowerCase().replace(/\s+/g,""),m1=`${Hl}-`,Zt=t=>`${m1}${t}`,Tl=`__${Hl}TestHooks`,Wh=Zt("reset-notice"),Il=`${Hl}:reset-notice`,g1=`__${Hl}ResetLock`,wk=`${Hl}-export`,lx=Zt("last-project-export-info"),y1=Zt("last-project-import-info"),Ck=se.div`
  position: fixed;
  inset: 0;
  background: rgba(15, 22, 36, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2200;
`,Sk=se.div`
  background: white;
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(15, 22, 36, 0.18);
  padding: 28px 32px;
  max-width: 420px;
  width: 90%;
  display: flex;
  flex-direction: column;
  gap: 18px;
`,Ek=se.h2`
  margin: 0;
  font-size: 22px;
  color: #233044;
`,Mk=se.p`
  margin: 0;
  font-size: 15px;
  line-height: 1.6;
  color: #465162;
`,Rk=se.span`
  font-size: 13px;
  color: rgba(70, 81, 98, 0.75);
`,kk=se.button`
  align-self: flex-end;
  border: none;
  background: #1d6ff2;
  color: white;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;

  &:hover {
    background: #1457c7;
  }
`,Tk=({onClose:t})=>v.jsx(Ck,{role:"presentation",onClick:t,children:v.jsxs(Sk,{role:"dialog","aria-modal":"true","aria-labelledby":"about-title",onClick:o=>o.stopPropagation(),children:[v.jsxs(Ek,{id:"about-title",children:["About ",dr]}),v.jsx(Mk,{children:"Simple and elegant wireframing."}),v.jsxs(Rk,{children:["Version ",_p]}),v.jsx(kk,{type:"button",onClick:t,children:"Close"})]})}),Ik=se.div`
  display: ${t=>t.$isOpen?"flex":"none"};
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  align-items: center;
  justify-content: center;
  z-index: 2000;
`,Ok=se.div`
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideIn 0.2s ease-out;

  @keyframes slideIn {
    from {
      transform: translateY(-20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,as=se.h3`
  margin: 0;
  padding: 20px;
  border-bottom: 1px solid #e1e5e9;
  font-size: 18px;
  color: #2c3e50;
`,is=se.div`
  padding: 20px;
  color: #6c757d;
  line-height: 1.6;

  > p {
    margin: 0 0 18px;
  }
`,Dp=se.p`
  margin: 12px 0 0;
  color: #e74c3c;
  font-weight: 500;
`,ss=se.div`
  padding: 20px;
  border-top: 1px solid #e1e5e9;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
`,_k=se.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,Dk=se.label`
  font-size: 13px;
  font-weight: 600;
  color: #2c3e50;
`,jk=se.select`
  padding: 10px 12px;
  border-radius: 6px;
  border: 1px solid #d0d7de;
  font-size: 14px;
  color: #2c3e50;
  background: #fff;
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, #6c757d 50%),
    linear-gradient(135deg, #6c757d 50%, transparent 50%),
    linear-gradient(to right, #f8f9fa, #f8f9fa);
  background-position:
    calc(100% - 18px) calc(50% - 2px),
    calc(100% - 12px) calc(50% - 2px),
    calc(100% - 36px) 50%;
  background-size: 6px 6px, 6px 6px, 1px 70%;
  background-repeat: no-repeat;

  &:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
  }
`,go=se.button`
  padding: 10px 20px;
  border: 1px solid ${t=>t.$variant==="primary"?"#3498db":t.$variant==="danger"?"#e74c3c":"#ddd"};
  background: ${t=>t.$variant==="primary"?"#3498db":t.$variant==="danger"?"#e74c3c":"white"};
  color: ${t=>t.$variant==="primary"||t.$variant==="danger"?"white":"#6c757d"};
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;

  &:hover {
    background: ${t=>t.$variant==="primary"?"#2980b9":t.$variant==="danger"?"#cf4334":"#f5f5f5"};
    border-color: ${t=>t.$variant==="primary"?"#2980b9":t.$variant==="danger"?"#c43d2f":"#bbb"};
  }

  &:active {
    transform: translateY(1px);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
`,ls=({isOpen:t,onClose:o,role:a="dialog",ariaLabelledBy:i,closeOnOverlayClick:l=!0,dataAttributes:c,overlayAttributes:u,portalTarget:f,children:p})=>{const h=x.useRef(null);x.useEffect(()=>{if(!t)return;const w=C=>{C.key==="Escape"&&o&&o()};return document.addEventListener("keydown",w),()=>{document.removeEventListener("keydown",w)}},[t,o]);const g=x.useCallback(w=>{!l||!o||w.target===w.currentTarget&&o()},[l,o]);if(!t)return null;const m=f??(typeof document<"u"?document.body:null),b=v.jsx(Ik,{$isOpen:t,onMouseDown:g,...u??{},children:v.jsx(Ok,{role:a,"aria-modal":"true","aria-labelledby":i,ref:h,...c??{},children:p})});return m?Lr.createPortal(b,m):b},cx="new-projectConfirm-modal-title",Bk=({isOpen:t,onConfirm:o,onCancel:a})=>v.jsxs(ls,{isOpen:t,onClose:a,ariaLabelledBy:cx,dataAttributes:{"data-new-project-modal":"true"},closeOnOverlayClick:!1,children:[v.jsxs(as,{id:cx,children:["Start a New ",dr," Project?"]}),v.jsxs(is,{children:[v.jsxs("p",{children:["You have unsaved changes. Starting a new ",dr," project will discard the current canvas and project history."]}),v.jsx(Dp,{role:"note",children:"This action cannot be undone."})]}),v.jsxs(ss,{children:[v.jsx(go,{onClick:a,children:"Cancel"}),v.jsx(go,{$variant:"danger",onClick:o,children:"Start New Project"})]})]}),Pk=se.div`
  position: fixed;
  left: 0;
  top: 60px;
  bottom: 0;
  width: ${t=>t.$isCollapsed?"0px":"280px"};
  background: white;
  border-right: ${t=>t.$isCollapsed?"none":"1px solid #e1e5e9"};
  z-index: 900;
  transition: width 0.3s ease;
  overflow: hidden;
`,zk=se.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
`,Nk=se.div`
  flex: 1 1 0%;
  min-height: 0;
  overflow-y: auto;
  padding: 20px;
`,Lk=se.div`
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
`,Hk=se.div`
  position: relative;
  width: 100%;
  height: 14px;
  cursor: row-resize;
  flex-shrink: 0;
  background: transparent;

  &:before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    height: 1px;
    background: ${t=>t.$isDragging?"#3498db":"#e1e5e9"};
    transform: translateY(-50%);
  }
`,Yk=se.div`
  flex: 1 1 0%;
  min-height: 170px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,$k=se.div`
  flex: 1 1 0%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,Uk=se.div`
  flex: 1 1 0%;
  display: flex;
  flex-direction: column;
  min-height: 0;
  box-sizing: border-box;
  padding: 8px;
  gap: 10px;
`,Xk=se.div`
  padding: 8px;
  border: none;
  border-radius: 12px;
  cursor: ${t=>t.$isDragging?"grabbing":"grab"};
  text-align: center;
  background: transparent;
  transition: all 0.2s;
  user-select: none;
  opacity: ${t=>t.$isDragging?.5:1};

  &:hover {
    box-shadow: 0 4px 12px rgba(76, 86, 103, 0.18);
    transform: translateY(-2px);
  }
`,Qk=se.div`
  width: 52px;
  height: 40px;
  margin: 0 auto 6px;
  border-radius: 8px;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
`,Fk=se.svg`
  width: 48px;
  height: 32px;
`,Gk=se.div`
  font-size: 10px;
  font-weight: 500;
  color: #2c3e50;
`,Wk=se.div.attrs(t=>({style:{left:`${t.$x}px`,top:`${t.$y}px`,opacity:t.$visible?.8:0}}))`
  position: fixed;
  pointer-events: none;
  z-index: 10000;
  transform: translate(-50%, -50%);
  background: white;
  border: 2px solid #3498db;
  border-radius: 4px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: opacity 0.2s;
`,qk=({element:t,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=x.useState(!1),[f,p]=x.useState({x:0,y:0}),h=x.useRef({x:0,y:0}),g=x.useCallback(b=>{if(b.button!==0)return;const w={x:b.clientX,y:b.clientY};h.current=w,u(!0),p(w),o(t,w);let C=!1;const A=R=>{const M={x:R.clientX,y:R.clientY},E=Math.abs(M.x-w.x),k=Math.abs(M.y-w.y);(E>3||k>3)&&(C=!0),p(M),a(M)},S=R=>{const M={x:R.clientX,y:R.clientY};if(u(!1),i(M),!C&&l){const E=Math.abs(M.x-w.x),k=Math.abs(M.y-w.y);E<=1&&k<=1&&l(t)}document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",S),b.preventDefault()},[t,o,a,i,l]),m=({type:b})=>{const w="#4c5667",C="#e7eaef";switch(b){case"button":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"8",y:"14",width:"64",height:"28",rx:"6",fill:C,stroke:w,strokeWidth:"2"}),v.jsx("rect",{x:"22",y:"26",width:"36",height:"6",rx:"3",fill:w})]});case"container":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"6",fill:"#ffffff",stroke:w,strokeWidth:"2",strokeDasharray:"5 4"}),v.jsx("rect",{x:"12",y:"18",width:"20",height:"6",rx:"3",fill:w,opacity:"0.4"}),v.jsx("rect",{x:"12",y:"28",width:"44",height:"6",rx:"3",fill:w,opacity:"0.2"})]});case"input":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"6",y:"14",width:"68",height:"24",rx:"4",fill:"#ffffff",stroke:w,strokeWidth:"2"}),v.jsx("rect",{x:"12",y:"22",width:"26",height:"4",rx:"2",fill:w,opacity:"0.6"})]});case"textarea":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"4",fill:"#ffffff",stroke:w,strokeWidth:"2"}),v.jsx("rect",{x:"12",y:"18",width:"44",height:"4",rx:"2",fill:w,opacity:"0.6"}),v.jsx("rect",{x:"12",y:"24",width:"40",height:"4",rx:"2",fill:w,opacity:"0.4"}),v.jsx("rect",{x:"12",y:"30",width:"36",height:"4",rx:"2",fill:w,opacity:"0.3"})]});case"checkbox":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"28",y:"16",width:"20",height:"20",rx:"4",fill:"#ffffff",stroke:w,strokeWidth:"3"}),v.jsx("polyline",{points:"31,26 36,32 45,20",fill:"none",stroke:w,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]});case"radio":return v.jsxs(v.Fragment,{children:[v.jsx("circle",{cx:"38",cy:"28",r:"10",fill:"#ffffff",stroke:w,strokeWidth:"3"}),v.jsx("circle",{cx:"38",cy:"28",r:"4",fill:w})]});case"dropdown":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"6",y:"14",width:"68",height:"24",rx:"4",fill:"#ffffff",stroke:w,strokeWidth:"2"}),v.jsx("rect",{x:"12",y:"22",width:"30",height:"4",rx:"2",fill:w,opacity:"0.6"}),v.jsx("polygon",{points:"62,24 58,20 66,20",fill:w})]});case"image":return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"4",fill:"#ffffff",stroke:w,strokeWidth:"2"}),v.jsx("circle",{cx:"52",cy:"22",r:"4",fill:w,opacity:"0.5"}),v.jsx("polyline",{points:"14,40 28,28 36,36 44,30 60,40",fill:"none",stroke:w,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]});default:return v.jsxs(v.Fragment,{children:[v.jsx("rect",{x:"8",y:"12",width:"60",height:"32",rx:"6",fill:C,stroke:w,strokeWidth:"2"}),v.jsx("rect",{x:"18",y:"24",width:"40",height:"6",rx:"3",fill:w,opacity:"0.6"})]})}};return v.jsxs(v.Fragment,{children:[v.jsxs(Xk,{"data-library-element-type":t.type,"data-library-element-label":t.label,$isDragging:c,onMouseDown:g,children:[v.jsx(Qk,{children:v.jsx(Fk,{viewBox:"0 0 80 56",role:"presentation","aria-hidden":"true",children:v.jsx(m,{type:t.type})})}),v.jsx(Gk,{children:t.label})]}),v.jsx(Wk,{$x:f.x,$y:f.y,$visible:c,children:t.label})]})},Vk={type:"text",label:"Text",icon:"T",defaultProps:{width:200,height:30,text:"Some text",style:{textAlign:"left",borderColor:"#e0e0e0"},properties:{borderWidth:0}},constraints:{minWidth:10,minHeight:10}},jp=[{type:"button",label:"Button",icon:"",defaultProps:{width:120,height:40,text:"Button",style:{backgroundColor:"#e9ecef",borderColor:"#6c757d",textAlign:"center"}},constraints:{minWidth:10,minHeight:10}},{type:"container",label:"Container",icon:"",defaultProps:{width:300,height:200,text:"",style:{backgroundColor:"#f8f9fa",borderColor:"#dee2e6"}},constraints:{minWidth:10,minHeight:10}},{type:"input",label:"Text Input",icon:"",defaultProps:{width:200,height:40,text:"Input field",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:10,minHeight:10}},{type:"textarea",label:"Text Area",icon:"",defaultProps:{width:250,height:120,text:"Text area",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:100,minHeight:20}},{type:"checkbox",label:"Checkbox",icon:"",defaultProps:{width:20,height:20,text:"",style:{backgroundColor:"white",borderColor:"#6c757d"}},constraints:{minWidth:10,minHeight:10}},{type:"radio",label:"Radio",icon:"",defaultProps:{width:20,height:20,text:"",style:{backgroundColor:"white",borderColor:"#6c757d"}},constraints:{minWidth:10,minHeight:10}},{type:"dropdown",label:"Dropdown",icon:"",defaultProps:{width:180,height:40,text:"Select option",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:10,minHeight:10}},{type:"image",label:"Image",icon:"",defaultProps:{width:200,height:150,text:"",imageSrc:"",style:{backgroundColor:"#ffffff",borderColor:"#dee2e6"}},constraints:{minWidth:10,minHeight:10}}],qh=jp.reduce((t,o)=>(o.constraints&&(t[o.type]=o.constraints),t),{}),x1=[{type:"rectangle",label:"Rectangle",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"rectangle",label:"Square",icon:"",defaultProps:{width:140,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{constrainRatio:!0}}},{type:"oval",label:"Oval",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"oval",label:"Circle",icon:"",defaultProps:{width:140,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{constrainRatio:!0}}},{type:"rhombus",label:"Rhombus",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"triangle",label:"Triangle",icon:"",defaultProps:{width:160,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"cylinder",label:"Cylinder",icon:"",defaultProps:{width:160,height:180,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"pipe",label:"Pipe",icon:"",defaultProps:{width:160,height:160,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"parallelogram",label:"Parallelogram",icon:"",defaultProps:{width:180,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"hexagon",label:"Hexagon",icon:"",defaultProps:{width:200,height:173,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"card",label:"Card",icon:"",defaultProps:{width:200,height:140,text:"Card",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{textAlign:"left"}}},{type:"note",label:"Note",icon:"",defaultProps:{width:200,height:200,text:"Note",style:{backgroundColor:"#f7dd72",borderColor:"#c7a744",textAlign:"left"},properties:{textAlign:"left",fontFamily:'"Comic Sans MS", "Comic Sans", cursive',shadow:!0,shadowColour:"rgba(0,0,0,0.18)",shadowOpacity:.35,shadowBlurRadius:16,opacity:1}}},{type:"actor",label:"Actor",icon:"",defaultProps:{width:100,height:220,text:"actor",style:{backgroundColor:"transparent",borderColor:"#2c3e50",textAlign:"center"},properties:{borderWidth:4,textAlign:"center",textColour:"#2c3e50",fontSize:16,fontFamily:'"Comic Sans MS", "Comic Sans", cursive'}}}];Object.assign(qh,{rectangle:{minWidth:10,minHeight:10},oval:{minWidth:10,minHeight:10},rhombus:{minWidth:10,minHeight:10},triangle:{minWidth:10,minHeight:10},cylinder:{minWidth:10,minHeight:10},pipe:{minWidth:10,minHeight:10},parallelogram:{minWidth:10,minHeight:10},hexagon:{minWidth:10,minHeight:10},card:{minWidth:10,minHeight:10},note:{minWidth:10,minHeight:10},actor:{minWidth:10,minHeight:10}});const ux=new Set([Zt("project-v2"),Zt("current-project"),Zt("history-panel-open"),Zt("floating-toolbar-position"),Zt("library-properties-split"),Zt("project")]);function Zk(){const t=[];for(let o=0;o<window.localStorage.length;o+=1){const a=window.localStorage.key(o);a&&(a.startsWith(m1)||ux.has(a))&&t.push(a)}return Array.from(new Set([...t,...ux]))}function Kk(){try{Zk().forEach(o=>{window.localStorage.removeItem(o)})}catch(t){console.error("Failed to reset local state:",t)}}function Jk(){typeof window>"u"||(window[g1]=!0)}function po(){return typeof window>"u"?!1:!!window[g1]}const eT=se.div`
  display: flex;
  flex-direction: column;
  flex: 0 1 auto;
  min-height: 0;
  gap: 10px;
  padding: 0;
`,tT=se.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 0;
`,nT=se.h4`
  margin: 0 0 0 5px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #6c757d;
`,oT=se.div`
  display: flex;
  gap: 1px;
`,vh=se.button`
  border: none;
  background: transparent;
  color: #2c3e50;
  width: 30px;
  height: 26px;
  border-radius: 6px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, color 0.15s ease, transform 0.15s ease;

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }

  &:hover:not(:disabled) {
    background: #f4f6f8;
    transform: translateY(-1px);
  }
`,Ah=se.span`
  display: inline-flex;
  width: 14px;
  height: 14px;
  align-items: center;
  justify-content: center;

  svg {
    width: 14px;
    height: 14px;
    display: block;
  }
`,rT=se.div`
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  overflow: hidden;
  background: #ffffff;
  display: flex;
  flex-direction: column;
  flex: 0 1 auto;
  max-height: 100%;
  width: 100%;
  align-self: stretch;
`,aT=se.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  background: #f8f9fa;
  padding: 6px 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #6c757d;
  flex-shrink: 0;
  column-gap: 12px;

  > div:last-child {
    text-align: center;
  }
`,iT=se.div`
  overflow-y: auto;
  flex: 1 1 0%;
  min-height: 0;
  width: 100%;
  align-self: stretch;
`,sT=se.div`
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  padding: 6px 10px;
  font-size: 12px;
  color: #2c3e50;
  border-top: 1px solid #eef1f4;

  &:nth-child(even) {
    background: #fbfcfd;
  }
`,dx=se.div`
  display: flex;
  align-items: center;
  justify-content: ${t=>t.$align==="right"?"flex-end":"flex-start"};
  gap: 4px;
  max-width: 100%;
`,lT=se.div`
  padding: 14px 16px;
  font-size: 12px;
  color: #6c757d;
  border: 1px dashed #d6dbe1;
  border-radius: 6px;
  text-align: center;
  background: #f9fbff;
`,cT=se.div`
  display: inline-flex;
  align-items: center;
  border: 1px solid #d4d9de;
  border-radius: 4px;
  overflow: hidden;
  background: #ffffff;
`,fx=se.button`
  background: #f1f3f5;
  border: none;
  padding: 4px 6px;
  font-size: 12px;
  cursor: pointer;
  color: #2c3e50;

  &:hover:not(:disabled) {
    background: #e2e6ea;
  }

  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
`,uT=se.input`
  width: 54px;
  border: none;
  text-align: center;
  font-size: 12px;
  padding: 4px;
  outline: none;
  color: #2c3e50;
  background: #ffffff;

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &[type='number'] {
    -moz-appearance: textfield;
  }
`,dT=se.input`
  padding: 0;
  width: 30px;
  height: 24px;
  border: none;
  background: transparent;
`,fT=se.input`
  width: 86px;
  border: 1px solid #d4d9de;
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 12px;
  color: #2c3e50;
  background: #ffffff;
  outline: none;
`,hx=se.div`
  font-size: 12px;
  color: #88909b;
  max-width: 100%;
  text-align: right;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,hT=se.select`
  border: 1px solid #d4d9de;
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 12px;
  color: #2c3e50;
  background: #ffffff;
  display: block;
  ${t=>t.$width?`width: ${t.$width}px; max-width: ${t.$width}px;`:""}
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,yo='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',pT=[{label:"System Default",value:yo},{label:"Arial",value:'Arial, "Helvetica Neue", Helvetica, sans-serif'},{label:"Georgia",value:'Georgia, "Times New Roman", Times, serif'},{label:"Courier New",value:'"Courier New", Courier, monospace'},{label:"Verdana",value:"Verdana, Geneva, sans-serif"},{label:"Comic Sans",value:'"Comic Sans MS", "Comic Sans", cursive'}],Bo="#000000",ei=.36,fr=6,_r=0,Dr=2,b1=/^#([0-9a-fA-F]{6})$/,wh=t=>typeof t=="string"&&b1.test(t)?t.toLowerCase():Bo,px=t=>typeof t=="number"&&Number.isFinite(t)?Math.min(1,Math.max(0,t)):ei,mx=t=>typeof t=="number"&&Number.isFinite(t)?Math.max(0,t):fr,mT=t=>{const o=b1.exec(t);if(!o)return{red:0,green:0,blue:0};const a=parseInt(o[1],16),i=a>>16&255,l=a>>8&255,c=a&255;return{red:i,green:l,blue:c}},v1=(t,o)=>{const{red:a,green:i,blue:l}=mT(t),c=Math.min(1,Math.max(0,o));return`rgba(${a}, ${i}, ${l}, ${c})`},gT=()=>{const t={},o=a=>{const i=a.defaultProps.properties,l=a.defaultProps.style;!i&&!l||(t[a.type]={properties:i?{...i}:void 0,style:l?{...l}:void 0})};return[...jp,...x1].forEach(o),t},yT=gT(),Io=(t,o,a={})=>({id:t,type:"number",group:o,min:a.min,max:a.max,step:a.step,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),Mu=(t,o,a={})=>({id:t,type:"boolean",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),A1=(t,o,a={})=>({id:t,type:"color",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),gx=(t,o,a={})=>({id:t,type:"string",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),Bp=(t,o,a)=>({id:t,type:"select",group:o,options:a.options,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),ma=(t=yo)=>Bp("fontFamily","custom",{options:pT,defaultValue:t}),xT=[{label:"Normal",value:"normal"},{label:"Bold",value:"bold"}],bT=[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}],ga=t=>Io("borderWidth","custom",{defaultValue:t,min:0,max:99,step:1}),ya=t=>Io("fontSize","custom",{defaultValue:t,min:8,max:144,step:1}),xa=(t="normal")=>Bp("fontWeight","custom",{options:xT,defaultValue:t}),ba=t=>Bp("textAlign","custom",{options:bT,defaultValue:t}),kt=(t,o)=>A1(t,"custom",{defaultValue:o}),or=t=>{const o=[ga(t.borderWidth??2)];return o.push(kt("borderColour",t.borderColour)),t.backgroundColour&&o.push(kt("backgroundColour",t.backgroundColour)),t.textColour&&o.push(kt("textColour",t.textColour)),o.push(ya(t.fontSize)),o.push(xa(t.fontWeight)),o.push(ma(t.fontFamily)),o.push(ba(t.textAlign)),o},vT=[Io("posX","common",{min:0,max:4e3,step:1}),Io("posY","common",{min:0,max:4e3,step:1}),Io("width","common",{min:1,max:4e3,step:1}),Io("height","common",{min:1,max:4e3,step:1}),Mu("shadow","common",{defaultValue:!1}),A1("shadowColour","common",{defaultValue:Bo}),Io("shadowOpacity","common",{defaultValue:ei,min:0,max:1,step:.05}),Io("shadowBlurRadius","common",{defaultValue:fr,min:0,max:64,step:.5}),Mu("constrainRatio","common",{defaultValue:!1,label:"constrainRatio"}),Io("opacity","common",{defaultValue:1,min:0,max:1,step:.05})],Pp=[gx("id","immutable",{isReadOnly:!0}),gx("type","immutable",{isReadOnly:!0})],AT={button:[...or({borderColour:"#6c757d",backgroundColour:"#e9ecef",textColour:"#2c3e50",fontSize:14,textAlign:"center"})],text:[...or({borderWidth:1,borderColour:"#e0e0e0",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],input:[...or({borderColour:"#ced4da",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],textarea:[...or({borderColour:"#ced4da",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],container:[...or({borderColour:"#dee2e6",backgroundColour:"#f8f9fa",textColour:"#2c3e50",fontSize:16,textAlign:"left"})],rectangle:[...or({borderColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],oval:[...or({borderColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],rhombus:[...or({borderColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],triangle:[...or({borderColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],cylinder:[...or({borderColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],pipe:[ga(2),kt("borderColour","#6c757d"),kt("backgroundColour","#ffffff"),kt("textColour","#2c3e50"),ya(18),xa(),ma(),ba("center")],parallelogram:[ga(2),kt("borderColour","#6c757d"),kt("backgroundColour","#ffffff"),kt("textColour","#2c3e50"),ya(18),xa(),ma(),ba("center")],hexagon:[ga(2),kt("borderColour","#6c757d"),kt("backgroundColour","#ffffff"),kt("textColour","#2c3e50"),ya(18),xa(),ma(),ba("center")],card:[ga(2),kt("borderColour","#6c757d"),kt("backgroundColour","#ffffff"),kt("textColour","#2c3e50"),ya(18),xa(),ma(),ba("left")],note:[ga(2),kt("borderColour","#c7a744"),kt("backgroundColour","#f7dd72"),kt("textColour","#40320d"),ya(18),xa(),ba("left"),ma('"Comic Sans MS", "Comic Sans", cursive')],actor:[Io("borderWidth","custom",{defaultValue:4,min:1,max:99,step:1}),kt("borderColour","#2c3e50"),kt("backgroundColour","transparent"),kt("textColour","#2c3e50"),ya(16),xa(),ma('"Comic Sans MS", "Comic Sans", cursive'),ba("center")],image:[ga(0),kt("borderColour","#dee2e6"),kt("backgroundColour","#ffffff")],checkbox:[Mu("isChecked","custom",{defaultValue:!1}),Io("borderWidth","custom",{defaultValue:2,min:0,max:10,step:1}),kt("borderColour","#6c757d"),kt("fillColour","#ffffff")],radio:[Mu("isChecked","custom",{defaultValue:!1}),Io("borderWidth","custom",{defaultValue:2,min:0,max:10,step:1}),kt("borderColour","#6c757d"),kt("fillColour","#ffffff")],dropdown:[ga(2),kt("borderColour","#ced4da"),kt("backgroundColour","#ffffff"),kt("textColour","#2c3e50"),ya(14),xa(),ba("left"),ma()]},Vh=new Set(["posX","posY","width","height"]),w1=new Set(Pp.map(t=>t.id));function ti(t){return[...vT,...AT[t]??[],...Pp]}function wT(t){return ti(t).reduce((a,i)=>(i.defaultValue!==void 0&&(a[i.id]=i.defaultValue),a),{})}function CT(t,o){return{...wT(t),...o??{}}}const jr=t=>typeof t=="number"&&Number.isFinite(t),To=t=>typeof t=="string",yx=t=>typeof t=="boolean",ST=/^#[0-9a-fA-F]{6}$/,C1=(t,o)=>{if(!To(t))return o;const a=t.startsWith("#")?t:`#${t}`;return ST.test(a)?a.toLowerCase():o};function Ka(t,o){const a={...CT(t.type,o)};ti(t.type).forEach(p=>{p.type==="select"&&(a[p.id]=E1(p,a[p.id]))}),typeof o?.constrainProportions=="boolean"&&a.constrainRatio===void 0&&(a.constrainRatio=!!o.constrainProportions),Object.prototype.hasOwnProperty.call(a,"constrainProportions")&&delete a.constrainProportions;const l=o;a.shadow===void 0&&typeof l?.dropShadow=="boolean"&&(a.shadow=l.dropShadow),Object.prototype.hasOwnProperty.call(a,"dropShadow")&&delete a.dropShadow,Object.prototype.hasOwnProperty.call(a,"imageSrc")&&delete a.imageSrc;const c=C1(a.shadowColour??Bo,Bo);a.shadowColour=c;const u=jr(a.shadowOpacity)?Math.min(1,Math.max(0,a.shadowOpacity)):ei;a.shadowOpacity=u;const f=jr(a.shadowBlurRadius)?Math.max(0,a.shadowBlurRadius):fr;return a.shadowBlurRadius=f,a.id=t.id,a.type=t.type,a.posX=t.x,a.posY=t.y,a.width=t.width,a.height=t.height,a.shadow=yx(a.shadow)?a.shadow:!1,a.constrainRatio=yx(a.constrainRatio)?a.constrainRatio:!1,a.opacity=jr(a.opacity)?a.opacity:1,a}function S1(t,o){const a={};To(o.borderColour)&&(a.borderColor=o.borderColour);const i=To(o.backgroundColour)?o.backgroundColour:To(o.fillColour)?o.fillColour:void 0;return i&&(a.backgroundColor=i),To(o.textColour)&&(a.textColor=o.textColour),jr(o.fontSize)&&(a.fontSize=o.fontSize),To(o.fontWeight)&&(o.fontWeight==="normal"||o.fontWeight==="bold")&&(a.fontWeight=o.fontWeight),To(o.textAlign)&&(o.textAlign==="left"||o.textAlign==="center"||o.textAlign==="right")&&(a.textAlign=o.textAlign),To(o.fontFamily)?a.fontFamily=o.fontFamily:a.fontFamily=yo,(t==="checkbox"||t==="radio")&&!a.backgroundColor&&To(o.fillColour)&&(a.backgroundColor=o.fillColour),a}function ts(t){const o=Ka(t,t.properties),a=S1(t.type,o);let i=typeof t.imageSrc=="string"?t.imageSrc:void 0;const l=typeof t.properties?.imageSrc=="string"?t.properties.imageSrc:void 0;if(!i&&l&&(i=l),typeof o.imageSrc=="string"){const u=o.imageSrc;typeof u=="string"&&u.length>0&&(i=u),delete o.imageSrc}typeof i=="string"&&i.trim().length===0&&(i=void 0);const c={...o};return{...t,imageSrc:i,properties:c,style:{...t.style,...a}}}const ET=(t,o,a)=>{if(a==="width"){const i=o.constraints?.minWidth;typeof i=="number"&&(t=Math.max(t,i))}if(a==="height"){const i=o.constraints?.minHeight;typeof i=="number"&&(t=Math.max(t,i))}return t},MT=(t,o)=>{let a=t;return typeof o.min=="number"&&(a=Math.max(a,o.min)),typeof o.max=="number"&&(a=Math.min(a,o.max)),a},E1=(t,o)=>{const a=To(o)?o:String(t.defaultValue??t.options[0]?.value??"");if(t.options.some(c=>c.value===a))return a;const l=t.defaultValue;return typeof l=="string"?l:String(t.options[0]?.value??"")};function Zh(t,o,a){const l=ti(t.type).find(m=>m.id===o);if(!l||w1.has(l.id))return t;const c=Ka(t,t.properties),u={...c};let f=a;if(l.type==="boolean")f=!!a;else if(l.type==="number"){const m=jr(c[o])?c[o]:typeof l.defaultValue=="number"?l.defaultValue:0;let b=typeof a=="number"?a:Number(a);Number.isFinite(b)||(b=m),b=MT(b,l),b=ET(b,t,o),f=b}else if(l.type==="color"){const m=To(c[o])?c[o]:typeof l.defaultValue=="string"?l.defaultValue:"#000000";f=C1(a,m)}else l.type==="select"?f=E1(l,a):l.type==="string"&&(f=To(a)?a:String(a??""));u[o]=f;const p={...t};o==="posX"&&jr(f)&&(p.x=f),o==="posY"&&jr(f)&&(p.y=f),o==="width"&&jr(f)&&(p.width=f),o==="height"&&jr(f)&&(p.height=f);const h=Ka(p,u),g=S1(p.type,h);return{...p,properties:h,style:{...p.style,...g}}}function M1(t,o){return Object.entries(o).reduce((a,[i,l])=>l==null?Zh(a,i,l??null):Zh(a,i,l),t)}function RT(t){const o=Ka(t,t.properties),a=ti(t.type),i={...o};a.forEach(p=>{p.group==="immutable"||Vh.has(p.id)||(p.defaultValue!==void 0?i[p.id]=p.defaultValue:delete i[p.id])});const l=yT[t.type];l?.properties&&Object.entries(l.properties).forEach(([p,h])=>{if(!(Vh.has(p)||w1.has(p))){if(h===void 0){delete i[p];return}i[p]=h}});const c={...t,style:l?.style?{...l.style}:void 0,properties:i},u=ts(c),f=l?.style?{...l.style,...u.style}:u.style;return{...u,style:f}}function R1(){return Pp.map(t=>t.id)}function kT(){return Array.from(Vh)}const TT=t=>t.type==="number",IT=t=>t.type==="select",OT=(t,o)=>{const a=typeof o.min=="number"?o.min:-1/0,i=typeof o.max=="number"?o.max:1/0;return Math.min(i,Math.max(a,t))},xx=t=>typeof t=="boolean"?t?"true":"false":typeof t=="number"?Number.isFinite(t)?t.toString():"":typeof t=="string"?t:"",_T=[{id:"startX",type:"number",group:"common",label:"startX",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"startY",type:"number",group:"common",label:"startY",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"endX",type:"number",group:"common",label:"endX",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"endY",type:"number",group:"common",label:"endY",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"lineColour",type:"color",group:"custom",label:"lineColour",defaultValue:"#6c757d"},{id:"lineWidth",type:"number",group:"custom",label:"lineWidth",defaultValue:2,min:.5,max:20,step:.5},{id:"startMark",type:"select",group:"custom",label:"startMark",defaultValue:"None",options:[{value:"None",label:"None"},{value:"HollowArrow",label:"HollowArrow"}]},{id:"endMark",type:"select",group:"custom",label:"endMark",defaultValue:"None",options:[{value:"None",label:"None"},{value:"HollowArrow",label:"HollowArrow"}]},{id:"opacity",type:"number",group:"custom",label:"opacity",defaultValue:1,min:0,max:1,step:.05},{id:"shadow",type:"boolean",group:"custom",label:"shadow",defaultValue:!1},{id:"shadowColour",type:"color",group:"custom",label:"shadowColour",defaultValue:Bo},{id:"shadowOpacity",type:"number",group:"custom",label:"shadowOpacity",defaultValue:ei,min:0,max:1,step:.05},{id:"shadowBlurRadius",type:"number",group:"custom",label:"shadowBlurRadius",defaultValue:fr,min:0,max:64,step:.5},{id:"id",type:"string",group:"immutable",label:"id",isReadOnly:!0},{id:"type",type:"string",group:"immutable",label:"type",isReadOnly:!0}],DT=t=>{if(!t)return"#000000";const o=t.trim().toLowerCase();if(/^#([0-9a-f]{6}|[0-9a-f]{3})$/i.test(o)){if(o.length===4){const a=o[1],i=o[2],l=o[3];return`#${a}${a}${i}${i}${l}${l}`}return o}return"#000000"},jT=({schema:t,value:o,isReadOnly:a,onBooleanToggle:i,onNumberCommit:l,onSelectChange:c,onTextChange:u})=>{if(a){const f=xx(o),p=t.id==="id"&&typeof f=="string"&&f.length>12?`${f.slice(0,12)}`:f;return v.jsx(hx,{title:typeof f=="string"?f:void 0,children:p})}if(t.type==="boolean")return v.jsx("input",{type:"checkbox",checked:!!o,onChange:f=>i(t,f.target.checked)});if(TT(t)){const f=typeof o=="number"&&Number.isFinite(o)?o:typeof t.defaultValue=="number"?t.defaultValue:0,p=t.step??1,h=typeof t.min=="number"?t.min:-1/0,g=typeof t.max=="number"?t.max:1/0,m=p%1===0?0:p.toString().split(".")[1]?.length??0,b=w=>m>0?Number(w.toFixed(m)):Math.round(w);return v.jsxs(cT,{children:[v.jsx(fx,{type:"button",onClick:()=>l(t,b(f-p)),disabled:f-p<h,children:"-"}),v.jsx(uT,{type:"number",value:f,onChange:w=>{const C=Number(w.target.value);Number.isFinite(C)&&l(t,b(C))},min:t.min,max:t.max,step:p}),v.jsx(fx,{type:"button",onClick:()=>l(t,b(f+p)),disabled:f+p>g,children:"+"})]})}if(t.type==="color"){const f=DT(typeof o=="string"?o:null);return v.jsx(dT,{type:"color",value:f,onChange:p=>u(t,p.target.value)})}if(IT(t)){const f=typeof o=="string"?o:String(t.options[0]?.value??""),p=t.id==="fontFamily"?120:void 0;return v.jsx(hT,{value:f,onChange:h=>c(t,h.target.value),$width:p,children:t.options.map(h=>v.jsx("option",{value:h.value,children:h.label},h.value))})}if(t.type==="string"){const f=typeof o=="string"?o:"";return v.jsx(fT,{type:"text",value:f,onChange:p=>u(t,p.target.value)})}return v.jsx(hx,{children:xx(o)})},Kh="#6c757d",Jh=2,vl="None",sl=(t,o,a)=>Math.min(a,Math.max(o,t)),bx={lineColour:Kh,lineWidth:Jh,opacity:1,shadow:!1,shadowColour:Bo,shadowOpacity:ei,shadowBlurRadius:fr,startMark:vl,endMark:vl},Dn={updateElement(t,o,a){return Zh(t,o,a)},applyElementBatch(t,o){return M1(t,o)},initialiseElement(t){return Ka(t,t.properties)},getSchemaForElement(t){return ti(t)},normaliseConnector(t){const o=t.properties?{...t.properties}:{},a=typeof o.lineWidth=="number"?o.lineWidth:typeof o.strokeWidth=="number"?o.strokeWidth:void 0,i=Number.isFinite(a)?sl(Number(a),.5,400):Jh,l=typeof o.lineColour=="string"&&o.lineColour.trim().length>0?o.lineColour.toLowerCase():typeof o.strokeColour=="string"&&o.strokeColour.trim().length>0?o.strokeColour.toLowerCase():Kh,c=typeof o.opacity=="number"&&Number.isFinite(o.opacity)?sl(o.opacity,0,1):1,u=o.shadow===void 0?!!o.dropShadow:!!o.shadow,f=wh(o.shadowColour??Bo),p=px(o.shadowOpacity),h=mx(o.shadowBlurRadius??fr),g=m=>m==="HollowArrow"?"HollowArrow":vl;return{...t,type:"line",startPoint:{x:Math.round(t.startPoint.x),y:Math.round(t.startPoint.y)},endPoint:{x:Math.round(t.endPoint.x),y:Math.round(t.endPoint.y)},properties:{lineColour:l,lineWidth:i,opacity:c,shadow:u,shadowColour:f,shadowOpacity:p,shadowBlurRadius:h,startMark:g(o.startMark),endMark:g(o.endMark)}}},applyConnectorProperties(t,o){const a=Dn.normaliseConnector(t),i={...bx,...a.properties??{},...o},l={lineColour:typeof i.lineColour=="string"&&i.lineColour.trim().length>0?i.lineColour.toLowerCase():Kh,lineWidth:Number.isFinite(i.lineWidth)?sl(Number(i.lineWidth),.5,400):Jh,opacity:Number.isFinite(i.opacity)?sl(Number(i.opacity),0,1):1,shadow:!!i.shadow,shadowColour:wh(i.shadowColour??Bo),shadowOpacity:px(i.shadowOpacity),shadowBlurRadius:mx(i.shadowBlurRadius??fr),startMark:i.startMark==="HollowArrow"?"HollowArrow":vl,endMark:i.endMark==="HollowArrow"?"HollowArrow":vl};return{...a,properties:l}},getConnectorDefaults(){return{...bx}},buildConnectorSnapshot(t){const o=Dn.normaliseConnector(t);return{...o.properties,startX:o.startPoint.x,startY:o.startPoint.y,endX:o.endPoint.x,endY:o.endPoint.y,id:o.id,type:o.type}},formatValueForSchema(t,o){if(t.type==="number"){const a=typeof o=="number"&&Number.isFinite(o)?o:typeof t.defaultValue=="number"?t.defaultValue:0,i=typeof t.min=="number"?t.min:Number.MIN_SAFE_INTEGER,l=typeof t.max=="number"?t.max:Number.MAX_SAFE_INTEGER;return sl(a,i,l)}if(t.type==="boolean")return!!o;if(t.type==="color")return typeof o=="string"?wh(o):Bo;if(t.type==="select"){const a=new Set(t.options.map(i=>i.value));return typeof o=="string"&&a.has(o)?o:t.defaultValue??t.options[0]?.value??""}return o}},vx=t=>{const o=u=>(u.label??u.id??"").toString(),a=[...t].sort((u,f)=>o(u).localeCompare(o(f),void 0,{sensitivity:"base"})),i=u=>u.group==="immutable"||u.isReadOnly,l=a.filter(u=>!i(u)),c=a.filter(u=>i(u));return[...l,...c]};function BT({element:t,connector:o,immutableKeys:a,startAnchored:i,endAnchored:l}){return x.useMemo(()=>{if(t)return vx(ti(t.type)).map(u=>{const f=t.properties?.[u.id]??null,p=u.isReadOnly||u.group==="immutable"||a.has(u.id);return{schema:u,value:f,isReadOnly:p}});if(o){const c=Dn.buildConnectorSnapshot(o);return vx(_T).map(f=>{const p=c[f.id]??null,h=!!(i&&(f.id==="startX"||f.id==="startY")||l&&(f.id==="endX"||f.id==="endY")),g=f.isReadOnly||f.group==="immutable"||h;return{schema:f,value:p,isReadOnly:g}})}return[]},[t,o,a,i,l])}const PT=()=>v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"}),v.jsx("path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"})]}),zT=()=>v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),v.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"})]}),NT=()=>v.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"}),v.jsx("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"})]});function LT({selectedElement:t,selectedConnector:o,selectionCount:a,onPropertyChange:i,onCopyProperties:l,onPasteProperties:c,onResetProperties:u,canPasteProperties:f}){const h=x.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[])?"":"Ctrl",g=a===1&&t?t:null,m=a===1&&o&&!t?o:null,b=x.useMemo(()=>new Set(R1()),[]),w=!!m?.startAttachment,C=!!m?.endAttachment,A=BT({element:g,connector:m,immutableKeys:b,startAnchored:w,endAnchored:C}),S=x.useCallback((D,j)=>{D.isReadOnly||D.group==="immutable"||i(D.id,j)},[i]),R=x.useCallback((D,j)=>{D.isReadOnly||D.group==="immutable"||i(D.id,OT(j,D))},[i]),M=x.useCallback((D,j)=>{D.isReadOnly||D.group==="immutable"||i(D.id,j)},[i]),E=x.useCallback((D,j)=>{D.isReadOnly||D.group==="immutable"||i(D.id,j)},[i]),k=a===0?"Select an item to inspect its properties.":"Select a single item to inspect its properties.",I=!!(g||m),z=!!(g||m);return v.jsxs(eT,{children:[v.jsxs(tT,{children:[v.jsx(nT,{children:"Properties"}),v.jsxs(oT,{children:[v.jsx(vh,{$variant:"ghost",type:"button",onClick:l,disabled:!I,title:`Copy properties (${h}+Shift+C)`,"aria-label":"Copy properties",children:v.jsx(Ah,{children:v.jsx(PT,{})})}),v.jsx(vh,{$variant:"ghost",type:"button",onClick:c,disabled:!f,title:`Paste properties (${h}+Shift+V)`,"aria-label":"Paste properties",children:v.jsx(Ah,{children:v.jsx(zT,{})})}),v.jsx(vh,{$variant:"ghost",type:"button",onClick:u,disabled:!z,title:"Reset styling","aria-label":"Reset styling",children:v.jsx(Ah,{children:v.jsx(NT,{})})})]})]}),!g&&!m?v.jsx(lT,{children:k}):v.jsxs(rT,{"data-property-table":"true",children:[v.jsxs(aT,{children:[v.jsx("div",{children:"Property"}),v.jsx("div",{children:"Value"})]}),v.jsx(iT,{"data-property-table-body":"true",children:A.map(D=>v.jsxs(sT,{"data-property-id":D.schema.id,children:[v.jsx(dx,{children:D.schema.label??D.schema.id}),v.jsx(dx,{$align:"right",children:v.jsx(jT,{schema:D.schema,value:D.value,isReadOnly:D.isReadOnly,onBooleanToggle:S,onNumberCommit:R,onSelectChange:M,onTextChange:E})})]},D.schema.id))})]})]})}const Ax=Zt("library-properties-split"),ll=.3,Ch=14;function HT({isCollapsed:t,onDragStart:o,onDragMove:a,onDragEnd:i,onElementClick:l,selectedElement:c,selectedConnector:u,selectionCount:f,onPropertyChange:p,onCopyProperties:h,onPasteProperties:g,onResetProperties:m,canPasteProperties:b}){const[w,C]=x.useState(!t),A=x.useRef(null),S=x.useCallback(()=>{if(typeof window>"u")return ll;try{const j=window.localStorage.getItem(Ax);if(!j)return ll;const $=Number.parseFloat(j);return Number.isFinite($)?Math.min(.85,Math.max(.2,$)):ll}catch{return ll}},[]),[R,M]=x.useState(()=>S()),[E,k]=x.useState(!1);x.useEffect(()=>{if(t)C(!1);else{const j=setTimeout(()=>{C(!0)},300);return()=>clearTimeout(j)}},[t]),x.useEffect(()=>{if(!(typeof window>"u")&&!(R<=0)&&!po())try{window.localStorage.setItem(Ax,R.toString())}catch{}},[R]),x.useEffect(()=>{if(typeof window>"u")return;const j=()=>{M(ll)};return window.addEventListener(Il,j),()=>{window.removeEventListener(Il,j)}},[]),x.useEffect(()=>{if(!w||!A.current)return;const j=A.current.getBoundingClientRect();if(j.height===0)return;const $=170,F=140,X=Math.min(.85,Math.max(0,(j.height-$-Ch)/j.height));if(X<=0){R!==0&&M(0);return}const Z=Math.min(X,Math.max(0,F/j.height)),K=Math.min(X,Math.max(Z,R));Math.abs(K-R)>1e-4&&M(K)},[w,R]);const I=x.useCallback(j=>{if(!A.current)return;const $=A.current.getBoundingClientRect();if($.height===0)return;j.preventDefault(),k(!0);const F=j.clientY,X=R,Z=170,K=140,te=H=>{const N=Math.min(.85,Math.max(0,($.height-Z-Ch)/$.height));if(N<=0)return 0;const P=Math.min(N,Math.max(0,K/$.height));return Math.min(N,Math.max(P,H))},Q=H=>{const N=H.clientY-F,P=te(X+N/$.height);M(P)},_=()=>{k(!1),document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",_)};document.addEventListener("mousemove",Q),document.addEventListener("mouseup",_)},[R]),z=x.useCallback(j=>{if(!A.current||j.touches.length!==1)return;const $=A.current.getBoundingClientRect();if($.height===0)return;const F=j.touches[0];j.preventDefault();const X=F.clientY,Z=R,K=170,te=140;k(!0);const Q=N=>{const P=Math.min(.85,Math.max(0,($.height-K-Ch)/$.height));if(P<=0)return 0;const O=Math.min(P,Math.max(0,te/$.height));return Math.min(P,Math.max(O,N))},_=N=>{if(N.touches.length!==1)return;const P=N.touches[0].clientY-X,O=Q(Z+P/$.height);M(O)},H=()=>{k(!1),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",H),document.removeEventListener("touchcancel",H)};document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchend",H),document.addEventListener("touchcancel",H)},[R]),D=`${(R*100).toFixed(2)}%`;return v.jsx(Pk,{$isCollapsed:t,children:w&&v.jsxs(zk,{ref:A,children:[v.jsx(Nk,{"data-element-library-section":"true",style:{flex:`0 0 ${D}`,minHeight:"140px"},children:v.jsx(Lk,{children:jp.map(j=>v.jsx(qk,{element:j,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l},j.type))})}),v.jsx(Hk,{onMouseDown:I,onTouchStart:z,$isDragging:E,"aria-label":"Resize library and properties",role:"separator","data-library-resizer":"true"}),v.jsx(Yk,{children:v.jsx($k,{"data-library-properties":"true",children:v.jsx(Uk,{"data-property-scroll-content":"true",children:v.jsx(LT,{selectedElement:c,selectedConnector:u,selectionCount:f,onPropertyChange:p,onCopyProperties:h,onPasteProperties:g,onResetProperties:m,canPasteProperties:b})})})})]})})}/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YT={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=(t,o,a,i)=>{const l=x.forwardRef(({color:c="currentColor",size:u=24,stroke:f=2,title:p,className:h,children:g,...m},b)=>x.createElement("svg",{ref:b,...YT[t],width:u,height:u,className:["tabler-icon",`tabler-icon-${o}`,h].join(" "),strokeWidth:f,stroke:c,...m},[p&&x.createElement("title",{key:"svg-title"},p),...i.map(([w,C])=>x.createElement(w,C)),...Array.isArray(g)?g:[g]]));return l.displayName=`${a}`,l};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],UT=Yl("outline","arrow-left","ArrowLeft",$T);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],QT=Yl("outline","arrow-right","ArrowRight",XT);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M17.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0",key:"svg-0"}],["path",{d:"M3 19v-10.5a3.5 3.5 0 0 1 7 0v10.5",key:"svg-1"}],["path",{d:"M3 13h7",key:"svg-2"}],["path",{d:"M21 12v7",key:"svg-3"}]],GT=Yl("outline","letter-case","LetterCase",FT);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],qT=Yl("outline","plus","Plus",WT);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],ZT=Yl("outline","trash","Trash",VT),KT=se.div.attrs(t=>t.$isDocked?{}:{style:{top:`${t.$top}px`,left:`${t.$left}px`}})`
  position: ${t=>t.$isDocked?"static":"absolute"};
  display: flex;
  flex-direction: ${t=>t.$orientation==="vertical"?"column":"row"};
  align-items: center;
  gap: ${t=>t.$orientation==="vertical"?"6px":"4px"};
  padding: ${t=>t.$orientation==="vertical"?"6px 8px":"4px 6px"};
  background: ${t=>t.$isDocked?"rgba(255, 255, 255, 0.85)":"rgba(255, 255, 255, 0.9)"};
  border: none;
  border-radius: ${t=>t.$orientation==="vertical"?"16px":"14px"};
  box-shadow: ${t=>t.$isDocked?"none":"0 12px 30px rgba(76, 86, 103, 0.12)"};
  backdrop-filter: blur(12px);
  z-index: ${t=>t.$isDocked?1200:100};
  transition: box-shadow 0.3s ease;
  touch-action: none;
  user-select: none;

  &:hover {
    box-shadow: ${t=>t.$isDocked?"none":"0 16px 35px rgba(76, 86, 103, 0.18)"};
  }
`,JT=se.button`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  border: none;
  border-radius: 9px;
  background: transparent;
  color: #a7b0bc;
  cursor: grab;
  transition: all 0.2s ease;
  touch-action: none;
  ${t=>t.$orientation==="vertical"?lr`
        width: 40px;
        height: 18px;
        margin: 0 auto 4px;
      `:lr`
        width: 18px;
        height: 100%;
        margin-right: 2px;
      `}

  &:hover {
    color: #6f7784;
    background: rgba(76, 86, 103, 0.12);
  }

  &:active {
    cursor: grabbing;
    background: rgba(76, 86, 103, 0.15);
  }
`,eI=se.span`
  display: block;
  border-radius: 999px;
  background: currentColor;
  opacity: 0.85;
  ${t=>t.$orientation==="vertical"?lr`
        width: 16px;
        height: 4px;
        box-shadow: -6px 0 0 currentColor, 6px 0 0 currentColor;
      `:lr`
        width: 4px;
        height: 14px;
        box-shadow: 0 -6px 0 currentColor, 0 6px 0 currentColor;
      `}
`,wx=se.button`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 9px;
  background: ${t=>t.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${t=>t.$isActive?"#2c3e50":"#5b6577"};
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 17px;
  box-shadow: ${t=>t.$isActive?"0 6px 16px rgba(76, 86, 103, 0.18)":"none"};

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }

  &:active {
    transform: translateY(-1px);
  }
`,Sh=se.div`
  display: flex;
  align-items: center;
  gap: ${t=>t.$orientation==="vertical"?"6px":"4px"};
  ${t=>t.$orientation==="vertical"?lr`
        flex-direction: column;
        margin-left: 0;
        padding-left: 0;
        border-left: none;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid rgba(225, 229, 233, 0.6);
      `:lr`
        flex-direction: row;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(225, 229, 233, 0.6);
      `}
`,Ir=se.button`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 9px;
  background: transparent;
  color: ${t=>t.$disabled?"#c0c6d1":"#5b6577"};
  cursor: ${t=>t.$disabled?"not-allowed":"pointer"};
  transition: all 0.2s ease;
  font-size: 16px;
  opacity: ${t=>t.$disabled?.5:1};

  &:hover {
    ${t=>!t.$disabled&&`
      color: #2c3e50;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(76, 86, 103, 0.18);
    `}
  }

  &:active {
    ${t=>!t.$disabled&&`
      transform: translateY(0);
    `}
  }
`,Cx=se.div`
  position: relative;
`,tI=se.div`
  ${t=>t.$orientation==="vertical"?lr`
        width: 100%;
        height: 0;
        margin: 6px 0;
        border-top: 1px solid rgba(225, 229, 233, 0.6);
      `:lr`
        width: 0;
        height: 28px;
        margin: 0 12px;
        border-left: 1px solid rgba(225, 229, 233, 0.6);
      `}
`,Sx=se.button`
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 9px;
  background: ${t=>t.$isOpen?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${t=>t.$isOpen?"#2c3e50":"#5b6577"};
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 18px;
  line-height: 1;
  outline: none;

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,nI=se.button`
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 9px;
  background: ${t=>t.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${t=>(t.$isActive,"#2c3e50")};
  font-weight: 600;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  letter-spacing: 0.5px;
  outline: none;

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,k1=`
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translate(-50%, 8px);
  padding: 10px;
  background: rgba(255, 255, 255, 0.92);
  border: none;
  border-radius: 16px;
  box-shadow: 0 18px 36px rgba(76, 86, 103, 0.18);
  backdrop-filter: blur(16px);
  display: grid;
  grid-template-columns: repeat(3, 78px);
  gap: 10px;
  z-index: 120;
`,oI=se.div`
  ${k1}
`,rI=se.div`
  ${k1}
`,Ex=se.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: #4a5568;
  text-align: center;
`,T1=se.button`
  width: 78px;
  height: 84px;
  border: none;
  border-radius: 12px;
  background: ${t=>t.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  cursor: ${t=>t.$isClickableOnly?"pointer":t.$isDragging?"grabbing":"grab"};
  box-shadow: ${t=>t.$isDragging?"0 10px 24px rgba(76, 86, 103, 0.24)":"none"};
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  padding: 10px;
  outline: none;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,I1=se.svg`
  width: 48px;
  height: 48px;
`,aI=se(I1)`
  transform: scale(0.9);
  transform-origin: center;
`,O1=se.span`
  font-size: 10px;
  color: #4a5568;
  white-space: nowrap;
`,_1=se.div`
  position: fixed;
  top: ${t=>t.$y}px;
  left: ${t=>t.$x}px;
  transform: translate(-50%, -50%);
  padding: 8px 12px;
  background: rgba(44, 62, 80, 0.85);
  color: white;
  border-radius: 8px;
  font-size: 12px;
  pointer-events: none;
  opacity: ${t=>t.$visible?1:0};
  transition: opacity 0.1s ease;
  white-space: nowrap;
  z-index: 200;
`,iI=se.div`
  position: fixed;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 180px;
  z-index: 1300;
  padding: 4px;
`,sI=se.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  text-align: left;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  border-radius: 4px;
  user-select: none;

  &:hover {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,lI=se.span`
  font-size: 11px;
  color: #6c757d;
`,cI=se.div`
  height: 1px;
  background: #e1e5e9;
  margin: 4px 0;
`,uI=({style:t,children:o,dataAttributes:a,forwardedRef:i})=>v.jsx(iI,{ref:i,style:t,...a??{},children:o}),dI=({entry:t,onSelect:o})=>v.jsxs(sI,{type:"button",onClick:o,disabled:t.disabled,...t.dataAttributes??{},children:[v.jsx("span",{children:t.label}),t.shortcut?v.jsx(lI,{children:t.shortcut}):null]}),fI={Container:uI,Item:dI,Separator:cI},hI=8,pI=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height});function Ru(){const[t,o]=x.useState(null),a=x.useCallback(c=>{const{event:u,position:f,entries:p,dataAttributes:h,metadata:g,anchorRect:m,placement:b,portalTarget:w}=c,C=m?pI(m):void 0,A=C?C.left+C.width/2:u?.clientX??0,S=C?C.bottom:u?.clientY??0,R=f?.x??A,M=f?.y??S;u?.preventDefault&&u.preventDefault(),o({isOpen:!0,x:R,y:M,entries:p,dataAttributes:h,metadata:g,anchorRect:C,placement:b??(C?"anchor":"cursor"),portalTarget:w??(typeof document<"u"?document.body:null)})},[]),i=x.useCallback(()=>{o(c=>c&&{...c,isOpen:!1})},[]),l=x.useCallback(()=>o(null),[]);return x.useMemo(()=>({state:t,openMenu:a,closeMenu:i,resetMenu:l,isOpen:!!t?.isOpen}),[t,a,i,l])}function ku({state:t,closeMenu:o,resetMenu:a,components:i=fI}){const l=x.useRef(null),[c,u]=x.useState({x:0,y:0});if(x.useEffect(()=>{if(!t?.isOpen)return;const w=S=>{S.button===0&&(l.current?.contains(S.target)||o())},C=S=>{if(l.current){if(l.current.contains(S.target)){S.preventDefault();return}o()}},A=S=>{S.key==="Escape"&&o()};return document.addEventListener("mousedown",w),document.addEventListener("contextmenu",C),document.addEventListener("keydown",A),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("contextmenu",C),document.removeEventListener("keydown",A)}},[t?.isOpen,o]),x.useEffect(()=>{if(!t?.isOpen&&(u({x:0,y:0}),a)){const w=requestAnimationFrame(a);return()=>cancelAnimationFrame(w)}},[t?.isOpen,a]),x.useEffect(()=>{t?.isOpen&&u({x:t.x,y:t.y})},[t?.isOpen,t?.x,t?.y]),x.useLayoutEffect(()=>{if(!t?.isOpen||!l.current)return;const C=l.current.getBoundingClientRect();let A=c.x,S=c.y;const R=hI;if(t.placement==="anchor"&&t.anchorRect){const M=t.anchorRect,E=M.top-C.height-R,k=M.bottom+R;A=M.left+M.width/2-C.width/2,E>=R?S=E:S=k}if(typeof window<"u"){const M=window.innerWidth,E=window.innerHeight;A+C.width+R>M?A=Math.max(R,M-C.width-R):A=Math.max(R,A),S+C.height+R>E?S=Math.max(R,E-C.height-R):S=Math.max(R,S)}(A!==c.x||S!==c.y)&&u({x:A,y:S})},[t?.isOpen,t?.placement,t?.anchorRect,c.x,c.y]),!t?.isOpen)return null;const{Container:f,Item:p,Separator:h}=i,g={left:`${c.x}px`,top:`${c.y}px`},m=v.jsx(f,{forwardedRef:l,style:g,dataAttributes:t.dataAttributes,children:t.entries.map(w=>{if(w.type==="separator")return v.jsx(h,{},w.id);const C=()=>{w.disabled||(w.onSelect(),w.closeOnSelect!==!1&&o())};return v.jsx(p,{entry:w,onSelect:C},w.id)})}),b=t.portalTarget??(typeof document<"u"?document.body:null);return b?Lr.createPortal(m,b):m}function mI(t){const{modKeyLabel:o,deleteShortcutLabel:a,hasAnySelection:i,canGroup:l,canUngroup:c,onBringToFront:u,onBringForward:f,onSendBackward:p,onSendToBack:h,onGroup:g,onUngroup:m,onDelete:b}=t;return[{type:"item",id:"bring-front",label:"Bring to Front",shortcut:`${o}+Shift+J`,disabled:!i,onSelect:u},{type:"item",id:"bring-forward",label:"Bring Forward",shortcut:`${o}+J`,disabled:!i,onSelect:f},{type:"item",id:"send-backward",label:"Send Backward",shortcut:`${o}+K`,disabled:!i,onSelect:p},{type:"item",id:"send-to-back",label:"Send to Back",shortcut:`${o}+Shift+K`,disabled:!i,onSelect:h},{type:"separator",id:"layering-divider"},{type:"item",id:"group",label:"Group",shortcut:`${o}+G`,disabled:!l,onSelect:g},{type:"item",id:"ungroup",label:"Ungroup",shortcut:`${o}+Shift+G`,disabled:!c,onSelect:m},{type:"separator",id:"edit-divider"},{type:"item",id:"delete",label:"Delete",shortcut:a,disabled:!i,onSelect:b}]}function gI(t){const{zoomOutShortcutLabel:o,zoomInShortcutLabel:a,resetZoomShortcutLabel:i,fitShortcutLabel:l,onZoomOut:c,onZoomIn:u,onResetZoom:f,onFitToScreen:p}=t;return[{type:"item",id:"zoom-out",label:"Zoom Out",shortcut:o,onSelect:c},{type:"item",id:"zoom-in",label:"Zoom In",shortcut:a,onSelect:u},{type:"item",id:"reset-zoom",label:"Reset Zoom",shortcut:i,onSelect:f},{type:"item",id:"fit-to-screen",label:"Fit to Screen",shortcut:l,onSelect:p}]}function yI(t){const{isDocked:o,onToggleOrientation:a,onDock:i,onUndock:l}=t,c=[];return o||c.push({type:"item",id:"toggle-orientation",label:"Toggle orientation",dataAttributes:{"data-toolbar-menu-item":"toggle-orientation"},onSelect:a}),c.push({type:"item",id:o?"undock-toolbar":"dock-toolbar",label:o?"Undock toolbar":"Dock toolbar",dataAttributes:{"data-toolbar-menu-item":o?"undock":"dock"},onSelect:o?l:i}),c}function xI(t){const{canDuplicate:o,canDelete:a,onDuplicate:i,onDelete:l}=t;return[{type:"item",id:"duplicate",label:"Duplicate",disabled:!o,dataAttributes:{"data-menu-action":"duplicate"},onSelect:i},{type:"item",id:"delete",label:"Delete",disabled:!a,dataAttributes:{"data-menu-action":"delete"},onSelect:l}]}const Eh={lineColour:"#6c757d",lineWidth:2,opacity:1,shadow:!1,shadowColour:"#000000",shadowOpacity:.36,shadowBlurRadius:6},bI=[{type:"connector",label:"Line",icon:"",defaultProps:{type:"line",properties:{...Eh,startMark:"None",endMark:"None"}}},{type:"connector",label:"Single Arrow",icon:"",defaultProps:{type:"line",properties:{...Eh,startMark:"None",endMark:"HollowArrow"}}},{type:"connector",label:"Double Arrow",icon:"",defaultProps:{type:"line",properties:{...Eh,startMark:"HollowArrow",endMark:"HollowArrow"}}}],Br=20,D1=8e3,j1=5e3,vI=se.div`
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  touch-action: none;
  cursor: ${t=>t.$isPanning?"grabbing":t.$canvasMode==="select"?"crosshair":t.$canvasMode==="draw-connector"?"cell":"grab"};

  &.panning {
    cursor: grabbing;
  }
`,AI=se.div.attrs(t=>({style:{transform:`scale(${t.$zoom}) translate(${t.$panX}px, ${t.$panY}px)`,willChange:t.$isPinchZooming?"transform":"auto"}}))`
  position: absolute;
  left: calc(${Br}px - 0.5px);
  top: calc(${Br}px - 0.5px);
  transform-origin: 0 0;
  width: ${D1}px;
  height: ${j1}px;
  touch-action: none;
  background-color: #ffffff;
  background-image:
    linear-gradient(90deg, #d0d0d0 1px, transparent 1px),
    linear-gradient(180deg, #d0d0d0 1px, transparent 1px),
    linear-gradient(90deg, #f0f0f0 1px, transparent 1px),
    linear-gradient(180deg, #f0f0f0 1px, transparent 1px);
  background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
  background-position: -0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px;
  box-shadow: 1px 0 0 0 #e8e8e8, 0 1px 0 0 #e8e8e8;
`,No=({children:t})=>v.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:t}),wI=()=>v.jsx(No,{children:v.jsxs("g",{stroke:"#4c5667",strokeWidth:"2.2",strokeLinecap:"round",children:[v.jsx("line",{x1:"6",y1:"5",x2:"10",y2:"5"}),v.jsx("line",{x1:"14",y1:"5",x2:"18",y2:"5"}),v.jsx("line",{x1:"5",y1:"6",x2:"5",y2:"10"}),v.jsx("line",{x1:"5",y1:"14",x2:"5",y2:"18"}),v.jsx("line",{x1:"6",y1:"19",x2:"10",y2:"19"}),v.jsx("line",{x1:"14",y1:"19",x2:"18",y2:"19"}),v.jsx("line",{x1:"19",y1:"6",x2:"19",y2:"10"}),v.jsx("line",{x1:"19",y1:"14",x2:"19",y2:"18"})]})}),CI=()=>v.jsxs(No,{children:[v.jsx("path",{d:"M12 4V20"}),v.jsx("path",{d:"M12 4L9.7 6.3"}),v.jsx("path",{d:"M12 4L14.3 6.3"}),v.jsx("path",{d:"M12 20L9.7 17.7"}),v.jsx("path",{d:"M12 20L14.3 17.7"}),v.jsx("path",{d:"M4 12H20"}),v.jsx("path",{d:"M4 12L6.3 9.7"}),v.jsx("path",{d:"M4 12L6.3 14.3"}),v.jsx("path",{d:"M20 12L17.7 9.7"}),v.jsx("path",{d:"M20 12L17.7 14.3"})]}),SI=()=>v.jsx(GT,{size:20,strokeWidth:1.8,"aria-hidden":"true"}),EI=()=>v.jsxs(No,{children:[v.jsx("rect",{x:"4.5",y:"4.5",width:"9",height:"9",rx:"2"}),v.jsx("circle",{cx:"16.5",cy:"16.5",r:"3.5"})]}),MI=()=>v.jsxs(No,{children:[v.jsx("circle",{cx:"6",cy:"16",r:"2.3",fill:"currentColor",stroke:"none"}),v.jsx("circle",{cx:"18",cy:"8",r:"2.3",fill:"currentColor",stroke:"none"}),v.jsx("path",{d:"M8 14.5L16 9.5"})]}),RI=()=>v.jsxs(No,{children:[v.jsx("path",{d:"M9 7L5 11L9 15"}),v.jsx("path",{d:"M5 11H14.5C17.5 11 19.5 13.4 19.5 16"})]}),kI=()=>v.jsxs(No,{children:[v.jsx("path",{d:"M15 7L19 11L15 15"}),v.jsx("path",{d:"M19 11H9.5C6.5 11 4.5 13.4 4.5 16"})]}),TI=()=>v.jsx(ZT,{"aria-hidden":"true",size:16,stroke:1.8}),II=()=>v.jsxs(No,{children:[v.jsxs("g",{stroke:"#4c5667",children:[v.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),v.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),v.jsx("line",{x1:"5",y1:"17",x2:"18",y2:"17"})]}),v.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15.5 6.5L15.5 14.6"}),v.jsx("path",{d:"M15.5 14.6L13.3 12.4"}),v.jsx("path",{d:"M15.5 14.6L17.7 12.4"})]})]}),OI=()=>v.jsxs(No,{children:[v.jsxs("g",{stroke:"#4c5667",children:[v.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),v.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),v.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),v.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15.5 9L15.5 15"}),v.jsx("path",{d:"M15.5 15L13.6 13.1"}),v.jsx("path",{d:"M15.5 15L17.4 13.1"})]})]}),_I=()=>v.jsxs(No,{children:[v.jsxs("g",{stroke:"#4c5667",children:[v.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),v.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),v.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),v.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15.5 15L15.5 9"}),v.jsx("path",{d:"M15.5 9L13.6 10.9"}),v.jsx("path",{d:"M15.5 9L17.4 10.9"})]})]}),DI=()=>v.jsxs(No,{children:[v.jsxs("g",{stroke:"#4c5667",children:[v.jsx("line",{x1:"5",y1:"7",x2:"18",y2:"7"}),v.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),v.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),v.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("path",{d:"M15.5 16.5L15.5 9.2"}),v.jsx("path",{d:"M15.5 9.2L13.3 11.4"}),v.jsx("path",{d:"M15.5 9.2L17.7 11.4"})]})]}),jI=()=>v.jsxs(No,{children:[v.jsx("rect",{x:"6.2",y:"8.2",width:"9",height:"9",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"}),v.jsx("rect",{x:"9.4",y:"5",width:"9",height:"9",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"})]}),BI=()=>v.jsxs(No,{children:[v.jsx("rect",{x:"5.8",y:"9.8",width:"7.6",height:"7.6",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"}),v.jsx("rect",{x:"11.6",y:"5.2",width:"7.6",height:"7.6",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"})]}),Tu=3,PI=({item:t})=>{const o=t.defaultProps.style?.backgroundColor??"#ffffff",a=t.defaultProps.style?.borderColor??"#6c757d",i=4,l={stroke:a,strokeWidth:i,strokeLinejoin:"round",strokeLinecap:"round"},c=()=>v.jsxs(v.Fragment,{children:[v.jsx("path",{d:"M22 26 V64 A28 10 0 0 0 78 64 V26 Z",fill:o,...l}),v.jsx("ellipse",{cx:"50",cy:"26",rx:"28",ry:"10",fill:o,...l}),v.jsx("path",{d:"M22 64 A28 10 0 0 0 78 64",fill:"none",...l})]});switch(t.type){case"oval":return t.defaultProps.properties?.constrainRatio?v.jsx("circle",{cx:"50",cy:"46",r:"24",fill:o,stroke:a,strokeWidth:i}):v.jsx("ellipse",{cx:"50",cy:"46",rx:"32",ry:"24",fill:o,stroke:a,strokeWidth:i});case"rhombus":return v.jsx("polygon",{points:"50,18 86,46 50,74 14,46",fill:o,stroke:a,strokeWidth:i});case"triangle":return v.jsx("polygon",{points:"50,18 86,78 14,78",fill:o,stroke:a,strokeWidth:i});case"parallelogram":return v.jsx("polygon",{points:"22,26 78,26 64,74 8,74",fill:o,stroke:a,strokeWidth:i});case"hexagon":return v.jsx("polygon",{points:"35,22 65,22 82,50 65,78 35,78 18,50",fill:o,stroke:a,strokeWidth:i});case"cylinder":return v.jsx(c,{});case"pipe":return v.jsx("g",{transform:"rotate(90 50 50)",children:v.jsx(c,{})});case"card":return v.jsx("polygon",{points:"32,26 78,26 78,74 14,74 14,44",fill:o,stroke:a,strokeWidth:i});case"note":{const w="20,22 80,22 80,66 64,82 20,82",C="#6c757d";return v.jsxs("g",{children:[v.jsx("polygon",{points:w,fill:"none",stroke:C,strokeWidth:i}),v.jsx("line",{x1:64,y1:82,x2:80,y2:66,stroke:C,strokeWidth:i}),v.jsx("line",{x1:64,y1:66,x2:80,y2:66,stroke:C,strokeWidth:i}),v.jsx("line",{x1:64,y1:66,x2:64,y2:82,stroke:C,strokeWidth:i})]})}case"actor":{const u=i*.65,f=12,p=28,h=40,g=68,m=50,b=36,w=88,C=30,A=50;return v.jsxs("g",{fill:"none",stroke:a,strokeWidth:u,strokeLinecap:"round",children:[v.jsx("circle",{cx:A,cy:p,r:f}),v.jsx("line",{x1:A,y1:h,x2:A,y2:g}),v.jsx("line",{x1:A-b/2,y1:m,x2:A+b/2,y2:m}),v.jsx("line",{x1:A,y1:g,x2:A-C/2,y2:w}),v.jsx("line",{x1:A,y1:g,x2:A+C/2,y2:w})]})}case"rectangle":return t.defaultProps.properties?.constrainRatio?v.jsx("rect",{x:"28",y:"22",width:"44",height:"44",fill:o,stroke:a,strokeWidth:i}):v.jsx("rect",{x:"14",y:"26",width:"72",height:"40",fill:o,stroke:a,strokeWidth:i});default:return v.jsx("rect",{x:"16",y:"18",width:"68",height:"56",fill:o,stroke:a,strokeWidth:i})}},zI=({item:t,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=x.useState(!1),[f,p]=x.useState({x:0,y:0}),h=x.useCallback(m=>{if(m.button!==0)return;m.preventDefault();const b={x:m.clientX,y:m.clientY};u(!1),p(b);let w=!1;const C=S=>{const R={x:S.clientX,y:S.clientY},M=Math.abs(R.x-b.x),E=Math.abs(R.y-b.y);!w&&(M>Tu||E>Tu)&&(w=!0,u(!0),o(t,b)),w&&(p(R),a(R))},A=S=>{const R={x:S.clientX,y:S.clientY};w?i(R):l(t),u(!1),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",A)},[t,o,a,i,l]),g=x.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l(t))},[t,l]);return v.jsxs(v.Fragment,{children:[v.jsxs(T1,{type:"button","aria-label":t.label,$isDragging:c,onMouseDown:h,onKeyDown:g,children:[v.jsx(I1,{viewBox:"0 0 100 100",role:"presentation","aria-hidden":"true",children:v.jsx(PI,{item:t})}),v.jsx(O1,{children:t.label})]}),c&&typeof document<"u"?Lr.createPortal(v.jsx(_1,{$x:f.x,$y:f.y,$visible:c,children:t.label}),document.body):null]})},NI=({item:t,isActive:o,onSelect:a})=>{const i=x.useCallback(()=>{a(t)},[t,a]),l=x.useCallback(j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),a(t))},[t,a]),c=t.defaultProps?.properties,u=c?.startMark==="HollowArrow",f=c?.endMark==="HollowArrow",p="#6c757d",h=18,g=70,m=82,b=30,w=m-h,C=b-g,A=Math.sqrt(w*w+C*C)||1,S={x:w/A,y:C/A},R={x:-S.y,y:S.x},M=16,E=7,k=M*.75,I=(j,$,F)=>{const X=j-S.x*M*F,Z=$-S.y*M*F,K=X+R.x*E,te=Z+R.y*E,Q=X-R.x*E,_=Z-R.y*E;return`M ${j} ${$} L ${K} ${te} M ${j} ${$} L ${Q} ${_}`},z=u?{x:h+S.x*k,y:g+S.y*k}:{x:h,y:g},D=f?{x:m-S.x*k,y:b-S.y*k}:{x:m,y:b};return v.jsxs(T1,{type:"button","aria-label":`${t.label} connector`,$isDragging:!1,$isClickableOnly:!0,$isActive:o,onClick:i,onKeyDown:l,children:[v.jsxs(aI,{viewBox:"0 0 100 100",role:"presentation","aria-hidden":"true",children:[v.jsx("line",{x1:z.x,y1:z.y,x2:D.x,y2:D.y,stroke:p,strokeWidth:6,strokeLinecap:"round"}),u&&v.jsx("path",{d:I(h,g,-1),stroke:p,strokeWidth:6.5,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),f&&v.jsx("path",{d:I(m,b,1),stroke:p,strokeWidth:6.5,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),v.jsx(O1,{children:t.label})]})},LI=({item:t,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=x.useState(!1),[f,p]=x.useState({x:0,y:0}),h=x.useCallback(m=>{if(m.button!==0)return;m.preventDefault();const b={x:m.clientX,y:m.clientY};u(!1),p(b);let w=!1;const C=S=>{const R={x:S.clientX,y:S.clientY},M=Math.abs(R.x-b.x),E=Math.abs(R.y-b.y);!w&&(M>Tu||E>Tu)&&(w=!0,u(!0),o(t,b)),w&&(p(R),a(R))},A=S=>{const R={x:S.clientX,y:S.clientY};w?i(R):l(t),u(!1),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",A)},[t,o,a,i,l]),g=x.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l(t))},[t,l]);return v.jsxs(v.Fragment,{children:[v.jsx(nI,{type:"button","aria-label":"Text",title:"Insert text element","data-text-tool-button":"true",$isDragging:c,onMouseDown:h,onKeyDown:g,children:v.jsx(SI,{})}),c&&typeof document<"u"?Lr.createPortal(v.jsx(_1,{$x:f.x,$y:f.y,$visible:c,children:t.label}),document.body):null]})};function Mx({canvasMode:t,isTemporarySelectMode:o,onSetMode:a,onSendToBack:i,onBringBack:l,onBringForward:c,onSendToFront:u,hasSelection:f,onUndo:p,onRedo:h,canUndo:g=!1,canRedo:m=!1,onDelete:b,onGroup:w,onUngroup:C,canGroup:A=!1,canUngroup:S=!1,onShapeDragStart:R,onShapeDragMove:M,onShapeDragEnd:E,onShapeClick:k,onConnectorToolSelect:I,activeConnectorPreset:z,position:D,onPositionChange:j,shouldAutoCenter:$,isDocked:F,onDockToolbar:X,onUndockToolbar:Z,shouldCenterOnUndock:K,onCenterOnUndockHandled:te,onDockedMouseDown:Q,onDockedTouchStart:_}){const N=x.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[])?"":"Ctrl",P=t==="drag"&&o?"select":t,[O,U]=x.useState(!1),L=x.useRef(null),[Y,q]=x.useState(!1),J=x.useRef(null),oe=x.useRef(null),le=x.useRef(null),fe=x.useRef(!$),[ge,Se]=x.useState("horizontal");x.useEffect(()=>{F&&Se("horizontal")},[F]);const{state:De,openMenu:xe,closeMenu:Te,resetMenu:Ae}=Ru(),Oe=x.useCallback(pe=>{k(pe),U(!1)},[k]),Le=x.useCallback((pe,He)=>{R(pe,He)},[R]),Pe=x.useCallback(pe=>{M(pe)},[M]),gt=x.useCallback(pe=>{E(pe),U(!1)},[E]),At=x.useCallback(pe=>{I(pe),q(!1)},[I]),zt=x.useCallback((pe,He)=>{if(F||!oe.current||!le.current)return!1;const $e=oe.current.offsetParent?.getBoundingClientRect();if(!$e)return!1;const ot=oe.current.getBoundingClientRect(),rt=pe-$e.left-le.current.offsetX,ct=He-$e.top-le.current.offsetY,ut=8;if(ct<=0)return Se("horizontal"),X(),!0;const Fe=Math.max(ut,$e.width-ot.width-ut),Ee=Math.max(ut,$e.height-ot.height-ut),We=Math.min(Math.max(ut,rt),Fe),qe=Math.min(Math.max(ut,ct),Ee);return j({x:We,y:qe}),!1},[F,X,j,Se]);x.useLayoutEffect(()=>{if(!K||F)return;if(!oe.current){te();return}const He=oe.current.offsetParent?.getBoundingClientRect();if(!He){te();return}const Ye=oe.current.getBoundingClientRect(),$e=8,ot=Math.max($e,He.width-Ye.width-$e),rt=Math.max($e,He.height-Ye.height-$e),ct=$e+Math.max(0,(He.width-Ye.width)/2),ut=Math.min(Math.max($e,ct),ot),Fe=Math.max($e,Br+5),Ee=Math.min(Fe,rt);j({x:ut,y:Ee}),Se("horizontal"),te()},[F,te,j,Se,K]);const Qe=x.useCallback(()=>{Se(pe=>pe==="horizontal"?"vertical":"horizontal"),Te()},[Te]),Re=x.useCallback(()=>{Se("horizontal"),Te(),Ae(),X()},[Te,X,Ae]),Xe=x.useCallback(()=>{Te(),Ae(),Z({shouldCenter:!0})},[Te,Z,Ae]),je=x.useMemo(()=>yI({isDocked:F,onToggleOrientation:Qe,onDock:Re,onUndock:Xe}),[Re,Qe,Xe,F]),Nt=x.useCallback(pe=>{pe.preventDefault(),pe.stopPropagation(),xe({event:pe,entries:je,dataAttributes:{"data-toolbar-menu":"true"},portalTarget:typeof document<"u"?document.body:null})},[xe,je]),Ze=x.useCallback(pe=>{if(pe.button!==0)return;if(F){Q&&Q(pe);return}if(pe.preventDefault(),!oe.current)return;const Ye=oe.current.offsetParent?.getBoundingClientRect();if(!Ye)return;le.current={offsetX:pe.clientX-Ye.left-D.x,offsetY:pe.clientY-Ye.top-D.y};const $e=rt=>{rt.preventDefault(),zt(rt.clientX,rt.clientY)&&ot()},ot=()=>{le.current=null,document.removeEventListener("mousemove",$e),document.removeEventListener("mouseup",ot)};document.addEventListener("mousemove",$e),document.addEventListener("mouseup",ot)},[zt,F,Q,D.x,D.y]),Je=x.useCallback(pe=>{if(F){_&&_(pe);return}if(!oe.current)return;const He=pe.touches[0];if(!He)return;pe.preventDefault();const $e=oe.current.offsetParent?.getBoundingClientRect();if(!$e)return;le.current={offsetX:He.clientX-$e.left-D.x,offsetY:He.clientY-$e.top-D.y};const ot=ct=>{const ut=ct.touches[0];if(!ut)return;ct.preventDefault(),zt(ut.clientX,ut.clientY)&&rt()},rt=()=>{le.current=null,document.removeEventListener("touchmove",ot),document.removeEventListener("touchend",rt),document.removeEventListener("touchcancel",rt)};document.addEventListener("touchmove",ot,{passive:!1}),document.addEventListener("touchend",rt),document.addEventListener("touchcancel",rt)},[zt,F,_,D.x,D.y]),ht=x.useCallback(()=>{if(F||!oe.current)return null;const He=oe.current.offsetParent?.getBoundingClientRect();if(!He)return null;const Ye=oe.current.getBoundingClientRect(),$e=8,ot=Math.max($e,He.width-Ye.width-$e),rt=Math.max($e,He.height-Ye.height-$e),ct=Math.min(Math.max($e,D.x),ot),ut=Math.min(Math.max($e,D.y),rt);return(ct!==D.x||ut!==D.y)&&j({x:ct,y:ut}),{clampedX:ct,clampedY:ut,padding:$e,maxX:ot,maxY:rt}},[F,j,D.x,D.y]);return x.useLayoutEffect(()=>{const pe=ht();if(!pe)return;const{padding:He,maxX:Ye,maxY:$e}=pe;if(!$||fe.current||!oe.current)return;const rt=oe.current.offsetParent?.getBoundingClientRect();if(!rt)return;const ct=oe.current.getBoundingClientRect(),ut=He+Math.max(0,(rt.width-ct.width)/2),Fe=Math.min(Math.max(He,ut),Ye),Ee=Math.min(Math.max(He,D.y),$e);(Fe!==D.x||Ee!==D.y)&&j({x:Fe,y:Ee}),fe.current=!0},[ht,j,D.x,D.y,$]),x.useEffect(()=>{if(!O)return;const pe=Ye=>{L.current&&(L.current.parentElement?.contains(Ye.target)||U(!1))},He=Ye=>{Ye.key==="Escape"&&U(!1)};return document.addEventListener("mousedown",pe),document.addEventListener("keydown",He),()=>{document.removeEventListener("mousedown",pe),document.removeEventListener("keydown",He)}},[O]),x.useEffect(()=>{if(!Y)return;const pe=Ye=>{J.current&&(J.current.parentElement?.contains(Ye.target)||q(!1))},He=Ye=>{Ye.key==="Escape"&&q(!1)};return document.addEventListener("mousedown",pe),document.addEventListener("keydown",He),()=>{document.removeEventListener("mousedown",pe),document.removeEventListener("keydown",He)}},[Y]),v.jsxs(v.Fragment,{children:[v.jsxs(KT,{ref:oe,"data-floating-toolbar":F?void 0:"true","data-floating-toolbar-docked":F?"true":void 0,$top:D.y,$left:D.x,$orientation:ge,$isDocked:F,"data-orientation":ge,onContextMenuCapture:Nt,children:[v.jsx(JT,{type:"button",onMouseDown:Ze,onTouchStart:Je,"aria-label":"Drag toolbar",$orientation:ge,children:v.jsx(eI,{"aria-hidden":"true",$orientation:ge})}),v.jsx(wx,{type:"button",$isActive:P==="select",onClick:()=>a("select"),title:"Select Mode (S) - Draw selection area","aria-pressed":P==="select","aria-label":"Select mode",children:v.jsx(wI,{})}),v.jsx(wx,{type:"button",$isActive:P==="drag",onClick:()=>a("drag"),title:"Drag Mode (D) - Move items and pan the canvas","aria-pressed":P==="drag","aria-label":"Drag mode",children:v.jsx(CI,{})}),v.jsx(tI,{"aria-hidden":"true",$orientation:ge}),v.jsx(LI,{item:Vk,onDragStart:Le,onDragMove:Pe,onDragEnd:gt,onClick:Oe}),v.jsxs(Cx,{children:[v.jsx(Sx,{ref:L,$isOpen:O,onClick:()=>U(pe=>!pe),title:"Shapes","aria-label":"Shapes","aria-haspopup":"true","aria-expanded":O,children:v.jsx(EI,{})}),O&&v.jsx(oI,{role:"menu","aria-label":"Shapes library",children:x1.map(pe=>v.jsx(Ex,{role:"presentation",children:v.jsx(zI,{item:pe,onDragStart:Le,onDragMove:Pe,onDragEnd:gt,onClick:Oe})},`${pe.type}-${pe.label}`))})]}),v.jsxs(Cx,{children:[v.jsx(Sx,{ref:J,$isOpen:Y,onClick:()=>q(pe=>!pe),title:"Connectors","aria-label":"Connectors","aria-haspopup":"true","aria-expanded":Y,children:v.jsx(MI,{})}),Y&&v.jsx(rI,{role:"menu","aria-label":"Connectors library",children:bI.map(pe=>{const He=t==="draw-connector"&&z?.label===pe.label;return v.jsx(Ex,{role:"presentation",children:v.jsx(NI,{item:pe,isActive:He,onSelect:At})},`${pe.type}-${pe.label}`)})})]}),(p||h||b)&&v.jsxs(Sh,{$orientation:ge,children:[p&&v.jsx(Ir,{onClick:p,title:`Undo (${N}+Z)`,$disabled:!g,disabled:!g,children:v.jsx(RI,{})}),h&&v.jsx(Ir,{onClick:h,title:`Redo (${N}+Shift+Z)`,$disabled:!m,disabled:!m,children:v.jsx(kI,{})}),b&&v.jsx(Ir,{onClick:b,title:"Delete (Del/Backspace)",$disabled:!f,disabled:!f,children:v.jsx(TI,{})})]}),v.jsxs(Sh,{$orientation:ge,children:[v.jsx(Ir,{onClick:u,title:`Send to Front (${N}+Shift+J)`,$disabled:!f,disabled:!f,children:v.jsx(DI,{})}),v.jsx(Ir,{onClick:c,title:`Bring Forward (${N}+J)`,$disabled:!f,disabled:!f,children:v.jsx(_I,{})}),v.jsx(Ir,{onClick:l,title:`Send Backward (${N}+K)`,$disabled:!f,disabled:!f,children:v.jsx(OI,{})}),v.jsx(Ir,{onClick:i,title:`Send to Back (${N}+Shift+K)`,$disabled:!f,disabled:!f,children:v.jsx(II,{})})]}),(w||C)&&v.jsxs(Sh,{$orientation:ge,children:[w&&v.jsx(Ir,{onClick:w,title:`Group (${N}+G)`,$disabled:!A,disabled:!A,children:v.jsx(jI,{})}),C&&v.jsx(Ir,{onClick:C,title:`Ungroup (${N}+Shift+G)`,$disabled:!S,disabled:!S,children:v.jsx(BI,{})})]})]}),v.jsx(ku,{state:De,closeMenu:Te,resetMenu:Ae})]})}const Rx="project-import-modal-title";function HI({isOpen:t,pendingImportData:o,onConfirm:a,onCancel:i}){const l=(o?.canvasState?.elements?.length??0)+(o?.canvasState?.connectors?.length??0);return v.jsxs(ls,{isOpen:t,onClose:i,ariaLabelledBy:Rx,dataAttributes:{"data-project-import-modal":"true"},closeOnOverlayClick:!1,children:[v.jsxs(as,{id:Rx,children:[dr," Project Import"]}),v.jsxs(is,{children:[v.jsxs("p",{children:["You are about to import a ",dr," project file containing"," ",v.jsx("strong",{children:l})," ",l===1?"item":"items","."]}),v.jsxs("p",{children:["Would you like to ",v.jsx("strong",{children:"clear the current canvas"})," before importing, or ",v.jsx("strong",{children:"append"})," the imported elements to the existing ones?"]}),v.jsx(Dp,{role:"note",children:"Clearing the canvas cannot be undone."})]}),v.jsxs(ss,{children:[v.jsx(go,{onClick:i,children:"Cancel"}),v.jsx(go,{$variant:"primary",onClick:()=>a(!1),title:"Keep current canvas items and append the imported ones",children:"Append to Canvas"}),v.jsx(go,{$variant:"danger",onClick:()=>a(!0),title:"Clears the current canvas before importing",children:"Clear & Import"})]})]})}const kx="page-import-modal-title";function YI({isOpen:t,pages:o,onSelect:a,onCancel:i}){const l=x.useMemo(()=>o.slice().sort((h,g)=>h.order-g.order),[o]),[c,u]=x.useState(l[0]?.id??"");x.useEffect(()=>{const h=l[0]?.id??"";u(h)},[l,t]);const f=h=>{u(h.target.value)},p=()=>{c&&a(c)};return v.jsxs(ls,{isOpen:t,onClose:i,ariaLabelledBy:kx,dataAttributes:{"data-page-import-modal":"true"},closeOnOverlayClick:!1,children:[v.jsx(as,{id:kx,children:"Select Page to Import"}),v.jsxs(is,{children:[v.jsx("p",{children:"Please choose which page from the imported project you would like to load into the current canvas."}),v.jsxs(_k,{children:[v.jsx(Dk,{htmlFor:"pagePicker-select",children:"Imported page"}),v.jsx(jk,{id:"pagePicker-select",value:c,onChange:f,children:l.map(h=>v.jsx("option",{value:h.id,children:h.name},h.id))})]})]}),v.jsxs(ss,{children:[v.jsx(go,{$variant:"primary",onClick:p,disabled:!c,children:"Import"}),v.jsx(go,{onClick:i,children:"Cancel"})]})]})}function $I({isOpen:t,pageCount:o,onConfirm:a,onCancel:i}){return v.jsxs(ls,{isOpen:t,onClose:i,closeOnOverlayClick:!1,children:[v.jsx(as,{children:"Replace Project"}),v.jsxs(is,{children:[v.jsx("p",{children:"This action cannot be undone automatically. Do you want to proceed?"}),v.jsx(Dp,{role:"note",children:"Replacing the project cannot be undone."})]}),v.jsxs(ss,{children:[v.jsx(go,{onClick:i,children:"Cancel"}),v.jsx(go,{$variant:"danger",onClick:a,children:"Replace Project"})]})]})}const Sn=18,UI=100,cl=20,XI=6,QI=4,FI=60,GI=se.div`
  position: absolute;
  ${t=>t.$orientation==="horizontal"?`
    top: 0;
    left: ${Sn}px;
    right: 0;
    height: ${Sn}px;
  `:`
    top: ${Sn}px;
    left: 0;
    bottom: 0;
    width: ${Sn}px;
  `}
  background: #f8f9fa;
  border: 1px solid #e0e0e0;
  ${t=>t.$orientation==="horizontal"?"border-width: 0 0 1px 0;":"border-width: 0 1px 0 0;"}
  overflow: hidden;
  pointer-events: none;
  z-index: 100;
  user-select: none;
`,WI=se.canvas`
  display: block;
`,qI=se.div.attrs(t=>({style:t.$orientation==="horizontal"?{left:`${t.$position}px`,top:0,width:"1px",height:"100%"}:{top:`${t.$position}px`,left:0,width:"100%",height:"1px"}}))`
  position: absolute;
  background: #3498db;
  opacity: 0.6;
  pointer-events: none;
`,VI=se.div`
  position: absolute;
  top: 0;
  left: 0;
  width: ${Sn}px;
  height: ${Sn}px;
  background: #f8f9fa;
  border-right: 1px solid #e0e0e0;
  border-bottom: 1px solid #e0e0e0;
  z-index: 101;
`,Tx=({orientation:t,zoom:o,pan:a,mousePos:i})=>{const l=x.useRef(null),c=x.useRef(null);x.useEffect(()=>{const f=l.current,p=c.current;if(!f||!p)return;const h=f.getContext("2d");if(!h)return;const g=p.getBoundingClientRect(),m=t==="horizontal"?g.width:g.height;t==="horizontal"?(f.width=m*window.devicePixelRatio,f.height=Sn*window.devicePixelRatio,f.style.width=`${m}px`,f.style.height=`${Sn}px`):(f.width=Sn*window.devicePixelRatio,f.height=m*window.devicePixelRatio,f.style.width=`${Sn}px`,f.style.height=`${m}px`),h.scale(window.devicePixelRatio,window.devicePixelRatio),h.clearRect(0,0,m,Sn),h.fillStyle="#666",h.strokeStyle="#999",h.lineWidth=1,h.font='8px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',h.textAlign="center",h.textBaseline="middle";const b=-a,w=m/o-a,C=Math.floor(b/cl)*cl,A=Math.ceil(w/cl)*cl;let S=-1/0;for(let R=C;R<=A;R+=cl){const M=(R+a)*o;if(M<0||M>m)continue;const E=R%UI===0,k=E?XI:QI;if(h.beginPath(),t==="horizontal"?(h.moveTo(M+1.5,Sn-k),h.lineTo(M+1.5,Sn)):(h.moveTo(Sn-k,M+1.5),h.lineTo(Sn,M+1.5)),h.stroke(),E&&R>=0){if(Math.abs(M-S)<FI)continue;const z=R.toString();t==="horizontal"?h.fillText(z,M+1.5,Sn/2-.5):(h.save(),h.translate(Sn/2-1.5,M+1.5),h.rotate(-Math.PI/2),h.fillText(z,0,0),h.restore()),S=M}}},[t,o,a]);const u=i!==null?i-Sn:-100;return v.jsxs(GI,{ref:c,$orientation:t,"data-ruler":t,children:[v.jsx(WI,{ref:l}),i!==null&&v.jsx(qI,{$orientation:t,$position:u})]})},ZI=()=>v.jsx(VI,{}),KI=se.div.attrs(t=>({style:t.$styleVars}))`
  position: absolute;
  left: var(--element-left, 0px);
  top: var(--element-top, 0px);
  width: var(--element-width, 0px);
  height: var(--element-height, 0px);
  min-width: 0;
  min-height: 0;
  box-sizing: border-box;
  border-radius: var(--element-border-radius, 4px);
  cursor: ${t=>t.$interactive?"pointer":"crosshair"};
  pointer-events: ${t=>t.$interactive?"auto":"none"};
  user-select: none;
  padding: var(--element-padding, 4px 8px);
  font-family: var(--element-font-family, ${yo});
  transform: translate(var(--element-translate-x, 0px), var(--element-translate-y, 0px));
  overflow: visible;
  transition: box-shadow 0.2s ease;
  display: var(--element-display, flex);
  align-items: var(--element-align-items, center);
  justify-content: var(--element-justify-content, center);
  white-space: var(--element-white-space, nowrap);
  text-align: var(--element-text-align, center);
  word-break: var(--element-word-break, normal);
  overflow-wrap: var(--element-overflow-wrap, normal);
  background: var(--element-background, white);
  border: var(--element-border, 1px solid #6c757d);
  color: var(--element-color, #2c3e50);
  font-size: var(--element-font-size, 14px);
  font-weight: var(--element-font-weight, normal);
  box-shadow: var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1));
  opacity: var(--element-opacity, 1);

  &::before {
    content: '';
    position: absolute;
    top: calc(var(--handle-hover-padding, 0px) * -1);
    right: calc(var(--handle-hover-padding, 0px) * -1);
    bottom: calc(var(--handle-hover-padding, 0px) * -1);
    left: calc(var(--handle-hover-padding, 0px) * -1);
    pointer-events: none;
    background: transparent;
  }

  &[data-element-selected='true']::before {
    pointer-events: ${t=>t.$interactive?"auto":"none"};
  }

  &[data-suppress-pointer-overlay='true']::before {
    pointer-events: none;
  }

  &[data-interactive='true']:hover {
    box-shadow: var(--element-hover-shadow, var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1)));

    /* Show resize handles on hover - target the ResizeHandles container specifically */
    > div[data-resize-container] {
      opacity: 1 !important;
    }
  }
  &[data-anchor-highlight-visible='true'] {
    box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.85), var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1));
  }
`,JI=se.div.attrs(t=>({style:{left:t.$left,top:t.$top,width:t.$width,height:t.$height}}))`
  position: absolute;
  border: 2px dashed #3498db;
  background: rgba(52, 152, 219, 0.1);
  pointer-events: none;
  z-index: 1000;
  animation: marchingAnts 1s linear infinite;

  @keyframes marchingAnts {
    0% {
      border-offset: 0;
    }
    100% {
      border-offset: 8px;
    }
  }
`,eO=se.span`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
  width: ${t=>t.$type==="checkbox"?"20px":"16px"};
  height: ${t=>t.$type==="checkbox"?"20px":"16px"};
  z-index: 3;

  & .checkbox-mark {
    font-size: var(--element-checkmark-font-size, 18px);
    font-weight: 700;
    color: #3498db;
    line-height: 1;
    transform: translateY(var(--element-checkmark-translate-y, -1px));
  }

  & .radio-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #3498db;
  }
`,B1=`
  position: absolute;
  border: 2px solid #3498db;
  background: white;
  border-radius: 4px;
  padding: 4px 8px;
  box-sizing: border-box;
  font-family: var(--inline-font-family, ${yo});
  transform: none;
  z-index: 1001;
  outline: none;
  box-shadow: 0 0 0 2px #3498db, 1px 1px 3px rgba(0,0,0,0.1);
  resize: none;
`,tO=se.input`
  ${B1}
  left: var(--inline-left, 0px);
  top: var(--inline-top, 0px);
  width: var(--inline-width, 100px);
  height: var(--inline-height, 20px);
  font-size: var(--inline-font-size, 14px);
  font-weight: var(--inline-font-weight, normal);
  color: var(--inline-color, #2c3e50);
  text-align: var(--inline-text-align, center);
  opacity: var(--inline-opacity, 1);
`,nO=se.textarea`
  ${B1}
  left: var(--inline-left, 0px);
  top: var(--inline-top, 0px);
  width: var(--inline-width, 100px);
  height: var(--inline-height, 20px);
  font-size: var(--inline-font-size, 14px);
  font-weight: var(--inline-font-weight, normal);
  color: var(--inline-color, #2c3e50);
  text-align: var(--inline-text-align, left);
  opacity: var(--inline-opacity, 1);
  vertical-align: top;
  white-space: pre-wrap;
`,mt=t=>Math.max(0,t),Ix=t=>{if(t.length===1){const o=t+t;return parseInt(o,16)}return parseInt(t,16)},oO=(t,o=.25)=>{const a=t.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!a)return t;const i=a[1],l=i.length===3?i.split("").map(Ix):[i.slice(0,2),i.slice(2,4),i.slice(4,6)].map(Ix),c=Math.max(0,Math.min(1,o));return`#${l.map(f=>{const p=Math.round(f*(1-c));return Math.max(0,Math.min(255,p)).toString(16).padStart(2,"0")}).join("")}`},rO=({type:t,fill:o,stroke:a,strokeWidth:i,width:l,height:c})=>{const u={stroke:a,strokeWidth:i,vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"},f=l>0?l:1,p=c>0?c:1,h=f/100,g=p/100,m=i/2,b=h>0?Math.min(49,mt(m/h)):0,w=g>0?Math.min(49,mt(m/g)):0,C=b,A=mt(100-b),S=w,R=mt(100-w),M=50,E=50,k={width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{overflow:"visible"}},I=mt((A-C)/2),z=mt(R-S),D=mt(Math.min(z/2,Math.max(z*.12,w))),j=mt(D),$=mt(S+D),F=mt(R-D),X=()=>v.jsxs(v.Fragment,{children:[v.jsx("path",{d:`M${C} ${$} V${F} A${I} ${j} 0 0 0 ${A} ${F} V${$} Z`,fill:o,...u}),v.jsx("ellipse",{cx:M,cy:$,rx:I,ry:j,fill:o,...u}),v.jsx("path",{d:`M${C} ${F} A${I} ${j} 0 0 0 ${A} ${F}`,fill:"none",...u})]}),Z=mt((R-S)/2),K=mt(A-C),te=mt(Math.min(K/2,Math.max(K*.12,b))),Q=mt(te),_=mt(C+te),H=mt(A-te),N=()=>v.jsxs(v.Fragment,{children:[v.jsx("path",{d:`M${_} ${S} H${H} A${Q} ${Z} 0 0 1 ${H} ${R} H${_} Z`,fill:o,...u}),v.jsx("ellipse",{cx:_,cy:E,rx:Q,ry:Z,fill:o,...u}),v.jsx("path",{d:`M${H} ${S} A${Q} ${Z} 0 0 1 ${H} ${R}`,fill:"none",...u})]});switch(t){case"oval":return v.jsx("svg",{...k,children:v.jsx("ellipse",{cx:M,cy:E,rx:mt(50-b),ry:mt(50-w),fill:o,...u})});case"rhombus":return v.jsx("svg",{...k,children:v.jsx("polygon",{points:`${M},${S} ${A},${E} ${M},${R} ${C},${E}`,fill:o,...u})});case"triangle":return v.jsx("svg",{...k,children:v.jsx("polygon",{points:`${M},${S} ${A},${R} ${C},${R}`,fill:o,...u})});case"parallelogram":return v.jsx("svg",{...k,children:v.jsx("polygon",{points:`${mt(25+b)},${S} ${A},${S} ${mt(75+b)},${R} ${C},${R}`,fill:o,...u})});case"hexagon":{const P=Math.max(0,A-C),O=Math.max(0,R-S),U=[[.35,.22],[.65,.22],[.82,.5],[.65,.78],[.35,.78],[.18,.5]],L=1.4*1.13,Y=1.15,q=U.map(([J,oe])=>{const le=.5+(J-.5)*L,fe=.5+(oe-.5)*L*Y,ge=Math.min(Math.max(le,0),1),Se=Math.min(Math.max(fe,0),1),De=mt(C+P*ge),xe=mt(S+O*Se);return`${De},${xe}`}).join(" ");return v.jsx("svg",{...k,children:v.jsx("polygon",{points:q,fill:o,...u})})}case"card":{const P=mt(Math.min(A-C,R-S)*.18),O=[`${mt(C+P)},${S}`,`${A},${S}`,`${A},${R}`,`${C},${R}`,`${C},${mt(S+P)}`].join(" ");return v.jsx("svg",{...k,children:v.jsx("polygon",{points:O,fill:o,...u})})}case"note":{const P=mt(Math.min(A-C,R-S)*.22),O=C,U=S,L=A,Y=R,q=mt(L-P),J=mt(Y-P),oe=oO(o,.06),le=[`${O},${U}`,`${L},${U}`,`${L},${J}`,`${q},${Y}`,`${O},${Y}`].join(" "),fe=[`${q},${J}`,`${q},${Y}`,`${L},${J}`].join(" ");return v.jsxs("svg",{...k,children:[v.jsx("polygon",{points:le,fill:o,...u}),v.jsx("polygon",{points:fe,fill:oe,stroke:"none"}),v.jsx("line",{x1:q,y1:Y,x2:L,y2:J,...u}),v.jsx("line",{x1:q,y1:J,x2:L,y2:J,...u}),v.jsx("line",{x1:q,y1:J,x2:q,y2:Y,...u})]})}case"actor":{const P=mt(A-C),U=mt(R-S)*.85,L=60,Y=100,q=15,J=10,oe=je=>mt(C+(je-q)/L*P),le=je=>mt(S+(je-J)/Y*U),fe=oe(45),ge=le(25),Se=mt(15/Y*U),De=mt(Se*2),xe=Se,Te=oe(45),Ae=le(40),Oe=le(80),Le=oe(15),Pe=oe(75),gt=le(55),At=oe(45),zt=le(80),Qe=oe(15),Re=oe(75),Xe=le(110);return v.jsxs("svg",{...k,children:[v.jsx("ellipse",{cx:fe,cy:ge,rx:De,ry:xe,fill:"none",...u}),v.jsx("line",{x1:Te,y1:Ae,x2:Te,y2:Oe,...u}),v.jsx("line",{x1:Le,y1:gt,x2:Pe,y2:gt,...u}),v.jsx("line",{x1:At,y1:zt,x2:Qe,y2:Xe,...u}),v.jsx("line",{x1:At,y1:zt,x2:Re,y2:Xe,...u})]})}case"cylinder":return v.jsx("svg",{...k,children:v.jsx(X,{})});case"pipe":return v.jsx("svg",{...k,children:v.jsx(N,{})});case"rectangle":default:return v.jsx("svg",{...k,children:v.jsx("rect",{x:C,y:S,width:mt(A-C),height:mt(R-S),fill:o,...u})})}},P1=new Set(["rectangle","oval","rhombus","triangle","cylinder","pipe","parallelogram","hexagon","card","note","actor"]),zp=t=>P1.has(t),wa=(t,o,a)=>{const i=t.properties?.[o];return typeof i=="number"&&Number.isFinite(i)?i:a},Oo=(t,o,a)=>{const i=t.properties?.[o];return typeof i=="string"&&i.length>0?i:a},Np=(t,o,a)=>{const i=t.properties?.[o];return typeof i=="boolean"?i:a},aO=t=>{switch(t){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}},z1=(...t)=>{const o=t.filter(a=>a&&a!=="none");return o.length>0?o.join(", "):"none"},N1=(t,o,a=40)=>{const i=Math.min(t.width??0,t.height??0);if(!Number.isFinite(i)||i<=0)return o;const l=Math.min(1,Math.max(0,(i-10)/Math.max(a,1)));return Math.max(0,1+l*(o-1))},Lp=t=>{if(!Np(t,"shadow",!1))return"none";const a=Oo(t,"shadowColour",Bo)??Bo,i=wa(t,"shadowOpacity",ei),l=wa(t,"shadowBlurRadius",fr),c=v1(a,i),u=Math.max(0,l);return`${_r}px ${Dr}px ${u}px ${c}`},iO=t=>{const o=Lp(t),a=N1(t,1.5),i=a>0?`0 0 0 ${a}px rgba(52, 152, 219, 0.85)`:"none";return z1(i,o)},sO=t=>{const o=Lp(t),a=N1(t,2),i=a>0?`0 0 0 ${a}px #74b9ff`:"none";return z1(i,o)},gn=t=>Math.max(0,t),Ox=t=>{if(!t)return!1;const o=t.trim().toLowerCase();if(o==="none"||o==="transparent")return!1;if(o.startsWith("rgba(")){const a=parseFloat(o.split(",")[3]?.replace(")","")??"1");return Number.isFinite(a)&&a>0}if(o.startsWith("hsla(")){const a=parseFloat(o.split(",")[3]?.replace(")","")??"1");return Number.isFinite(a)&&a>0}if(o.startsWith("#")&&o.length===9){const a=o.slice(7,9);return parseInt(a,16)>0}return!0},_x=(t,o,a,i,l)=>{const c=a>0?a:1,u=i>0?i:1,f=c/100,p=u/100,h=l/2,g=f>0?Math.min(49,gn(h/f)):0,m=p>0?Math.min(49,gn(h/p)):0,b=g,w=gn(100-g),C=m,A=gn(100-m),S=50,R=50,M=D=>D*f,E=D=>D*p,k=(D,j)=>t.moveTo(M(D),E(j)),I=(D,j)=>t.lineTo(M(D),E(j)),z=()=>{const D=gn(A-C),j=gn((w-b)/2),$=gn(Math.min(D/2,Math.max(D*.12,m))),F=gn(C+$),X=gn(A-$),Z=E(F),K=E(X),te=M(j),Q=E($),_=M(b),H=M(w),N=M(S);t.moveTo(_,Z),t.lineTo(_,K),t.ellipse(N,K,te,Q,0,Math.PI,0,!1),t.lineTo(H,Z),t.ellipse(N,Z,te,Q,0,0,Math.PI,!1),t.closePath()};switch(t.beginPath(),o){case"oval":t.ellipse(M(S),E(R),Math.max(0,M(50-g)),Math.max(0,E(50-m)),0,0,Math.PI*2);break;case"rhombus":k(S,C),I(w,R),I(S,A),I(b,R),t.closePath();break;case"triangle":k(S,C),I(w,A),I(b,A),t.closePath();break;case"parallelogram":{const D=gn(25+g),j=gn(75+g);k(D,C),I(w,C),I(j,A),I(b,A),t.closePath();break}case"hexagon":{const D=w-b,j=A-C,$=[[.35,.22],[.65,.22],[.82,.5],[.65,.78],[.35,.78],[.18,.5]],F=1.4*1.13,X=1.15,Z=K=>Math.min(Math.max(K,0),1);$.forEach(([K,te],Q)=>{const _=Z(.5+(K-.5)*F),H=Z(.5+(te-.5)*F*X),N=gn(b+D*_),P=gn(C+j*H);Q===0?k(N,P):I(N,P)}),t.closePath();break}case"card":{const D=gn(Math.min(w-b,A-C)*.18);k(gn(b+D),C),I(w,C),I(w,A),I(b,A),I(b,gn(C+D)),t.closePath();break}case"note":{const D=gn(Math.min(w-b,A-C)*.22),j=gn(w-D),$=gn(C+D);k(b,C),I(j,C),I(w,$),I(w,A),I(b,A),t.closePath();break}case"actor":t.rect(M(b),E(C),Math.max(0,M(w-b)),Math.max(0,E(A-C))),t.closePath();break;case"cylinder":z();break;case"pipe":t.save(),t.translate(a/2,i/2),t.rotate(Math.PI/2),t.translate(-i/2,-a/2),z(),t.restore();break;case"rectangle":default:t.rect(M(b),E(C),Math.max(0,M(w-b)),Math.max(0,E(A-C))),t.closePath();break}},lO=(t,o)=>{const{type:a,width:i,height:l,strokeWidth:c,fillColour:u,strokeColour:f,shadowColour:p,shadowBlur:h,shadowOffsetX:g,shadowOffsetY:m}=o,b=Ox(u),w=c>0&&Ox(f);if(!b&&!w)return;const C=window.devicePixelRatio||1,A=document.createElement("canvas");A.width=Math.max(1,Math.round(i*C)),A.height=Math.max(1,Math.round(l*C));const S=A.getContext("2d");if(!S)return;S.lineJoin="round",S.lineCap="round",S.scale(C,C);const R=()=>{b&&(_x(S,a,i,l,c),S.fillStyle="#000",S.fill())},M=()=>{w&&(_x(S,a,i,l,c),S.strokeStyle="#000",S.lineWidth=c,S.stroke())};R(),M();const E=h*.12,k=E*2+Math.abs(g),I=E*2+Math.abs(m),z=document.createElement("canvas");z.width=Math.max(1,Math.round(i+k*2)),z.height=Math.max(1,Math.round(l+I*2));const D=z.getContext("2d");if(!D)return;h>0&&(D.filter=`blur(${E}px)`),D.drawImage(A,k,I,i,l),D.filter="none",D.globalCompositeOperation="source-in",D.fillStyle=p,D.fillRect(0,0,z.width,z.height),D.globalCompositeOperation="source-over";const j=g-k,$=m-I;t.drawImage(z,j,$)},Go=(t,o)=>{if(t===void 0)return o;const a=Number(t);return Number.isFinite(a)?a:o},ep=t=>Number.isFinite(t)?Math.max(0,t):0,cO=t=>{if(!t)return{top:0,right:0,bottom:0,left:0};try{const o=JSON.parse(t);return{top:Number(o.top)||0,right:Number(o.right)||0,bottom:Number(o.bottom)||0,left:Number(o.left)||0}}catch{return{top:0,right:0,bottom:0,left:0}}},uO=(t,o)=>{const a=t.dataset,i=cO(a.elementCanvasPadding),l={width:o.width,height:o.height,background:a.elementCanvasBackground??"#ffffff",borderColour:a.elementCanvasBorderColour??"#6c757d",borderWidth:Go(a.elementCanvasBorderWidth,0),borderRadius:Go(a.elementCanvasBorderRadius,0),padding:i},c=Go(a.elementCanvasFontSize,14),u={text:a.elementCanvasText??"",textAlign:a.elementCanvasTextAlign??"left",textColour:a.elementCanvasTextColour??"#2c3e50",fontSize:c,fontWeight:a.elementCanvasFontWeight??"normal",fontFamily:a.elementCanvasFontFamily??yo,lineHeight:Go(a.elementCanvasLineHeight,c*1.2),isTextArea:a.elementCanvasTextarea==="true"},f=a.elementCanvasCheckIndicator,p=a.elementCanvasDropdownCaret==="true",h=(()=>{const g={};return(f==="checkbox"||f==="radio")&&(g.checkIndicator={type:f,colour:a.elementCanvasCheckColour??"#3498db",fontSize:ep(Go(a.elementCanvasCheckFontSize,Math.max(12,Math.min(o.width,o.height)*.75))),translateY:Go(a.elementCanvasCheckTranslateY,0)}),p&&(g.dropdownCaret={colour:a.elementCanvasDropdownCaretColour??u.textColour,size:ep(Go(a.elementCanvasDropdownCaretSize,Math.max(6,Math.min(u.fontSize*.6,o.height*.6)))),offset:Go(a.elementCanvasDropdownCaretOffset,8)}),Object.keys(g).length>0?g:void 0})();return{renderOptions:l,textOptions:u,decorations:h}},dO=t=>{const o=t.dataset;return{colour:o.elementCanvasShadowColour??"rgba(0,0,0,0)",offsetX:Go(o.elementCanvasShadowOffsetX,0),offsetY:Go(o.elementCanvasShadowOffsetY,0),blur:ep(Go(o.elementCanvasShadowBlur,0)),enabled:o.elementShadowCanvas==="true"&&(o.elementCanvasShadowColour??"")!=="rgba(0,0,0,0)"}},fO=(t,o,a,i)=>{const l=t.dataset;l.elementCanvas="true",l.elementCanvasBackground=o.renderOptions.background,l.elementCanvasBorderColour=o.renderOptions.borderColour,l.elementCanvasBorderWidth=String(o.renderOptions.borderWidth),l.elementCanvasBorderRadius=String(o.renderOptions.borderRadius),l.elementCanvasPadding=JSON.stringify(o.renderOptions.padding),l.elementCanvasText=o.textOptions.text,l.elementCanvasTextColour=o.textOptions.textColour,l.elementCanvasFontSize=String(o.textOptions.fontSize),l.elementCanvasFontWeight=o.textOptions.fontWeight,l.elementCanvasFontFamily=o.textOptions.fontFamily,l.elementCanvasTextAlign=o.textOptions.textAlign,l.elementCanvasLineHeight=String(o.textOptions.lineHeight),l.elementCanvasTextarea=o.textOptions.isTextArea?"true":"false",l.elementCanvasIncludeText="false";const c=o.decorations?.checkIndicator,u=i?.fallbackCheckColour,f=i?.fallbackCheckFontSize??0,p=i?.fallbackCheckTranslateY??0;c?(l.elementCanvasCheckIndicator=c.type,l.elementCanvasCheckColour=c.colour):(l.elementCanvasCheckIndicator="none",l.elementCanvasCheckColour=u),l.elementCanvasCheckFontSize=String(c?.fontSize??f),l.elementCanvasCheckTranslateY=String(c?.translateY??p);const h=o.decorations?.dropdownCaret;l.elementCanvasDropdownCaret=h?"true":"false",h?(l.elementCanvasDropdownCaretColour=h.colour,l.elementCanvasDropdownCaretSize=String(h.size),l.elementCanvasDropdownCaretOffset=String(h.offset)):(delete l.elementCanvasDropdownCaretColour,delete l.elementCanvasDropdownCaretSize,delete l.elementCanvasDropdownCaretOffset)},hO=(t,o,a)=>{const i=t.dataset;i.elementShadowCanvas="true",i.elementCanvasShadowColour=a.colour,i.elementCanvasShadowOffsetX=String(a.offsetX),i.elementCanvasShadowOffsetY=String(a.offsetY),i.elementCanvasShadowBlur=String(a.blur),i.elementCanvasBackground=o.renderOptions.background,i.elementCanvasBorderColour=o.renderOptions.borderColour,i.elementCanvasBorderWidth=String(o.renderOptions.borderWidth),i.elementCanvasBorderRadius=String(o.renderOptions.borderRadius),i.elementCanvasPadding=JSON.stringify(o.renderOptions.padding)},L1=(t,o)=>{const a=t.dataset;a.elementCanvasShadowMarginTop=String(o.top),a.elementCanvasShadowMarginRight=String(o.right),a.elementCanvasShadowMarginBottom=String(o.bottom),a.elementCanvasShadowMarginLeft=String(o.left)},H1=(t,o)=>{const a={top:0,right:0,bottom:0,left:0},i=t.dataset,{width:l,height:c,strokeWidth:u,fillColour:f,strokeColour:p,shadow:h,shapeType:g}=o;if(!h.enabled||l<=0||c<=0)return t.width=0,t.height=0,t.style.width="0px",t.style.height="0px",t.style.left="0px",t.style.top="0px",i.elementShadowCanvas="false",i.elementCanvasShadowMarginTop="0",i.elementCanvasShadowMarginRight="0",i.elementCanvasShadowMarginBottom="0",i.elementCanvasShadowMarginLeft="0",i.elementCanvasShadowColour=h.colour??"rgba(0,0,0,0)",i.elementCanvasShadowOffsetX=String(h.offsetX??0),i.elementCanvasShadowOffsetY=String(h.offsetY??0),i.elementCanvasShadowBlur="0",{margins:a,applied:!1};const m=Math.max(0,h.blur),b=Math.max(0,h.spread),w=m+b,C=w+Math.max(0,-h.offsetX),A=w+Math.max(0,h.offsetX),S=w+Math.max(0,-h.offsetY),R=w+Math.max(0,h.offsetY),M=l+C+A,E=c+S+R,k=Math.max(1,Math.min(o.devicePixelRatio??window.devicePixelRatio??1,3));t.width=Math.max(1,Math.round(M*k)),t.height=Math.max(1,Math.round(E*k)),t.style.width=`${M}px`,t.style.height=`${E}px`,t.style.left=`${-C}px`,t.style.top=`${-S}px`;const I=t.getContext("2d");return I?(I.setTransform(k,0,0,k,0,0),I.clearRect(0,0,M,E),I.translate(C,S),lO(I,{type:g,width:l,height:c,strokeWidth:u,fillColour:f,strokeColour:p,shadowColour:h.colour,shadowBlur:w,shadowOffsetX:h.offsetX,shadowOffsetY:h.offsetY}),I.setTransform(1,0,0,1,0,0),i.elementShadowCanvas="true",i.elementCanvasShadowColour=h.colour,i.elementCanvasShadowOffsetX=String(h.offsetX),i.elementCanvasShadowOffsetY=String(h.offsetY),i.elementCanvasShadowBlur=String(w),i.elementCanvasShadowMarginTop=String(S),i.elementCanvasShadowMarginRight=String(A),i.elementCanvasShadowMarginBottom=String(R),i.elementCanvasShadowMarginLeft=String(C),{margins:{top:S,right:A,bottom:R,left:C},applied:!0}):{margins:a,applied:!1}},Iu=t=>{if(!t)return null;const o=t.trim();if(!o||o==="none")return null;const a=[];let i="",l=0;for(const b of o){if(b==="("&&(l+=1),b===")"&&(l=Math.max(0,l-1)),b===","&&l===0){a.push(i.trim()),i="";continue}i+=b}i.trim()&&a.push(i.trim());const c=a[a.length-1],u=c.match(/^(.*?)(rgba?\([^)]*\)|hsla?\([^)]*\)|#[0-9a-fA-F]{3,8}|[a-zA-Z]+)\s*$/),f=c.match(/^(rgba?\([^)]*\)|hsla?\([^)]*\)|#[0-9a-fA-F]{3,8}|[a-zA-Z]+)\s+(.*)$/);let p=null,h=null;if(u&&u[2]?(h=u[1].trim(),p=u[2]):f&&f[1]&&(p=f[1],h=f[2].trim()),!p||!h)return null;const g=h.split(/\s+/).filter(Boolean);if(g.length<3)return null;const m=b=>{const w=b.replace("px",""),C=Number(w);return Number.isFinite(C)?C:0};return{offsetX:m(g[0]),offsetY:m(g[1]),blur:m(g[2]),spread:g[3]?m(g[3]):0,color:p}},mu=(t,o,a,i,l,c)=>{const u=Math.max(0,Math.min(c,Math.min(i,l)/2));t.beginPath(),t.moveTo(o+u,a),t.lineTo(o+i-u,a),t.quadraticCurveTo(o+i,a,o+i,a+u),t.lineTo(o+i,a+l-u),t.quadraticCurveTo(o+i,a+l,o+i-u,a+l),t.lineTo(o+u,a+l),t.quadraticCurveTo(o,a+l,o,a+l-u),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath()},Y1=(t,o,a,i,l,c)=>{const u=t.getContext("2d");if(!u)return;const f=Math.max(1,Math.round(o.width*l)),p=Math.max(1,Math.round(o.height*l));t.width!==f&&(t.width=f),t.height!==p&&(t.height=p),t.style.width=`${o.width}px`,t.style.height=`${o.height}px`,u.setTransform(l,0,0,l,0,0),u.clearRect(0,0,o.width,o.height);const h=o.borderWidth/2,g=Math.max(0,o.width-o.borderWidth),m=Math.max(0,o.height-o.borderWidth);if(mu(u,h,h,g,m,Math.max(0,o.borderRadius-h)),u.fillStyle=o.background,u.fill(),o.borderWidth>0&&(u.lineWidth=o.borderWidth,u.strokeStyle=o.borderColour,u.stroke()),c?.checkIndicator){const{type:w,colour:C,fontSize:A,translateY:S}=c.checkIndicator,R=Math.max(1,Math.min(o.width,o.height)),M=o.width/2,E=o.height/2;if(u.save(),u.lineCap="round",u.lineJoin="round",u.strokeStyle=C,u.fillStyle=C,w==="checkbox"){const k=Math.max(1,A??Math.max(12,R*.75));u.font=`700 ${k}px ${yo}`,u.textAlign="center",u.textBaseline="middle";const I=S??0;u.fillText("",M,E+I)}else if(w==="radio"){const I=Math.max(1,(A??R)*.3);u.beginPath(),u.arc(M,E,I,0,Math.PI*2),u.fill()}u.restore()}if(!i&&!c?.dropdownCaret)return;let b=!1;if(i){u.save(),u.shadowColor="rgba(0,0,0,0)",u.fillStyle=a.textColour,u.textBaseline="middle",u.textAlign=a.textAlign;const w=[];a.fontWeight&&a.fontWeight!=="normal"&&w.push(a.fontWeight),w.push(`${a.fontSize}px`),w.push(a.fontFamily||"sans-serif"),u.font=w.join(" ");const C=a.text.split(/\r?\n/),A=o.width-o.padding.left-o.padding.right,S=o.height-o.padding.top-o.padding.bottom,R=C.length*a.lineHeight;a.isTextArea&&R>S&&(b=!0);let M;if(a.isTextArea)M=o.padding.top+a.lineHeight/2;else{const k=Math.max(0,(S-R)/2);M=o.padding.top+k+a.lineHeight/2}let E;switch(a.textAlign){case"center":E=o.padding.left+A/2;break;case"right":E=o.width-o.padding.right;break;default:E=o.padding.left;break}for(const k of C)u.fillText(k,E,M),M+=a.lineHeight;u.restore()}if(c?.dropdownCaret){const{colour:w,size:C,offset:A}=c.dropdownCaret,S=Math.max(2,C),R=o.height/2,M=o.width-A,E=S/2;u.save(),u.beginPath(),u.moveTo(M-S,R-E),u.lineTo(M,R-E),u.lineTo(M-S/2,R+E),u.closePath(),u.fillStyle=w,u.fill(),u.restore()}if(b){const w=o.height-o.padding.top-o.padding.bottom,C=4,S=o.width-o.padding.right-C-4/2+6,R=o.padding.top,M=C/2,E=a.text.split(/\r?\n/).length*a.lineHeight,k=Math.max(.1,w/E),I=Math.max(10,w*k),z=R;u.save(),u.fillStyle="rgba(211, 216, 222, 0.85)",mu(u,S,R,C,w,M),u.fill(),u.fillStyle="rgba(108, 117, 125, 0.45)",mu(u,S,z,C,I,M),u.fill(),u.restore()}},pO=t=>{if(!t.enabled)return{top:0,right:0,bottom:0,left:0};const o=Math.max(0,t.blur);return{top:Math.max(0,o-t.offsetY),right:Math.max(0,o+t.offsetX),bottom:Math.max(0,o+t.offsetY),left:Math.max(0,o-t.offsetX)}},$1=(t,o,a,i)=>{const l=t.getContext("2d");if(!l)return{top:0,right:0,bottom:0,left:0};const c=pO(a),u=o.width+c.left+c.right,f=o.height+c.top+c.bottom,p=Math.max(1,Math.round(u*i)),h=Math.max(1,Math.round(f*i));if(t.width!==p&&(t.width=p),t.height!==h&&(t.height=h),t.style.width=`${u}px`,t.style.height=`${f}px`,l.setTransform(i,0,0,i,0,0),l.clearRect(0,0,u,f),!a.enabled)return t.dataset.elementCanvasShadowMarginTop="0",t.dataset.elementCanvasShadowMarginRight="0",t.dataset.elementCanvasShadowMarginBottom="0",t.dataset.elementCanvasShadowMarginLeft="0",c;l.save();const g=Math.max(0,a.blur*i),m=a.offsetX*i,b=a.offsetY*i;l.shadowColor=a.colour,l.shadowBlur=g,l.shadowOffsetX=m,l.shadowOffsetY=b;const w=o.borderWidth/2,C=Math.max(0,o.width-o.borderWidth),A=Math.max(0,o.height-o.borderWidth);return mu(l,c.left+w,c.top+w,C,A,Math.max(0,o.borderRadius-w)),l.fillStyle=o.background,l.fill(),l.restore(),t.dataset.elementCanvasShadowMarginTop=String(c.top),t.dataset.elementCanvasShadowMarginRight=String(c.right),t.dataset.elementCanvasShadowMarginBottom=String(c.bottom),t.dataset.elementCanvasShadowMarginLeft=String(c.left),c},nu={top:4,right:8,bottom:4,left:8},mO=18,Dx=8,gO=5,jx="#3498db",$n=5,yO=Ce.memo(({element:t,isSelected:o,dragDelta:a,onDoubleClick:i,isInteractive:l,highlightAnchors:c=!1,layerZIndex:u,layerOrder:f,handleOverlay:p,suppressHandleOverlay:h=!1})=>{const g=zp(t.type),m=t.type==="textarea",b=t.type==="text",w=t.type==="image",C=t.type==="dropdown",A=Ce.useRef(0),[S,R]=Ce.useState(!1),M=Ce.useRef(null),E=Ce.useMemo(()=>{const Re=Math.max(1,Math.min(t.width,t.height)),Xe=Math.max(12,Math.min(Re*.75,28)),je=t.type==="checkbox"?-Math.max(.5,Xe*.06):0;return{fontSize:Xe,translateY:je}},[t.width,t.height,t.type]),{fontSize:k,translateY:I}=E,z=Ce.useCallback(()=>{M.current!==null&&(window.clearTimeout(M.current),M.current=null),A.current+=1,o&&A.current===1&&R(!0)},[o]),D=Ce.useCallback(()=>{A.current!==0&&(A.current-=1,A.current<=0&&(A.current=0,M.current!==null&&window.clearTimeout(M.current),M.current=window.setTimeout(()=>{M.current=null,R(!1)},80)))},[]),{computedStyle:j,shapeAppearance:$,visualBackground:F,borderColour:X,borderRadiusValue:Z,borderWidthValue:K,textColour:te,fontSize:Q,fontWeight:_,fontFamily:H,textAlign:N,lineHeight:P,padding:O,shadowMeta:U,contentDisplay:L,contentAlignItems:Y,contentJustifyContent:q,contentWhiteSpace:J,shapeShadowFilter:oe}=Ce.useMemo(()=>{const Re=Oo(t,"backgroundColour")||Oo(t,"fillColour")||t.style?.backgroundColor||"#ffffff",Xe=Oo(t,"borderColour",t.style?.borderColor||"#6c757d")||"#6c757d",je=Math.max(0,wa(t,"borderWidth",2)),Nt=Oo(t,"textColour",t.style?.textColor)||"#2c3e50",Ze=wa(t,"fontSize",t.style?.fontSize||14),ht=(Oo(t,"fontWeight",t.style?.fontWeight)||"normal")==="bold"?"bold":"normal",pe=Oo(t,"fontFamily",t.style?.fontFamily||yo)||yo,He=t.type==="textarea"?"left":"center",Ye=Oo(t,"textAlign",t.style?.textAlign)||He,$e=Lp(t),ot=iO(t),rt=o?ot:sO(t),ct=Math.min(1,Math.max(0,wa(t,"opacity",1))),ut=t.type==="textarea"?"block":"flex",Fe=t.type==="textarea"||b?"flex-start":"center",Ee=aO(Ye),We=t.type==="textarea"||b?"pre-wrap":"nowrap",qe=o?a.x:0,_t=o?a.y:0,yn=t.type==="card",jn=t.type==="note",xo=t.type==="actor",bo=g?"flex":ut,Bn=g?xo?"flex-end":jn?"flex-start":"center":Fe,Pn=Ee,Lo=g?"pre-wrap":We,no=b||g?"break-word":"normal",Wt=b||g?"anywhere":"normal",pt=w?{top:0,right:0,bottom:0,left:0}:g?xo?{top:$n,right:$n,bottom:$n,left:$n}:jn?{top:$n+1,right:$n+1,bottom:$n+1,left:$n+3}:yn?{top:$n+1,right:$n+1,bottom:$n+1,left:$n+4}:{top:$n,right:$n,bottom:$n,left:$n}:C?{...nu,right:nu.right+mO}:nu,wt=Re,St="transparent",Ue=g?0:wa(t,"borderRadius",4),qt="0px solid transparent",vo=(Rn,Et)=>{const on=Math.max(0,(Et-1)/2);return Math.max(0,Math.min(Rn,on))},Ho={top:vo(pt.top,t.height),right:vo(pt.right,t.width),bottom:vo(pt.bottom,t.height),left:vo(pt.left,t.width)},Ao=o?Math.max(1,Math.min(gO,Math.max(0,(Math.min(t.width,t.height)-10)/2))):0,pr={"--element-left":`${t.x}px`,"--element-top":`${t.y}px`,"--element-width":`${t.width}px`,"--element-height":`${t.height}px`,"--element-translate-x":`${qe}px`,"--element-translate-y":`${_t}px`,"--element-background":St,"--element-border":qt,"--element-display":bo,"--element-align-items":Bn,"--element-justify-content":Pn,"--element-white-space":Lo,"--element-word-break":no,"--element-overflow-wrap":Wt,"--element-text-align":Ye,"--element-color":Nt,"--element-font-size":`${Ze}px`,"--element-font-weight":ht,"--element-font-family":pe,"--element-checkmark-font-size":`${k}px`,"--element-checkmark-translate-y":`${I}px`,"--handle-hover-padding":`${Ao}px`,"--element-shadow":o?ot:$e,"--element-hover-shadow":rt,"--element-opacity":ct,"--element-padding":w?"0px":`${Ho.top}px ${Ho.right}px ${Ho.bottom}px ${Ho.left}px`,"--element-border-radius":`${Ue}px`},cn=Iu($e),oo=cn?cn.blur+Math.max(cn.spread,0):0,Vn=Math.max(0,oo),Xt={baseShadow:$e,hasShadow:!!cn,shadowOffsetX:cn?.offsetX??0,shadowOffsetY:cn?.offsetY??0,shadowBlur:Vn,shadowColour:cn?.color??"rgba(0,0,0,0)"},Ft=g?{fill:Re,stroke:je>0?Xe:"transparent",strokeWidth:je}:null,zn=Ze*(m?1.4:1.2),Yt=g&&Xt.hasShadow?`drop-shadow(${Xt.shadowOffsetX}px ${Xt.shadowOffsetY}px ${Math.max(Xt.shadowBlur,0)}px ${Xt.shadowColour})`:null;return{computedStyle:pr,shapeAppearance:Ft,visualBackground:wt,borderColour:Xe,borderRadiusValue:Ue,borderWidthValue:je,textColour:Nt,fontSize:Ze,fontWeight:ht,fontFamily:pe,textAlign:Ye,lineHeight:zn,padding:pt,shadowMeta:Xt,contentDisplay:bo,contentAlignItems:Bn,contentJustifyContent:Pn,contentWhiteSpace:Lo,shapeShadowFilter:Yt,dropdownCaretPadding:C?Dx:null}},[t,o,a,g,m,k,I,w,C]),le=Ce.useRef(null),fe=Ce.useRef(null),ge=Ce.useRef(null),Se=w?typeof t.imageSrc=="string"&&t.imageSrc.length>0?t.imageSrc:typeof t.properties?.imageSrc=="string"?t.properties?.imageSrc:void 0:void 0,De=Ce.useMemo(()=>{if(!p||!o||!S)return null;const Re=!!t.properties?.constrainRatio,Xe=t.x+a.x,je=t.y+a.y,Nt=t.width,Ze=t.height,Je=10,ht=Je/2,He=[{key:"n",x:Xe+Nt/2,y:je,cursor:"n-resize",visible:!0},{key:"s",x:Xe+Nt/2,y:je+Ze,cursor:"s-resize",visible:!0},{key:"e",x:Xe+Nt,y:je+Ze/2,cursor:"e-resize",visible:!0},{key:"w",x:Xe,y:je+Ze/2,cursor:"w-resize",visible:!0},{key:"nw",x:Xe,y:je,cursor:"nw-resize",visible:!Re},{key:"ne",x:Xe+Nt,y:je,cursor:"ne-resize",visible:!Re},{key:"se",x:Xe+Nt,y:je+Ze,cursor:"se-resize",visible:!Re},{key:"sw",x:Xe,y:je+Ze,cursor:"sw-resize",visible:!Re}].filter(Ye=>Ye.visible).map(Ye=>v.jsx("div",{"data-resize-handle":Ye.key,"data-element-id":t.id,onMouseEnter:z,onMouseLeave:D,style:{position:"absolute",left:`${Ye.x-ht}px`,top:`${Ye.y-ht}px`,width:`${Je}px`,height:`${Je}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:Ye.cursor,pointerEvents:"auto"}},`${t.id}-${Ye.key}`));return!S||He.length===0?null:Lr.createPortal(He,p)},[p,o,S,t.id,t.x,t.y,t.width,t.height,t.properties,a.x,a.y,z,D]),xe=Ce.useCallback(Re=>{i(Re,t)},[i,t]),Te=Ce.useCallback(Re=>{if(Re.buttons===0){Re.stopPropagation();return}const je=Re.currentTarget.getBoundingClientRect();Re.clientX>=je.right-12&&Re.stopPropagation()},[]),Ae=Ce.useCallback(Re=>{const Xe=Re.currentTarget;Xe.scrollHeight>Xe.clientHeight&&(Xe.scrollTop+=Re.deltaY,Re.stopPropagation(),Re.preventDefault())},[]),Oe=t.type==="checkbox"||t.type==="radio",Le=Oe?Np(t,"isChecked",!1):!1,Pe=Ce.useMemo(()=>{if(!(!Oe||!Le))return{type:t.type,colour:jx,fontSize:k,translateY:I}},[Oe,Le,t.type,k,I]),gt=Ce.useMemo(()=>{if(!C)return;const Re=Math.max(6,Math.min(Q*.6,t.height*.6));return{colour:te,size:Re,offset:Math.max(Dx,nu.right)}},[C,te,Q,t.height]);Ce.useLayoutEffect(()=>{if(g)return;const Re=le.current;if(!Re)return;const Xe=window.devicePixelRatio||1,je={width:t.width,height:t.height,background:F,borderColour:X,borderWidth:K,borderRadius:Z,padding:O},Nt={text:t.text??"",textAlign:N,textColour:te,fontSize:Q,fontWeight:_,fontFamily:H,lineHeight:P,isTextArea:m},Ze=(()=>{if(!(!Pe&&!gt))return{...Pe?{checkIndicator:Pe}:{},...gt?{dropdownCaret:gt}:{}}})(),Je={renderOptions:je,textOptions:Nt,decorations:Ze};if(fO(Re,Je,!1,{fallbackCheckColour:jx,fallbackCheckFontSize:k,fallbackCheckTranslateY:I}),Y1(Re,Je.renderOptions,Je.textOptions,!1,Xe,Je.decorations),fe.current){const ht={colour:U.shadowColour,offsetX:U.shadowOffsetX,offsetY:U.shadowOffsetY,blur:U.shadowBlur,enabled:U.hasShadow};hO(fe.current,Je,ht);const pe=$1(fe.current,Je.renderOptions,ht,Xe);fe.current.style.left=`${-pe.left}px`,fe.current.style.top=`${-pe.top}px`,L1(fe.current,pe)}ge.current&&(ge.current.style.background="transparent",ge.current.style.borderColor="rgba(0,0,0,0)")},[t.width,t.height,t.text,F,X,Z,K,te,Q,_,H,N,P,O,U,g,m,Pe,k,I,gt]),Ce.useLayoutEffect(()=>{if(!g)return;const Re=fe.current;if(!Re||!$)return;if(H1(Re,{shapeType:t.type,width:t.width,height:t.height,strokeWidth:$.strokeWidth??K,fillColour:$.fill,strokeColour:$.stroke,shadow:{colour:U.shadowColour,offsetX:U.shadowOffsetX,offsetY:U.shadowOffsetY,blur:U.shadowBlur,spread:0,enabled:U.hasShadow},devicePixelRatio:window.devicePixelRatio||1}).applied){const je=Re.dataset;je.elementCanvasBackground=F,je.elementCanvasBorderColour=X,je.elementCanvasBorderWidth=String(K),je.elementCanvasBorderRadius=String(Z),je.elementCanvasPadding=JSON.stringify(O)}},[g,t.width,t.height,t.type,K,U,$,F,X,Z,O]);const At=Ce.useCallback(()=>!$||!g?null:v.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none",zIndex:0,filter:oe??void 0},children:v.jsx(rO,{type:t.type,fill:$.fill,stroke:$.stroke,strokeWidth:$.strokeWidth,width:t.width,height:t.height})}),[$,g,t,oe]);g&&(j["--element-shadow"]&&(j["--element-shadow"]=o?"0 0 0 1.5px rgba(52, 152, 219, 0.85)":"none"),j["--element-hover-shadow"]&&(j["--element-hover-shadow"]="0 0 0 2px #74b9ff")),Ce.useEffect(()=>{o?A.current>0&&(M.current!==null&&(window.clearTimeout(M.current),M.current=null),R(!0)):(A.current=0,M.current!==null&&(window.clearTimeout(M.current),M.current=null),R(!1))},[o]),Ce.useEffect(()=>()=>{M.current!==null&&window.clearTimeout(M.current)},[]);const zt=Ce.useCallback(()=>{z()},[z]),Qe=Ce.useCallback(()=>{D()},[D]);return v.jsxs(v.Fragment,{children:[v.jsxs(KI,{ref:ge,$styleVars:j,"data-element-id":t.id,"data-element-container":"true","data-element-type":t.type,"data-element-selected":o?"true":"false","data-element-left":t.x,"data-element-top":t.y,"data-element-width":t.width,"data-element-height":t.height,"data-element-z-index":u,"data-element-order":f,"data-element-base-shadow":U.baseShadow,"data-element-text-colour":te,"data-element-background":F,"data-element-border-colour":X,"data-element-stroke-width":g?$?.strokeWidth??0:void 0,"data-element-image-src":w&&Se?Se:void 0,onDoubleClick:xe,onMouseEnter:zt,onMouseLeave:Qe,$interactive:l,"data-shape":g?t.type:void 0,"data-anchor-eligible":"true","data-anchor-highlight-visible":c?"true":"false","data-interactive":l?"true":"false","data-suppress-pointer-overlay":h?"true":void 0,children:[U.hasShadow&&!g&&v.jsx("canvas",{ref:fe,"data-element-shadow-canvas":"true",style:{position:"absolute",left:0,top:0,pointerEvents:"none",zIndex:0,display:"block"}}),!g&&v.jsx("canvas",{ref:le,"data-element-canvas":"true",style:{position:"absolute",left:0,top:0,pointerEvents:"none",zIndex:1,display:"block"}}),g&&At(),w&&v.jsx("div",{"data-element-image-layer":"true",style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2},children:Se?v.jsx("img",{src:Se,alt:t.text??"Image",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",width:"100%",height:"100%",pointerEvents:"none"}}):v.jsx("span",{style:{fontSize:12,color:"#6c757d",pointerEvents:"none",display:"block",width:"100%",padding:"0 4px",textAlign:"center",whiteSpace:"normal",wordBreak:"break-word",lineHeight:1.3},children:"Double-click to add image"})}),Oe&&Le&&v.jsx(eO,{"data-indicator":t.type,$type:t.type,children:t.type==="checkbox"?v.jsx("span",{className:"checkbox-mark",children:""}):v.jsx("span",{className:"radio-dot"})}),!w&&v.jsx("div",{"data-element-text-layer":"true",style:{position:"relative",zIndex:2,width:"100%",height:"100%",display:m?"flex":L,alignItems:m?"stretch":Y,justifyContent:m?"stretch":q,pointerEvents:"none",whiteSpace:J,textAlign:N,color:te,padding:g?"0px":void 0},children:m?v.jsx("div",{"data-textarea-content":"true",style:{width:"100%",height:"100%",display:"flex",flex:"1 1 100%",boxSizing:"border-box",alignItems:Y,justifyContent:"stretch",pointerEvents:"auto",overflow:"none"},onPointerDown:Te,onWheel:Ae,children:v.jsx("div",{style:{flex:"1 1 100%",boxSizing:"border-box",minWidth:0,height:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowY:"auto",overflowX:"hidden",width:"calc(100% + 4px)",marginRight:"-6px",marginLeft:"-2px",paddingRight:"4px",scrollbarWidth:"thin"},children:t.text})}):t.text})]}),De]})},(t,o)=>t.element===o.element&&t.isSelected===o.isSelected&&t.dragDelta===o.dragDelta&&t.isInteractive===o.isInteractive&&t.highlightAnchors===o.highlightAnchors&&t.layerZIndex===o.layerZIndex&&t.layerOrder===o.layerOrder&&t.handleOverlay===o.handleOverlay&&t.suppressHandleOverlay===o.suppressHandleOverlay),xO=({element:t,editingText:o,onTextChange:a,onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u})=>{const f=t.type==="textarea",p=zp(t.type),h=f||p,g=wa(t,"fontSize",t.style?.fontSize||14),b=(Oo(t,"fontWeight",t.style?.fontWeight)||"normal")==="bold"?"bold":"normal",w=Oo(t,"textColour",t.style?.textColor)||"#2c3e50",C=Oo(t,"textAlign",t.style?.textAlign)||(f?"left":"center"),A=Oo(t,"fontFamily",t.style?.fontFamily||yo)||yo,S=Math.min(1,Math.max(0,wa(t,"opacity",1))),R={"--inline-left":`${t.x}px`,"--inline-top":`${t.y}px`,"--inline-width":`${t.width}px`,"--inline-height":`${t.height}px`,"--inline-font-size":`${g}px`,"--inline-font-weight":b,"--inline-color":w,"--inline-text-align":C,"--inline-font-family":A,"--inline-opacity":S},M=Ce.useRef(null);return Ce.useEffect(()=>{const E=M.current;if(!E)return;const k=E.value.length;try{E.setSelectionRange(k,k)}catch{}},[t.id]),h?v.jsx(nO,{style:R,value:o,ref:M,onChange:E=>a(E.target.value),onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u,autoFocus:!0,"data-inline-editor":"true",placeholder:f?"Enter to save, Shift+Enter for new line, Esc to cancel":void 0}):v.jsx(tO,{style:R,value:o,ref:M,onChange:E=>a(E.target.value),onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u,autoFocus:!0,"data-inline-editor":"true"})},bO=12,vO=10,Hp=t=>{const o=Math.max(0,t),a=Math.max(o*4,bO),i=Math.max(o*2.5,vO);return{arrowLength:a,arrowWidth:i,halfArrowWidth:i/2}},AO=t=>{const o=t.hoverPadding,{arrowLength:a,arrowWidth:i,halfArrowWidth:l}=Hp(t.lineWidth),c=o*2,u=Math.max(t.lineWidth+c,t.lineWidth+o),f=t.shadow??{enabled:!1},p=f.blur??fr,h=f.offsetX??_r,g=f.offsetY??Dr,m=f.enabled?p+Math.max(Math.abs(h),Math.abs(g)):0,b=Math.max(t.hasStartArrow?Math.max(a,l):0,t.hasEndArrow?Math.max(a,l):0),w=Math.max(t.lineWidth,u/2,m,b,o);return{arrowLength:a,arrowWidth:i,halfArrowWidth:l,hitThickness:u,dropShadowPadding:m,arrowPadding:b,containerPadding:w}};function wO(t){const o=Math.min(t.startPoint.x,t.endPoint.x),a=Math.min(t.startPoint.y,t.endPoint.y),i=Math.max(t.startPoint.x,t.endPoint.x),l=Math.max(t.startPoint.y,t.endPoint.y);let c=0;const u=t.properties;if(u&&(u.startMark==="HollowArrow"||u.endMark==="HollowArrow")){const f=typeof u.lineWidth=="number"?u.lineWidth:typeof u.strokeWidth=="number"?u.strokeWidth:2,p=Math.max(1,f),{arrowLength:h}=Hp(p);c=h+p/2}return{x:o-c,y:a-c,width:i-o+c*2,height:l-a+c*2}}function CO(t,o){const a=Math.min(o.startX,o.endX),i=Math.max(o.startX,o.endX),l=Math.min(o.startY,o.endY),c=Math.max(o.startY,o.endY),u=t.startPoint.x>=a&&t.startPoint.x<=i&&t.startPoint.y>=l&&t.startPoint.y<=c,f=t.endPoint.x>=a&&t.endPoint.x<=i&&t.endPoint.y>=l&&t.endPoint.y<=c;return u&&f}const U1=({x:t,y:o,size:a=16,colour:i="#2ecc71",endpoint:l})=>v.jsx("div",{"data-connector-magnet":"true","data-connector-magnet-endpoint":l??void 0,style:{position:"absolute",left:t,top:o,width:a,height:a,pointerEvents:"none",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("svg",{width:a,height:a,viewBox:"0 0 16 16","aria-hidden":"true",children:v.jsx("circle",{cx:8,cy:8,r:8,fill:i})})}),SO=3,tp=(t,o,a,i,l)=>{const c=t.getContext("2d");if(!c)return;const u=Math.max(1,Math.min(window.devicePixelRatio||1,SO)),f=Math.max(1,Math.round(o*u)),p=Math.max(1,Math.round(a*u));t.width!==f&&(t.width=f),t.height!==p&&(t.height=p),t.style.width=`${o}px`,t.style.height=`${a}px`,c.setTransform(u,0,0,u,0,0),c.clearRect(0,0,o,a);const h=i.endX-i.startX,g=i.endY-i.startY,m=Math.sqrt(h*h+g*g);if(m<=0||i.lineWidth<=0||i.opacity<=0)return;const b=h/m,w=g/m,C=-w,A=b,S=i.hasStartArrow?Math.min(i.lineWidth,m/2):0,R=i.hasEndArrow?Math.min(i.lineWidth,m/2):0,M=i.lineWidth/2,E=.5,k=i.hasStartArrow?0:Math.min(M+E,Math.max(0,m/2-S)),I=i.hasEndArrow?0:Math.min(M+E,Math.max(0,m/2-R)),z=S+k,D=R+I;if(m<=z+D)return;const j=i.startX+b*z,$=i.startY+w*z,F=i.endX-b*D,X=i.endY-w*D;if(c.globalAlpha=i.opacity,c.lineCap="round",c.lineJoin="round",c.lineWidth=i.lineWidth,c.strokeStyle=i.colour,i.enableShadow){const K=Math.max(0,i.shadowBlur*u),te=i.shadowOffsetX*u,Q=i.shadowOffsetY*u;c.shadowColor=i.shadowColour,c.shadowBlur=K,c.shadowOffsetX=te,c.shadowOffsetY=Q}else c.shadowColor="rgba(0,0,0,0)",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0;c.beginPath(),c.moveTo(j,$),c.lineTo(F,X);const Z=i.arrowWidth/2;if(i.hasStartArrow){const K=i.startX,te=i.startY,Q=K+b*i.arrowLength,_=te+w*i.arrowLength;c.moveTo(K,te),c.lineTo(Q+C*Z,_+A*Z),c.moveTo(K,te),c.lineTo(Q-C*Z,_-A*Z)}if(i.hasEndArrow){const K=i.endX,te=i.endY,Q=K-b*i.arrowLength,_=te-w*i.arrowLength;c.moveTo(K,te),c.lineTo(Q+C*Z,_+A*Z),c.moveTo(K,te),c.lineTo(Q-C*Z,_-A*Z)}c.stroke()},EO=5,ul=10,MO=({connector:t,isSelected:o,dragDelta:a,hasAnchorPreview:i=!1,anchorPreviewPoint:l,anchorPreviewEndpoint:c,layerZIndex:u,layerOrder:f,handleOverlay:p})=>{const[h,g]=Ce.useState(!1),m=Ce.useRef(0),[b,w]=Ce.useState(!1),C=Ce.useRef(null),A=Ce.useCallback(()=>{w(Fe=>Fe||!0)},[]),S=Ce.useCallback(()=>{w(Fe=>Fe&&!1)},[]),R=Ce.useCallback(()=>{C.current!==null&&(window.clearTimeout(C.current),C.current=null),m.current+=1,o&&m.current===1&&A()},[o,A]),M=Ce.useCallback(()=>{m.current!==0&&(m.current-=1,m.current<=0&&(m.current=0,C.current!==null&&window.clearTimeout(C.current),C.current=window.setTimeout(()=>{C.current=null,S()},80)))},[S]),E=Ce.useCallback(()=>{g(Fe=>Fe||!0),R()},[R]),k=Ce.useCallback(()=>{g(Fe=>Fe&&!1),M()},[M]),I=t.properties,z=I?.lineColour||I?.strokeColour||"#6c757d",D=I?.startMark==="HollowArrow"?"HollowArrow":"None",j=I?.endMark==="HollowArrow"?"HollowArrow":"None",$=Fe=>{if(typeof Fe=="number"&&Number.isFinite(Fe))return Fe;if(typeof Fe=="string"){const Ee=Number(Fe);if(Number.isFinite(Ee))return Ee}return null},F=$(I?.lineWidth)??$(I?.strokeWidth)??2,X=Math.max(.5,F),Z=X,K=$(I?.opacity),te=K!==null?Math.min(1,Math.max(0,K)):1,Q=I?.shadow===void 0?!!I?.dropShadow:!!I?.shadow,_=typeof I?.shadowColour=="string"?I.shadowColour:Bo,H=typeof I?.shadowOpacity=="number"?I.shadowOpacity:ei,N=Math.min(1,Math.max(0,H)),P=typeof I?.shadowBlurRadius=="number"?I.shadowBlurRadius:fr,O=Math.max(0,P),U=v1(_,N),L=AO({lineWidth:Z,hasStartArrow:D==="HollowArrow",hasEndArrow:j==="HollowArrow",hoverPadding:EO,shadow:{enabled:Q,blur:O,offsetX:_r,offsetY:Dr}}),Y=wO(t),q=X/2,{arrowLength:J,arrowWidth:oe,halfArrowWidth:le,containerPadding:fe,hitThickness:ge}=L,Se=Y.x-fe,De=Y.y-fe,xe=Math.max(Y.width,0)+fe*2,Te=Math.max(Y.height,0)+fe*2,Ae=t.endPoint.x-t.startPoint.x,Oe=t.endPoint.y-t.startPoint.y,Le=Math.sqrt(Ae*Ae+Oe*Oe)||0,Pe=Math.atan2(Oe,Ae),gt=t.startPoint.x-Se,At=t.startPoint.y-De-q,zt=t.startPoint.x-Se,Qe=t.startPoint.y-De,Re=t.endPoint.x-Se,Xe=t.endPoint.y-De,je=Z,Nt=z,Ze=a?.x??0,Je=a?.y??0,ht="grab",He=Math.max(3/2,0),Ye=i||o||h,$e=i?"rgba(46, 204, 113, 0.7)":o?"rgba(52, 152, 219, 0.65)":"rgba(116, 185, 255, 0.5)",ot=i&&l?{x:l.x-Se,y:l.y-De}:null,rt=Ce.useRef(null),ct=Ce.useRef(null),ut=Ce.useMemo(()=>{if(!p||!o||!b)return null;const Fe=a?.x??0,Ee=a?.y??0,We={x:t.startPoint.x+Fe,y:t.startPoint.y+Ee},qe={x:t.endPoint.x+Fe,y:t.endPoint.y+Ee},_t=ul/2;return Lr.createPortal([v.jsx("div",{"data-connector-handle":"start","data-connector-id":t.id,"data-anchor-x":We.x,"data-anchor-y":We.y,onMouseEnter:R,onMouseLeave:M,style:{position:"absolute",left:`${We.x-_t}px`,top:`${We.y-_t}px`,width:`${ul}px`,height:`${ul}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:"move",pointerEvents:"auto"}},`${t.id}-start`),v.jsx("div",{"data-connector-handle":"end","data-connector-id":t.id,"data-anchor-x":qe.x,"data-anchor-y":qe.y,onMouseEnter:R,onMouseLeave:M,style:{position:"absolute",left:`${qe.x-_t}px`,top:`${qe.y-_t}px`,width:`${ul}px`,height:`${ul}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:"move",pointerEvents:"auto"}},`${t.id}-end`)],p)},[t.endPoint.x,t.endPoint.y,t.id,t.startPoint.x,t.startPoint.y,M,a?.x,a?.y,p,b,R,o]);return Ce.useEffect(()=>{o?(C.current!==null&&(window.clearTimeout(C.current),C.current=null),w(!0)):(m.current=0,C.current!==null&&(window.clearTimeout(C.current),C.current=null),S(),w(!1))},[S,o]),Ce.useEffect(()=>()=>{C.current!==null&&window.clearTimeout(C.current)},[]),Ce.useLayoutEffect(()=>{[{ref:rt,enableShadow:Q},{ref:ct,enableShadow:!1}].forEach(({ref:Ee,enableShadow:We})=>{const qe=Ee.current;qe&&tp(qe,xe,Te,{startX:zt,startY:Qe,endX:Re,endY:Xe,lineWidth:je,colour:Nt,opacity:te,hasStartArrow:D==="HollowArrow",hasEndArrow:j==="HollowArrow",arrowLength:J,arrowWidth:oe,enableShadow:We&&Q,shadowOffsetX:_r,shadowOffsetY:Dr,shadowBlur:O,shadowColour:U})})},[xe,Te,Ae,Oe,j,Re,Xe,Le,te,Nt,je,D,zt,Qe,Q,Z,O,U,J,oe,le]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{position:"absolute",left:`${Se}px`,top:`${De}px`,width:`${xe}px`,height:`${Te}px`,pointerEvents:"none",overflow:"visible",transform:`translate(${Ze}px, ${Je}px)`},"data-connector-id":t.id,"data-connector-container":"true","data-connector-selected":o?"true":"false","data-connector-left":Se,"data-connector-top":De,"data-connector-width":xe,"data-connector-height":Te,"data-connector-start-x":zt,"data-connector-start-y":Qe,"data-connector-end-x":Re,"data-connector-end-y":Xe,"data-connector-opacity":te,"data-connector-base-shadow":Q?`${_r}px ${Dr}px ${O}px ${U}`:"none","data-connector-z-index":u,"data-connector-order":f,children:[v.jsx("div",{"data-connector-id":t.id,"data-connector-hit-area":"true",style:{position:"absolute",left:`${gt}px`,top:`${t.startPoint.y-De-ge/2}px`,width:`${Math.max(Le,0)}px`,height:`${ge}px`,borderRadius:`${ge/2}px`,transformOrigin:"0 50%",transform:`rotate(${Pe}rad)`,pointerEvents:"auto",cursor:ht,backgroundColor:"transparent"},onMouseEnter:E,onMouseLeave:k}),Ye&&v.jsx("div",{"data-connector-id":t.id,"data-connector-halo":"true",style:{position:"absolute",left:`${gt}px`,top:`${At}px`,width:`${Math.max(Le,0)}px`,height:`${je}px`,borderRadius:`${je/2}px`,transformOrigin:"0 50%",transform:`rotate(${Pe}rad)`,pointerEvents:"none",boxShadow:`0 0 0 ${He}px ${$e}`,opacity:te,transition:"box-shadow 0.15s ease"}}),v.jsx("div",{"data-connector-id":t.id,"data-connector-line":"true","data-connector-base-line-width":Z,"data-connector-base-colour":z,style:{position:"absolute",left:`${gt}px`,top:`${At}px`,width:`${Math.max(Le,0)}px`,height:`${je}px`,borderRadius:`${je/2}px`,transformOrigin:"0 50%",transform:`rotate(${Pe}rad)`,pointerEvents:"auto",cursor:ht,backgroundColor:"transparent"},onMouseEnter:E,onMouseLeave:k}),Q&&v.jsx("canvas",{ref:rt,"data-connector-id":t.id,"data-connector-shadow":"true","data-connector-base-line-width":Z,"data-connector-base-colour":z,"data-connector-base-shadow":`${_r}px ${Dr}px ${O}px ${U}`,"data-connector-shadow-offset-x":_r,"data-connector-shadow-offset-y":Dr,"data-connector-shadow-blur":O,"data-connector-shadow-colour":U,style:{position:"absolute",left:0,top:0,width:`${xe}px`,height:`${Te}px`,pointerEvents:"none"}}),v.jsx("canvas",{ref:ct,"data-connector-id":t.id,"data-connector-visual":"true","data-connector-base-line-width":Z,"data-connector-base-colour":z,"data-connector-base-shadow":Q?`${_r}px ${Dr}px ${O}px ${U}`:"none","data-connector-shadow-offset-x":_r,"data-connector-shadow-offset-y":Dr,"data-connector-shadow-blur":O,"data-connector-shadow-colour":U,style:{position:"absolute",left:0,top:0,width:`${xe}px`,height:`${Te}px`,pointerEvents:"none"}}),D==="HollowArrow"&&v.jsx("div",{"data-connector-arrow":"true","data-connector-arrow-endpoint":"start",style:{display:"none"}}),j==="HollowArrow"&&v.jsx("div",{"data-connector-arrow":"true","data-connector-arrow-endpoint":"end",style:{display:"none"}}),ot&&v.jsx(U1,{x:ot.x,y:ot.y,endpoint:c??void 0})]}),ut]})},Bx=(t,o)=>{const{rect:a,zoom:i,panX:l,panY:c}=t;return!a||i===0?null:{x:(o.x-a.left-Br)/i-l,y:(o.y-a.top-Br)/i-c}},RO=(t,o)=>{t.rect=o},Px=(t,o,a,i)=>{t.zoom=o,t.panX=a,t.panY=i},kO=t=>({rect:t.rect??null,zoom:t.zoom,panX:t.panX,panY:t.panY}),Mh="__rafFlushers",X1=t=>{const o=x.useRef(()=>{}),a=x.useRef(null),i=x.useRef(()=>{});x.useEffect(()=>{o.current=t},[t]);const l=x.useCallback(()=>{a.current!==null&&(cancelAnimationFrame(a.current),a.current=null)},[]),c=x.useCallback(()=>{a.current===null&&(a.current=requestAnimationFrame(()=>{a.current=null,o.current()}))},[]),u=x.useCallback(()=>{a.current!==null&&(cancelAnimationFrame(a.current),a.current=null),o.current()},[]);return x.useEffect(()=>{i.current=u},[u]),x.useEffect(()=>{if(typeof window>"u")return;const f=window,p=f.__wiremeshTestHooks??{};f.__wiremeshTestHooks||(f.__wiremeshTestHooks=p);const h=p[Mh]??new Set;p[Mh]||(p[Mh]=h);const g=()=>i.current();return h.add(g),()=>{h.delete(g)}},[]),{schedule:c,cancel:l,flush:u}},gl={x:0,y:0},Q1=({zoom:t,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:c,applyUpdates:u,onTransactionStart:f,onTransactionEnd:p,dragDescription:h="Move selection"})=>{const[g,m]=x.useState(!1),b=x.useRef(!1),[w,C]=x.useState(null),A=x.useRef(null),S=x.useRef(null),[R,M]=x.useState(gl),E=x.useRef(t);x.useEffect(()=>{E.current=t},[t]);const k=x.useRef({x:o,y:a});x.useEffect(()=>{k.current={x:o,y:a}},[o,a]),x.useEffect(()=>{A.current=w},[w]);const I=x.useRef(kO({rect:null,zoom:t,panX:o,panY:a})),z=x.useRef(null),D=x.useRef(new Map);x.useEffect(()=>{Px(I.current,E.current,k.current.x,k.current.y)},[]),x.useEffect(()=>{Px(I.current,t,o,a)},[t,o,a]);const j=x.useCallback(()=>{if(!b.current)return;const Q=z.current,_=S.current;if(!Q||!_)return;const H=Bx(I.current,_);if(!H)return;const N={x:H.x-Q.x,y:H.y-Q.y},P=[];D.current.forEach((O,U)=>{const L=c(U,O,N);L&&P.push(L)}),P.length>0&&(u(P),M(gl))},[u,c]),{schedule:$,cancel:F,flush:X}=X1(j),Z=x.useCallback(({id:Q,startPoint:_,canvasRect:H,selectedIdsOverride:N})=>{RO(I.current,H);const P=Bx(I.current,_);if(!P)return;z.current=P;const O=N&&N.length>0?N:i(),U=O.length>0?O:[Q],L=new Map;if(U.forEach(Y=>{const q=l(Y);q&&L.set(Y,q)}),!L.size){const Y=l(Q);if(!Y)return;L.set(Q,Y)}D.current=L,m(!0),b.current=!0,C(Q),A.current=Q,S.current={x:_.x,y:_.y},M(gl),F(),f?.(h)},[F,h,i,l,f]),K=x.useCallback(Q=>{S.current={x:Q.x,y:Q.y},$()},[$]),te=x.useCallback(()=>{b.current&&(X(),p?.(),m(!1),b.current=!1,C(null),A.current=null,S.current=null,z.current=null,D.current=new Map,M(gl))},[X,p]);return x.useEffect(()=>()=>F(),[F]),{isDragging:g,activeDragId:w,dragVisualDelta:R,startDragging:Z,updateDragPosition:K,endDragging:te,cancelPendingFrame:F}},zx=gl,TO=({zoom:t,panX:o,panY:a,getSelectedElementIds:i,getElementInitialPosition:l,onElementsMoveTo:c,onTransactionStart:u,onTransactionEnd:f})=>{const{isDragging:p,activeDragId:h,dragVisualDelta:g,startDragging:m,updateDragPosition:b,endDragging:w,cancelPendingFrame:C}=Q1({zoom:t,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:(A,S,R)=>({id:A,x:Math.round(S.x+R.x),y:Math.round(S.y+R.y)}),applyUpdates:c,onTransactionStart:u,onTransactionEnd:f,dragDescription:"Move selection"});return{isDragging:p,dragElementId:h,dragVisualDelta:g,startDragging:(A,S,R,M)=>m({id:A,startPoint:S,canvasRect:R,selectedIdsOverride:M}),updateDragPosition:b,endDragging:w,cancelDragAnimationFrame:C}},IO=({zoom:t,panX:o,panY:a,getSelectedConnectorIds:i,getConnectorInitialEndpoints:l,onConnectorsMoveTo:c,onTransactionStart:u,onTransactionEnd:f})=>{const{isDragging:p,activeDragId:h,dragVisualDelta:g,startDragging:m,updateDragPosition:b,endDragging:w,cancelPendingFrame:C}=Q1({zoom:t,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:(A,S,R)=>({id:A,startPoint:{x:Math.round(S.startPoint.x+R.x),y:Math.round(S.startPoint.y+R.y)},endPoint:{x:Math.round(S.endPoint.x+R.x),y:Math.round(S.endPoint.y+R.y)}}),applyUpdates:c,onTransactionStart:u,onTransactionEnd:f,dragDescription:"Move selection"});return{isDraggingConnector:p,dragConnectorId:h,dragConnectorVisualDelta:g,startDraggingConnector:(A,S,R,M)=>m({id:A,startPoint:S,canvasRect:R,selectedIdsOverride:M}),updateConnectorDragPosition:b,endDraggingConnector:w,cancelConnectorDragAnimationFrame:C}},OO=({zoom:t,panX:o,panY:a,onPanChange:i,onTransactionStart:l,onTransactionEnd:c})=>{const[u,f]=x.useState(!1),p=x.useRef(null),h=x.useRef(null),g=x.useCallback(()=>{if(!u)return;const R=p.current,M=h.current;if(!R||!M)return;const E=(R.x-M.x)/t,k=(R.y-M.y)/t;i(M.panX+E,M.panY+k)},[u,t,i]),{schedule:m,cancel:b,flush:w}=X1(g),C=x.useCallback(R=>{f(!0),h.current={x:R.x,y:R.y,panX:o,panY:a},p.current=R,l?.("Pan canvas")},[o,a,l]),A=x.useCallback(R=>{p.current=R,m()},[m]),S=x.useCallback(()=>{if(u){if(w(),p.current&&h.current){const R=(p.current.x-h.current.x)/t,M=(p.current.y-h.current.y)/t;i(h.current.panX+R,h.current.panY+M)}c?.(),f(!1),p.current=null,h.current=null}},[u,t,i,c,w]);return{isPanning:u,startPanning:C,updatePanPosition:A,endPanning:S,cancelPanAnimationFrame:b}},Nx=(t,o)=>Math.hypot(t.clientX-o.clientX,t.clientY-o.clientY),_O=({zoom:t,panX:o,panY:a,onZoomChange:i,onZoomAtPoint:l,canvasRef:c,rulerSize:u})=>{const f=x.useRef(t),p=x.useRef(1),h=x.useRef(!1),g=x.useRef(null),m=x.useRef(null),b=x.useRef(null),w=x.useRef(null),C=x.useRef(0),A=x.useRef(null);x.useEffect(()=>{f.current=t,h.current||(p.current=t)},[t]);const S=x.useCallback(k=>{if(k.touches.length===2){k.preventDefault();const I=Nx(k.touches[0],k.touches[1]),z=(k.touches[0].clientX+k.touches[1].clientX)/2,D=(k.touches[0].clientY+k.touches[1].clientY)/2;g.current={initialDistance:I,initialZoom:f.current||1,initialMidpoint:{x:z,y:D}}}},[]),R=x.useCallback(k=>{const I=g.current;if(!I)return;if(k.touches.length<2){g.current=null,b.current=null,w.current=null,C.current=0,A.current=null,m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),h.current=!1;return}k.preventDefault();const z=Nx(k.touches[0],k.touches[1]);if(z<=0)return;const D=z/I.initialDistance,j=I.initialZoom*D,$=j-(f.current||1),F=Date.now(),X=A.current?(F-A.current)/1e3:0;A.current=F;let Z=0;X>0&&(Z=$/X);const K=.4;C.current=K*Z+(1-K)*C.current;const te=1+Math.abs(C.current)*.5,H=(Math.min(Math.max(j,.1),3)-(f.current||1))*te,N=Math.min(Math.max((f.current||1)+H,.1),3),P=(k.touches[0].clientX+k.touches[1].clientX)/2,O=(k.touches[0].clientY+k.touches[1].clientY)/2;if(c.current){const U=c.current.querySelector('[data-canvas-content="true"]');if(U)if(h.current=!0,l&&c.current){const L=c.current.getBoundingClientRect(),Y=f.current||1,q=P-L.left-u,J=O-L.top-u,oe=q*(1/N-1/Y)+o,le=J*(1/N-1/Y)+a;U.style.transform=`scale(${N}) translate(${oe}px, ${le}px)`,U.style.willChange="transform",m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{l(N,P,O,L)})}else U.style.transform=`scale(${N}) translate(${o}px, ${a}px)`,U.style.willChange="transform",m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{i(N)})}},[i,l,o,a,c,u]),M=x.useCallback(k=>{if(k.touches.length<2&&(g.current=null,h.current=!1,b.current=null,w.current=null,C.current=0,A.current=null,m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),c.current)){const I=c.current.querySelector('[data-canvas-content="true"]');I&&(I.style.willChange="auto")}},[c]),E=x.useCallback(k=>{if(!k.ctrlKey)return;k.preventDefault();const I=f.current||1,z=Math.exp(-k.deltaY/400),D=Math.min(Math.max(I*z,.1),3);if(l&&c.current){const j=c.current.getBoundingClientRect();l(D,k.clientX,k.clientY,j)}else i(D)},[i,l,c]);return{handleTouchStart:S,handleTouchMove:R,handleTouchEnd:M,handleWheelNative:E,isZoomingRef:h}},DO=({isSelecting:t,selectionArea:o,onSelectionStart:a,onSelectionChange:i,onSelectionComplete:l})=>({startSelection:(p,h)=>{a(!0),i({startX:p,startY:h,endX:p,endY:h})},updateSelection:(p,h)=>{t&&o&&i({...o,endX:p,endY:h})},completeSelection:()=>{t&&o&&l(o)}}),jO=({canvasMode:t,onElementTextEdit:o,onElementPropertyChange:a,onElementImageChange:i})=>{const[l,c]=x.useState(null),[u,f]=x.useState(""),p=x.useRef({elementId:null,originalText:"",lastText:""}),h=x.useCallback(()=>{p.current={elementId:null,originalText:"",lastText:""},c(null),f("")},[]),g=x.useCallback(()=>{const{elementId:E,lastText:k,originalText:I}=p.current;E&&(k!==I&&o(E,k),h())},[o,h]),m=x.useCallback(()=>{if(!p.current.elementId){h();return}h()},[h]),b=x.useCallback(E=>{const k=E.text??"";p.current={elementId:E.id,originalText:k,lastText:k},c(E.id),f(k)},[]),w=x.useCallback(E=>{const k=typeof E=="function"?E(p.current.lastText):E;p.current.lastText=k,f(k)},[]),C=x.useCallback((E,k)=>{if(t!=="drag")return;if(k.type==="checkbox"||k.type==="radio"){const j=Np(k,"isChecked",!1);a?.(k.id,"isChecked",!j),E.preventDefault(),E.stopPropagation();return}if(k.type==="image"){const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=()=>{const $=j.files?.[0];if(!$)return;const F=new FileReader;F.onload=()=>{const X=F.result;typeof X=="string"&&i?.(k.id,X)},F.readAsDataURL($)},j.click(),E.preventDefault(),E.stopPropagation();return}if(!["text","button","input","textarea","dropdown",...Array.from(P1)].includes(k.type))return;const D=p.current.elementId;if(D&&D!==k.id&&g(),p.current.elementId===k.id){E.preventDefault(),E.stopPropagation();return}b(k),E.preventDefault(),E.stopPropagation()},[t,g,i,a,b]),A=x.useCallback((E,k)=>{if(E.key==="Enter"){const I=p.current.elementId,z=I?k.find(j=>j.id===I):null;if((z?z.type==="textarea"||zp(z.type):!1)&&E.shiftKey)return;g(),E.preventDefault()}else E.key==="Escape"&&(m(),E.preventDefault())},[m,g]),S=x.useCallback(()=>{queueMicrotask(()=>{g()})},[g]),R=x.useCallback(E=>{E.stopPropagation()},[]),M=x.useCallback(E=>{E.stopPropagation()},[]);return x.useEffect(()=>{if(l){const E=I=>{const z=I.target;!z.closest("input")&&!z.closest("textarea")&&g()},k=setTimeout(()=>{document.addEventListener("mousedown",E)},100);return()=>{clearTimeout(k),document.removeEventListener("mousedown",E)}}},[g,l]),{editingElementId:l,editingText:u,setEditingText:w,handleElementDoubleClick:C,handleTextInputKeyDown:A,handleTextInputBlur:S,handleInputMouseDown:R,handleInputClick:M}},BO=({canvasMode:t,isDragging:o,onTemporarySelectModeChange:a})=>{const[i,l]=x.useState(!1),c=x.useRef(a),u=x.useRef(t),f=x.useRef(o);return x.useEffect(()=>{c.current=a},[a]),x.useEffect(()=>{u.current=t},[t]),x.useEffect(()=>{f.current=o},[o]),x.useEffect(()=>{const p=m=>{m.key==="Shift"&&u.current==="drag"&&!f.current&&l(b=>b||(c.current?.(!0),!0))},h=m=>{m.key==="Shift"&&l(b=>b&&(c.current?.(!1),!1))},g=()=>{l(m=>m&&(c.current?.(!1),!1))};return document.addEventListener("keydown",p),document.addEventListener("keyup",h),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",h),window.removeEventListener("blur",g)}},[]),x.useEffect(()=>{t!=="drag"&&i&&(l(!1),c.current?.(!1))},[t,i]),{temporarySelectMode:i}},PO=({canvasMode:t,onConnectorCreate:o,onFinishDrawing:a})=>{const[i,l]=x.useState({isDrawing:!1,startPoint:null,currentPoint:null}),c=x.useCallback(h=>{l({isDrawing:!0,startPoint:h,currentPoint:h})},[]),u=x.useCallback(h=>{l(g=>!g.isDrawing||!g.startPoint?g:{...g,currentPoint:h})},[]),f=x.useCallback((h,g)=>{i.startPoint&&o(i.startPoint,h,g),l({isDrawing:!1,startPoint:null,currentPoint:null}),a?.()},[i.startPoint,o,a]),p=x.useCallback(()=>{l({isDrawing:!1,startPoint:null,currentPoint:null})},[]);return x.useEffect(()=>{t!=="draw-connector"&&l(h=>!h.isDrawing&&!h.startPoint&&!h.currentPoint?h:{isDrawing:!1,startPoint:null,currentPoint:null})},[t]),x.useEffect(()=>{if(t!=="draw-connector")return;const h=g=>{g.key==="Escape"&&p()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[t,p]),{isDrawing:i.isDrawing,startPoint:i.startPoint,currentPoint:i.currentPoint,startDrawing:c,updateDrawing:u,finishDrawing:f,cancelDrawing:p}},Wu=10,zO=.2,_o=1e-6,Lx=12/100,Hx=t=>Math.round(t),we=t=>({x:Hx(t.x),y:Hx(t.y)}),Wn=t=>Math.min(1,Math.max(0,t)),ar=(t,o)=>Math.hypot(t.x-o.x,t.y-o.y),Ou=(t,o,a)=>Math.max(o,Math.min(a,t)),F1=(t,o)=>{const a=Math.max(t.width,0),i=Math.max(t.height,0);if(o==="cylinder"){const g=Math.max(a/2,_o),m=Math.min(i/2,Math.max(i*Lx,_o)),b=Math.max(m,_o),w=t.x+g,C=t.y+m,A=t.y+i-m;return{shapeType:o,orientation:"vertical",centerX:w,rx:g,ry:b,topCenterY:C,bottomCenterY:A,leftX:t.x,rightX:t.x+a,bodyTop:C,bodyBottom:A}}const l=Math.max(i/2,_o),c=Math.min(a/2,Math.max(a*Lx,_o)),u=Math.max(c,_o),f=t.y+l,p=t.x+c,h=t.x+a-c;return{shapeType:o,orientation:"horizontal",centerY:f,rx:u,ry:l,leftCenterX:p,rightCenterX:h,topY:t.y,bottomY:t.y+i,bodyLeft:Math.min(p,h),bodyRight:Math.max(p,h)}},yl=(t,o,a,i)=>{const l=t.x-o.x,c=t.y-o.y;if(Math.abs(l)<_o&&Math.abs(c)<_o)return{x:o.x,y:o.y-i};const u=Math.sqrt(l*l/(a*a)+c*c/(i*i));if(!Number.isFinite(u)||u===0)return{x:o.x,y:o.y};const f=1/u;return we({x:o.x+l*f,y:o.y+c*f})},xl=(t,o,a,i)=>{const l=(t.x-o.x)/a,c=(t.y-o.y)/i;return Math.atan2(c,l)},Yp=t=>{const{type:o,x:a,y:i,width:l,height:c}=t,u=a,f=i,p=a+l,h=i+c,g=b=>u+l*b,m=b=>f+c*b;switch(o){case"rectangle":return[we({x:u,y:f}),we({x:p,y:f}),we({x:p,y:h}),we({x:u,y:h})];case"triangle":return[we({x:g(.5),y:f}),we({x:p,y:h}),we({x:u,y:h})];case"rhombus":return[we({x:g(.5),y:f}),we({x:p,y:m(.5)}),we({x:g(.5),y:h}),we({x:u,y:m(.5)})];case"parallelogram":return[we({x:g(.25),y:f}),we({x:p,y:f}),we({x:g(.75),y:h}),we({x:u,y:h})];case"hexagon":return[we({x:g(.25),y:f}),we({x:g(.75),y:f}),we({x:p,y:m(.5)}),we({x:g(.75),y:h}),we({x:g(.25),y:h}),we({x:u,y:m(.5)})];case"card":{const b=Math.min(l,c)*.18;return[we({x:u+b,y:f}),we({x:p,y:f}),we({x:p,y:h}),we({x:u,y:h}),we({x:u,y:f+b})]}case"note":{const b=Math.min(l,c)*.22;return[we({x:u,y:f}),we({x:p-b,y:f}),we({x:p,y:f+b}),we({x:p,y:h}),we({x:u,y:h})]}case"actor":return null;default:return null}},Ui=(t,o,a)=>{const i=a.x-o.x,l=a.y-o.y,c=i*i+l*l;if(c===0)return{closestPoint:o,t:0};const u=t.x-o.x,f=t.y-o.y,p=Ou((u*i+f*l)/c,0,1);return{closestPoint:{x:o.x+i*p,y:o.y+l*p},t:p}},G1=(t,o)=>{const a=t.x,i=t.y,l=t.width,c=t.height;switch(o.edge){case"left":return we({x:a,y:i+Wn(o.ratio)*c});case"right":return we({x:a+l,y:i+Wn(o.ratio)*c});case"top":return we({x:a+Wn(o.ratio)*l,y:i});case"bottom":default:return we({x:a+Wn(o.ratio)*l,y:i+c})}},W1=(t,o)=>{const a=t.x+t.width/2,i=t.y+t.height/2,l=t.width/2,c=t.height/2;return we({x:a+l*Math.cos(o),y:i+c*Math.sin(o)})},NO=(t,o)=>{const a=t.height*.85,i=60,l=100,c=15,u=10,f=D=>t.x+(D-c)/i*t.width,p=D=>t.y+(D-u)/l*a,h=15/l*a,g=h,m=h,b=f(45),w=p(25),C=f(45),A=p(40),S=p(80),R=f(15),M=f(75),E=p(55),k=f(15),I=f(75),z=p(110);switch(o.segment){case"head":{const D=o.angle??0;return we({x:b+g*Math.cos(D),y:w+m*Math.sin(D)})}case"body":{const D=Wn(o.ratio??.5);return we({x:C,y:A+(S-A)*D})}case"leftArm":{const D=Wn(o.ratio??.5);return we({x:C+(R-C)*D,y:E})}case"rightArm":{const D=Wn(o.ratio??.5);return we({x:C+(M-C)*D,y:E})}case"leftLeg":{const D=Wn(o.ratio??.5);return we({x:C+(k-C)*D,y:S+(z-S)*D})}case"rightLeg":{const D=Wn(o.ratio??.5);return we({x:C+(I-C)*D,y:S+(z-S)*D})}}},LO=(t,o)=>{const a=F1(t,o.shapeType);if(a.orientation==="vertical"){const f=Math.max(a.bodyBottom-a.bodyTop,0),p=Math.max(f,_o),h=Wn(o.ratio??.5),g=a.bodyTop+p*h;switch(o.segment){case"left":return we({x:a.leftX,y:g});case"right":return we({x:a.rightX,y:g});case"bottom":{const m=o.angle??Math.PI/2,b={x:a.centerX,y:a.bottomCenterY};return we({x:b.x+a.rx*Math.cos(m),y:b.y+a.ry*Math.sin(m)})}case"top":default:{const m=o.angle??-Math.PI/2,b={x:a.centerX,y:a.topCenterY};return we({x:b.x+a.rx*Math.cos(m),y:b.y+a.ry*Math.sin(m)})}}}const i=Math.max(a.bodyRight-a.bodyLeft,0),l=Math.max(i,_o),c=Wn(o.ratio??.5),u=a.bodyLeft+l*c;switch(o.segment){case"top":return we({x:u,y:a.topY});case"bottom":return we({x:u,y:a.bottomY});case"right":{const f=o.angle??0,p={x:a.rightCenterX,y:a.centerY};return we({x:p.x+a.rx*Math.cos(f),y:p.y+a.ry*Math.sin(f)})}case"left":default:{const f=o.angle??Math.PI,p={x:a.leftCenterX,y:a.centerY};return we({x:p.x+a.rx*Math.cos(f),y:p.y+a.ry*Math.sin(f)})}}},Yx=(t,o)=>{const{anchor:a}=o;if(a.kind==="rect")return G1(t,a);if(a.kind==="capsule")return LO(t,a);if(a.kind==="actor")return NO(t,a);if(a.kind==="polygon"){const i=Yp(t);if(!i||i.length<2)return{x:t.x,y:t.y};const l=a.segmentIndex%i.length,c=i[l],u=i[(l+1)%i.length],f=Ou(a.t,0,1);return we({x:c.x+(u.x-c.x)*f,y:c.y+(u.y-c.y)*f})}return W1(t,a.angle)},Kt=(t,o)=>{if(t.length===0)return t;const a=new Map(o.map(c=>[c.id,c]));let i=!1;const l=t.map(c=>{let u=we(c.startPoint),f=we(c.endPoint),p=c.startAttachment??null,h=c.endAttachment??null;if(p){const g=a.get(p.elementId);if(g){const m=Yx(g,p);(m.x!==u.x||m.y!==u.y)&&(u=we(m),i=!0)}else p=null,i=!0}if(h){const g=a.get(h.elementId);if(g){const m=Yx(g,h);(m.x!==f.x||m.y!==f.y)&&(f=we(m),i=!0)}else h=null,i=!0}return u===c.startPoint&&f===c.endPoint&&p===c.startAttachment&&h===c.endAttachment?c:{...c,startPoint:u,endPoint:f,startAttachment:p,endAttachment:h}});return i?l:t},HO=(t,o,a)=>{const i=t.x,l=t.y,c=t.width,u=t.height;if(c<=0||u<=0)return null;const f=i+c,p=l+u,h=o.x>=i-a&&o.x<=f+a,g=o.y>=l-a&&o.y<=p+a;if(!h||!g)return null;const b=[{edge:"left",value:Math.abs(o.x-i),ratio:Wn((o.y-l)/u)},{edge:"right",value:Math.abs(o.x-f),ratio:Wn((o.y-l)/u)},{edge:"top",value:Math.abs(o.y-l),ratio:Wn((o.x-i)/c)},{edge:"bottom",value:Math.abs(o.y-p),ratio:Wn((o.x-i)/c)}].reduce((C,A)=>A.value<C.value?A:C);if(b.value>a)return null;const w=G1(t,{edge:b.edge,ratio:b.ratio});return{attachment:{elementId:t.id,anchor:{kind:"rect",edge:b.edge,ratio:b.ratio}},position:w,distance:ar(w,o)}},YO=(t,o,a)=>{const i=t.x+t.width/2,l=t.y+t.height/2,c=t.width/2,u=t.height/2;if(c===0||u===0)return null;const f=o.x-i,p=o.y-l,h=f*f/(c*c)+p*p/(u*u);if(Math.abs(h-1)>zO&&h<1)return null;const g=Math.atan2(p/u,f/c),m=W1(t,g),b=ar(m,o);return b>a?null:{attachment:{elementId:t.id,anchor:{kind:"oval",angle:g}},position:m,distance:b}},$O=(t,o,a)=>{const i=Yp(t);if(!i||i.length<2)return null;let l=Number.POSITIVE_INFINITY,c=null,u=-1,f=0;for(let h=0;h<i.length;h+=1){const g=i[h],m=i[(h+1)%i.length],{closestPoint:b,t:w}=Ui(o,g,m),C=ar(b,o);C<l&&(l=C,c=b,u=h,f=w)}if(!c||l>a)return null;const p={kind:"polygon",shapeType:t.type,segmentIndex:u,t:f};return{attachment:{elementId:t.id,anchor:p},position:c,distance:l}},$x=(t,o,a,i)=>{if(t.width<=0||t.height<=0)return null;const l=F1(t,i),c=[],u=(f,p)=>{const h=ar(o,p);h<=a&&c.push({attachment:{elementId:t.id,anchor:f},position:p,distance:h})};if(l.orientation==="vertical"){const f=Math.max(l.bodyBottom-l.bodyTop,0);if(f>=0){const C=Math.max(f,_o),A=Ou(o.y,l.bodyTop,l.bodyBottom),S=(A-l.bodyTop)/C;u({kind:"capsule",shapeType:i,segment:"left",ratio:S},{x:l.leftX,y:A}),u({kind:"capsule",shapeType:i,segment:"right",ratio:S},{x:l.rightX,y:A})}const p={x:l.centerX,y:l.topCenterY},h=yl(o,p,l.rx,l.ry),g=xl(h,p,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"top",angle:g},h);const m={x:l.centerX,y:l.bottomCenterY},b=yl(o,m,l.rx,l.ry),w=xl(b,m,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"bottom",angle:w},b)}else{const f=Math.max(l.bodyRight-l.bodyLeft,0);if(f>=0){const C=Math.max(f,_o),A=Ou(o.x,l.bodyLeft,l.bodyRight),S=(A-l.bodyLeft)/C;u({kind:"capsule",shapeType:i,segment:"top",ratio:S},{x:A,y:l.topY}),u({kind:"capsule",shapeType:i,segment:"bottom",ratio:S},{x:A,y:l.bottomY})}const p={x:l.leftCenterX,y:l.centerY},h=yl(o,p,l.rx,l.ry),g=xl(h,p,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"left",angle:g},h);const m={x:l.rightCenterX,y:l.centerY},b=yl(o,m,l.rx,l.ry),w=xl(b,m,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"right",angle:w},b)}return c.length===0?null:c.reduce((f,p)=>p.distance<f.distance?p:f)},UO=(t,o,a)=>{if(t.width<=0||t.height<=0)return null;const i=t.height*.85,l=60,c=100,u=15,f=10,p=Y=>t.x+(Y-u)/l*t.width,h=Y=>t.y+(Y-f)/c*i,g=15/c*i,m=g,b=g,w=p(45),C=h(25),A=p(45),S=h(40),R=h(80),M=p(15),E=p(75),k=h(55),I=p(15),z=p(75),D=h(110),j=[],$={x:w,y:C},F=yl(o,$,m,b),X=xl(F,$,m,b),Z=ar(o,F);Z<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"head",angle:X}},position:F,distance:Z});const K=Ui(o,{x:A,y:S},{x:A,y:R}),te=ar(o,K.closestPoint);te<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"body",ratio:K.t}},position:K.closestPoint,distance:te});const Q=Ui(o,{x:A,y:k},{x:M,y:k}),_=ar(o,Q.closestPoint);_<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"leftArm",ratio:Q.t}},position:Q.closestPoint,distance:_});const H=Ui(o,{x:A,y:k},{x:E,y:k}),N=ar(o,H.closestPoint);N<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"rightArm",ratio:H.t}},position:H.closestPoint,distance:N});const P=Ui(o,{x:A,y:R},{x:I,y:D}),O=ar(o,P.closestPoint);O<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"leftLeg",ratio:P.t}},position:P.closestPoint,distance:O});const U=Ui(o,{x:A,y:R},{x:z,y:D}),L=ar(o,U.closestPoint);return L<=a&&j.push({attachment:{elementId:t.id,anchor:{kind:"actor",segment:"rightLeg",ratio:U.t}},position:U.closestPoint,distance:L}),j.length===0?null:j.reduce((Y,q)=>q.distance<Y.distance?q:Y)},qu=(t,o,a=Wu)=>{let i=null;for(let l=t.length-1;l>=0;l-=1){const c=t[l];let u=null;c.type==="actor"?u=UO(c,o,a):c.type==="cylinder"?u=$x(c,o,a,"cylinder"):c.type==="pipe"?u=$x(c,o,a,"pipe"):c.type==="oval"?u=YO(c,o,a):Yp(c)?u=$O(c,o,a):u=HO(c,o,a),u&&(!i||u.distance<i.distance)&&(i={...u,elementId:c.id})}return i};if(typeof window<"u"){const t=window[Tl]=window[Tl]??{};t.probeAnchor||(t.probeAnchor=(o,a,i)=>qu([o],a,i??Wu))}const XO=({elements:t,isDrawingConnector:o})=>{const a=x.useRef(null),[i,l]=x.useState(null),c=x.useRef({point:null,endpoint:null}),[u,f]=x.useState({point:null,endpoint:null}),p=x.useRef(null);x.useEffect(()=>{a.current=i},[i]);const h=x.useCallback(w=>{a.current!==w&&(a.current=w,l(w))},[]),g=x.useCallback((w,C)=>{if(!C)return;const A=c.current;if(A.endpoint===w&&A.point&&A.point.x===C.x&&A.point.y===C.y)return;const S={point:C,endpoint:w};c.current=S,f(S)},[]),m=x.useCallback(()=>{const w=c.current;!w.point&&!w.endpoint||(c.current={point:null,endpoint:null},f({point:null,endpoint:null}))},[]),b=x.useCallback(w=>{const C=qu(t,w);if(C){const S={point:C.position,attachment:C.attachment,elementId:C.elementId};return p.current=S,S}const A=p.current;if(A){const S=w.x-A.point.x,R=w.y-A.point.y;if(Math.hypot(S,R)<=Wu*.5)return A}return p.current=null,{point:w,attachment:null,elementId:null}},[t]);return x.useEffect(()=>{o||(p.current=null,c.current={point:null,endpoint:null},f({point:null,endpoint:null}))},[o]),{highlightElementId:i,drawingAnchorPreview:u,updateHighlightElement:h,applyDrawingPreview:g,clearDrawingPreview:m,computeAnchoredPoint:b}},QO=(t,o,a,i,l)=>t?{canvasRect:t,zoom:o,panX:a,panY:i,rulerSize:l}:null,FO=(t,o)=>{const{canvasRect:a,zoom:i,panX:l,panY:c,rulerSize:u}=t;return{x:(o.clientX-a.left-u)/i-l,y:(o.clientY-a.top-u)/i-c}},GO=(t,o)=>{const{canvasRect:a}=t;return{x:o.clientX-a.left,y:o.clientY-a.top}},WO=(t,o)=>{const a=Math.hypot(o.x-t.startPoint.x,o.y-t.startPoint.y),i=Math.hypot(o.x-t.endPoint.x,o.y-t.endPoint.y);return a<=i?"start":"end"},qO=t=>{const{canvasRef:o,elements:a,connectors:i,zoom:l,panX:c,panY:u,canvasMode:f,selectedElements:p,selectedConnectors:h,onPanChange:g,onElementSelect:m,onConnectorSelect:b,onElementsMoveTo:w,onConnectorsMoveTo:C,onElementTextEdit:A,onElementPropertyChange:S,onElementImageChange:R,onZoomChange:M,onZoomAtPoint:E,selectionArea:k,isSelecting:I,onSelectionStart:z,onSelectionChange:D,onSelectionComplete:j,onResizeStart:$,onConnectorResizeStart:F,isResizing:X,isConnectorResizing:Z,resizingConnectorId:K,resizeHasAnchorPreview:te,resizeAnchorPreview:Q,onTransactionStart:_,onTransactionEnd:H,onTemporarySelectModeChange:N,onConnectorCreate:P,onModeChange:O,onSelectionClear:U}=t,L=x.useMemo(()=>new Set(p),[p]),Y=x.useMemo(()=>new Set(h),[h]),q=x.useMemo(()=>{const de=new Map;return a.forEach(be=>{de.set(be.id,{x:be.x,y:be.y})}),de},[a]),J=x.useMemo(()=>{const de=new Map;return i.forEach(be=>{de.set(be.id,{startPoint:{x:be.startPoint.x,y:be.startPoint.y},endPoint:{x:be.endPoint.x,y:be.endPoint.y}})}),de},[i]),oe=x.useCallback(()=>p.slice(),[p]),le=x.useCallback(de=>q.get(de)??null,[q]),fe=x.useCallback((de,be)=>{const et=a.find(ke=>ke.id===de);if(!et)return p.slice();const at=et.groupId?a.filter(ke=>ke.groupId===et.groupId).map(ke=>ke.id):[de];return be?at.some(rn=>L.has(rn))?p.filter(rn=>!at.includes(rn)):Array.from(new Set([...p,...at])):at},[a,p,L]),ge=x.useCallback(()=>h.slice(),[h]),Se=x.useCallback(de=>J.get(de)??null,[J]),De=x.useCallback((de,be)=>{const et=i.find(ke=>ke.id===de);if(!et)return h.slice();const at=et.groupId?i.filter(ke=>ke.groupId===et.groupId).map(ke=>ke.id):[de];return be?at.some(rn=>Y.has(rn))?h.filter(rn=>!at.includes(rn)):Array.from(new Set([...h,...at])):at},[i,h,Y]),{isDragging:xe,dragElementId:Te,dragVisualDelta:Ae,startDragging:Oe,updateDragPosition:Le,endDragging:Pe,cancelDragAnimationFrame:gt}=TO({zoom:l,panX:c,panY:u,getSelectedElementIds:oe,getElementInitialPosition:le,onElementsMoveTo:w,onTransactionStart:_,onTransactionEnd:H}),{isDraggingConnector:At,dragConnectorId:zt,dragConnectorVisualDelta:Qe,startDraggingConnector:Re,updateConnectorDragPosition:Xe,endDraggingConnector:je,cancelConnectorDragAnimationFrame:Nt}=IO({zoom:l,panX:c,panY:u,getSelectedConnectorIds:ge,getConnectorInitialEndpoints:Se,onConnectorsMoveTo:C,onTransactionStart:_,onTransactionEnd:H}),Ze=x.useMemo(()=>new Set,[]),Je=x.useMemo(()=>{if(!At&&!Z&&Y.size===0||i.length===0)return Ze;const de=new Set;return i.forEach(be=>{if(!(Y.has(be.id)||At&&zt===be.id||Z&&K===be.id))return;const at=be.startAttachment?.elementId,ke=be.endAttachment?.elementId;at&&de.add(at),ke&&de.add(ke)}),de},[i,Y,At,zt,Z,K,Ze]),{isPanning:ht,startPanning:pe,updatePanPosition:He,endPanning:Ye,cancelPanAnimationFrame:$e}=OO({zoom:l,panX:c,panY:u,onPanChange:g,onTransactionStart:_,onTransactionEnd:H}),{handleTouchStart:ot,handleTouchMove:rt,handleTouchEnd:ct,handleWheelNative:ut,isZoomingRef:Fe}=_O({zoom:l,panX:c,panY:u,onZoomChange:M,onZoomAtPoint:E,canvasRef:o,rulerSize:Br}),{startSelection:Ee,updateSelection:We,completeSelection:qe}=DO({isSelecting:I,selectionArea:k,onSelectionStart:z,onSelectionChange:D,onSelectionComplete:j}),{editingElementId:_t,editingText:yn,setEditingText:jn,handleElementDoubleClick:xo,handleTextInputKeyDown:bo,handleTextInputBlur:Bn,handleInputMouseDown:Pn,handleInputClick:Lo}=jO({canvasMode:f,onElementTextEdit:A,onElementPropertyChange:S,onElementImageChange:R}),{temporarySelectMode:no}=BO({canvasMode:f,isDragging:xe,onTemporarySelectModeChange:N}),Wt=x.useCallback(()=>o.current?.getBoundingClientRect()??null,[o]),pt=x.useCallback(()=>{const de=Wt();return de?QO(de,l,c,u,Br):null},[Wt,c,u,l]),wt=x.useCallback((de,be)=>{const et=pt();return et?FO(et,{clientX:de,clientY:be}):null},[pt]),St=x.useCallback((de,be)=>{const et=pt();return et?GO(et,{clientX:de,clientY:be}):null},[pt]),Ue=x.useCallback((de,be,et)=>{P?.(de,be,et)},[P]),{isDrawing:qt,startPoint:vo,currentPoint:Ho,startDrawing:Ao,updateDrawing:pr,finishDrawing:cn}=PO({canvasMode:f,onConnectorCreate:Ue,onFinishDrawing:()=>O?.("drag")}),[oo,Vn]=x.useState(null),Xt=x.useRef(null),{highlightElementId:Ft,drawingAnchorPreview:zn,updateHighlightElement:Yt,applyDrawingPreview:Rn,clearDrawingPreview:Et,computeAnchoredPoint:on}=XO({elements:a,isDrawingConnector:qt});x.useEffect(()=>{qt||(Xt.current=null)},[qt]);const Tt=x.useCallback(de=>{if(de.button!==0)return;const be=Wt();if(!be||!pt())return;const at=de.target,ke=at.nodeType===Node.ELEMENT_NODE?at:at.parentElement??null,rn=ke?.getAttribute?.("data-connector-handle")??null,kn=ke?.closest?.('[data-connector-container="true"]')??null,Lt=ke?.getAttribute?.("data-connector-id")||ke?.parentElement?.getAttribute?.("data-connector-id")||kn?.getAttribute("data-connector-id"),Yo=(ke?.closest?.('[data-element-container="true"]')??null)?.getAttribute("data-element-id"),ka=ke?.getAttribute?.("data-resize-handle")??null;if(rn&&Lt){de.stopPropagation();const Mt=rn,$t=ke?.getAttribute?.("data-anchor-x")??ke?.parentElement?.getAttribute?.("data-anchor-x"),Dt=ke?.getAttribute?.("data-anchor-y")??ke?.parentElement?.getAttribute?.("data-anchor-y");let Qn={x:de.clientX,y:de.clientY};if($t&&Dt){const bt=Number($t),Ln=Number(Dt);!Number.isNaN(bt)&&!Number.isNaN(Ln)&&(Qn={x:be.left+Br+(bt+c)*l,y:be.top+Br+(Ln+u)*l})}F(Lt,Mt,Qn);return}if(ka&&ke){de.stopPropagation();const $t=ke.closest('[data-element-container="true"]')?.getAttribute("data-element-id")||ke.getAttribute("data-element-id");if($t){const Dt=a.find(bt=>bt.id===$t);if(!Dt)return;const Qn={x:Dt.x,y:Dt.y,width:Dt.width,height:Dt.height};$($t,ka,{x:de.clientX,y:de.clientY},Qn);return}}if(Lt&&f==="drag"&&!X&&!Z){de.stopPropagation();const Mt=i.find(bt=>bt.id===Lt);if(!Mt)return;const $t=de.ctrlKey||de.metaKey;let Dt=De(Lt,$t);!$t&&Y.has(Lt)&&(Dt=Array.from(Y)),Dt.forEach(bt=>{Y.has(bt)||b(bt,!0)}),Y.has(Lt)||b(Lt,$t);const Qn=!!(Mt.startAttachment||Mt.endAttachment);if(Qn&&!rn){de.preventDefault();const bt=wt(de.clientX,de.clientY);if(!bt)return;const Ln=WO(Mt,bt),$o=Ln==="start"?Mt.startPoint:Mt.endPoint,Yr=Ln==="start"?Mt.startAttachment?.elementId??null:Mt.endAttachment?.elementId??null,Uo={x:bt.x-$o.x,y:bt.y-$o.y};F(Lt,Ln,{x:de.clientX,y:de.clientY},{pointerOffset:Uo}),Yt(Yr);return}if(!Qn&&!rn){Re(Lt,{x:de.clientX,y:de.clientY},be,Dt);return}}if(Yo&&f==="drag"&&!X){const Mt=de.ctrlKey||de.metaKey,$t=L.has(Yo);let Dt;(Mt||!$t)&&(Dt=fe(Yo,Mt),m(Yo,Mt)),Oe(Yo,{x:de.clientX,y:de.clientY},be,Dt);return}if(!Yo&&!Lt&&f==="drag"&&!no&&!X&&!Z){pe({x:de.clientX,y:de.clientY}),!de.ctrlKey&&!de.metaKey&&U?.();return}if(f==="select"||no){const Mt=wt(de.clientX,de.clientY);if(!Mt)return;!de.ctrlKey&&!de.metaKey&&!no&&U?.(),Ee(Mt.x,Mt.y);return}if(f==="draw-connector"){const Mt=wt(de.clientX,de.clientY);if(!Mt)return;const $t=on(Mt);if(!qt)Xt.current=$t.attachment,Ao($t.point);else{const Dt={start:Xt.current,end:$t.attachment};cn($t.point,Dt),Xt.current=null}return}},[o,l,c,u,i,f,X,Z,a,fe,De,Y,b,L,m,Oe,Re,pe,no,U,Ee,on,qt,Ao,cn,F,Yt,Wt,pt,wt]),Ra=x.useCallback(de=>{const be=wt(de.clientX,de.clientY);if(!be)return;let et=!1;if(!qt&&f==="draw-connector"){const ke=on(be);Yt(ke.elementId??null),ke.elementId&&ke.point?(Rn("start",ke.point),et=!0):zn.endpoint==="start"&&Et()}if(qt){const ke=on(be);pr(ke.point),Yt(ke.elementId??null),ke.elementId&&ke.point?(Rn("end",ke.point),et=!0):zn.endpoint==="end"&&Et()}if(Z){const ke=on(be);Yt(ke.elementId??null),ke.elementId&&(et=!0)}et||(Yt(null),Et());const at={x:de.clientX,y:de.clientY};xe&&Te?Le(at):At&&zt?Xe(at):ht?He(at):I&&k&&We(be.x,be.y)},[o,l,c,u,qt,f,on,Yt,Rn,Et,Z,xe,Te,Le,At,zt,Xe,ht,He,I,k,We,wt]),hn=x.useCallback(()=>{I&&k&&qe(),xe?Pe():At?je():ht?(Ye(),gt(),Nt()):(gt(),Nt(),$e()),Et(),Yt(null)},[I,k,qe,xe,Pe,At,je,ht,Ye,gt,Nt,$e,Et,Yt]),Hr=x.useCallback(de=>{if(!qt&&f==="draw-connector"){const et=wt(de.clientX,de.clientY);if(!et)return;const at=on(et);Yt(at.elementId??null),at.elementId&&at.point?Rn("start",at.point):zn.endpoint==="start"&&Et()}const be=St(de.clientX,de.clientY);be&&Vn(et=>et&&et.x===be.x&&et.y===be.y?et:{x:be.x,y:be.y})},[qt,f,on,Yt,Rn,Et,wt,St]),xt=x.useCallback(()=>{Vn(de=>de===null?de:null),Yt(null),Et()},[Et,Yt]);return x.useEffect(()=>{f!=="draw-connector"&&Et()},[f,Et]),x.useEffect(()=>{!qt&&!Z&&f!=="draw-connector"&&Yt(null)},[qt,Z,f,Yt]),x.useEffect(()=>{Z&&te&&Q.elementId&&Yt(Q.elementId)},[Z,te,Q,Yt]),x.useEffect(()=>{const de=o.current;if(!de)return;const be={passive:!1};return de.addEventListener("wheel",ut,be),de.addEventListener("touchstart",ot,be),de.addEventListener("touchmove",rt,be),de.addEventListener("touchend",ct,be),de.addEventListener("touchcancel",ct,be),()=>{de.removeEventListener("wheel",ut),de.removeEventListener("touchstart",ot),de.removeEventListener("touchmove",rt),de.removeEventListener("touchend",ct),de.removeEventListener("touchcancel",ct)}},[o,ut,ot,rt,ct]),x.useEffect(()=>{const de=be=>{be.preventDefault()};return document.addEventListener("gesturestart",de,{passive:!1}),document.addEventListener("gesturechange",de,{passive:!1}),document.addEventListener("gestureend",de,{passive:!1}),()=>{document.removeEventListener("gesturestart",de),document.removeEventListener("gesturechange",de),document.removeEventListener("gestureend",de)}},[]),x.useLayoutEffect(()=>{if(ht||xe||At||I||qt||Z){const de=et=>Ra(et),be=()=>hn();return document.addEventListener("mousemove",de),document.addEventListener("mouseup",be),document.addEventListener("pointerup",be),document.addEventListener("pointercancel",be),()=>{document.removeEventListener("mousemove",de),document.removeEventListener("mouseup",be),document.removeEventListener("pointerup",be),document.removeEventListener("pointercancel",be)}}},[ht,xe,At,I,qt,Z,Ra,hn]),{isDragging:xe,dragVisualDelta:Ae,isDraggingConnector:At,dragConnectorId:zt,dragConnectorVisualDelta:Qe,isPanning:ht,isDrawingConnector:qt,connectorStartPoint:vo,connectorCurrentPoint:Ho,highlightElementId:Ft,drawingAnchorPreview:zn,connectorHandleSuppressedElements:Je,mousePosition:oo,editingElementId:_t,editingText:yn,setEditingText:jn,handleElementDoubleClick:xo,handleTextInputKeyDown:bo,handleTextInputBlur:Bn,handleInputMouseDown:Pn,handleInputClick:Lo,temporarySelectMode:no,events:{onMouseDown:Tt,onMouseMove:Hr,onMouseLeave:xt},isZoomingRef:Fe}},VO=t=>{const{elements:o,connectors:a,zoom:i,panX:l,panY:c,showRulers:u,onPanChange:f,onElementSelect:p,onConnectorSelect:h,onElementsMoveTo:g,onConnectorsMoveTo:m,onElementTextEdit:b,onElementPropertyChange:w,onElementImageChange:C,onZoomChange:A,onZoomAtPoint:S,selectedElements:R,selectedConnectors:M,canvasMode:E,selectionArea:k,isSelecting:I,onSelectionStart:z,onSelectionChange:D,onSelectionComplete:j,onResizeStart:$,onConnectorResizeStart:F,isResizing:X,isConnectorResizing:Z,resizingConnectorId:K,resizeHasAnchorPreview:te,resizeEndpoint:Q,resizeAnchorPreview:_,onTransactionStart:H,onTransactionEnd:N,onTemporarySelectModeChange:P,onConnectorCreate:O,onModeChange:U,onSelectionClear:L,onItemContextMenu:Y,onCanvasContextMenu:q}=t,J=x.useRef(null),oe=x.useRef(null),le=x.useMemo(()=>new Set(R),[R]),fe=x.useMemo(()=>new Set(M),[M]),ge=x.useMemo(()=>new Set(o.map(Ee=>Ee.id)),[o]),Se=qO({canvasRef:J,elements:o,connectors:a,zoom:i,panX:l,panY:c,canvasMode:E,selectedElements:R,selectedConnectors:M,onPanChange:f,onElementSelect:p,onConnectorSelect:h,onElementsMoveTo:g,onConnectorsMoveTo:m,onElementTextEdit:b,onElementPropertyChange:w,onElementImageChange:C,onZoomChange:A,onZoomAtPoint:S,selectionArea:k,isSelecting:I,onSelectionStart:z,onSelectionChange:D,onSelectionComplete:j,onResizeStart:$,onConnectorResizeStart:F,isResizing:X,isConnectorResizing:Z,resizingConnectorId:K,resizeHasAnchorPreview:te,resizeAnchorPreview:_,onTransactionStart:H,onTransactionEnd:N,onTemporarySelectModeChange:P,onConnectorCreate:O,onModeChange:U,onSelectionClear:L}),{isDragging:De,dragVisualDelta:xe,isDraggingConnector:Te,dragConnectorId:Ae,dragConnectorVisualDelta:Oe,isPanning:Le,isDrawingConnector:Pe,connectorStartPoint:gt,connectorCurrentPoint:At,highlightElementId:zt,drawingAnchorPreview:Qe,connectorHandleSuppressedElements:Re,mousePosition:Xe,editingElementId:je,editingText:Nt,setEditingText:Ze,handleElementDoubleClick:Je,handleTextInputKeyDown:ht,handleTextInputBlur:pe,handleInputMouseDown:He,handleInputClick:Ye,temporarySelectMode:$e,events:ot,isZoomingRef:rt}=Se,ct=x.useMemo(()=>[...o.map((We,qe)=>({kind:"element",zIndex:We.zIndex??qe,orderIndex:qe,element:We})),...a.map((We,qe)=>({kind:"connector",zIndex:We.zIndex??o.length+qe,orderIndex:o.length+qe,connector:We}))].sort((We,qe)=>We.zIndex===qe.zIndex?We.orderIndex-qe.orderIndex:We.zIndex-qe.zIndex),[o,a]),ut=$e?"select":E,Fe=x.useCallback(Ee=>{const We=Ee.target,qe=We.nodeType===Node.ELEMENT_NODE?We:We.parentElement??null,_t=qe?.getAttribute?.("data-connector-id")||qe?.parentElement?.getAttribute?.("data-connector-id")||qe?.closest?.('[data-connector-container="true"]')?.getAttribute("data-connector-id")||null,jn=qe?.closest?.('[data-element-container="true"]')?.getAttribute("data-element-id")??null;if(_t){Ee.preventDefault(),Ee.stopPropagation(),fe.has(_t)||h(_t,!1),Y?.({x:Ee.clientX,y:Ee.clientY,targetType:"connector",targetId:_t});return}if(jn){Ee.preventDefault(),Ee.stopPropagation(),le.has(jn)||p(jn,!1),Y?.({x:Ee.clientX,y:Ee.clientY,targetType:"element",targetId:jn});return}Ee.preventDefault(),Ee.stopPropagation(),Y?.(null),q?.({x:Ee.clientX,y:Ee.clientY})},[h,fe,Y,p,le,q]);return v.jsxs(vI,{ref:J,$canvasMode:ut,$isPanning:Le,className:Le?"panning":"",onMouseDown:ot.onMouseDown,onMouseMove:ot.onMouseMove,onMouseLeave:ot.onMouseLeave,onContextMenu:Fe,"data-canvas":"true","data-canvas-wrapper":"true",children:[v.jsxs(AI,{$zoom:i,$panX:l,$panY:c,$isPinchZooming:rt.current,"data-canvas-content":"true",children:[ct.map(Ee=>{if(Ee.kind==="element"){const Wt=Ee.element,pt=le.has(Wt.id),wt=De&&pt?xe:zx;return v.jsx(yO,{element:Wt,isSelected:pt,dragDelta:wt,onDoubleClick:Je,isInteractive:ut==="drag",highlightAnchors:zt===Wt.id,layerZIndex:Ee.zIndex,layerOrder:Ee.orderIndex,handleOverlay:oe.current,suppressHandleOverlay:Re.has(Wt.id)},`element:${Wt.id}`)}const We=Ee.connector,qe=fe.has(We.id),_t=Te&&We.id===Ae,yn=_t?Oe:zx,jn=We.startAttachment?.elementId??null,xo=We.endAttachment?.elementId??null,bo=Z&&K===We.id,Bn=bo&&te,Pn=!_t&&!bo&&!!(jn&&ge.has(jn)||xo&&ge.has(xo)),Lo=Bn?_.point:null,no=Bn?Q:null;return v.jsx(MO,{connector:We,isSelected:qe,dragDelta:yn,isAnchored:Pn,hasAnchorPreview:Bn,anchorPreviewPoint:Lo,anchorPreviewEndpoint:no,layerZIndex:Ee.zIndex,layerOrder:Ee.orderIndex,handleOverlay:oe.current},`connector:${We.id}`)}),Qe.point&&Qe.endpoint&&v.jsx(U1,{x:Qe.point.x,y:Qe.point.y,endpoint:Qe.endpoint}),k&&v.jsx(JI,{$left:Math.min(k.startX,k.endX),$top:Math.min(k.startY,k.endY),$width:Math.abs(k.endX-k.startX),$height:Math.abs(k.endY-k.startY),"data-selection-rectangle":"true"}),Pe&&gt&&At&&v.jsxs("svg",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"visible",pointerEvents:"none"},children:[v.jsx("line",{x1:gt.x,y1:gt.y,x2:At.x,y2:At.y,stroke:"#3498db",strokeWidth:2,strokeDasharray:"5,5",vectorEffect:"non-scaling-stroke",strokeLinecap:"round"}),v.jsx("circle",{cx:gt.x,cy:gt.y,r:4,fill:"#3498db",stroke:"white",strokeWidth:2})]}),je&&o.find(Ee=>Ee.id===je)&&v.jsx(xO,{element:o.find(Ee=>Ee.id===je),editingText:Nt,onTextChange:Ze,onKeyDown:Ee=>ht(Ee,o),onBlur:pe,onMouseDown:He,onClick:Ye}),v.jsx("div",{ref:oe,"data-handle-overlay":"true",style:{position:"absolute",top:0,left:0,width:`${D1}px`,height:`${j1}px`,pointerEvents:"none",zIndex:2e5}})]}),u&&v.jsxs(v.Fragment,{children:[v.jsx(ZI,{}),v.jsx(Tx,{orientation:"horizontal",zoom:i,pan:l,mousePos:Xe?.x??null}),v.jsx(Tx,{orientation:"vertical",zoom:i,pan:c,mousePos:Xe?.y??null})]})]})},ZO=36,KO=88,JO=24,Ux=140,e_=2,t_=12;function Xx(t){const o=ZO+KO+JO,a=Math.max(0,t-o),i=Math.floor((a+Ux*.2)/Ux);return Math.max(e_,Math.min(i,t_))}function n_(t,o,a){if(t.length<=a)return t;const i=t.findIndex(f=>f.id===o);if(i===-1)return t.slice(0,a);const l=new Set;l.add(t[i]);let c=i-1,u=i+1;for(;l.size<a&&(c>=0||u<t.length);)u<t.length&&l.size<a&&l.add(t[u++]),c>=0&&l.size<a&&l.add(t[c--]);return t.filter(f=>l.has(f))}function o_(t,o,a){const[i,l]=x.useState(()=>Xx(a));x.useEffect(()=>{const p=setTimeout(()=>{l(Xx(a))},250);return()=>clearTimeout(p)},[a]);const c=x.useMemo(()=>n_(t,o,i),[t,o,i]),u=x.useMemo(()=>t.filter(p=>!c.some(h=>h.id===p.id)),[t,c]),f=u.length>0;return{visibleTabs:c,overflowTabs:u,hasOverflow:f,tabCapacity:i}}function r_(t){const[o,a]=x.useState(0);return x.useEffect(()=>{const i=t.current;if(!i)return;const l=new ResizeObserver(c=>{for(const u of c)a(u.contentRect.width)});return l.observe(i),a(i.getBoundingClientRect().width),()=>l.disconnect()},[t]),o}function a_(t,o){const[a,i]=x.useState(null),[l,c]=x.useState(null),u=x.useRef(null),f=x.useRef(null),p=x.useRef(t);x.useEffect(()=>{p.current=t},[t]);const h=x.useCallback(()=>{u.current=null,f.current=null,i(null),c(null)},[]),g=x.useCallback(A=>{f.current=A,c(A)},[]),m=x.useCallback((A,S)=>{A.dataTransfer.effectAllowed="move",A.dataTransfer.setData("text/plain",S),u.current=S,i(S)},[]),b=x.useCallback(A=>{A.preventDefault(),h()},[h]),w=x.useCallback((A,S,R)=>{if(!u.current)return;A.preventDefault(),A.dataTransfer.dropEffect="move";const M=A.currentTarget.getBoundingClientRect(),E=M.left+M.width/2,k=A.clientX<=E?"before":"after";g({zone:R,targetId:S,position:k})},[g]),C=x.useCallback(A=>{A.preventDefault(),A.stopPropagation();const S=u.current,R=f.current,M=p.current;if(!S||!R){h();return}const E=M.map(D=>D.id),k=E.indexOf(S),I=E.indexOf(R.targetId);if(k===-1||I===-1){h();return}let z=R.position==="before"?I:I+1;k<z&&(z-=1),z=Math.max(0,Math.min(E.length-1,z)),z!==k&&o(S,z),h()},[o,h]);return{draggingPageId:a,dropState:l,handleDragStart:m,handleDragEnd:b,handleDragOver:w,handleDrop:C}}const i_=se.div.attrs(t=>({style:{left:`${t.$libraryWidth}px`}}))`
  position: fixed;
  bottom: 0;
  right: 0;
  height: 34px;
  background: white;
  border-top: 1px solid #e1e5e9;
  z-index: 150;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 10px;
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.08);
  transition: left 0.15s ease-out;
`,s_=se.div`
  display: flex;
  align-items: center;
  gap: 2px;
  flex: 1;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
`,q1=se.div`
  position: relative;
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 8px 0 12px;
  min-height: 28px;
  border-radius: 6px;
  cursor: pointer;
  user-select: none;
  font-size: 12px;
  color: #2c3e50;
  background: transparent;
  border: 1px solid transparent;
  transition: background 0.2s, border-color 0.2s;
  flex-shrink: 0;

  &[data-active='true'] {
    font-weight: 600;
  }

  &[data-dragging='true'] {
    opacity: 0.5;
  }

  &:hover:not([data-dragging='true']) {
    background: #f5f5f5;
  }

  &[data-drop-target='true'] {
    background: rgba(33, 150, 243, 0.12);
    border-color: rgba(33, 150, 243, 0.4);
  }
`,l_=se.button`
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 11px;
  color: #666;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  flex-shrink: 0;
  opacity: 0;
  pointer-events: none;
  margin-left: 8px;

  ${q1}:hover & {
    opacity: 1;
    pointer-events: auto;
  }

  &:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #333;
  }
`,c_=se.input`
  border: 1px solid #2196f3;
  background: white;
  padding: 4px 8px;
  height: 28px;
  font-size: 12px;
  border-radius: 3px;
  outline: none;
  min-width: 90px;
  max-width: 200px;
`,u_=se.span`
  flex: 1 1 auto;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,d_=se.button`
  padding: 4px 10px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  user-select: none;

  &:hover {
    background: rgba(0, 0, 0, 0.08);
  }

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4);
  }

  &[data-open='true'] {
    background: rgba(0, 0, 0, 0.1);
  }
`,V1=se.button`
  width: 28px;
  min-width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  background: rgba(0, 0, 0, 0.04);
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  user-select: none;

  &:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.08);
  }

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,f_=se(V1)`
  width: 28px;
  min-width: 28px;
  padding: 0;
  font-size: 14px;
`,h_=se.div`
  position: absolute;
  bottom: 100%;
  right: 10px;
  margin-bottom: 4px;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.15);
  min-width: 200px;
  max-height: 300px;
  z-index: 1200;
  animation: slideUp 0.15s ease-out;

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`,p_=se.div`
  padding: 8px 12px;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: space-between;

  &[data-active='true'] {
    font-weight: 600;
  }

  &[data-dragging='true'] {
    opacity: 0.5;
  }

  &:hover:not([data-dragging='true']) {
    background: #f5f5f5;
  }

  &[data-drop-target='true'] {
    background: rgba(33, 150, 243, 0.12);
  }
`,m_=se.div`
  height: 1px;
  background: #e1e5e9;
  margin: 4px 0;
`,Qx=se.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  font-size: 12px;
  color: #2c3e50;
  cursor: pointer;
  border-radius: 0;

  &:hover:not(:disabled) {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,np=se.div`
  pointer-events: none;
  background: #1d6ff2;
  box-shadow: 0 0 6px rgba(29, 111, 242, 0.4);
  border-radius: 999px;

  ${t=>t.$variant==="strip"?`
      width: 6px;
      height: 22px;
      margin: 0 4px;
    `:`
      width: calc(100% - 24px);
      height: 4px;
      margin: 4px 12px;
    `}
`,g_=se.div`
  position: fixed;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 150px;
  z-index: 1300;
  padding: 4px;
`,y_=se.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  border-radius: 4px;
  user-select: none;

  &:hover {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;let Rh=null;const x_=(t,o)=>{if(typeof document>"u")return t.length*7;Rh||(Rh=document.createElement("canvas"));const a=Rh.getContext("2d");return a?(a.font=`${o} 12px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`,a.measureText(t).width):t.length*7};function b_({page:t,isActive:o,isDragging:a,isDropTarget:i,canDelete:l,onSelect:c,onClose:u,onRename:f,onContextMenu:p,onDragStart:h,onDragEnd:g,onDragOver:m,onDrop:b}){const[w,C]=x.useState(!1),[A,S]=x.useState(t.name),R=x.useRef(null),M=x.useRef(!1);x.useEffect(()=>{w&&R.current&&(R.current.focus(),R.current.select())},[w]);const E=X=>{X.stopPropagation(),S(t.name),C(!0)},k=()=>{if(M.current)return;M.current=!0,f(t.id,A)?C(!1):S(t.name),setTimeout(()=>{M.current=!1},100)},I=()=>{setTimeout(()=>{!M.current&&w&&k()},50)},z=X=>{X.key==="Enter"?(X.preventDefault(),R.current?.blur(),k()):X.key==="Escape"&&(X.preventDefault(),S(t.name),C(!1))},D=X=>{if(X.button===1){X.preventDefault(),u(t.id);return}X.button===0&&(w||c(t.id))},j=X=>{X.stopPropagation(),l&&u(t.id)},$=X=>{X.preventDefault(),X.stopPropagation();const Z=X.currentTarget.getBoundingClientRect();p(X,t.id,Z)},F=x.useMemo(()=>{const X=o?"600":"500",Z=x_(t.name,X),K=12,te=8,Q=l?8:0,_=l?18:0,H=8,N=90,P=260,O=Z+K+te+Q+_+H;return Math.min(P,Math.max(N,Math.ceil(O)))},[t.name,o,l]);return w?v.jsx(c_,{ref:R,value:A,onChange:X=>S(X.target.value),onBlur:I,onKeyDown:z,style:{width:`${F}px`},"data-page-tab-input":"true"}):v.jsxs(q1,{"data-active":o,"data-dragging":a,"data-drop-target":i,"data-page-tab-id":t.id,"data-page-button":"true",draggable:!0,onMouseDown:D,onDoubleClick:E,onContextMenu:$,onDragStart:X=>h(X,t.id),onDragEnd:g,onDragOver:X=>m(X,t.id),onDrop:b,style:{width:`${F}px`},children:[v.jsx(u_,{title:t.name,children:t.name}),l&&v.jsx(l_,{onClick:j,"data-page-close-button":"true",children:""})]})}const v_=x.memo(b_,(t,o)=>t.page.id===o.page.id&&t.page.name===o.page.name&&t.isActive===o.isActive&&t.isDragging===o.isDragging&&t.isDropTarget===o.isDropTarget&&t.canDelete===o.canDelete);function A_({pages:t,activePageId:o,draggingPageId:a,dropState:i,onSelect:l,onContextMenu:c,onDragStart:u,onDragEnd:f,onDragOver:p,onDrop:h,onClose:g,onDuplicateActive:m,onDeleteActive:b,canDuplicateActive:w,canDeleteActive:C}){const A=x.useRef(null);x.useEffect(()=>{const M=k=>{A.current&&!A.current.contains(k.target)&&g()},E=setTimeout(()=>{document.addEventListener("mousedown",M)},100);return()=>{clearTimeout(E),document.removeEventListener("mousedown",M)}},[g]);const S=M=>{l(M),g()},R=(M,E)=>{M.preventDefault(),M.stopPropagation();const k=M.currentTarget.getBoundingClientRect();c(M,E,k)};return v.jsxs(h_,{ref:A,onDrop:h,onDragOver:M=>{a&&M.preventDefault()},children:[t.map(M=>{const E=M.id===o,k=M.id===a,I=i?.zone==="overflow"&&i.targetId===M.id,z=I&&i?.position==="before",D=I&&i?.position==="after";return v.jsxs(Ce.Fragment,{children:[z&&v.jsx(np,{$variant:"overflow"}),v.jsxs(p_,{"data-dropup-page-item":"true","data-page-id":M.id,"data-active":E,"data-dragging":k,"data-drop-target":I,draggable:!0,onClick:()=>S(M.id),onContextMenu:j=>R(j,M.id),onDragStart:j=>u(j,M.id),onDragEnd:f,onDragOver:j=>p(j,M.id,"overflow"),onDrop:h,children:[v.jsx("span",{children:M.name}),E&&v.jsx("span",{children:""})]}),D&&v.jsx(np,{$variant:"overflow"})]},M.id)}),v.jsx(m_,{}),v.jsx(Qx,{type:"button",onClick:()=>{w&&(m(),g())},disabled:!w,"data-dropup-action":"duplicate",children:"Duplicate"}),v.jsx(Qx,{type:"button",onClick:()=>{C&&(b(),g())},disabled:!C,"data-dropup-action":"delete",children:"Delete"})]})}const w_=se.div`
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding-left: 8px;
`,Fx=se.button`
  width: 26px;
  height: 26px;
  border: none;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;

  &:hover {
    background: rgba(0, 0, 0, 0.1);
  }

  &:active {
    background: rgba(0, 0, 0, 0.15);
  }
`,C_=se.div`
  position: relative;
`,S_=se.button`
  min-width: 50px;
  height: 26px;
  padding: 0 10px;
  border: none;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: #2c3e50;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;

  &:hover {
    background: rgba(0, 0, 0, 0.1);
  }
`,E_=se.div`
  position: absolute;
  bottom: 110%;
  right: -26px;
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
  padding: 4px 0;
  display: ${t=>t.$visible?"block":"none"};
  min-width: 148px;
  z-index: 1000;
`,Gx=se.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: #2c3e50;
  font-size: 12px;
  text-align: left;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`,Wx=se.span`
  font-size: 11px;
  color: #6c757d;
`,qx=se.span`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  svg {
    width: 18px;
    height: 18px;
  }
`,M_=({zoom:t,onZoomIn:o,onZoomOut:a,onReset:i,onFitToScreen:l})=>{const[c,u]=x.useState(!1),f=x.useRef(null),h=x.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[])?"":"Ctrl",g=`${h}+'`,m=`${h}+\\`;x.useEffect(()=>{if(!c)return;const A=R=>{f.current&&!f.current.contains(R.target)&&u(!1)},S=R=>{R.key==="Escape"&&u(!1)};return document.addEventListener("mousedown",A),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("keydown",S)}},[c]);const b=()=>u(A=>!A),w=()=>{i?.(),u(!1)},C=()=>{l?.(),u(!1)};return v.jsxs(w_,{"data-zoom-inline":"true",children:[v.jsx(Fx,{onClick:a,title:"Zoom Out (Ctrl/Cmd+[)",children:v.jsx(qx,{children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),v.jsx("path",{d:"M7 10h6"}),v.jsx("path",{d:"M21 21l-6 -6"})]})})}),v.jsxs(C_,{ref:f,children:[v.jsxs(S_,{onClick:b,children:[Math.round(t*100),"%"]}),v.jsxs(E_,{$visible:c,"data-zoom-menu":"true",children:[v.jsxs(Gx,{onClick:w,children:[v.jsx("span",{children:"Reset"}),v.jsx(Wx,{children:g})]}),v.jsxs(Gx,{onClick:C,children:[v.jsx("span",{children:"Fit to screen"}),v.jsx(Wx,{children:m})]})]})]}),v.jsx(Fx,{onClick:o,title:"Zoom In (Ctrl/Cmd+])",children:v.jsx(qx,{children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[v.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),v.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),v.jsx("path",{d:"M10 7v6"}),v.jsx("path",{d:"M7 10h6"}),v.jsx("path",{d:"M21 21l-6 -6"})]})})})]})};function R_({isOpen:t,pageName:o,itemCount:a,onConfirm:i,onCancel:l}){return v.jsxs(ls,{isOpen:t,onClose:l,ariaLabelledBy:"delete-page-title",closeOnOverlayClick:!1,children:[v.jsx(as,{id:"delete-page-title",children:"Delete page"}),v.jsxs(is,{children:[v.jsxs("p",{children:["Are you sure you want to delete the page ",v.jsx("strong",{children:o}),"?"]}),a>0?v.jsxs("p",{children:["This page contains ",a," item",a===1?"":"s",". Deleting it cannot be undone."]}):v.jsx("p",{children:"This page is currently empty. Deleting it cannot be undone."})]}),v.jsxs(ss,{children:[v.jsx(go,{onClick:l,children:"Cancel"}),v.jsx(go,{$variant:"danger",onClick:i,children:"Delete page"})]})]})}const k_=()=>null,T_=({style:t,children:o,dataAttributes:a,forwardedRef:i})=>v.jsx(g_,{ref:i,style:t,...a??{},children:o}),I_=({entry:t,onSelect:o})=>v.jsx(y_,{onClick:o,disabled:t.disabled,...t.dataAttributes??{},children:t.label}),O_={Container:T_,Item:({entry:t,onSelect:o})=>v.jsx(I_,{entry:t,onSelect:o}),Separator:k_},Z1=x.forwardRef(function({pages:o,activePageId:a,canAddPage:i,libraryWidth:l,isLibraryCollapsed:c,onAddPage:u,onToggleLibrary:f,onDeletePage:p,onRenamePage:h,onDuplicatePage:g,onReorderPages:m,onSwitchToPage:b,zoom:w,onZoomIn:C,onZoomOut:A,onResetZoom:S,onFitToScreen:R},M){const[E,k]=x.useState(!1),[I,z]=x.useState(null),{state:D,openMenu:j,closeMenu:$,resetMenu:F}=Ru(),X=x.useRef(null),Z=r_(X),{visibleTabs:K,overflowTabs:te,hasOverflow:Q}=o_(o,a,Z),{draggingPageId:_,dropState:H,handleDragStart:N,handleDragEnd:P,handleDragOver:O,handleDrop:U}=a_(o,m),L=o.length>1,Y=i,q=x.useCallback(Ae=>{if($(),F(),o.length<=1)return;const Oe=o.find(At=>At.id===Ae);if(!Oe)return;const Le=Oe.canvasState.elements.length,Pe=Oe.canvasState.connectors.length;if(Le+Pe===0){p(Ae);return}z(Ae)},[$,p,o,F]),J=x.useCallback((Ae,Oe,Le)=>{k(!1);const Pe={left:Le.left,top:Le.top,right:Le.right,bottom:Le.bottom,width:Le.width,height:Le.height};j({anchorRect:Pe,placement:"anchor",dataAttributes:{"data-page-tab-context-menu":"true"},metadata:{pageId:Oe},entries:xI({canDuplicate:i,canDelete:L,onDuplicate:()=>g(Oe),onDelete:()=>q(Oe)})})},[i,L,g,j,q]),oe=Ce.useMemo(()=>I?o.find(Ae=>Ae.id===I)??null:null,[I,o]),le=x.useCallback(()=>{I&&(p(I),z(null))},[I,p]),fe=x.useCallback(()=>{z(null)},[]),ge=x.useCallback(()=>{Y&&g(a)},[Y,g,a]),Se=x.useCallback(()=>{L&&q(a)},[L,q,a]);x.useImperativeHandle(M,()=>({requestDeletePage:Ae=>q(Ae)}),[q]);const De=[...te],xe=(Ae,Oe,Le)=>H&&H.zone===Le&&H.targetId===Ae&&H.position===Oe?v.jsx(np,{$variant:Le}):null,Te=c?QT:UT;return v.jsxs(i_,{ref:X,$libraryWidth:l,onDrop:U,onDragOver:Ae=>{_&&Ae.preventDefault()},children:[v.jsx(f_,{onClick:f,title:c?"Expand library":"Collapse library","aria-label":c?"Expand sidebar":"Collapse sidebar",children:v.jsx(Te,{"aria-hidden":"true",size:18,stroke:1.5})}),v.jsx(V1,{onClick:()=>u(),disabled:!i,title:i?"Add new page":"Maximum 100 pages reached","aria-label":i?"Add new page":"Maximum 100 pages reached","data-add-page-button":"true",children:v.jsx(qT,{"aria-hidden":"true",size:18,stroke:1.5})}),v.jsx(s_,{onDrop:U,onDragOver:Ae=>{_&&Ae.preventDefault()},children:K.map(Ae=>v.jsxs(Ce.Fragment,{children:[xe(Ae.id,"before","strip"),v.jsx(v_,{page:Ae,isActive:Ae.id===a,isDragging:Ae.id===_,isDropTarget:H?.zone==="strip"&&H.targetId===Ae.id,canDelete:o.length>1,onSelect:b,onClose:q,onRename:h,onContextMenu:J,onDragStart:N,onDragEnd:P,onDragOver:(Oe,Le)=>O(Oe,Le,"strip"),onDrop:U}),xe(Ae.id,"after","strip")]},Ae.id))}),Q&&v.jsxs(d_,{"data-open":E,onClick:()=>k(!E),children:["More (",te.length,")"]}),E&&Q&&v.jsx(A_,{pages:De,activePageId:a,draggingPageId:_,dropState:H,onSelect:b,onContextMenu:J,onDragStart:N,onDragEnd:P,onDragOver:O,onDrop:U,onClose:()=>k(!1),onDuplicateActive:ge,onDeleteActive:Se,canDuplicateActive:Y,canDeleteActive:L}),v.jsx(ku,{state:D,closeMenu:$,resetMenu:F,components:O_}),v.jsx(M_,{zoom:w,onZoomIn:C,onZoomOut:A,onReset:S,onFitToScreen:R}),v.jsx(R_,{isOpen:!!oe,pageName:oe?.name??"",itemCount:(()=>{if(!oe)return 0;const{canvasState:Ae}=oe,Oe=Ae.elements?.length??0,Le=Ae.connectors?.length??0;return Oe+Le})(),onConfirm:le,onCancel:fe})]})});Z1.displayName="PageStrip";const __=(t,o)=>{const a=[...t.map((p,h)=>({kind:"element",data:p,zIndex:typeof p.zIndex=="number"&&Number.isFinite(p.zIndex)?Math.round(p.zIndex):void 0,order:h})),...o.map((p,h)=>({kind:"connector",data:p,zIndex:typeof p.zIndex=="number"&&Number.isFinite(p.zIndex)?Math.round(p.zIndex):void 0,order:t.length+h}))],i=new Set;let l=-1;a.forEach(p=>{p.zIndex!==void 0&&(i.has(p.zIndex)||(i.add(p.zIndex),p.zIndex>l&&(l=p.zIndex)))});let c=l+1;i.clear(),a.sort((p,h)=>{const g=p.zIndex??1/0,m=h.zIndex??1/0;return g===m?p.order-h.order:g-m}).forEach(p=>{let h=p.zIndex;(h===void 0||i.has(h))&&(h=c++),i.add(h),p.data={...p.data,zIndex:h}});const u=a.filter(p=>p.kind==="element").sort((p,h)=>p.order-h.order).map(p=>p.data),f=a.filter(p=>p.kind==="connector").sort((p,h)=>p.order-h.order).map(p=>p.data);return{elements:u,connectors:f}},Gn=t=>{const o=t.elements.some(h=>!h.properties),a=!t.connectors||!t.selectedConnectors,i=!t.selectedItemIds;if(!o&&!a&&!i){const h=t.connectors.map(Dn.normaliseConnector),g=Kt(h,t.elements);return{...t,connectors:g}}const l=t.selectedItemIds?t.selectedItemIds:[...t.selectedElements??[],...t.selectedConnectors??[]],c=t.elements.map(ts),u=Kt((t.connectors||[]).map(Dn.normaliseConnector),t.elements),{elements:f,connectors:p}=__(c,u);return{...t,elements:f,connectors:p,selectedConnectors:t.selectedConnectors||[],selectedItemIds:Array.from(new Set(l))}},fa=t=>{if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const o=Number(t);if(Number.isFinite(o))return o}return null},Vx=t=>t==="HollowArrow"?"HollowArrow":"None",D_=(t,o,a,i)=>{if(!t.selectedConnectors.includes(o))return{changed:!1,nextConnectors:t.connectors};const l=t.connectors.findIndex(E=>E.id===o);if(l===-1)return{changed:!1,nextConnectors:t.connectors};const c=t.connectors[l],u=Dn.normaliseConnector(c),f=Dn.getConnectorDefaults(),p={},h={...u.startPoint},g={...u.endPoint};let m=!1;switch(a){case"lineWidth":{const E=fa(i);E!==null&&(p.lineWidth=E);break}case"lineColour":{typeof i=="string"&&i.trim().length>0&&(p.lineColour=i);break}case"opacity":{const E=fa(i);E!==null&&(p.opacity=E);break}case"shadow":case"dropShadow":{p.shadow=!!i;break}case"shadowColour":{typeof i=="string"&&i.trim().length>0&&(p.shadowColour=i);break}case"shadowOpacity":{const E=fa(i);E!==null&&(p.shadowOpacity=E);break}case"shadowBlurRadius":{const E=fa(i);E!==null&&(p.shadowBlurRadius=E);break}case"startMark":{p.startMark=Vx(i);break}case"endMark":{p.endMark=Vx(i);break}case"startX":{const E=fa(i);if(E!==null){const k=Math.round(E);k!==h.x&&(h.x=k,m=!0)}break}case"startY":{const E=fa(i);if(E!==null){const k=Math.round(E);k!==h.y&&(h.y=k,m=!0)}break}case"endX":{const E=fa(i);if(E!==null){const k=Math.round(E);k!==g.x&&(g.x=k,m=!0)}break}case"endY":{const E=fa(i);if(E!==null){const k=Math.round(E);k!==g.y&&(g.y=k,m=!0)}break}}if(!(Object.keys(p).length>0)&&!m)return{changed:!1,nextConnectors:t.connectors};const w=Dn.applyConnectorProperties({...c,startPoint:h,endPoint:g},p),C={...f,...Dn.normaliseConnector(c).properties??{}},A={...f,...Dn.normaliseConnector(w).properties??{}};if(!Object.keys({...C,...A}).some(E=>C[E]!==A[E])&&!m)return{changed:!1,nextConnectors:t.connectors};const R=[...t.connectors];return R[l]=w,{changed:!0,nextConnectors:Kt(R,t.elements)}},Mn=t=>Math.round(t),K1=(t,o,a)=>{if(o===0&&a===0||t.selectedElements.length===0&&t.selectedConnectors.length===0)return t;const i=t.selectedElements.length?new Set(t.selectedElements):null,l=t.selectedConnectors.length?new Set(t.selectedConnectors):null;if(!i&&!l)return t;let c=!1;const u=i?t.elements.map(g=>{if(!i.has(g.id))return g;const m=Mn(g.x+o),b=Mn(g.y+a);return m===g.x&&b===g.y?g:(c=!0,{...g,x:m,y:b,properties:{...g.properties,posX:m,posY:b}})}):t.elements;let f=!1;const p=l?t.connectors.map(g=>{if(!l.has(g.id))return g;const m={x:Mn(g.startPoint.x+o),y:Mn(g.startPoint.y+a)},b={x:Mn(g.endPoint.x+o),y:Mn(g.endPoint.y+a)};return m.x===g.startPoint.x&&m.y===g.startPoint.y&&b.x===g.endPoint.x&&b.y===g.endPoint.y?g:(f=!0,{...g,startPoint:m,endPoint:b})}):t.connectors;if(!c&&!f)return t;const h=Kt(p,u);return{...t,elements:u,connectors:h}},j_=(t,o,a,i)=>{if(a===0&&i===0)return t;if(t.selectedElements.includes(o))return K1(t,a,i);let l=!1;const c=t.elements.map(u=>{if(u.id!==o)return u;const f=Mn(u.x+a),p=Mn(u.y+i);return f===u.x&&p===u.y?u:(l=!0,{...u,x:f,y:p,properties:{...u.properties,posX:f,posY:p}})});return l?{...t,elements:c,connectors:Kt(t.connectors,c)}:t},B_=(t,o,a,i)=>{if(a===0&&i===0)return t;if(t.selectedConnectors.includes(o))return K1(t,a,i);let l=!1;const c=t.connectors.map(u=>{if(u.id!==o)return u;const f={x:Mn(u.startPoint.x+a),y:Mn(u.startPoint.y+i)},p={x:Mn(u.endPoint.x+a),y:Mn(u.endPoint.y+i)};return f.x===u.startPoint.x&&f.y===u.startPoint.y&&p.x===u.endPoint.x&&p.y===u.endPoint.y?u:(l=!0,{...u,startPoint:f,endPoint:p})});return l?{...t,connectors:Kt(c,t.elements)}:t},P_=(t,o)=>{if(o.length===0)return t;const a=new Map;o.forEach(c=>{a.set(c.id,{x:Mn(c.x),y:Mn(c.y)})});let i=!1;const l=t.elements.map(c=>{const u=a.get(c.id);return!u||c.x===u.x&&c.y===u.y?c:(i=!0,{...c,x:u.x,y:u.y,properties:{...c.properties,posX:u.x,posY:u.y}})});return i?{...t,elements:l,connectors:Kt(t.connectors,l)}:t},z_=(t,o)=>{if(o.length===0)return t;const a=new Map;o.forEach(c=>{a.set(c.id,c)});let i=!1;const l=t.connectors.map(c=>{const u=a.get(c.id);if(!u)return c;const f=u.startPoint??c.startPoint,p=u.endPoint??c.endPoint,h={x:Mn(f.x),y:Mn(f.y)},g={x:Mn(p.x),y:Mn(p.y)};return c.startPoint.x===h.x&&c.startPoint.y===h.y&&c.endPoint.x===g.x&&c.endPoint.y===g.y?c:(i=!0,{...c,startPoint:h,endPoint:g})});return i?{...t,connectors:Kt(l,t.elements)}:t},N_=(t,o,a)=>{if(o===0&&a===0||t.selectedElements.length===0&&t.selectedConnectors.length===0)return t;const i=new Set(t.selectedElements);let l=!1;const c=t.elements.map(h=>{if(!i.has(h.id))return h;const g=Dn.applyElementBatch(h,{posX:h.x+o,posY:h.y+a});return g!==h&&(l=!0),g});let u=!1;const f=t.connectors.map(h=>t.selectedConnectors.includes(h.id)?(u=!0,{...h,startPoint:{x:h.startPoint.x+o,y:h.startPoint.y+a},endPoint:{x:h.endPoint.x+o,y:h.endPoint.y+a}}):h);if(!l&&!u)return t;const p=Kt(f,c);return{...t,elements:c,connectors:p}},Pr=(t,o)=>Array.from(new Set([...t,...o])),_u=t=>[...t.elements,...t.connectors].reduce((i,l)=>{const c=typeof l.zIndex=="number"&&Number.isFinite(l.zIndex)?Math.round(l.zIndex):i;return c>i?c:i},-1)+1,J1=t=>Array.from(new Set(t)),L_=(t,o,a)=>{const i=t.elements.find(u=>u.id===o);if(!i)return t;const l=i.groupId?t.elements.filter(u=>u.groupId===i.groupId).map(u=>u.id):[o];if(a){if(l.some(p=>t.selectedElements.includes(p))){const p=t.selectedElements.filter(h=>!l.includes(h));return{...t,selectedElements:p,selectedConnectors:t.selectedConnectors,selectedItemIds:Pr(p,t.selectedConnectors)}}const f=J1([...t.selectedElements,...l]);return{...t,selectedElements:f,selectedConnectors:t.selectedConnectors,selectedItemIds:Pr(f,t.selectedConnectors)}}const c=l;return{...t,selectedElements:c,selectedConnectors:[],selectedItemIds:Pr(c,[])}},H_=(t,o,a)=>{const i=t.connectors.find(u=>u.id===o);if(!i)return t;const l=i.groupId?t.connectors.filter(u=>u.groupId===i.groupId).map(u=>u.id):[o];if(a){if(l.some(p=>t.selectedConnectors.includes(p))){const p=t.selectedConnectors.filter(h=>!l.includes(h));return{...t,selectedElements:t.selectedElements,selectedConnectors:p,selectedItemIds:Pr(t.selectedElements,p)}}const f=J1([...t.selectedConnectors,...l]);return{...t,selectedElements:t.selectedElements,selectedConnectors:f,selectedItemIds:Pr(t.selectedElements,f)}}const c=l;return{...t,selectedElements:[],selectedConnectors:c,selectedItemIds:Pr([],c)}},Y_=t=>{const o=t.elements.map(i=>i.id),a=t.connectors.map(i=>i.id);return{...t,selectedElements:o,selectedConnectors:a,selectedItemIds:Pr(o,a)}},$_=t=>t.selectedElements.length===0&&t.selectedConnectors.length===0?t:{...t,selectedElements:[],selectedConnectors:[],selectedItemIds:[]};let Zx=0;function ou(t,o){return Zx+=1,{state:t,description:o||"Canvas updated",timestamp:Date.now(),id:`history-${Zx}`}}function U_({initialState:t,onStateChange:o,maxHistorySize:a=50}){const[i,l]=x.useState(()=>({past:[],present:ou(t,"Initial state"),future:[]})),c=x.useRef(!1);x.useEffect(()=>{l({past:[],present:ou(t,"Initial state"),future:[]})},[]);const u=x.useCallback((A,S)=>{l(R=>{const M=R.present.state;let E=!1;M.elements.length===A.elements.length&&(E=M.elements.every((F,X)=>F===A.elements[X]));let k=!1;M.connectors.length===A.connectors.length&&(k=M.connectors.every((F,X)=>F===A.connectors[X]));const I=M.selectedElements.length===A.selectedElements.length&&M.selectedElements.every((F,X)=>F===A.selectedElements[X]),z=M.selectedConnectors.length===A.selectedConnectors.length&&M.selectedConnectors.every((F,X)=>F===A.selectedConnectors[X]),D=M.zoom===A.zoom&&M.panX===A.panX&&M.panY===A.panY;if(E&&k&&I&&z&&D)return R;const j=ou(A,S),$=[...R.past,R.present];return $.length>a&&$.shift(),{past:$,present:j,future:[]}})},[a]),f=x.useCallback(()=>{l(A=>{if(A.past.length===0)return A;const S=A.past[A.past.length-1],R=A.past.slice(0,A.past.length-1);return c.current=!0,o(S.state),{past:R,present:S,future:[A.present,...A.future]}})},[o]),p=x.useCallback(()=>{l(A=>{if(A.future.length===0)return A;const S=A.future[0],R=A.future.slice(1);return c.current=!0,o(S.state),{past:[...A.past,A.present],present:S,future:R}})},[o]),h=x.useCallback((A,S)=>{c.current=!1,l({past:[],present:ou(A,S||"Initial state"),future:[]})},[]),g=x.useCallback(()=>i,[i]),m=x.useCallback(A=>{c.current=!1,l({past:A.past.map(S=>({...S})),present:{...A.present},future:A.future.map(S=>({...S}))}),o(A.present.state)},[o]),b=[...i.past.map(A=>({id:A.id,description:A.description,timestamp:A.timestamp,position:"past"})),{id:i.present.id,description:i.present.description,timestamp:i.present.timestamp,position:"present"},...i.future.map(A=>({id:A.id,description:A.description,timestamp:A.timestamp,position:"future"}))],w=i.past.length,C=x.useCallback(A=>{l(S=>{if(S.present.id===A)return S;const R=S.past.findIndex(E=>E.id===A);if(R>=0){const E=S.past[R],k=S.past.slice(0,R),z=[...S.past.slice(R+1),S.present,...S.future];return c.current=!0,o(E.state),{past:k,present:E,future:z}}const M=S.future.findIndex(E=>E.id===A);if(M>=0){const E=S.future[M],k=S.future.slice(0,M),I=S.future.slice(M+1),z=[...S.past,S.present,...k];return c.current=!0,o(E.state),{past:z,present:E,future:I}}return S})},[o]);return{undo:f,redo:p,canUndo:i.past.length>0,canRedo:i.future.length>0,recordState:u,resetHistory:h,historyEntries:b,historyIndex:w,jumpToHistoryEntry:C,getHistoryState:g,setHistoryState:m}}const X_=50;function Q_(t){const{canvasState:o,setCanvasStateInternal:a}=t,i=x.useRef(o);x.useEffect(()=>{i.current=o},[o]);const l=x.useRef(!1),c=x.useRef(null),u=x.useRef(!1),f=x.useCallback(()=>{const I=c.current;I&&(a(()=>I,{persist:!0}),c.current=null)},[a]);x.useEffect(()=>()=>{f()},[f]);const p=x.useCallback(I=>{const z=!l.current,D=u.current?i.current:Gn(i.current),j=typeof I=="function"?I(D):I,$=u.current?j:Gn(j);return z?c.current=null:c.current=$,i.current=$,a($,{persist:z}),$},[a]),h=U_({initialState:o,onStateChange:p,maxHistorySize:X_}),g=x.useRef(o),m=x.useRef(null),b=x.useRef("Edit elements"),w=x.useRef(null);x.useEffect(()=>{const I=JSON.stringify({elements:g.current.elements,connectors:g.current.connectors}),z=JSON.stringify({elements:o.elements,connectors:o.connectors});I!==z&&!u.current&&(g.current=o)},[o]);const C=x.useCallback((I="Edit elements")=>{u.current=!0,m.current=i.current,b.current=I,l.current=!0,c.current=null},[]),A=x.useCallback(()=>{const I=c.current??i.current,z=m.current,D=b.current;c.current=null,l.current=!1,u.current=!1,m.current=null,b.current="Edit elements";const j={...I,elements:I.elements.map(F=>({...F,properties:{...F.properties,posX:F.x,posY:F.y,width:F.width,height:F.height}}))},$=Gn(j);if(z){const F=JSON.stringify({elements:z.elements,connectors:z.connectors}),X=JSON.stringify({elements:$.elements,connectors:$.connectors});F!==X&&(h.recordState($,D),g.current=$)}a($,{persist:!0}),i.current=$},[h,a]),S=x.useCallback(I=>{w.current=I,l.current||f()},[f]),R=x.useCallback(I=>{p(z=>{const D=typeof I=="function"?I(z):I,j=u.current?D:Gn(D);if(!u.current){const $=JSON.stringify({elements:g.current.elements,connectors:g.current.connectors}),F=JSON.stringify({elements:j.elements,connectors:j.connectors});if($!==F){const X=w.current;X?(h.recordState(j,X),g.current=j):(h.recordState(j),g.current=j),w.current=null}}return j})},[h,p]),M=x.useCallback((I,z={})=>{const D=u.current?I:Gn(I);p(D);const j=Gn(D);u.current||(g.current=j,w.current=null),m.current=null,z.resetHistory&&(h.resetHistory(j,z.description),g.current=j)},[h,p]),E=x.useCallback(()=>{const I=h.getHistoryState(),z=Gn(i.current);return{past:I.past.map(D=>({...D,state:Gn(D.state)})),present:{...I.present,state:z},future:I.future.map(D=>({...D,state:Gn(D.state)}))}},[h]),k=x.useCallback(I=>{const z={past:I.past.map(j=>({...j,state:Gn(j.state)})),present:{...I.present,state:Gn(I.present.state)},future:I.future.map(j=>({...j,state:Gn(j.state)}))};h.setHistoryState(z);const D=Gn(z.present.state);p(D),g.current=D,m.current=null,u.current=!1,w.current=null},[h,p]);return{canvasStateRef:i,setCanvasState:R,replaceCanvasState:M,queueHistoryEntry:S,flushPendingPersistence:f,startTransaction:C,endTransaction:A,exportHistoryState:E,importHistoryState:k,undoRedo:h}}function F_(t,o){const[a,i]=x.useState(()=>{try{const c=window.localStorage.getItem(t);return c?JSON.parse(c):o}catch(c){return console.warn(`Error reading localStorage key "${t}":`,c),o}}),l=x.useCallback((c,u={})=>{const f=u.persist!==!1;try{c instanceof Function?i(p=>{const h=c(p);return f&&!po()&&window.localStorage.setItem(t,JSON.stringify(h)),h}):(i(c),f&&!po()&&window.localStorage.setItem(t,JSON.stringify(c)))}catch(p){console.warn(`Error setting localStorage key "${t}":`,p)}},[t]);return[a,l]}function G_(t){const o={elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0},[a,i]=F_(Zt("current-project"),t||o),l=x.useRef(null);x.useEffect(()=>{if(!t)return;const L=JSON.stringify({elements:t.elements,connectors:t.connectors});if(l.current===L)return;if(JSON.stringify({elements:a.elements,connectors:a.connectors})===L){l.current=L;return}i(t,{persist:!0}),l.current=L},[t,a.elements,a.connectors,i]),x.useEffect(()=>{a.elements.some(Y=>!Y.properties)&&i(Y=>Gn(Y),{persist:!0})},[a,i]);const c=x.useMemo(()=>Gn(a),[a]),{canvasStateRef:u,setCanvasState:f,replaceCanvasState:p,queueHistoryEntry:h,flushPendingPersistence:g,startTransaction:m,endTransaction:b,exportHistoryState:w,importHistoryState:C,undoRedo:A}=Q_({canvasState:c,setCanvasStateInternal:i}),S=x.useCallback((L,Y=!1)=>{f(q=>L_(q,L,Y))},[f]),R=x.useCallback((L,Y,q)=>{Y===0&&q===0||f(J=>j_(J,L,Y,q))},[f]),M=x.useCallback((L,Y=!1)=>{f(q=>H_(q,L,Y))},[f]),E=x.useCallback((L,Y,q)=>{Y===0&&q===0||f(J=>B_(J,L,Y,q))},[f]),k=x.useCallback(L=>{L.length&&f(Y=>P_(Y,L))},[f]),I=x.useCallback(L=>{L.length&&f(Y=>z_(Y,L))},[f]),z=x.useCallback((L,Y,q)=>{f(J=>{const{changed:oe,nextConnectors:le}=D_(J,L,Y,q);return oe?(h("Edit connector properties"),{...J,connectors:le}):J})},[h,f]),D=x.useCallback((L,Y)=>{h("Edit text"),f(q=>({...q,elements:q.elements.map(J=>J.id===L?{...J,text:Y}:J)}))},[f,h]),j=x.useCallback((L,Y)=>{const J=u.current.elements.find(ge=>ge.id===L);if(!J)return;const oe=typeof Y=="string"&&Y.trim().length>0?Y:void 0,le=typeof J.imageSrc=="string"&&J.imageSrc.trim().length>0?J.imageSrc:typeof J.properties?.imageSrc=="string"?J.properties.imageSrc:void 0,fe=!!(J.properties&&Object.prototype.hasOwnProperty.call(J.properties,"imageSrc"));le===oe&&!fe||(h("Update image"),f(ge=>{const Se=ge.elements.map(xe=>{if(xe.id!==L)return xe;let Te;if(xe.properties){const Ae=Object.entries(xe.properties).filter(([Oe])=>Oe!=="imageSrc");Ae.length>0&&(Te=Ae.reduce((Oe,[Le,Pe])=>(Oe[Le]=Pe,Oe),{}))}return{...xe,imageSrc:oe,properties:Te}}),De=Kt(ge.connectors,Se);return{...ge,elements:Se,connectors:De}}))},[h,f]),$=x.useCallback((L,Y,q)=>{h("Edit properties"),f(J=>{if(!J.selectedElements.includes(L)||!J.elements.some(fe=>fe.id===L))return J;const le=J.elements.map(fe=>fe.id===L?Dn.updateElement(fe,Y,q):fe);return{...J,elements:le,connectors:Kt(J.connectors,le)}})},[h,f]),F=x.useCallback(L=>{h("Reset properties"),f(Y=>{const q=Y.elements.map(J=>J.id===L?RT(J):J);return{...Y,elements:q,connectors:Kt(Y.connectors,q)}})},[h,f]),X=x.useCallback((L,Y)=>{L.length!==0&&(h("Paste properties"),f(q=>{const J=q.elements.map(oe=>L.includes(oe.id)?Dn.applyElementBatch(oe,Y):oe);return{...q,elements:J,connectors:Kt(q.connectors,J)}}))},[h,f]),Z=x.useCallback((L,Y)=>{L.length!==0&&(h("Paste properties"),f(q=>{const J=new Set(L),oe=q.connectors.map(le=>J.has(le.id)?Dn.applyConnectorProperties(le,Y):le);return{...q,connectors:Kt(oe,q.elements)}}))},[h,f]),K=x.useCallback(L=>{L.length!==0&&(h("Reset properties"),f(Y=>{const q=new Set(L),J=Dn.getConnectorDefaults(),oe=Y.connectors.map(le=>q.has(le.id)?Dn.applyConnectorProperties(le,J):le);return{...Y,connectors:Kt(oe,Y.elements)}}))},[h,f]),te=x.useCallback(()=>{f(L=>{const Y=L.selectedElements.length>0,q=L.selectedConnectors.length>0;if(!Y&&!q)return L;const J=new Set(L.selectedElements),oe=new Set(L.selectedConnectors);h("Delete selection");const le=Y?L.elements.filter(De=>!J.has(De.id)):L.elements,fe=q?L.connectors.filter(De=>!oe.has(De.id)):L.connectors,ge=J.size>0?fe.map(De=>{let xe=De.startAttachment??null,Te=De.endAttachment??null,Ae=!1;return xe&&J.has(xe.elementId)&&(xe=null,Ae=!0),Te&&J.has(Te.elementId)&&(Te=null,Ae=!0),Ae?{...De,startAttachment:xe,endAttachment:Te}:De}):fe,Se=Kt(ge,le);return{...L,elements:le,connectors:Se,selectedElements:[],selectedConnectors:[],selectedItemIds:[]}})},[f,h]),Q=x.useCallback((L,Y)=>{f(q=>{const J=N_(q,L,Y);return J===q?q:(h("Move selection"),J)})},[f,h]),_=x.useCallback(L=>{L.length<2||f(Y=>{h("Group elements");const q=crypto.randomUUID(),J=new Set;return L.forEach(oe=>{const le=Y.elements.find(fe=>fe.id===oe);le?.groupId&&J.add(le.groupId)}),{...Y,elements:Y.elements.map(oe=>L.includes(oe.id)||oe.groupId&&J.has(oe.groupId)?{...oe,groupId:q}:oe)}})},[f,h]),H=x.useCallback(L=>{L&&f(Y=>(h("Ungroup elements"),{...Y,elements:Y.elements.map(q=>q.groupId===L?{...q,groupId:void 0}:q)}))},[f,h]),N=x.useCallback(()=>{f(L=>Y_(L))},[f]),P=x.useCallback(()=>{f(L=>$_(L))},[f]),O=x.useCallback(()=>{p({elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0},{resetHistory:!0,description:"Cleared canvas"})},[p]),U=x.useCallback(()=>u.current,[]);return{canvasState:c,actions:{getCanvasStateSnapshot:U,setCanvasState:f,replaceCanvasState:p,queueHistoryEntry:h,flushPendingPersistence:g,selectElement:S,selectConnector:M,moveElement:R,moveConnector:E,moveElementsTo:k,moveConnectorsTo:I,updateElementText:D,updateElementImage:j,updateElementProperty:$,updateConnectorProperty:z,resetElementStyling:F,applyPropertiesToElements:X,applyPropertiesToConnectors:Z,resetConnectorProperties:K,deleteSelectedElements:te,moveSelectedElements:Q,selectAll:N,clearSelection:P,clearCanvas:O,groupElements:_,ungroupElements:H,undo:A.undo,redo:A.redo,startTransaction:m,endTransaction:b,jumpToHistoryEntry:A.jumpToHistoryEntry,exportHistoryState:w,importHistoryState:C},canUndo:A.canUndo,canRedo:A.canRedo,historyEntries:A.historyEntries,historyIndex:A.historyIndex}}const $i=20;function W_({canvasState:t,setCanvasState:o}){const[a,i]=x.useState("drag"),[l,c]=x.useState(null),[u,f]=x.useState(!1),p=.1,h=x.useCallback(()=>{o(k=>{const I=Math.min(k.zoom+p,3);return{...k,zoom:Number(I.toFixed(4))}})},[o]),g=x.useCallback(()=>{o(k=>{const I=Math.max(k.zoom-p,.1);return{...k,zoom:Number(I.toFixed(4))}})},[o]),m=x.useCallback(k=>{const I=Math.min(Math.max(k,.1),3);o(z=>({...z,zoom:I}))},[o]),b=x.useCallback((k,I,z,D)=>{const j=Math.min(Math.max(k,.1),3);o($=>{const F=$.zoom,X=I-D.left-$i,Z=z-D.top-$i,K=X*(1/j-1/F)+$.panX,te=Z*(1/j-1/F)+$.panY;return{...$,zoom:j,panX:K,panY:te}})},[o]),w=x.useCallback((k,I)=>{o(z=>({...z,panX:k,panY:I}))},[o]),C=x.useCallback(k=>{i(k),k==="select"&&(c(null),f(!1))},[]),A=x.useCallback(()=>{f(!0)},[]),S=x.useCallback(k=>{c(k)},[]),R=x.useCallback(()=>{o(k=>({...k,zoom:1,panX:0,panY:0}))},[o]),M=x.useCallback(()=>{o(k=>{const I=k.elements;if(I.length===0)return{...k,zoom:1,panX:0,panY:0};let z=1/0,D=1/0,j=-1/0,$=-1/0;I.forEach(L=>{z=Math.min(z,L.x),D=Math.min(D,L.y),j=Math.max(j,L.x+L.width),$=Math.max($,L.y+L.height)});const F=j-z,X=$-D,K=document.querySelector('[data-canvas-wrapper="true"]')?.getBoundingClientRect(),te=K?K.width-$i:window.innerWidth-$i-280,Q=K?K.height-$i:window.innerHeight-$i-60,_=.9,H=te/F*_,N=Q/X*_,P=Math.min(Math.max(Math.min(H,N),.1),3),O=te/2/P-(z+j)/2,U=Q/2/P-(D+$)/2;return{...k,zoom:P,panX:O,panY:U}})},[o]),E=x.useCallback((k,I)=>{const z=[],D=[],j=Math.min(k.startX,k.endX),$=Math.max(k.startX,k.endX),F=Math.min(k.startY,k.endY),X=Math.max(k.startY,k.endY),Z=$-j,K=X-F;return(Z>5||K>5)&&(I.elements.forEach(Q=>{const _=Q.x,H=Q.x+Q.width,N=Q.y,P=Q.y+Q.height;_>=j&&H<=$&&N>=F&&P<=X&&z.push(Q.id)}),I.connectors.forEach(Q=>{CO(Q,k)&&D.push(Q.id)}),(z.length>0||D.length>0)&&i("drag")),c(null),f(!1),{elementIds:z,connectorIds:D}},[i]);return{zoom:t.zoom,panX:t.panX,panY:t.panY,canvasMode:a,selectionArea:l,isSelecting:u,actions:{zoomIn:h,zoomOut:g,setZoom:m,setZoomAtPoint:b,resetZoom:R,fitToScreen:M,updatePan:w,setMode:C,startSelection:A,updateSelectionArea:S,completeSelection:E}}}function q_({canvasState:t,setCanvasState:o,queueHistoryEntry:a}){const i=t.selectedElements.length>0||t.selectedConnectors.length>0,l=x.useCallback(m=>[...m.elements.map((w,C)=>({kind:"element",id:w.id,zIndex:typeof w.zIndex=="number"?w.zIndex:C,orderIndex:C})),...m.connectors.map((w,C)=>({kind:"connector",id:w.id,zIndex:typeof w.zIndex=="number"?w.zIndex:m.elements.length+C,orderIndex:m.elements.length+C}))].sort((w,C)=>w.zIndex===C.zIndex?w.orderIndex-C.orderIndex:w.zIndex-C.zIndex),[]),c=x.useCallback((m,b)=>{const w=new Map;b.forEach((S,R)=>{w.set(`${S.kind}:${S.id}`,R)});const C=m.elements.map(S=>{const R=`element:${S.id}`,M=w.get(R);return M===void 0?S:{...S,zIndex:M}}),A=m.connectors.map(S=>{const R=`connector:${S.id}`,M=w.get(R);return M===void 0?S:{...S,zIndex:M}});return{...m,elements:C,connectors:A}},[]),u=x.useCallback(()=>{const m=new Set;return t.selectedElements.forEach(b=>m.add(`element:${b}`)),t.selectedConnectors.forEach(b=>m.add(`connector:${b}`)),m},[t.selectedElements,t.selectedConnectors]),f=x.useCallback(()=>{i&&(a("Send items to back"),o(m=>{const b=l(m),w=u(),C=b.filter(R=>w.has(`${R.kind}:${R.id}`));if(C.length===0)return m;const A=b.filter(R=>!w.has(`${R.kind}:${R.id}`)),S=[...C,...A].map((R,M)=>({...R,zIndex:M}));return c(m,S)}))},[i,a,o,l,u,c]),p=x.useCallback(()=>{i&&(a("Bring items to front"),o(m=>{const b=l(m),w=u(),C=b.filter(R=>w.has(`${R.kind}:${R.id}`));if(C.length===0)return m;const S=[...b.filter(R=>!w.has(`${R.kind}:${R.id}`)),...C].map((R,M)=>({...R,zIndex:M}));return c(m,S)}))},[i,a,o,l,u,c]),h=x.useCallback(()=>{i&&(a("Bring items forward"),o(m=>{const b=l(m),w=u(),C=S=>`${S.kind}:${S.id}`;for(let S=b.length-2;S>=0;S--){const R=b[S],M=b[S+1],E=w.has(C(R)),k=w.has(C(M));E&&!k&&([b[S],b[S+1]]=[M,R])}const A=b.map((S,R)=>({...S,zIndex:R}));return c(m,A)}))},[i,a,o,l,u,c]),g=x.useCallback(()=>{i&&(a("Send items backward"),o(m=>{const b=l(m),w=u(),C=S=>`${S.kind}:${S.id}`;for(let S=1;S<b.length;S++){const R=b[S],M=b[S-1],E=w.has(C(R)),k=w.has(C(M));E&&!k&&([b[S-1],b[S]]=[R,M])}const A=b.map((S,R)=>({...S,zIndex:R}));return c(m,A)}))},[i,a,o,l,u,c]);return{sendToBack:f,sendToFront:p,bringForward:h,bringBack:g}}const Kx=50,Jx=30;function V_({setCanvasState:t,zoom:o,onTransactionStart:a,onTransactionEnd:i}){const[l,c]=x.useState(!1),[u,f]=x.useState(null),[p,h]=x.useState(null),[g,m]=x.useState(null),[b,w]=x.useState(null),C=x.useRef(null),A=x.useCallback((M,E,k,I)=>{a?.("Resize element"),c(!0),f(M),h(E),m(k),w({width:I.width,height:I.height,x:I.x,y:I.y})},[a]),S=x.useCallback(M=>{!l||!u||!p||!g||!b||(C.current!==null&&cancelAnimationFrame(C.current),C.current=requestAnimationFrame(()=>{const E=(M.x-g.x)/o,k=(M.y-g.y)/o;t(I=>{const z=I.elements.find(Y=>Y.id===u);if(!z)return I;const D=z.constraints??qh[z.type],j=D?.minWidth??Kx,$=D?.minHeight??Jx;let F=b.width,X=b.height;switch(p){case"nw":F=b.width-E,X=b.height-k;break;case"ne":F=b.width+E,X=b.height-k;break;case"sw":F=b.width-E,X=b.height+k;break;case"se":F=b.width+E,X=b.height+k;break;case"n":X=b.height-k;break;case"s":X=b.height+k;break;case"w":F=b.width-E;break;case"e":F=b.width+E;break}const Z=!!z.properties?.constrainRatio,K=b.height!==0?b.width/b.height:null;let te=Math.max(F,j),Q=Math.max(X,$);if(Z&&K&&Number.isFinite(K)&&K>0){const Y=p.includes("w")||p.includes("e"),q=p.includes("n")||p.includes("s"),J=le=>{let fe=Math.max(le,j),ge=fe/K;return ge<$&&(ge=$,fe=ge*K),{width:fe,height:ge}},oe=le=>{let fe=Math.max(le,$),ge=fe*K;return ge<j&&(ge=j,fe=ge/K),{width:ge,height:fe}};if(Y&&!q){const le=J(F);te=le.width,Q=le.height}else if(!Y&&q){const le=oe(X);te=le.width,Q=le.height}else if(Y&&q){const le=J(F),fe=oe(X),ge=Math.abs(le.width-b.width),Se=Math.abs(fe.height-b.height);ge>=Se?(te=le.width,Q=le.height):(te=fe.width,Q=fe.height)}else{const le=J(F);te=le.width,Q=le.height}}te=Math.round(te),Q=Math.round(Q);const _=b.x,H=b.y,N=b.x+b.width,P=b.y+b.height;let O=z.x,U=z.y;if(Z){const Y=p.includes("w")&&!p.includes("e"),q=p.includes("n")&&!p.includes("s");O=Y?N-te:_,U=q?P-Q:H}else p.includes("w")?O=N-te:p.includes("e")&&(O=_),p.includes("n")?U=P-Q:p.includes("s")&&(U=H);const L=I.elements.map(Y=>Y.id===u?{...Y,x:O,y:U,width:te,height:Q,properties:{...Y.properties,posX:O,posY:U,width:te,height:Q}}:Y);return{...I,elements:L,connectors:Kt(I.connectors,L)}})}))},[l,u,p,g,b,o,t]),R=x.useCallback(()=>{u&&t(M=>{const E=M.elements.map(k=>{if(k.id!==u)return k;const I=k.constraints??qh[k.type],z=I?.minWidth??Kx,D=I?.minHeight??Jx,j=Math.max(Math.round(k.width),z),$=Math.max(Math.round(k.height),D),F={width:j,height:$,posX:Math.round(k.x),posY:Math.round(k.y)};return M1(k,F)});return{...M,elements:E,connectors:Kt(M.connectors,E)}}),i?.(),c(!1),f(null),h(null),m(null),w(null)},[i,u,p,t]);return x.useEffect(()=>{if(!l)return;const M=k=>{S({x:k.clientX,y:k.clientY})},E=()=>{R()};return document.addEventListener("mousemove",M),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E),C.current!==null&&(cancelAnimationFrame(C.current),C.current=null)}},[l,S,R]),{isResizing:l,resizeElementId:u,resizeHandle:p,resizeStartPos:g,resizeStartSize:b,actions:{handleResizeStart:A,handleResizeMove:S,handleResizeEnd:R}}}function Z_({setCanvasState:t,zoom:o,onTransactionStart:a,onTransactionEnd:i}){const[l,c]=x.useState(!1),[u,f]=x.useState(null),[p,h]=x.useState(null),[g,m]=x.useState(null),[b,w]=x.useState(null),[C,A]=x.useState(!1),[S,R]=x.useState({elementId:null,point:null}),[M,E]=x.useState({x:0,y:0}),k=x.useRef(null),I=x.useCallback((j,$,F,X)=>{a?.("Resize connector"),c(!0),f(j),h($),m(F),A(!1),R({elementId:null,point:null}),E(X?.pointerOffset??{x:0,y:0}),t(Z=>{const K=Z.connectors.findIndex(N=>N.id===j);if(K===-1)return Z;const te=Z.connectors[K],Q=$==="start"?te.startPoint:te.endPoint;w(Q);const _={...te,startAttachment:$==="start"?null:te.startAttachment??null,endAttachment:$==="end"?null:te.endAttachment??null},H=[...Z.connectors];return H[K]=_,{...Z,connectors:Kt(H,Z.elements)}})},[a,t]),z=x.useCallback(j=>{!l||!u||!p||!g||!b||(k.current!==null&&cancelAnimationFrame(k.current),k.current=requestAnimationFrame(()=>{const $=(j.x-g.x)/o,F=(j.y-g.y)/o,X=$+M.x,Z=F+M.y,K=b.x+X,te=b.y+Z;let Q={elementId:null,point:null};t(_=>{const H=_.connectors.map(N=>{if(N.id!==u)return N;const P=qu(_.elements,{x:K,y:te}),O=P?P.position:{x:K,y:te},U=we(O),L=P?P.attachment:null;return Q=P?{elementId:P.elementId??null,point:U}:{elementId:null,point:null},A(Y=>Y===!!P?Y:!!P),p==="start"?{...N,startPoint:U,startAttachment:L,endAttachment:N.endAttachment??null}:{...N,endPoint:U,endAttachment:L,startAttachment:N.startAttachment??null}});return{..._,connectors:Kt(H,_.elements)}}),R(Q)}))},[l,u,p,g,b,M,t,o]),D=x.useCallback(()=>{k.current!==null&&(cancelAnimationFrame(k.current),k.current=null),c(!1),f(null),h(null),m(null),w(null),A(!1),R({elementId:null,point:null}),E({x:0,y:0}),i?.()},[i]);return x.useEffect(()=>{if(!l)return;const j=F=>{z({x:F.clientX,y:F.clientY})},$=()=>{D()};return document.addEventListener("mousemove",j),document.addEventListener("mouseup",$),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",$)}},[l,z,D]),x.useEffect(()=>()=>{k.current!==null&&cancelAnimationFrame(k.current)},[]),{isResizing:l,resizeConnectorId:u,resizeEndpoint:p,resizeStartPos:g,resizeOriginalPoint:b,resizeHasAnchorPreview:C,resizeAnchorPreview:S,pointerOffset:M,actions:{handleResizeStart:I,handleResizeMove:z,handleResizeEnd:D}}}const K_={elements:[],connectors:[]};function J_({canvasState:t,setCanvasState:o,queueHistoryEntry:a}){const[i,l]=x.useState(K_),[c,u]=x.useState(0),f=x.useCallback(m=>{l(m),u(0)},[]),p=x.useCallback(()=>{const m=t.elements.filter(w=>t.selectedElements.includes(w.id)),b=t.connectors.filter(w=>t.selectedConnectors.includes(w.id));m.length===0&&b.length===0||(l({elements:m,connectors:b}),u(0),console.log(`Copied ${m.length} element(s) and ${b.length} connector(s) to clipboard`))},[t]),h=x.useCallback(()=>{const m=t.elements.filter(w=>t.selectedElements.includes(w.id)),b=t.connectors.filter(w=>t.selectedConnectors.includes(w.id));m.length===0&&b.length===0||(l({elements:m,connectors:b}),u(0),a("Cut items"),o(w=>({...w,...(()=>{const C=new Set(w.selectedElements),A=new Set(w.selectedConnectors),S=C.size?w.elements.filter(k=>!C.has(k.id)):w.elements,R=A.size?w.connectors.filter(k=>!A.has(k.id)):w.connectors,M=C.size?R.map(k=>{let I=k.startAttachment??null,z=k.endAttachment??null,D=!1;return I&&C.has(I.elementId)&&(I=null,D=!0),z&&C.has(z.elementId)&&(z=null,D=!0),D?{...k,startAttachment:I,endAttachment:z}:k}):R,E=Kt(M,S);return{elements:S,connectors:E,selectedElements:[],selectedConnectors:[],selectedItemIds:[]}})()})),console.log(`Cut ${m.length} element(s) and ${b.length} connector(s) to clipboard`))},[t,a,o]),g=x.useCallback(()=>{if(i.elements.length===0&&i.connectors.length===0)return;const m=c+1,b=20*m,w=20*m,C=new Map;i.elements.forEach(R=>{R.groupId&&!C.has(R.groupId)&&C.set(R.groupId,crypto.randomUUID())});const A=new Map,S=i.elements.map(R=>{const M=to();return A.set(R.id,M),ts({...R,id:M,x:R.x+b,y:R.y+w,groupId:R.groupId?C.get(R.groupId):void 0})});a("Paste items"),o(R=>{let M=_u(R);const E=S.map($=>({...$,zIndex:M++})),k=[...R.elements,...E],I=i.connectors.map($=>{const F=to(),X=Q=>{if(!Q)return null;const _=A.get(Q.elementId);return _?{...Q,elementId:_}:Q},Z=X($.startAttachment??null),K=X($.endAttachment??null);return{...$,id:F,startPoint:we({x:$.startPoint.x+b,y:$.startPoint.y+w}),endPoint:we({x:$.endPoint.x+b,y:$.endPoint.y+w}),startAttachment:Z,endAttachment:K,zIndex:M++}}),z=Kt([...R.connectors,...I],k),D=I.map($=>$.id),j=E.map($=>$.id);return{...R,elements:k,connectors:z,selectedElements:j,selectedConnectors:D,selectedItemIds:Pr(j,D)}}),u(R=>R+1),console.log(`Pasted ${S.length} element(s) and ${i.connectors.length} connector(s) from clipboard (paste #${m})`)},[i,c,a,o]);return{clipboard:i,actions:{copy:p,cut:h,paste:g},testHooks:{setSnapshot:f}}}const Du="#ffffff",va=10,kh=253,eD=[{description:"PNG images",accept:{"image/png":[".png"]}}];function tD(t){const o=window.getComputedStyle(t),a=t.scrollWidth||parseFloat(o.width)||t.clientWidth||0,i=t.scrollHeight||parseFloat(o.height)||t.clientHeight||0,l=Math.max(1,a||2e3),c=Math.max(1,i||2e3),u=document.createElement("div");u.style.position="fixed",u.style.left="0",u.style.top="0",u.style.pointerEvents="none",u.style.opacity="0",u.style.zIndex="-1000",u.style.width=`${l}px`,u.style.height=`${c}px`,u.style.background=Du,u.style.overflow="visible";const f=t.cloneNode(!0);f.style.transform="none",f.style.transformOrigin="0 0",f.style.width=`${l}px`,f.style.height=`${c}px`,f.style.background=Du,f.style.overflow="visible",u.appendChild(f),document.body.appendChild(u);const p=()=>{u.remove()},h=Array.from(f.querySelectorAll('[data-element-container="true"]')),g=Array.from(f.querySelectorAll('[data-connector-container="true"]'));return{exportContainer:u,clonedContent:f,elementContainers:h,connectorContainers:g,cleanup:p,effectiveWidth:l,effectiveHeight:c}}const nD=(t,o)=>{if(!o)return t;const a=o.blur+Math.max(o.spread,0),i=Math.max(0,a-o.offsetX),l=Math.max(0,a+o.offsetX),c=Math.max(0,a-o.offsetY),u=Math.max(0,a+o.offsetY);return{left:t.left-i,top:t.top-c,width:t.width+i+l,height:t.height+c+u}},oD=t=>{const o=t.getContext("2d");if(!o)throw new Error("Failed to get canvas context");const{width:a,height:i}=t,{data:l}=o.getImageData(0,0,a,i);let c=a,u=i,f=-1,p=-1;for(let h=0;h<i;h+=1)for(let g=0;g<a;g+=1){const m=(h*a+g)*4,b=l[m],w=l[m+1],C=l[m+2],A=l[m+3];A>0&&(b<kh||w<kh||C<kh||A<255)&&(g<c&&(c=g),h<u&&(u=h),g>f&&(f=g),h>p&&(p=h))}return f===-1||p===-1?null:{minX:c,minY:u,maxX:f,maxY:p}},rD=(t,o,a,i,l)=>{const c=Math.max(0,i-o),u=Math.max(0,l-a);if(c<=0||u<=0)throw new Error("Invalid crop dimensions for exported image");const f=document.createElement("canvas");f.width=c,f.height=u;const p=f.getContext("2d");if(!p)throw new Error("Failed to create cropped canvas context");return p.drawImage(t,o,a,c,u,0,0,c,u),f},aD=(t,o)=>{const a=oD(t),i=t.getBoundingClientRect(),l=o?.rootWidth??i.width??t.width,c=o?.rootHeight??i.height??t.height,u=l>0?t.width/l:1,f=c>0?t.height/c:1,p=va*u,h=va*f;let g=null,m=null,b=null,w=null;if(a?(g=a.minX,m=a.minY,b=a.maxX,w=a.maxY):o&&(g=o.contentLeft*u,m=o.contentTop*f,b=(o.contentLeft+o.contentWidth)*u,w=(o.contentTop+o.contentHeight)*f),g===null||m===null||b===null||w===null||b<g||w<m)throw new Error("Failed to detect content in exported image");const C=Math.max(0,Math.floor(g-p)),A=Math.max(0,Math.floor(m-h)),S=Math.min(t.width,Math.ceil(b+p)),R=Math.min(t.height,Math.ceil(w+h));return rD(t,C,A,S,R)},iD=(t,o)=>{const a=o?.rootWidth??t.width;if(a<=0)return 1;const i=t.width/a;return Number.isFinite(i)&&i>0?i:1};function Ge(t,o=0){if(t==null)return o;const a=Number(t);return Number.isFinite(a)?a:o}const eb=(t,o=!0)=>{const a=t.querySelector('[data-element-canvas="true"]');if(!a)return;const i=Math.max(1,Math.min(window.devicePixelRatio||1,3)),l=Math.max(1,Math.round(a.width/i)),c=Math.max(1,Math.round(a.height/i)),u=Ge(t.getAttribute("data-element-width"),l),f=Ge(t.getAttribute("data-element-height"),c),p=uO(a,{width:u,height:f});Y1(a,p.renderOptions,p.textOptions,o,i,p.decorations);const h=t.querySelector('[data-element-shadow-canvas="true"]');if(h){const w=dO(h),C=$1(h,p.renderOptions,w,i);h.style.left=`${-C.left}px`,h.style.top=`${-C.top}px`,L1(h,C)}const g=t.getAttribute("data-element-text-colour"),m=t.getAttribute("data-element-background"),b=t.getAttribute("data-element-border-colour");g&&(t.setAttribute("data-element-text-colour-original",g),t.style.color="transparent"),m&&t.style.setProperty("--element-background","transparent"),b&&t.style.setProperty("--element-border","0px solid transparent")},ru=t=>{if(t===null)return null;const o=Number(t);return Number.isFinite(o)?o:null};function eA(t,o,a,i,l,c){const u=ru(t.getAttribute(o)),f=ru(t.getAttribute(a)),p=ru(t.getAttribute(i)),h=ru(t.getAttribute(l));if(u!==null&&f!==null&&p!==null&&h!==null)return{left:u,top:f,width:p,height:h};const g=t.getBoundingClientRect(),m=g.left-c.left,b=g.top-c.top;return{left:m,top:b,width:g.width,height:g.height}}function sD(t,o){const a=new Map;return t.forEach(i=>{if(i.style.display==="none")return;const l=eA(i,"data-element-left","data-element-top","data-element-width","data-element-height",o);if(!l)return;const c=i.getAttribute("data-element-base-shadow"),u=Iu(c);a.set(i,{actual:l,extended:nD(l,u)});const f=i.getAttribute("data-element-base-border"),p=i.getAttribute("data-element-base-shadow");i.getAttribute("data-element-selected")==="true"&&f&&(i.style.border=f),p?i.style.boxShadow=p:i.style.boxShadow="none";const g=window.getComputedStyle(i);if(!!!i.getAttribute("data-shape"))eb(i,!0);else{const R=i.querySelector('[data-element-shadow-canvas="true"]'),M=i.getAttribute("data-element-type");if(R&&M){const E=Ge(i.getAttribute("data-element-width"),i.clientWidth),k=Ge(i.getAttribute("data-element-height"),i.clientHeight),I=Ge(i.getAttribute("data-element-stroke-width"),0),z=i.getAttribute("data-element-background")??"#ffffff",D=i.getAttribute("data-element-border-colour")??"#6c757d",j=Iu(p);H1(R,{shapeType:M,width:E,height:k,strokeWidth:I,fillColour:z,strokeColour:D,shadow:{colour:j?.color??"rgba(0,0,0,0)",offsetX:j?.offsetX??0,offsetY:j?.offsetY??0,blur:j?.blur??0,spread:j?.spread??0,enabled:!!j}})}}const b=g.display,w=g.alignItems;if(b==="flex"&&w==="center"){const R=i.getAttribute("data-element-height"),M=parseFloat(g.paddingLeft||"0"),E=parseFloat(g.paddingRight||"0"),k=parseFloat(g.fontSize||"14");if(R){const I=parseFloat(R);i.style.display="block",i.style.alignItems="initial";const z=k*1,D=(I-z)/2,j=k*.21;i.style.paddingTop=`${D-j}px`,i.style.paddingBottom=`${D+j}px`,i.style.paddingLeft=`${M}px`,i.style.paddingRight=`${E}px`,i.style.lineHeight=`${z}px`}}eb(i);const C=i.querySelector('[data-element-text-layer="true"]');C&&(C.style.visibility="hidden");const A=i.querySelector('[data-element-canvas="true"]');A&&(A.style.visibility="hidden",A.style.display="none");const S=i.querySelector('[data-element-shadow-canvas="true"]');S&&(S.style.visibility="hidden",S.style.display="none"),i.style.opacity="0"}),{basePositions:a}}function lD(t,o){const a=new Map;return t.forEach(i=>{if(i.style.display==="none")return;const l=i.querySelector('[data-connector-line="true"]'),c=i.querySelector('[data-connector-visual="true"]'),u=i.querySelector('[data-connector-shadow="true"]'),f=c??l,p=f?Ge(f.getAttribute("data-connector-base-line-width"),2):2,h=f?.getAttribute("data-connector-base-colour")??"#6c757d";if(l&&(l.style.height=`${p}px`,l.style.borderRadius=`${p/2}px`,l.style.backgroundColor=h),c){const m=Ge(i.getAttribute("data-connector-width"),c.width||0),b=Ge(i.getAttribute("data-connector-height"),c.height||0),w=Ge(i.getAttribute("data-connector-start-x")),C=Ge(i.getAttribute("data-connector-start-y")),A=Ge(i.getAttribute("data-connector-end-x")),S=Ge(i.getAttribute("data-connector-end-y")),R=Ge(i.getAttribute("data-connector-opacity"),1),M=!!i.querySelector('[data-connector-arrow-endpoint="start"]'),E=!!i.querySelector('[data-connector-arrow-endpoint="end"]'),{arrowLength:k,arrowWidth:I}=Hp(p),z=Ge(c.getAttribute("data-connector-shadow-offset-x"),0),D=Ge(c.getAttribute("data-connector-shadow-offset-y"),2),j=Ge(c.getAttribute("data-connector-shadow-blur"),4),$=c.getAttribute("data-connector-shadow-colour")??"rgba(0,0,0,0.25)";tp(c,m,b,{startX:w,startY:C,endX:A,endY:S,lineWidth:p,colour:h,opacity:R,hasStartArrow:M,hasEndArrow:E,arrowLength:k,arrowWidth:I,enableShadow:!1,shadowOffsetX:z,shadowOffsetY:D,shadowBlur:j,shadowColour:$}),u&&tp(u,m,b,{startX:w,startY:C,endX:A,endY:S,lineWidth:p,colour:h,opacity:R,hasStartArrow:M,hasEndArrow:E,arrowLength:k,arrowWidth:I,enableShadow:!0,shadowOffsetX:z,shadowOffsetY:D,shadowBlur:j,shadowColour:$})}const g=eA(i,"data-connector-left","data-connector-top","data-connector-width","data-connector-height",o);g&&a.set(i,g)}),a}function $p(t={}){const o=t.elementIds??[],a=t.connectorIds??[],i=document.querySelector('[data-canvas="true"]');if(!i)throw new Error("Canvas element not found");const l=i.querySelector('[data-canvas-content="true"]')??i.firstElementChild;if(!l)throw new Error("Canvas content not found");const{exportContainer:c,clonedContent:u,elementContainers:f,connectorContainers:p,cleanup:h,effectiveWidth:g,effectiveHeight:m}=tD(l),b=u.getBoundingClientRect(),{basePositions:w}=sD(f,b),C=lD(p,b),A=o.length>0||a.length>0;let S=null;if(!f.length&&!p.length)throw h(),new Error("No items to export");u.querySelectorAll("[data-resize-container]").forEach(Q=>{Q.style.display="none"}),u.querySelectorAll("[data-connector-handle]").forEach(Q=>{Q.style.display="none"}),u.querySelectorAll('[data-selection-rectangle="true"]').forEach(Q=>{Q.style.display="none"}),u.querySelectorAll("input, textarea").forEach(Q=>{Q.style.display="none"}),u.querySelectorAll("[data-zoom-controls],[data-floating-toolbar]").forEach(Q=>{Q.style.display="none"}),u.querySelectorAll('[data-connector-halo="true"]').forEach(Q=>{Q.style.display="none"}),u.querySelectorAll('[data-connector-hit-area="true"]').forEach(Q=>{Q.style.display="none"});const j=o.length>0,$=a.length>0;let F=f.length,X=0;if(j){const Q=new Set(o);F=0,f.forEach(_=>{const H=_.getAttribute("data-element-id")??"";Q.has(H)?(_.setAttribute("data-element-selected","false"),F+=1):_.style.display="none"})}else f.forEach(Q=>{$&&(Q.style.display="none"),Q.setAttribute("data-element-selected","false")}),$&&(F=0);if($){const Q=new Set(a);X=0,p.forEach(_=>{const H=_.getAttribute("data-connector-id")??"";Q.has(H)?X+=1:_.style.display="none"})}else p.forEach(Q=>{Q.setAttribute("data-connector-selected","false"),j&&(Q.style.display="none")});if((j||$)&&F+X===0)throw h(),new Error("Selected items not found in DOM");const Z=f.filter(Q=>Q.style.display!=="none").map(Q=>{const _=w.get(Q);return _?{element:Q,bounds:_}:null}).filter(Q=>!!Q),K=p.filter(Q=>Q.style.display!=="none").map(Q=>{const _=C.get(Q);return _?{connector:Q,bounds:_}:null}).filter(Q=>!!Q),te=[...Z.map(Q=>Q.bounds.extended),...K.map(Q=>Q.bounds)];if(te.length>0){const Q=Math.min(...te.map(J=>J.left)),_=Math.min(...te.map(J=>J.top)),H=Math.max(...te.map(J=>J.left+J.width)),N=Math.max(...te.map(J=>J.top+J.height)),P=va-Q,O=va-_;Z.forEach(({element:J,bounds:oe})=>{const le=oe.actual.left+P,fe=oe.actual.top+O;J.style.setProperty("--element-left",`${le}px`),J.style.setProperty("--element-top",`${fe}px`),J.setAttribute("data-element-left",`${le}`),J.setAttribute("data-element-top",`${fe}`);const ge=J.querySelector('[data-element-snapshot="true"]');ge&&(ge.style.left="0",ge.style.top="0",ge.style.width=`${oe.actual.width}px`,ge.style.height=`${oe.actual.height}px`)}),K.forEach(({connector:J,bounds:oe})=>{const le=oe.left+P,fe=oe.top+O;J.style.left=`${le}px`,J.style.top=`${fe}px`,J.setAttribute("data-connector-left",`${le}`),J.setAttribute("data-connector-top",`${fe}`)});const U=Math.max(1,H-Q+va*2),L=Math.max(1,N-_+va*2),Y=A?U:Math.max(U,g),q=A?L:Math.max(L,m);u.style.left="0px",u.style.top="0px",u.style.width=`${Y}px`,u.style.height=`${q}px`,c.style.width=`${Y}px`,c.style.height=`${q}px`,S={rootWidth:Y,rootHeight:q,contentLeft:va,contentTop:va,contentWidth:Math.max(0,H-Q),contentHeight:Math.max(0,N-_)}}return typeof window<"u"&&window[Tl]?.onPrepareExportSnapshot?.({root:u,selectedElementIds:o,selectedConnectorIds:a}),{root:u,cleanup:h,metrics:S}}function au(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Th={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/var tb;function cD(){return tb||(tb=1,(function(t,o){(function(a){t.exports=a()})(function(){return(function(){function a(i,l,c){function u(h,g){if(!l[h]){if(!i[h]){var m=typeof au=="function"&&au;if(!g&&m)return m(h,!0);if(f)return f(h,!0);var b=new Error("Cannot find module '"+h+"'");throw b.code="MODULE_NOT_FOUND",b}var w=l[h]={exports:{}};i[h][0].call(w.exports,function(C){var A=i[h][1][C];return u(A||C)},w,w.exports,a,i,l,c)}return l[h].exports}for(var f=typeof au=="function"&&au,p=0;p<c.length;p++)u(c[p]);return u}return a})()({1:[function(a,i,l){var c=a("multimath"),u=a("./mm_unsharp_mask"),f=a("./mm_resize");function p(h){var g=h||[],m={js:g.indexOf("js")>=0,wasm:g.indexOf("wasm")>=0};c.call(this,m),this.features={js:m.js,wasm:m.wasm&&this.has_wasm()},this.use(u),this.use(f)}p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.resizeAndUnsharp=function(g,m){var b=this.resize(g,m);return g.unsharpAmount&&this.unsharp_mask(b,g.toWidth,g.toHeight,g.unsharpAmount,g.unsharpRadius,g.unsharpThreshold),b},i.exports=p},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(a,i,l){function c(m){return m<0?0:m>255?255:m}function u(m){return m>=0?m:0}function f(m,b,w,C,A,S){var R,M,E,k,I,z,D,j,$,F,X,Z=0,K=0;for($=0;$<C;$++){for(I=0,F=0;F<A;F++){for(z=S[I++],D=S[I++],j=Z+z*4|0,R=M=E=k=0;D>0;D--)X=S[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,M=M+X*m[j+1]|0,R=R+X*m[j]|0,j=j+4|0;b[K+3]=u(k>>7),b[K+2]=u(E>>7),b[K+1]=u(M>>7),b[K]=u(R>>7),K=K+C*4|0}K=($+1)*4|0,Z=($+1)*w*4|0}}function p(m,b,w,C,A,S){var R,M,E,k,I,z,D,j,$,F,X,Z=0,K=0;for($=0;$<C;$++){for(I=0,F=0;F<A;F++){for(z=S[I++],D=S[I++],j=Z+z*4|0,R=M=E=k=0;D>0;D--)X=S[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,M=M+X*m[j+1]|0,R=R+X*m[j]|0,j=j+4|0;R>>=7,M>>=7,E>>=7,k>>=7,b[K+3]=c(k+8192>>14),b[K+2]=c(E+8192>>14),b[K+1]=c(M+8192>>14),b[K]=c(R+8192>>14),K=K+C*4|0}K=($+1)*4|0,Z=($+1)*w*4|0}}function h(m,b,w,C,A,S){var R,M,E,k,I,z,D,j,$,F,X,Z,K=0,te=0;for(F=0;F<C;F++){for(z=0,X=0;X<A;X++){for(D=S[z++],j=S[z++],$=K+D*4|0,R=M=E=k=0;j>0;j--)Z=S[z++],I=m[$+3],k=k+Z*I|0,E=E+Z*m[$+2]*I|0,M=M+Z*m[$+1]*I|0,R=R+Z*m[$]*I|0,$=$+4|0;E=E/255|0,M=M/255|0,R=R/255|0,b[te+3]=u(k>>7),b[te+2]=u(E>>7),b[te+1]=u(M>>7),b[te]=u(R>>7),te=te+C*4|0}te=(F+1)*4|0,K=(F+1)*w*4|0}}function g(m,b,w,C,A,S){var R,M,E,k,I,z,D,j,$,F,X,Z=0,K=0;for($=0;$<C;$++){for(I=0,F=0;F<A;F++){for(z=S[I++],D=S[I++],j=Z+z*4|0,R=M=E=k=0;D>0;D--)X=S[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,M=M+X*m[j+1]|0,R=R+X*m[j]|0,j=j+4|0;R>>=7,M>>=7,E>>=7,k>>=7,k=c(k+8192>>14),k>0&&(R=R*255/k|0,M=M*255/k|0,E=E*255/k|0),b[K+3]=k,b[K+2]=c(E+8192>>14),b[K+1]=c(M+8192>>14),b[K]=c(R+8192>>14),K=K+C*4|0}K=($+1)*4|0,Z=($+1)*w*4|0}}i.exports={convolveHor:f,convolveVert:p,convolveHorWithPre:h,convolveVertWithPre:g}},{}],3:[function(a,i,l){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(a,i,l){i.exports={name:"resize",fn:a("./resize"),wasm_fn:a("./resize_wasm"),wasm_src:a("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(a,i,l){var c=a("./resize_filter_gen"),u=a("./convolve"),f=u.convolveHor,p=u.convolveVert,h=u.convolveHorWithPre,g=u.convolveVertWithPre;function m(w,C,A){for(var S=3,R=C*A*4|0;S<R;){if(w[S]!==255)return!0;S=S+4|0}return!1}function b(w,C,A){for(var S=3,R=C*A*4|0;S<R;)w[S]=255,S=S+4|0}i.exports=function(C){var A=C.src,S=C.width,R=C.height,M=C.toWidth,E=C.toHeight,k=C.scaleX||C.toWidth/C.width,I=C.scaleY||C.toHeight/C.height,z=C.offsetX||0,D=C.offsetY||0,j=C.dest||new Uint8Array(M*E*4),$=typeof C.filter>"u"?"mks2013":C.filter,F=c($,S,M,k,z),X=c($,R,E,I,D),Z=new Uint16Array(M*R*4);return m(A,S,R)?(h(A,Z,S,R,M,F),g(Z,j,R,M,E,X)):(f(A,Z,S,R,M,F),p(Z,j,R,M,E,X),b(j,M,E)),j}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(a,i,l){var c=a("./resize_filter_info"),u=14;function f(p){return Math.round(p*((1<<u)-1))}i.exports=function(h,g,m,b,w){var C=c.filter[h].fn,A=1/b,S=Math.min(1,b),R=c.filter[h].win/S,M,E,k,I,z,D,j,$,F,X,Z,K,te,Q,_,H,N,P=Math.floor((R+1)*2),O=new Int16Array((P+2)*m),U=0,L=!O.subarray||!O.set;for(M=0;M<m;M++){for(E=(M+.5)*A+w,k=Math.max(0,Math.floor(E-R)),I=Math.min(g-1,Math.ceil(E+R)),z=I-k+1,D=new Float32Array(z),j=new Int16Array(z),$=0,F=k,X=0;F<=I;F++,X++)Z=C((F+.5-E)*S),$+=Z,D[X]=Z;for(K=0,X=0;X<D.length;X++)te=D[X]/$,K+=te,j[X]=f(te);for(j[m>>1]+=f(1-K),Q=0;Q<j.length&&j[Q]===0;)Q++;if(Q<j.length){for(_=j.length-1;_>0&&j[_]===0;)_--;if(H=k+Q,N=_-Q+1,O[U++]=H,O[U++]=N,!L)O.set(j.subarray(Q,_+1),U),U+=N;else for(X=Q;X<=_;X++)O[U++]=j[X]}else O[U++]=0,O[U++]=0}return O}},{"./resize_filter_info":7}],7:[function(a,i,l){var c={box:{win:.5,fn:function(f){return f<0&&(f=-f),f<.5?1:0}},hamming:{win:1,fn:function(f){if(f<0&&(f=-f),f>=1)return 0;if(f<11920929e-14)return 1;var p=f*Math.PI;return Math.sin(p)/p*(.54+.46*Math.cos(p/1))}},lanczos2:{win:2,fn:function(f){if(f<0&&(f=-f),f>=2)return 0;if(f<11920929e-14)return 1;var p=f*Math.PI;return Math.sin(p)/p*Math.sin(p/2)/(p/2)}},lanczos3:{win:3,fn:function(f){if(f<0&&(f=-f),f>=3)return 0;if(f<11920929e-14)return 1;var p=f*Math.PI;return Math.sin(p)/p*Math.sin(p/3)/(p/3)}},mks2013:{win:2.5,fn:function(f){return f<0&&(f=-f),f>=2.5?0:f>=1.5?-.125*(f-2.5)*(f-2.5):f>=.5?.25*(4*f*f-11*f+7):1.0625-1.75*f*f}}};i.exports={filter:c,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(a,i,l){var c=a("./resize_filter_gen");function u(m,b,w){for(var C=3,A=b*w*4|0;C<A;){if(m[C]!==255)return!0;C=C+4|0}return!1}function f(m,b,w){for(var C=3,A=b*w*4|0;C<A;)m[C]=255,C=C+4|0}function p(m){return new Uint8Array(m.buffer,0,m.byteLength)}var h=!0;try{h=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function g(m,b,w){if(h){b.set(p(m),w);return}for(var C=w,A=0;A<m.length;A++){var S=m[A];b[C++]=S&255,b[C++]=S>>8&255}}i.exports=function(b){var w=b.src,C=b.width,A=b.height,S=b.toWidth,R=b.toHeight,M=b.scaleX||b.toWidth/b.width,E=b.scaleY||b.toHeight/b.height,k=b.offsetX||0,I=b.offsetY||0,z=b.dest||new Uint8Array(S*R*4),D=typeof b.filter>"u"?"mks2013":b.filter,j=c(D,C,S,M,k),$=c(D,A,R,E,I),F=0,X=Math.max(w.byteLength,z.byteLength),Z=this.__align(F+X),K=A*S*4*2,te=this.__align(Z+K),Q=this.__align(te+j.byteLength),_=Q+$.byteLength,H=this.__instance("resize",_),N=new Uint8Array(this.__memory.buffer),P=new Uint32Array(this.__memory.buffer),O=new Uint32Array(w.buffer);P.set(O),g(j,N,te),g($,N,Q);var U=H.exports.convolveHV||H.exports._convolveHV;u(w,C,A)?U(te,Q,Z,C,A,S,R,1):(U(te,Q,Z,C,A,S,R,0),f(z,S,R));var L=new Uint32Array(z.buffer);return L.set(new Uint32Array(this.__memory.buffer,0,R*S)),z}},{"./resize_filter_gen":6}],9:[function(a,i,l){i.exports={name:"unsharp_mask",fn:a("./unsharp_mask"),wasm_fn:a("./unsharp_mask_wasm"),wasm_src:a("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(a,i,l){var c=a("glur/mono16");function u(f,p,h){for(var g=p*h,m=new Uint16Array(g),b,w,C,A,S=0;S<g;S++)b=f[4*S],w=f[4*S+1],C=f[4*S+2],A=b>=w&&b>=C?b:w>=C&&w>=b?w:C,m[S]=A<<8;return m}i.exports=function(p,h,g,m,b,w){var C,A,S,R,M;if(!(m===0||b<.5)){b>2&&(b=2);var E=u(p,h,g),k=new Uint16Array(E);c(k,h,g,b);for(var I=m/100*4096+.5|0,z=w<<8,D=h*g,j=0;j<D;j++)C=E[j],R=C-k[j],Math.abs(R)>=z&&(A=C+(I*R+2048>>12),A=A>65280?65280:A,A=A<0?0:A,C=C!==0?C:1,S=(A<<12)/C|0,M=j*4,p[M]=p[M]*S+2048>>12,p[M+1]=p[M+1]*S+2048>>12,p[M+2]=p[M+2]*S+2048>>12)}}},{"glur/mono16":18}],11:[function(a,i,l){i.exports=function(u,f,p,h,g,m){if(!(h===0||g<.5)){g>2&&(g=2);var b=f*p,w=b*4,C=b*2,A=b*2,S=Math.max(f,p)*4,R=32,M=0,E=w,k=E+C,I=k+A,z=I+A,D=z+S,j=this.__instance("unsharp_mask",w+C+A*2+S+R,{exp:Math.exp}),$=new Uint32Array(u.buffer),F=new Uint32Array(this.__memory.buffer);F.set($);var X=j.exports.hsv_v16||j.exports._hsv_v16;X(M,E,f,p),X=j.exports.blurMono16||j.exports._blurMono16,X(E,k,I,z,D,f,p,g),X=j.exports.unsharp||j.exports._unsharp,X(M,M,E,k,f,p,h,m),$.set(new Uint32Array(this.__memory.buffer,0,b))}}},{}],12:[function(a,i,l){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(a,i,l){var c=100;function u(f,p){this.create=f,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=p||2e3}u.prototype.acquire=function(){var f=this,p;return this.available.length!==0?p=this.available.pop():(p=this.create(),p.id=this.lastId++,p.release=function(){return f.release(p)}),this.acquired[p.id]=p,p},u.prototype.release=function(f){var p=this;delete this.acquired[f.id],f.lastUsed=Date.now(),this.available.push(f),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return p.gc()},c))},u.prototype.gc=function(){var f=this,p=Date.now();this.available=this.available.filter(function(h){return p-h.lastUsed>f.idle?(h.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return f.gc()},c):this.timeoutId=0},i.exports=u},{}],14:[function(a,i,l){var c=2;i.exports=function(f,p,h,g,m,b){var w=h/f,C=g/p,A=(2*b+c+1)/m;if(A>.5)return[[h,g]];var S=Math.ceil(Math.log(Math.min(w,C))/Math.log(A));if(S<=1)return[[h,g]];for(var R=[],M=0;M<S;M++){var E=Math.round(Math.pow(Math.pow(f,S-M-1)*Math.pow(h,M+1),1/S)),k=Math.round(Math.pow(Math.pow(p,S-M-1)*Math.pow(g,M+1),1/S));R.push([E,k])}return R}},{}],15:[function(a,i,l){var c=1e-5;function u(p){var h=Math.round(p);return Math.abs(p-h)<c?h:Math.floor(p)}function f(p){var h=Math.round(p);return Math.abs(p-h)<c?h:Math.ceil(p)}i.exports=function(h){var g=h.toWidth/h.width,m=h.toHeight/h.height,b=u(h.srcTileSize*g)-2*h.destTileBorder,w=u(h.srcTileSize*m)-2*h.destTileBorder;if(b<1||w<1)throw new Error("Internal error in pica: target tile width/height is too small.");var C,A,S,R,M,E,k=[],I;for(R=0;R<h.toHeight;R+=w)for(S=0;S<h.toWidth;S+=b)C=S-h.destTileBorder,C<0&&(C=0),M=S+b+h.destTileBorder-C,C+M>=h.toWidth&&(M=h.toWidth-C),A=R-h.destTileBorder,A<0&&(A=0),E=R+w+h.destTileBorder-A,A+E>=h.toHeight&&(E=h.toHeight-A),I={toX:C,toY:A,toWidth:M,toHeight:E,toInnerX:S,toInnerY:R,toInnerWidth:b,toInnerHeight:w,offsetX:C/g-u(C/g),offsetY:A/m-u(A/m),scaleX:g,scaleY:m,x:u(C/g),y:u(A/m),width:f(M/g),height:f(E/m)},k.push(I);return k}},{}],16:[function(a,i,l){function c(u){return Object.prototype.toString.call(u)}i.exports.isCanvas=function(f){var p=c(f);return p==="[object HTMLCanvasElement]"||p==="[object OffscreenCanvas]"||p==="[object Canvas]"},i.exports.isImage=function(f){return c(f)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(f){return c(f)==="[object ImageBitmap]"},i.exports.limiter=function(f){var p=0,h=[];function g(){p<f&&h.length&&(p++,h.shift()())}return function(b){return new Promise(function(w,C){h.push(function(){b().then(function(A){w(A),p--,g()},function(A){C(A),p--,g()})}),g()})}},i.exports.cib_quality_name=function(f){switch(f){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(f){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var p=f(100,100);return createImageBitmap(p,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(h){var g=h.width===10;return h.close(),p=null,g})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(f,p){if(typeof OffscreenCanvas>"u"){f(!1);return}function h(b){if(typeof createImageBitmap>"u"){b.postMessage(!1);return}Promise.resolve().then(function(){var w=new OffscreenCanvas(10,10),C=w.getContext("2d");return C.rect(0,0,1,1),createImageBitmap(w,0,0,1,1)}).then(function(){return b.postMessage(!0)},function(){return b.postMessage(!1)})}var g=btoa("(".concat(h.toString(),")(self);")),m=new Worker("data:text/javascript;base64,".concat(g));m.onmessage=function(b){return f(b.data)},m.onerror=p}).then(function(f){return f},function(){return!1})},i.exports.can_use_canvas=function(f){var p=!1;try{var h=f(2,1),g=h.getContext("2d"),m=g.createImageData(2,1);m.data[0]=12,m.data[1]=23,m.data[2]=34,m.data[3]=255,m.data[4]=45,m.data[5]=56,m.data[6]=67,m.data[7]=255,g.putImageData(m,0,0),m=null,m=g.getImageData(0,0,2,1),m.data[0]===12&&m.data[1]===23&&m.data[2]===34&&m.data[3]===255&&m.data[4]===45&&m.data[5]===56&&m.data[6]===67&&m.data[7]===255&&(p=!0)}catch{}return p},i.exports.cib_can_use_region=function(){return new Promise(function(f){if(typeof Image>"u"||typeof createImageBitmap>"u"){f(!1);return}var p=new Image;p.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",p.onload=function(){createImageBitmap(p,0,0,p.width,p.height).then(function(h){h.width===p.width&&h.height===p.height?f(!0):f(!1)},function(){return f(!1)})},p.onerror=function(){return f(!1)}})}},{}],17:[function(a,i,l){i.exports=function(){var c=a("./mathlib"),u;onmessage=function(p){var h=p.data.opts;if(!h.src&&h.srcBitmap){var g=new OffscreenCanvas(h.width,h.height),m=g.getContext("2d");m.drawImage(h.srcBitmap,0,0),h.src=m.getImageData(0,0,h.width,h.height).data,g.width=g.height=0,g=null,h.srcBitmap.close(),h.srcBitmap=null}u||(u=new c(p.data.features));var b=u.resizeAndUnsharp(h);postMessage({data:b},[b.buffer])}}},{"./mathlib":1}],18:[function(a,i,l){var c,u,f,p,h,g,m,b;function w(S){S<.5&&(S=.5);var R=Math.exp(.726*.726)/S,M=Math.exp(-R),E=Math.exp(-2*R),k=(1-M)*(1-M)/(1+2*R*M-E);return c=k,u=k*(R-1)*M,f=k*(R+1)*M,p=-k*E,h=2*M,g=-E,m=(c+u)/(1-h-g),b=(f+p)/(1-h-g),new Float32Array([c,u,f,p,h,g,m,b])}function C(S,R,M,E,k,I){var z,D,j,$,F,X,Z,K,te,Q,_,H,N,P;for(te=0;te<I;te++){for(X=te*k,Z=te,K=0,z=S[X],F=z*E[6],$=F,_=E[0],H=E[1],N=E[4],P=E[5],Q=0;Q<k;Q++)D=S[X],j=D*_+z*H+$*N+F*P,F=$,$=j,z=D,M[K]=$,K++,X++;for(X--,K--,Z+=I*(k-1),z=S[X],F=z*E[7],$=F,D=z,_=E[2],H=E[3],Q=k-1;Q>=0;Q--)j=D*_+z*H+$*N+F*P,F=$,$=j,z=D,D=S[X],R[Z]=M[K]+$,X--,K--,Z-=I}}function A(S,R,M,E){if(E){var k=new Uint16Array(S.length),I=new Float32Array(Math.max(R,M)),z=w(E);C(S,k,I,z,R,M),C(k,S,I,z,M,R)}}i.exports=A},{}],19:[function(a,i,l){var c=a("object-assign"),u=a("./lib/base64decode"),f=a("./lib/wa_detect"),p={js:!0,wasm:!0};function h(g){if(!(this instanceof h))return new h(g);var m=c({},p,g||{});if(this.options=m,this.__cache={},this.__init_promise=null,this.__modules=m.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}h.prototype.has_wasm=f,h.prototype.use=function(g){return this.__modules[g.name]=g,this.options.wasm&&this.has_wasm()&&g.wasm_fn?this[g.name]=g.wasm_fn:this[g.name]=g.fn,this},h.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var g=this;return this.__init_promise=Promise.all(Object.keys(g.__modules).map(function(m){var b=g.__modules[m];return!g.options.wasm||!g.has_wasm()||!b.wasm_fn||g.__wasm[m]?null:WebAssembly.compile(g.__base64decode(b.wasm_src)).then(function(w){g.__wasm[m]=w})})).then(function(){return g}),this.__init_promise},h.prototype.__base64decode=u,h.prototype.__reallocate=function(m){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(m/(64*1024))}),this.__memory;var b=this.__memory.buffer.byteLength;return b<m&&this.__memory.grow(Math.ceil((m-b)/(64*1024))),this.__memory},h.prototype.__instance=function(m,b,w){if(b&&this.__reallocate(b),!this.__wasm[m]){var C=this.__modules[m];this.__wasm[m]=new WebAssembly.Module(this.__base64decode(C.wasm_src))}if(!this.__cache[m]){var A={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[m]=new WebAssembly.Instance(this.__wasm[m],{env:c(A,w||{})})}return this.__cache[m]},h.prototype.__align=function(m,b){b=b||8;var w=m%b;return m+(w?b-w:0)},i.exports=h},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(a,i,l){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(f){for(var p=f.replace(/[\r\n=]/g,""),h=p.length,g=new Uint8Array(h*3>>2),m=0,b=0,w=0;w<h;w++)w%4===0&&w&&(g[b++]=m>>16&255,g[b++]=m>>8&255,g[b++]=m&255),m=m<<6|c.indexOf(p.charAt(w));var C=h%4*6;return C===0?(g[b++]=m>>16&255,g[b++]=m>>8&255,g[b++]=m&255):C===18?(g[b++]=m>>10&255,g[b++]=m>>2&255):C===12&&(g[b++]=m>>4&255),g}},{}],21:[function(a,i,l){var c;i.exports=function(){if(typeof c<"u"||(c=!1,typeof WebAssembly>"u"))return c;try{var f=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),p=new WebAssembly.Module(f),h=new WebAssembly.Instance(p,{});return h.exports.test(4)!==0&&(c=!0),c}catch{}return c}},{}],22:[function(a,i,l){var c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;function p(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}function h(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var m={},b=0;b<10;b++)m["_"+String.fromCharCode(b)]=b;var w=Object.getOwnPropertyNames(m).map(function(A){return m[A]});if(w.join("")!=="0123456789")return!1;var C={};return"abcdefghijklmnopqrst".split("").forEach(function(A){C[A]=A}),Object.keys(Object.assign({},C)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=h()?Object.assign:function(g,m){for(var b,w=p(g),C,A=1;A<arguments.length;A++){b=Object(arguments[A]);for(var S in b)u.call(b,S)&&(w[S]=b[S]);if(c){C=c(b);for(var R=0;R<C.length;R++)f.call(b,C[R])&&(w[C[R]]=b[C[R]])}}return w}},{}],23:[function(a,i,l){var c=arguments[3],u=arguments[4],f=arguments[5],p=JSON.stringify;i.exports=function(h,g){for(var m,b=Object.keys(f),w=0,C=b.length;w<C;w++){var A=b[w],S=f[A].exports;if(S===h||S&&S.default===h){m=A;break}}if(!m){m=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var R={},w=0,C=b.length;w<C;w++){var A=b[w];R[A]=A}u[m]=["function(require,module,exports){"+h+"(self); }",R]}var M=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[m]=m,u[M]=["function(require,module,exports){var f = require("+p(m)+");(f.default ? f.default : f)(self);}",E];var k={};I(M);function I(X){k[X]=!0;for(var Z in u[X][1]){var K=u[X][1][Z];k[K]||I(K)}}var z="("+c+")({"+Object.keys(k).map(function(X){return p(X)+":["+u[X][0]+","+p(u[X][1])+"]"}).join(",")+"},{},["+p(M)+"])",D=window.URL||window.webkitURL||window.mozURL||window.msURL,j=new Blob([z],{type:"text/javascript"});if(g&&g.bare)return j;var $=D.createObjectURL(j),F=new Worker($);return F.objectURL=$,F}},{}],"/index.js":[function(a,i,l){function c(_,H){return g(_)||h(_,H)||f(_,H)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(_,H){if(_){if(typeof _=="string")return p(_,H);var N=Object.prototype.toString.call(_).slice(8,-1);if(N==="Object"&&_.constructor&&(N=_.constructor.name),N==="Map"||N==="Set")return Array.from(_);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return p(_,H)}}function p(_,H){(H==null||H>_.length)&&(H=_.length);for(var N=0,P=new Array(H);N<H;N++)P[N]=_[N];return P}function h(_,H){var N=_==null?null:typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(N!=null){var P=[],O=!0,U=!1,L,Y;try{for(N=N.call(_);!(O=(L=N.next()).done)&&(P.push(L.value),!(H&&P.length===H));O=!0);}catch(q){U=!0,Y=q}finally{try{!O&&N.return!=null&&N.return()}finally{if(U)throw Y}}return P}}function g(_){if(Array.isArray(_))return _}var m=a("object-assign"),b=a("webworkify"),w=a("./lib/mathlib"),C=a("./lib/pool"),A=a("./lib/utils"),S=a("./lib/worker"),R=a("./lib/stepper"),M=a("./lib/tiler"),E=a("./lib/mm_resize/resize_filter_info"),k={},I=!1;try{typeof navigator<"u"&&navigator.userAgent&&(I=navigator.userAgent.indexOf("Safari")>=0)}catch{}var z=1;typeof navigator<"u"&&(z=Math.min(navigator.hardwareConcurrency||1,4));var D={tile:1024,concurrency:z,features:["js","wasm","ww"],idle:2e3,createCanvas:function(H,N){var P=document.createElement("canvas");return P.width=H,P.height=N,P}},j={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},$=!1,F=!1,X=!1,Z=!1,K=!1;function te(){return{value:b(S),destroy:function(){if(this.value.terminate(),typeof window<"u"){var H=window.URL||window.webkitURL||window.mozURL||window.msURL;H&&H.revokeObjectURL&&this.value.objectURL&&H.revokeObjectURL(this.value.objectURL)}}}}function Q(_){if(!(this instanceof Q))return new Q(_);this.options=m({},D,_||{});var H="lk_".concat(this.options.concurrency);this.__limit=k[H]||A.limiter(this.options.concurrency),k[H]||(k[H]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}Q.prototype.init=function(){var _=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),$=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?F=!0:this.debug("ImageBitmap does not support .close(), disabled"));var H=this.options.features.slice();if(H.indexOf("all")>=0&&(H=["cib","wasm","js","ww"]),this.__requested_features=H,this.__mathlib=new w(H),H.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var N=a("webworkify")(function(){});N.terminate(),this.features.ww=!0;var P="wp_".concat(JSON.stringify(this.options));k[P]?this.__workersPool=k[P]:(this.__workersPool=new C(te,this.options.idle),k[P]=this.__workersPool)}catch{}var O=this.__mathlib.init().then(function(q){m(_.features,q.features)}),U;F?U=A.cib_support(this.options.createCanvas).then(function(q){if(_.features.cib&&H.indexOf("cib")<0){_.debug("createImageBitmap() resize supported, but disabled by config");return}H.indexOf("cib")>=0&&(_.features.cib=q)}):U=Promise.resolve(!1),X=A.can_use_canvas(this.options.createCanvas);var L;F&&$&&H.indexOf("ww")!==-1?L=A.worker_offscreen_canvas_support():L=Promise.resolve(!1),L=L.then(function(q){Z=q});var Y=A.cib_can_use_region().then(function(q){K=q});return this.__initPromise=Promise.all([O,U,L,Y]).then(function(){return _}),this.__initPromise},Q.prototype.__invokeResize=function(_,H){var N=this;return H.__mathCache=H.__mathCache||{},Promise.resolve().then(function(){return N.features.ww?new Promise(function(P,O){var U=N.__workersPool.acquire();H.cancelToken&&H.cancelToken.catch(function(Y){return O(Y)}),U.value.onmessage=function(Y){U.release(),Y.data.err?O(Y.data.err):P(Y.data)};var L=[];_.src&&L.push(_.src.buffer),_.srcBitmap&&L.push(_.srcBitmap),U.value.postMessage({opts:_,features:N.__requested_features,preload:{wasm_nodule:N.__mathlib.__}},L)}):{data:N.__mathlib.resizeAndUnsharp(_,H.__mathCache)}})},Q.prototype.__extractTileData=function(_,H,N,P,O){if(this.features.ww&&Z&&(A.isCanvas(H)||K))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(P.srcImageBitmap||H,_.x,_.y,_.width,_.height).then(function(Y){return O.srcBitmap=Y,O});if(A.isCanvas(H))return P.srcCtx||(P.srcCtx=H.getContext("2d")),this.debug("Get tile pixel data"),O.src=P.srcCtx.getImageData(_.x,_.y,_.width,_.height).data,O;this.debug("Draw tile imageBitmap/image to temporary canvas");var U=this.options.createCanvas(_.width,_.height),L=U.getContext("2d");return L.globalCompositeOperation="copy",L.drawImage(P.srcImageBitmap||H,_.x,_.y,_.width,_.height,0,0,_.width,_.height),this.debug("Get tile pixel data"),O.src=L.getImageData(0,0,_.width,_.height).data,U.width=U.height=0,O},Q.prototype.__landTileData=function(_,H,N){var P;if(this.debug("Convert raw rgba tile result to ImageData"),H.bitmap)return N.toCtx.drawImage(H.bitmap,_.toX,_.toY),null;if($)P=new ImageData(new Uint8ClampedArray(H.data),_.toWidth,_.toHeight);else if(P=N.toCtx.createImageData(_.toWidth,_.toHeight),P.data.set)P.data.set(H.data);else for(var O=P.data.length-1;O>=0;O--)P.data[O]=H.data[O];return this.debug("Draw tile"),I?N.toCtx.putImageData(P,_.toX,_.toY,_.toInnerX-_.toX,_.toInnerY-_.toY,_.toInnerWidth+1e-5,_.toInnerHeight+1e-5):N.toCtx.putImageData(P,_.toX,_.toY,_.toInnerX-_.toX,_.toInnerY-_.toY,_.toInnerWidth,_.toInnerHeight),null},Q.prototype.__tileAndResize=function(_,H,N){var P=this,O={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},U=function(Y){return P.__limit(function(){if(N.canceled)return N.cancelToken;var q={width:Y.width,height:Y.height,toWidth:Y.toWidth,toHeight:Y.toHeight,scaleX:Y.scaleX,scaleY:Y.scaleY,offsetX:Y.offsetX,offsetY:Y.offsetY,filter:N.filter,unsharpAmount:N.unsharpAmount,unsharpRadius:N.unsharpRadius,unsharpThreshold:N.unsharpThreshold};return P.debug("Invoke resize math"),Promise.resolve(q).then(function(J){return P.__extractTileData(Y,_,N,O,J)}).then(function(J){return P.debug("Invoke resize math"),P.__invokeResize(J,N)}).then(function(J){return N.canceled?N.cancelToken:(O.srcImageData=null,P.__landTileData(Y,J,O))})})};return Promise.resolve().then(function(){if(O.toCtx=H.getContext("2d"),A.isCanvas(_))return null;if(A.isImageBitmap(_))return O.srcImageBitmap=_,O.isImageBitmapReused=!0,null;if(A.isImage(_))return F?(P.debug("Decode image via createImageBitmap"),createImageBitmap(_).then(function(L){O.srcImageBitmap=L}).catch(function(L){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(N.canceled)return N.cancelToken;P.debug("Calculate tiles");var L=M({width:N.width,height:N.height,srcTileSize:P.options.tile,toWidth:N.toWidth,toHeight:N.toHeight,destTileBorder:N.__destTileBorder}),Y=L.map(function(J){return U(J)});function q(J){J.srcImageBitmap&&(J.isImageBitmapReused||J.srcImageBitmap.close(),J.srcImageBitmap=null)}return P.debug("Process tiles"),Promise.all(Y).then(function(){return P.debug("Finished!"),q(O),H},function(J){throw q(O),J})})},Q.prototype.__processStages=function(_,H,N,P){var O=this;if(P.canceled)return P.cancelToken;var U=_.shift(),L=c(U,2),Y=L[0],q=L[1],J=_.length===0,oe;J||E.q2f.indexOf(P.filter)<0?oe=P.filter:P.filter==="box"?oe="box":oe="hamming",P=m({},P,{toWidth:Y,toHeight:q,filter:oe});var le;return J||(le=this.options.createCanvas(Y,q)),this.__tileAndResize(H,J?N:le,P).then(function(){return J?N:(P.width=Y,P.height=q,O.__processStages(_,le,N,P))}).then(function(fe){return le&&(le.width=le.height=0),fe})},Q.prototype.__resizeViaCreateImageBitmap=function(_,H,N){var P=this,O=H.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(_,{resizeWidth:N.toWidth,resizeHeight:N.toHeight,resizeQuality:A.cib_quality_name(E.f2q[N.filter])}).then(function(U){if(N.canceled)return N.cancelToken;if(!N.unsharpAmount)return O.drawImage(U,0,0),U.close(),O=null,P.debug("Finished!"),H;P.debug("Unsharp result");var L=P.options.createCanvas(N.toWidth,N.toHeight),Y=L.getContext("2d");Y.drawImage(U,0,0),U.close();var q=Y.getImageData(0,0,N.toWidth,N.toHeight);return P.__mathlib.unsharp_mask(q.data,N.toWidth,N.toHeight,N.unsharpAmount,N.unsharpRadius,N.unsharpThreshold),O.putImageData(q,0,0),L.width=L.height=0,q=Y=L=O=null,P.debug("Finished!"),H})},Q.prototype.resize=function(_,H,N){var P=this;this.debug("Start resize...");var O=m({},j);if(isNaN(N)?N&&(O=m(O,N)):O=m(O,{quality:N}),O.toWidth=H.width,O.toHeight=H.height,O.width=_.naturalWidth||_.width,O.height=_.naturalHeight||_.height,Object.prototype.hasOwnProperty.call(O,"quality")){if(O.quality<0||O.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(O.quality));O.filter=E.q2f[O.quality]}if(H.width===0||H.height===0)return Promise.reject(new Error("Invalid output size: ".concat(H.width,"x").concat(H.height)));O.unsharpRadius>2&&(O.unsharpRadius=2),O.canceled=!1,O.cancelToken&&(O.cancelToken=O.cancelToken.then(function(L){throw O.canceled=!0,L},function(L){throw O.canceled=!0,L}));var U=3;return O.__destTileBorder=Math.ceil(Math.max(U,2.5*O.unsharpRadius|0)),this.init().then(function(){if(O.canceled)return O.cancelToken;if(P.features.cib){if(E.q2f.indexOf(O.filter)>=0)return P.__resizeViaCreateImageBitmap(_,H,O);P.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!X){var L=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw L.code="ERR_GET_IMAGE_DATA",L}var Y=R(O.width,O.height,O.toWidth,O.toHeight,P.options.tile,O.__destTileBorder);return P.__processStages(Y,_,H,O)})},Q.prototype.resizeBuffer=function(_){var H=this,N=m({},j,_);if(Object.prototype.hasOwnProperty.call(N,"quality")){if(N.quality<0||N.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(N.quality));N.filter=E.q2f[N.quality]}return this.init().then(function(){return H.__mathlib.resizeAndUnsharp(N)})},Q.prototype.toBlob=function(_,H,N){return H=H||"image/png",new Promise(function(P){if(_.toBlob){_.toBlob(function(q){return P(q)},H,N);return}if(_.convertToBlob){P(_.convertToBlob({type:H,quality:N}));return}for(var O=atob(_.toDataURL(H,N).split(",")[1]),U=O.length,L=new Uint8Array(U),Y=0;Y<U;Y++)L[Y]=O.charCodeAt(Y);P(new Blob([L],{type:H}))})},Q.prototype.debug=function(){},i.exports=Q},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(Th)),Th.exports}var uD=cD();const dD=ju(uD),nb=typeof window<"u"?dD():null,fD=t=>{const o=document.createElement("canvas");o.width=t.width,o.height=t.height;const a=o.getContext("2d");return a?(a.fillStyle=Du,a.fillRect(0,0,o.width,o.height),a.drawImage(t,0,0),o):t},hD=async(t,o)=>{if(!nb||o<=1.0001)return t;const a=Math.max(1,Math.round(t.width/o)),i=Math.max(1,Math.round(t.height/o)),l=document.createElement("canvas");return l.width=a,l.height=i,await nb.resize(t,l,{unsharpAmount:80,unsharpRadius:.6,unsharpThreshold:1}),l};async function pD(t,o,a,i){if(o.style.display==="none")return;const l=Ge(o.getAttribute("data-connector-left"),0),c=Ge(o.getAttribute("data-connector-top"),0),u=o.querySelector('[data-connector-visual="true"]'),f=o.querySelector('[data-connector-shadow="true"]');f&&f.width>0&&f.height>0&&t.drawImage(f,l*a,c*i),u&&u.width>0&&u.height>0&&t.drawImage(u,l*a,c*i)}const tA=t=>new Promise((o,a)=>{const i=new Image;i.onload=()=>o(i),i.onerror=a,i.src=t}),mD=(t,o)=>{const a=[t,...Array.from(t.querySelectorAll("*"))];[o,...Array.from(o.querySelectorAll("*"))].forEach((l,c)=>{const u=a[c];if(!u||!l)return;const f=window.getComputedStyle(u),p=f.fill;p&&p!=="none"&&l.setAttribute("fill",p);const h=f.stroke;h&&h!=="none"&&l.setAttribute("stroke",h);const g=f.strokeWidth;g&&l.setAttribute("stroke-width",g);const m=f.strokeLinecap;m&&l.setAttribute("stroke-linecap",m);const b=f.strokeLinejoin;b&&l.setAttribute("stroke-linejoin",b)})},gD=(t,o,a,i,l,c,u,f)=>{u&&(t.save(),t.shadowColor=u.color,t.shadowBlur=(u.blur+Math.max(u.spread,0))*f,t.shadowOffsetX=u.offsetX*f,t.shadowOffsetY=u.offsetY*f,t.drawImage(o,a,i,l,c),t.restore()),t.drawImage(o,a,i,l,c)},nA=(t,o,a,i)=>{const l=a.split(/\s+/),c=[];let u="";const f=h=>t.measureText(h).width/o,p=()=>{u.trim().length>0&&(c.push(u.trim()),u="")};for(const h of l){if(!h)continue;const g=u?`${u} ${h}`:h;if(f(g)<=i){u=g;continue}if(f(h)>i){let m="";for(const b of h){const w=m+b;if(f(w)>i&&m){const C=u?`${u} ${m}`.trim():m;C&&c.push(C),m=b,u=""}else m=w}if(m)if(u){const b=`${u} ${m}`.trim();f(b)<=i?u=b:(c.push(u.trim()),u=m)}else u=m;continue}p(),u=h}return p(),c.length?c:[a]};async function yD(t,o,a,i,l,c,u,f,p){const h=Ge(p?.dataset.elementCanvasShadowMarginTop,0),g=Ge(p?.dataset.elementCanvasShadowMarginRight,0),m=Ge(p?.dataset.elementCanvasShadowMarginBottom,0),b=Ge(p?.dataset.elementCanvasShadowMarginLeft,0);if(p&&p.width>0&&p.height>0){const k=(l+b+g)*a,I=(c+h+m)*i;t.drawImage(p,(u-b)*a,(f-h)*i,k,I)}const w=o.querySelector("svg");if(!w)return!1;const C=o.getAttribute("data-element-base-shadow"),A=Iu(C),S=w.cloneNode(!0);S.setAttribute("width",`${l}`),S.setAttribute("height",`${c}`),mD(w,S);const R=new XMLSerializer().serializeToString(S),E=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(R)}`;try{const k=await tA(E),I=l*a,z=c*i,D=(a+i)/2,j=p&&p.width>0?null:A;gD(t,k,u*a,f*i,I,z,j,D)}catch(k){console.warn("Failed to rasterize shape element",k)}return!0}function xD(t,o,a,i,l,c,u,f,p){const h=o.querySelector('[data-element-text-layer="true"]');if(!h)return;const g=h.textContent?.trim()??"";if(!g)return;const m=window.getComputedStyle(h),b=parseFloat(m.fontSize||"14")||14,w=m.fontFamily||yo,C=m.fontWeight||"normal",A=m.color||"#2c3e50",S=m.textAlign||"center",R=parseFloat(m.lineHeight||"0"),M=Number.isFinite(R)&&R>0?R:b*1.2,E=5,k=a==="actor",I=a==="note",z=a==="card";let D=E,j=E,$=E,F=E;k?$=E:I?(D=E+1,j=E+1,$=E+1,F=E+3):z&&(D=E+1,j=E+1,$=E+1,F=E+4);const X=m.alignItems||"center";t.save(),t.fillStyle=A,t.font=`${C} ${b*l}px ${w}`,t.textBaseline="middle";let Z="center";(S==="left"||S==="right")&&(Z=S),t.textAlign=Z;const K=c-F-j,te=Math.max(1,K),Q=g.split(`
`),_=[];for(const L of Q)L.trim()?_.push(...nA(t,i,L,te)):_.push("");const H=_.length*M,N=u-D-$;let P;X==="flex-start"?P=p+D+M/2:X==="flex-end"?P=p+u-$-H+M/2:P=p+D+Math.max(0,(N-H)/2)+M/2;let O;Z==="center"?O=(f+c/2)*i:Z==="right"?O=(f+c-j)*i:O=(f+F)*i;let U=P;for(const L of _)t.fillText(L,O,U*l),U+=M;t.restore()}function bD(t,o,a,i,l,c,u,f){const p=o.querySelector("span"),h=p?.textContent?.trim()??o.textContent?.trim()??"";if(!h)return;const g=window.getComputedStyle(p??o),m=parseFloat(g.fontSize||"12")||12,b=g.fontFamily||yo,w=g.fontWeight&&g.fontWeight!=="normal"?g.fontWeight:"600",C=parseFloat(g.lineHeight||"0"),A=Number.isFinite(C)&&C>0?C:m*1.3,S=g.color||"#6c757d",R=Math.max(1,l-8);t.save(),t.fillStyle=S,t.textAlign="center",t.textBaseline="middle",t.font=`${w} ${m*i}px ${b}`;const M=nA(t,a,h,R),E=M.length*A;let k=f+(c-E)/2+A/2;const I=u+l/2;for(const z of M)t.fillText(z,I*a,k*i),k+=A;t.restore()}async function vD(t,o,a,i){if(o.style.display==="none")return!0;const l=Ge(o.getAttribute("data-element-left"),0),c=Ge(o.getAttribute("data-element-top"),0),u=Ge(o.getAttribute("data-element-width"),0),f=Ge(o.getAttribute("data-element-height"),0),p=o.querySelector('[data-element-canvas="true"]'),h=o.querySelector('[data-element-shadow-canvas="true"]'),g=o.getAttribute("data-shape");if(g)return await yD(t,o,a,i,u,f,l,c,h)?(xD(t,o,g,a,i,u,f,l,c),!0):!1;if(h&&h.width>0&&h.height>0){const b=Ge(h.dataset.elementCanvasShadowMarginTop,0),w=Ge(h.dataset.elementCanvasShadowMarginRight,0),C=Ge(h.dataset.elementCanvasShadowMarginBottom,0),A=Ge(h.dataset.elementCanvasShadowMarginLeft,0),S=(u+A+w)*a,R=(f+b+C)*i;t.drawImage(h,(l-A)*a,(c-b)*i,S,R)}p&&p.width>0&&p.height>0&&t.drawImage(p,l*a,c*i);const m=o.querySelector('[data-element-image-layer="true"]');if(m){const b=o.getAttribute("data-element-image-src")||"";if(b.trim().length>0){const w=m.querySelector("img"),C=w&&(w.complete||w.naturalWidth>0)?w:await tA(b),A=C.naturalWidth||C.width||u,S=C.naturalHeight||C.height||f;if(A>0&&S>0){const R=u/Math.max(f,1),M=A/S;let E=u,k=f;M>R?(E=u,k=Math.max(1,u/M)):(k=f,E=Math.max(1,f*M));const I=l+(u-E)/2,z=c+(f-k)/2;t.drawImage(C,I*a,z*i,E*a,k*i)}}else bD(t,m,a,i,u,f,l,c)}return!0}async function AD(t,o,a){const i=t.getContext("2d");if(!i)return;const l=a?.rootWidth??t.width,c=a?.rootHeight??t.height,u=l>0?t.width/l:1,f=c>0?t.height/c:1,p=Array.from(o.querySelectorAll('[data-element-container="true"]'));p.sort((m,b)=>{const w=Ge(m.getAttribute("data-element-z-index"),0),C=Ge(b.getAttribute("data-element-z-index"),0);if(w===C){const A=Ge(m.getAttribute("data-element-order"),0),S=Ge(b.getAttribute("data-element-order"),0);return A-S}return w-C});const h=Array.from(o.querySelectorAll('[data-connector-container="true"]'));h.sort((m,b)=>{const w=Ge(m.getAttribute("data-connector-z-index"),0),C=Ge(b.getAttribute("data-connector-z-index"),0);if(w===C){const A=Ge(m.getAttribute("data-connector-order"),0),S=Ge(b.getAttribute("data-connector-order"),0);return A-S}return w-C});const g=[...p.map(m=>({kind:"element",node:m})),...h.map(m=>({kind:"connector",node:m}))];g.sort((m,b)=>{const w=Ge(m.node.getAttribute(m.kind==="element"?"data-element-z-index":"data-connector-z-index"),0),C=Ge(b.node.getAttribute(b.kind==="element"?"data-element-z-index":"data-connector-z-index"),0);if(w===C){const A=Ge(m.node.getAttribute(m.kind==="element"?"data-element-order":"data-connector-order"),0),S=Ge(b.node.getAttribute(b.kind==="element"?"data-element-order":"data-connector-order"),0);return A-S}return w-C});for(const m of g){if(m.kind==="connector"){await pD(i,m.node,u,f);continue}if(!await vD(i,m.node,u,f))return}}async function Up(t,o={}){const{root:a,metrics:i}=t,l=i?.rootWidth??a.getBoundingClientRect().width??1,c=i?.rootHeight??a.getBoundingClientRect().height??1,u=Math.min(window.devicePixelRatio||1,3),f=document.createElement("canvas");f.width=Math.max(1,Math.round(l*u)),f.height=Math.max(1,Math.round(c*u));const p=f.getContext("2d");p&&(p.fillStyle=o.backgroundColor??Du,p.fillRect(0,0,f.width,f.height)),await AD(f,a,i);const h=aD(f,i),g=iD(f,i),m=await hD(h,g);return fD(m)}const dl=(t,o,a)=>{if(typeof window>"u")return;const i=window[Tl]?.onSaveFile;if(typeof i=="function")try{i({content:t,filename:o,mimeType:a})}catch(l){console.warn("onSaveFile hook threw an error",l)}},wD=(t,o)=>{for(const i of t)for(const l of Object.values(i.accept))if(l.length>0)return l[0];const a=o.split(".");return a.length>1?`.${a.pop()}`:""},CD=(t,o)=>!o||t.toLowerCase().endsWith(o.toLowerCase())?t:`${t}${o}`,oA=()=>"showSaveFilePicker"in window,SD=async t=>{if(!oA())throw new Error("File System Access API not supported");try{return await window.showSaveFilePicker({suggestedName:t.suggestedName,types:t.types})}catch(o){if(o.name==="AbortError")return null;throw o}},ED=async(t,o)=>{const a=await t.createWritable();await a.write(o),await a.close()},MD=async(t,o)=>{const a=await t.createWritable();await a.write(o),await a.close()},Ih=(t,o,a)=>{let i;typeof t=="string"?i=new Blob([t],{type:a}):i=t;const l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},ob=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),rb=t=>{const o=new FileReader;o.onloadend=()=>{const a=typeof o.result=="string"?o.result:void 0;if(!a)return;window.open(a,"_blank")||(window.location.href=a)},o.readAsDataURL(t)},RD=t=>new Promise(o=>{const a=document.createElement("input");a.type="file",a.accept=t.join(","),a.style.display="none",a.value="",a.onchange=i=>{const l=i.target.files?.[0];a.parentElement&&a.parentElement.removeChild(a),o(l||null)},a.oncancel=()=>{a.parentElement&&a.parentElement.removeChild(a),o(null)},document.body.appendChild(a),a.click()}),kD=async()=>{if(typeof window<"u"&&window.location.search.includes("playwright"))return;const t=window.location.hash;window.location.hash="#file-cache-clear",await new Promise(o=>setTimeout(o,0)),t?window.location.hash=t:window.history.replaceState({},"",window.location.pathname+window.location.search),await new Promise(o=>setTimeout(o,0))},ab=t=>new Promise((o,a)=>{const i=new FileReader;i.onload=()=>{if(i.result instanceof ArrayBuffer){const l=new TextDecoder("utf-8");o(l.decode(i.result))}else a(new Error("FileReader did not return an ArrayBuffer"))},i.onerror=()=>a(i.error),i.readAsArrayBuffer(t)}),TD=async t=>{const o=typeof window.showOpenFilePicker=="function",a=typeof window.__rewiredImportPayload=="string",i=window.location.search.includes("playwright")||a;if(o&&i)try{const[f]=await window.showOpenFilePicker({types:t,multiple:!1});if(f){const p=await f.getFile();return{content:await ab(p),filename:p.name}}return null}catch(f){if(f.name==="AbortError")return null;throw f}await kD();const c=t.flatMap(f=>Object.values(f.accept).flat()),u=await RD(c);return u?{content:await ab(u),filename:u.name}:null},Xp=async(t,o,a,i,l)=>{if(oA())try{const c=await SD({suggestedName:o,types:a});if(c){typeof t=="string"?await ED(c,t):await MD(c,t);const u=c.name??o;return dl(t,u,i),l?.({filename:u}),!0}return!1}catch(c){return console.warn("File System Access API failed, falling back to download:",c),dl(t,o,i),l?.({filename:o}),Ih(t,o,i),!0}else{const c=wD(a,o);dl(t,o,i);const u=window.prompt("Save file as",o);if(u===null)return!1;const f=CD(u.trim()||o,c);return typeof t=="string"?(dl(t,f,i),ob()?rb(new Blob([t],{type:i})):Ih(t,f,i)):(dl(t,f,i),ob()?rb(t):Ih(t,f,i)),l?.({filename:f}),!0}};function ID(t){const[o,a]=t.split(","),i=o.match(/data:(.*?);base64/),l=i?i[1]:"image/png",c=atob(a),u=new Uint8Array(c.length);for(let f=0;f<c.length;f+=1)u[f]=c.charCodeAt(f);return new Blob([u],{type:l})}async function rA(t,o){const a=await new Promise(l=>t.toBlob(c=>l(c),"image/png"));if(!a)throw new Error("Failed to convert canvas to PNG");const i=o??`${wk}.png`;return await Xp(a,i,eD,"image/png")}async function aA(t){const o=$p(),{cleanup:a}=o;try{const i=await Up(o);return await rA(i,t??"wireframe.png")}catch(i){throw console.error("Export canvas failed:",i),i}finally{a()}}async function OD(){const t=$p(),{cleanup:o}=t;try{const i=(await Up(t)).toDataURL("image/png",1);return ID(i)}catch(a){throw console.error("Export canvas failed:",a),a}finally{o()}}async function iA(t,o){const{elementIds:a,connectorIds:i}=t;if(!a.length&&!i.length)throw new Error("No elements were selected for export");const l=$p({elementIds:a,connectorIds:i}),{cleanup:c}=l;try{const u=await Up(l);return await rA(u,o??"wireframe-selection.png")}catch(u){throw console.error("Export selection failed:",u),u}finally{c()}}function _D(){const t=Tl,o=window[t]=window[t]??{};o.exportSelectedElementsToPNG||(o.exportSelectedElementsToPNG=(a,i)=>iA(a,i)),o.exportCanvasToPNG||(o.exportCanvasToPNG=a=>aA(a)),o.exportCanvasToPNGBlob||(o.exportCanvasToPNGBlob=()=>OD())}typeof window<"u"&&_D();const sA=new Set(["posX","posY","width","height","id","type","imageSrc"]),Po=t=>typeof t=="object"&&t!==null,lA=t=>{const o={};for(const[a,i]of t)i!==void 0&&(o[a]=i);return Object.keys(o).length>0?o:void 0},DD=t=>{if(!t)return;const o=Object.entries(t).filter(([a])=>!sA.has(a)&&a!=="imageSrc");if(o.length!==0)return lA(o)},jD=t=>{const o=t.style;if(!o)return;const a={};return typeof o.backgroundColor=="string"&&o.backgroundColor.length>0&&(a.backgroundColour=o.backgroundColor),typeof o.borderColor=="string"&&o.borderColor.length>0&&(a.borderColour=o.borderColor),typeof o.textColor=="string"&&o.textColor.length>0&&(a.textColour=o.textColor),typeof o.fontSize=="number"&&Number.isFinite(o.fontSize)&&(a.fontSize=o.fontSize),typeof o.fontWeight=="string"&&o.fontWeight.length>0&&(a.fontWeight=o.fontWeight),typeof o.textAlign=="string"&&o.textAlign.length>0&&(a.textAlign=o.textAlign),typeof o.fontFamily=="string"&&o.fontFamily.length>0&&(a.fontFamily=o.fontFamily),Object.keys(a).length>0?a:void 0},BD=t=>{const{id:o,type:a,x:i,y:l,width:c,height:u,zIndex:f,text:p,imageSrc:h,groupId:g,properties:m}=t,b={id:o,type:a,x:i,y:l,width:c,height:u};typeof f=="number"&&(b.zIndex=f),typeof p=="string"&&p.length>0&&(b.text=p),g&&(b.groupId=g);const w=typeof h=="string"&&h.trim().length>0?h:typeof m?.imageSrc=="string"&&m.imageSrc.trim().length>0?m.imageSrc:void 0;w&&(b.imageSrc=w);const C=jD(t),A=(()=>{if(!(!C&&!m))return C?{...C,...m??{}}:m?{...m}:void 0})(),S=A?Ka(t,A):void 0,R=DD(S);return R&&Object.keys(R).length>0&&(b.properties=R),b},PD=t=>{const o=(t.type==="line","line"),a={id:t.id,type:o,startPoint:{...t.startPoint},endPoint:{...t.endPoint}};return typeof t.zIndex=="number"&&(a.zIndex=t.zIndex),t.groupId&&(a.groupId=t.groupId),t.properties&&(a.properties={...t.properties},"connectorType"in a.properties&&delete a.properties.connectorType),t.startAttachment&&(a.startAttachment={elementId:t.startAttachment.elementId}),t.endAttachment&&(a.endAttachment={elementId:t.endAttachment.elementId}),a},zD=t=>({elements:t.elements.map(BD),connectors:t.connectors.map(PD),zoom:t.zoom,panX:t.panX,panY:t.panY,selectedItems:t.selectedItemIds.length?[...t.selectedItemIds]:void 0}),ND=t=>{const o=zD(t.canvasState);return{id:t.id,name:t.name,order:t.order,...o}},cA=(t,o)=>({version:_p,exportDate:new Date().toISOString(),pages:t.map(ND),activePageId:o}),LD=(t,o)=>cA([t],o??t.id),uA=(t,o)=>{const a=JSON.stringify(t,null,2),i=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=o||`wireframe-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},dA=()=>{const t=new Date,o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${i}`},fA=[{description:"Wireframe JSON files",accept:{"application/json":[".json"]}}],HD=async(t,o,a)=>{const i=LD(t,o),l=JSON.stringify(i,null,2),u=`wireframe-${t.name.replace(/\s+/g,"-").toLowerCase()||"page"}-${dA()}.json`;try{return await Xp(l,u,fA,"application/json")}catch(f){return console.error("Failed to save JSON file:",f),uA(i,u),!0}},YD=async(t,o,a)=>{const i=cA(t,o),l=JSON.stringify(i,null,2),u=(()=>{if(typeof window>"u")return{exportInfo:null,importInfo:null};const g=m=>{if(!m)return null;try{const b=JSON.parse(m);if(b&&typeof b.name=="string")return{name:b.name,at:Number(b.at)||0}}catch(b){console.warn("Failed to parse project filename metadata",b)}return null};return{exportInfo:g(window.localStorage.getItem(lx)),importInfo:g(window.localStorage.getItem(y1))}})(),p=[u.exportInfo,u.importInfo].filter(g=>!!g).sort((g,m)=>m.at-g.at)[0]?.name||`wireframe-project-${dA()}.json`,h=g=>{if(!(typeof window>"u"))try{const m=JSON.stringify({name:g,at:Date.now()});window.localStorage.setItem(lx,m)}catch(m){console.warn("Failed to persist last project export metadata:",m)}};try{return await Xp(l,p,fA,"application/json",g=>{h(g.filename)})}catch(g){return console.error("Failed to save JSON file:",g),h(p),uA(i,p),!0}},Do=(t,o=0)=>{const a=typeof t=="number"?t:Number(t);return Number.isFinite(a)?a:o},$D=t=>{if(!Po(t))return;const o=Object.entries(t).filter(([a])=>!sA.has(a));return lA(o)},ib=t=>({x:Do(t?.x,0),y:Do(t?.y,0)}),sb=t=>!t||typeof t!="object"||!t.elementId?null:{elementId:String(t.elementId),anchor:t.anchor},UD=t=>{if(!Po(t))throw new Error("Invalid element payload");const o=typeof t.id=="string"&&t.id.trim().length>0?t.id:to(),a=typeof t.type=="string"?t.type:void 0,i=a==="heading",c=i?"text":a??"button",u=Do(t.x,0),f=Do(t.y,0),p=Math.max(1,Do(t.width,120)),h=Math.max(1,Do(t.height,40)),g={id:o,type:c,x:u,y:f,width:p,height:h};t.zIndex!==void 0&&(g.zIndex=Do(t.zIndex,0)),typeof t.text=="string"&&(g.text=t.text),typeof t.groupId=="string"&&t.groupId.length>0&&(g.groupId=t.groupId);const m=t.properties??t.props??t.elementProperties;let b;typeof t.imageSrc=="string"&&t.imageSrc.trim().length>0&&(b=t.imageSrc),!b&&Po(m)&&typeof m.imageSrc=="string"&&m.imageSrc.trim().length>0&&(b=m.imageSrc);let w=$D(m);return i&&(w={...{fontSize:24,fontWeight:"bold",textAlign:"left"},...w??{}}),w&&(typeof w.imageSrc=="string"&&w.imageSrc.trim().length>0&&(b=b??w.imageSrc,delete w.imageSrc),Object.keys(w).length===0&&(w=void 0)),w&&(g.properties=w),b&&(g.imageSrc=b),g},XD=t=>{if(!Po(t))throw new Error("Invalid connector payload");const o=typeof t.id=="string"&&t.id.trim().length>0?t.id:to(),a=(t.type==="line","line"),i={id:o,type:a,startPoint:ib(t.startPoint??t.start??{}),endPoint:ib(t.endPoint??t.end??{})};if(t.zIndex!==void 0&&(i.zIndex=Do(t.zIndex,0)),t.groupId&&(i.groupId=String(t.groupId)),Po(t.properties)){const u={...t.properties};delete u.connectorType,i.properties=u}const l=sb(t.startAttachment);l&&(i.startAttachment=l);const c=sb(t.endAttachment);return c&&(i.endAttachment=c),i},hA=t=>{const o=Array.isArray(t?.elements)?t.elements:[],a=Array.isArray(t?.connectors)?t.connectors:[],i=Array.isArray(t?.selectedItems)?t.selectedItems:Array.isArray(t?.selectedItemIds)?t.selectedItemIds:[...Array.isArray(t?.selectedElements)?t.selectedElements:[],...Array.isArray(t?.selectedConnectors)?t.selectedConnectors:[]];return{elements:o.map(UD),connectors:a.map(XD),zoom:Do(t?.zoom,1)||1,panX:Do(t?.panX,0),panY:Do(t?.panY,0),selectedItems:i.length?i.map(l=>String(l)):void 0}},QD=t=>{if(!Po(t))return;const o=t,a=Po(o.canvasState)?o.canvasState:void 0,i=Po(o.canvas)?o.canvas:void 0,l=[o.name,o.pageName,o.title,a?.name,a?.pageName,i?.name,i?.pageName];for(const c of l)if(typeof c=="string"){const u=c.trim();if(u.length>0)return u}},FD=(t,o=0)=>{if(!Po(t))throw new Error("Invalid page payload");const a=typeof t.id=="string"&&t.id.trim().length>0?t.id:to(),i=QD(t)??`Imported Page ${o+1}`,l=Do(t.order,o),c=t.canvasState??t.canvas??t,u=hA(c);return{id:a,name:i,order:l,...u}},GD=t=>{const o=typeof t?.version=="string"?t.version:"1.0.0",a=typeof t?.exportDate=="string"?t.exportDate:new Date().toISOString();if(Array.isArray(t?.pages)&&t.pages.length>0){const f=t.pages.map((g,m)=>FD(g,m)),p=typeof t.activePageId=="string"?t.activePageId:void 0,h=f.slice().sort((g,m)=>g.order-m.order).map((g,m)=>({id:g.id,name:g.name,order:m,elements:[...g.elements],connectors:[...g.connectors],zoom:g.zoom,panX:g.panX,panY:g.panY,selectedItems:g.selectedItems?[...g.selectedItems]:void 0}));return{version:o,exportDate:a,pages:h,activePageId:p}}const i=hA(t?.canvasState??t),c=(typeof t?.ownerPageId=="string"?t.ownerPageId:typeof t?.canvasState?.ownerPageId=="string"?t.canvasState.ownerPageId:void 0)??to(),u=typeof t?.pageName=="string"&&t.pageName.trim().length>0?t.pageName:"Imported Page";return{version:o,exportDate:a,pages:[{id:c,name:u,order:0,...i}],activePageId:c}},WD=t=>{if(!Po(t))return!1;if(Array.isArray(t.pages)&&t.pages.length>0)return t.pages.every(a=>{const i=a?.canvasState??a?.canvas??a;return!Po(i)||!Array.isArray(i.elements)?!1:i.elements.every(l=>l&&typeof l.id=="string"&&typeof l.type=="string")});const o=t.canvasState??t.canvas??t;return!Po(o)||!Array.isArray(o.elements)?!1:o.elements.every(a=>a&&typeof a.id=="string"&&typeof a.type=="string")},pA=t=>{const o=new Set,a=[];for(const i of t)o.has(i)||(o.add(i),a.push(i));return a},qD=(t,o,a)=>{if(!t?.length)return[];const i=t.map(l=>o&&o[l]?o[l]:a&&a[l]?a[l]:l);return pA(i)},op=(t,o,a)=>{if(!a?.length)return{selectedElements:[],selectedConnectors:[],selectedItemIds:[]};const i=new Set(t.map(p=>p.id)),l=new Set(o.map(p=>p.id)),c=pA(a.filter(p=>i.has(p)||l.has(p))),u=c.filter(p=>i.has(p)),f=c.filter(p=>l.has(p));return{selectedElements:u,selectedConnectors:f,selectedItemIds:c}},mA=t=>{const o={id:t.id,type:t.type,x:t.x,y:t.y,width:t.width,height:t.height,text:t.text,zIndex:t.zIndex,groupId:t.groupId,imageSrc:t.imageSrc,properties:t.properties?{...t.properties}:void 0};return ts(o)},gA=t=>{const o=(t.type==="line","line"),a=t.properties?{...t.properties}:void 0;return a&&"connectorType"in a&&delete a.connectorType,{id:t.id,type:o,startPoint:{...t.startPoint},endPoint:{...t.endPoint},zIndex:t.zIndex,properties:a,groupId:t.groupId,startAttachment:t.startAttachment?.anchor?{elementId:t.startAttachment.elementId,anchor:t.startAttachment.anchor}:null,endAttachment:t.endAttachment?.anchor?{elementId:t.endAttachment.elementId,anchor:t.endAttachment.anchor}:null}},yA=(t,o,a)=>{if(!a.size)return t;if(!o.length)return t.map(u=>({...u,startAttachment:null,endAttachment:null}));const i=new Map(o.map(u=>[u.id,u]));let l=!1;const c=t.map(u=>{const f=a.get(u.id);if(!f)return u;let p=u.startAttachment??null,h=u.endAttachment??null;const g=(m,b)=>{if(!m)return null;const w=i.get(m);if(!w)return null;const C=qu([w],b,Wu);return!C||C.attachment.elementId!==m?null:C.attachment};if(!p&&f.startElementId){const m=g(f.startElementId,u.startPoint);m&&(p=m)}if(!h&&f.endElementId){const m=g(f.endElementId,u.endPoint);m&&(h=m)}return p===u.startAttachment&&h===u.endAttachment?u:(l=!0,{...u,startAttachment:p,endAttachment:h})});return l?Kt(c,o):t},VD=t=>{const o={};return{elements:t.map(i=>{const l=to();return o[i.id]=l,{...i,id:l}}),idMap:o}},ZD=t=>{const o={};return{connectors:t.map(i=>{const l=to();return o[i.id]=l,{...i,id:l}}),idMap:o}},KD=(t,o)=>{const a=i=>{if(!i)return i??null;const l=o[i.elementId];return l?{...i,elementId:l}:i};return{...t,startAttachment:a(t.startAttachment)??null,endAttachment:a(t.endAttachment)??null}},JD=(t,o)=>{const a=t.elements.map(mA),i=t.connectors.map(f=>({connector:gA(f),hints:{startElementId:f.startAttachment?.elementId??null,endElementId:f.endAttachment?.elementId??null}})),l=new Map(i.map(f=>[f.connector.id,f.hints])),c=yA(i.map(f=>f.connector),a,l),u=op(a,c,t.selectedItems);return{elements:a,connectors:c,selectedElements:u.selectedElements,selectedConnectors:u.selectedConnectors,selectedItemIds:u.selectedItemIds,zoom:t.zoom||1,panX:t.panX||0,panY:t.panY||0,ownerPageId:o}},ej=(t,o,a)=>{const i=o.elements.map(mA),l=o.connectors.map(C=>({connector:gA(C),hints:{startElementId:C.startAttachment?.elementId??null,endElementId:C.endAttachment?.elementId??null}})),c=new Map(l.map(C=>[C.connector.id,C.hints])),u=yA(l.map(C=>C.connector),i,c);if(a){const C=op(i,u,o.selectedItems);return{elements:i,connectors:u,selectedElements:C.selectedElements,selectedConnectors:C.selectedConnectors,selectedItemIds:C.selectedItemIds,zoom:o.zoom||1,panX:o.panX||0,panY:o.panY||0,ownerPageId:t.ownerPageId}}const{elements:f,idMap:p}=VD(i),{connectors:h,idMap:g}=ZD(u),m=h.map(C=>KD(C,p)),b=qD(o.selectedItems,p,g),w=op([...t.elements,...f],[...t.connectors,...m],b);return{...t,elements:[...t.elements,...f],connectors:[...t.connectors,...m],selectedElements:w.selectedElements,selectedConnectors:w.selectedConnectors,selectedItemIds:w.selectedItemIds}},tj=t=>t.pages.map(o=>({id:o.id,name:o.name,order:o.order,canvasState:JD(o,o.id)})),lb=async()=>{const t=[{description:"Wireframe JSON files",accept:{"application/json":[".json"]}}];try{const o=await TD(t);if(!o)return null;const{content:a,filename:i}=o;let l;try{l=JSON.parse(a)}catch{throw new Error("Invalid JSON file. Please select a valid wireframe export file.")}if(!WD(l))throw new Error("Invalid wireframe file format. Please select a valid wireframe export file.");const c=GD(l);return c.sourceFilename=i,c}catch(o){throw console.error("Import failed:",o),o}},nj=(t,o,a)=>ej(t,o,a.clearCanvas),oj=t=>tj(t),Aa=t=>{try{return{elements:t.elements?t.elements.map(rj):[],connectors:t.connectors?t.connectors.map(aj):[],selectedElements:t.selectedElements?[...t.selectedElements]:[],selectedConnectors:t.selectedConnectors?[...t.selectedConnectors]:[],selectedItemIds:t.selectedItemIds?[...t.selectedItemIds]:[],zoom:t.zoom,panX:t.panX,panY:t.panY,ownerPageId:t.ownerPageId}}catch(o){return console.error("Failed to clone canvas state, returning original reference. Some operations may mutate shared state.",o),t}},rj=t=>({...t,properties:t.properties?{...t.properties}:void 0,style:t.style?{...t.style}:void 0,text:t.text,imageSrc:t.imageSrc,x:t.x,y:t.y,width:t.width,height:t.height,zIndex:t.zIndex,id:t.id,type:t.type}),aj=t=>{const o=Dn.normaliseConnector(t);return{...o,startPoint:{...o.startPoint},endPoint:{...o.endPoint},startAttachment:o.startAttachment?{...o.startAttachment}:null,endAttachment:o.endAttachment?{...o.endAttachment}:null,properties:o.properties?{...o.properties}:void 0}};function ij({canvasState:t,setCanvasState:o,replaceCanvasState:a,queueHistoryEntry:i,onSaveTimestampUpdate:l,activePageId:c,activePage:u,pages:f,commitCanvasSnapshot:p,onImportApplied:h,replaceProject:g,startTransaction:m,endTransaction:b}){const[w,C]=x.useState(null),[A,S]=x.useState(()=>({project:null})),[R,M]=x.useState(()=>({project:null})),E=x.useCallback(P=>{if(!(!P||typeof window>"u"))try{window.localStorage.setItem(y1,JSON.stringify({name:P,at:Date.now()}))}catch(O){console.warn("Failed to persist last project import metadata:",O)}},[]),k=x.useCallback(async()=>{try{await aA()}catch(P){console.error("Failed to export PNG:",P),alert("Failed to export PNG: "+P.message)}},[]),I=x.useCallback(async()=>{const{selectedElements:P,selectedConnectors:O}=t;if(P.length===0&&O.length===0){alert("Please select items to export");return}try{await iA({elementIds:P,connectorIds:O})}catch(U){console.error("Failed to export selection as PNG:",U),alert("Failed to export selection: "+U.message)}},[t]),z=x.useCallback(async()=>{try{await HD(u,c)}catch(P){console.error("Failed to export page JSON:",P),alert("Failed to export JSON: "+P.message)}},[u,c]),D=x.useCallback(P=>{const O=oj(P);if(O.length===0){console.warn("Imported project contains no pages.");return}const U=oe=>({...Aa(oe),selectedElements:[],selectedConnectors:[],selectedItemIds:[]}),L=O.map(oe=>({...oe,canvasState:U(oe.canvasState)}));m?.("Import project (replace)");const Y=L[0].id,q=L[0],J={...Aa(q.canvasState),selectedElements:[],selectedConnectors:[],selectedItemIds:[],ownerPageId:q.id};try{g(L,Y),a(J,{resetHistory:!0,description:"Imported project (replace)"}),h(J,Y),l(),E(P.sourceFilename)}finally{b?.()}},[b,h,l,E,a,g,m]),j=x.useCallback(async()=>{const P=f.map(O=>O.id===c?{...O,canvasState:{...Aa(t),ownerPageId:c}}:{...O,canvasState:Aa(O.canvasState)});try{await YD(P,c)}catch(O){console.error("Failed to export project JSON:",O),alert("Failed to export project JSON: "+O.message)}},[t,f,c]),$=x.useCallback((P,O)=>{const L={...nj(t,P.canvasState,{clearCanvas:O}),ownerPageId:c};O?a(L,{resetHistory:!0,description:"Imported canvas (replace)"}):(i("Import items (append)"),o(Aa(L))),p(c,L),h(L,c),l()},[t,c,a,i,o,p,h,l]),F=x.useCallback((P,O)=>{const U=P.pages.find(q=>q.id===O)??P.pages[0];if(!U){alert("No pages found in the imported file.");return}const L={pageId:U.id,pageName:U.name,canvasState:{elements:U.elements,connectors:U.connectors,zoom:U.zoom,panX:U.panX,panY:U.panY,selectedItems:U.selectedItems},sourceFilename:P.sourceFilename};if(!((t.elements?.length??0)>0||(t.connectors?.length??0)>0)){S({project:null}),$(L,!0);return}C(L),S({project:null})},[t,$]),X=x.useCallback(async()=>{try{const P=await lb();if(!P)return;if(P.pages.length===0){alert("The imported file does not contain any pages.");return}if(P.pages.length===1){F(P,P.pages[0].id);return}S({project:P})}catch(P){console.error("Import failed:",P),alert("Import failed: "+P.message)}},[F]),Z=x.useCallback(async()=>{try{const P=await lb();if(!P)return;if(P.pages.length===0){alert("The imported file does not contain any pages.");return}if(!f.some(U=>(U.canvasState.elements?.length??0)>0||(U.canvasState.connectors?.length??0)>0)){M({project:null}),D(P);return}M({project:P})}catch(P){console.error("Import failed:",P),alert("Import failed: "+P.message)}},[f,D]),K=x.useCallback(P=>{if(!w)return;if(!((t.elements?.length??0)>0||(t.connectors?.length??0)>0)){$(w,!0),C(null);return}$(w,P),C(null)},[w,t,$]),te=x.useCallback(()=>{C(null)},[]),Q=x.useCallback(P=>{const O=A.project;O&&F(O,P)},[A.project,F]),_=x.useCallback(()=>{S({project:null})},[]),H=x.useCallback(()=>{const P=R.project;P&&(D(P),M({project:null}))},[R.project,D]),N=x.useCallback(()=>{M({project:null})},[]);return{importModal:{isOpen:!!w,pendingImportData:w,onConfirm:K,onCancel:te},pagePickerModal:{isOpen:!!(A.project&&A.project.pages.length>1),pages:A.project?.pages.map(P=>({id:P.id,name:P.name,order:P.order}))??[],onSelect:Q,onCancel:_},projectImportModal:{isOpen:!!R.project,pageCount:R.project?.pages.length??0,onConfirm:H,onCancel:N},actions:{exportPNG:k,exportSelectedPNG:I,exportPageJSON:z,exportProjectJSON:j,importPageJSON:X,importProjectJSON:Z},testHooks:{openImportModal:P=>C(P),closeImportModal:()=>C(null)}}}const cb=20,iu=(t,o)=>{const{constraints:a}=t,i=o==="width"?a?.minWidth:a?.minHeight,l=typeof i=="number"?i:o==="width"?100:40,c=t.defaultProps[o]??l;return typeof i=="number"?Math.max(c,i):c};function sj({setCanvasState:t,queueHistoryEntry:o}){const a=x.useRef(null),i=x.useCallback(f=>{a.current=f},[]),l=x.useCallback(()=>{},[]),c=x.useCallback(f=>{const p=a.current;if(!p)return;const h=document.querySelector('[data-canvas="true"]');if(h){const g=h.getBoundingClientRect();f.x>=g.left&&f.x<=g.right&&f.y>=g.top&&f.y<=g.bottom&&(o("Add element from library"),t(b=>{const w=_u(b),C=(f.x-g.left-cb-b.panX*b.zoom)/b.zoom,A=(f.y-g.top-cb-b.panY*b.zoom)/b.zoom,S=iu(p,"width"),R=iu(p,"height"),M={id:to(),type:p.type,x:Math.max(0,C-S/2),y:Math.max(0,A-R/2),width:S,height:R,text:p.defaultProps.text??"",imageSrc:typeof p.defaultProps.imageSrc=="string"?p.defaultProps.imageSrc:void 0,style:p.defaultProps.style,constraints:p.constraints,properties:p.defaultProps.properties?{...p.defaultProps.properties}:void 0,zIndex:w},E=ts(M);return{...b,elements:[...b.elements,E],selectedElements:[E.id],selectedConnectors:[],selectedItemIds:[E.id]}}))}a.current=null},[o,t]),u=x.useCallback(f=>{const p=iu(f,"width"),h=iu(f,"height");o("Add element from library"),t(g=>{const m=_u(g),b={id:to(),type:f.type,x:100+Math.random()*200,y:100+Math.random()*200,width:p,height:h,text:f.defaultProps.text??"",imageSrc:typeof f.defaultProps.imageSrc=="string"?f.defaultProps.imageSrc:void 0,style:f.defaultProps.style,constraints:f.constraints,properties:f.defaultProps.properties?{...f.defaultProps.properties}:void 0,zIndex:m},w=ts(b);return{...g,elements:[...g.elements,w],selectedElements:[w.id],selectedConnectors:[],selectedItemIds:[w.id]}})},[o,t]);return{handleDragStart:i,handleDragMove:l,handleDragEnd:c,handleElementClick:u}}function lj({handlers:t,hasSelection:o}){const a=x.useRef(t),i=x.useRef(o);x.useEffect(()=>{a.current=t},[t]),x.useEffect(()=>{i.current=o},[o]),x.useEffect(()=>{const l=c=>{const u=a.current,f=i.current,p=document.activeElement,h=p?.tagName==="INPUT"||p?.tagName==="TEXTAREA"||p?.hasAttribute("data-inline-editor");if(c.key==="Escape"&&!h&&f&&u.onClearSelection){c.preventDefault(),u.onClearSelection();return}if(c.key==="a"&&(c.ctrlKey||c.metaKey)&&!h){c.preventDefault(),u.onSelectAll();return}if(c.ctrlKey||c.metaKey){if((c.key==="z"||c.key==="Z")&&!c.shiftKey&&u.onUndo){c.preventDefault(),u.onUndo();return}if((c.key==="z"||c.key==="Z")&&c.shiftKey&&u.onRedo){c.preventDefault(),u.onRedo();return}if((c.key==="h"||c.key==="H")&&u.onToggleHistory){c.preventDefault(),u.onToggleHistory();return}if((c.key==="s"||c.key==="S")&&u.onExportProjectJSON){c.preventDefault(),u.onExportProjectJSON();return}if((c.key==="o"||c.key==="O")&&c.shiftKey&&u.onImportProjectJSON){c.preventDefault(),u.onImportProjectJSON();return}}if(!h&&(c.ctrlKey||c.metaKey)){if(c.shiftKey){if((c.key==="c"||c.key==="C")&&u.onCopyProperties){c.preventDefault(),u.onCopyProperties();return}if((c.key==="v"||c.key==="V")&&u.onPasteProperties){c.preventDefault(),u.onPasteProperties();return}}if(!c.shiftKey){if(c.key==="c"||c.key==="C"){c.preventDefault(),u.onCopy();return}if(c.key==="x"||c.key==="X"){c.preventDefault(),u.onCut();return}if(c.key==="v"||c.key==="V"){c.preventDefault(),u.onPaste();return}}}if(!h&&!c.ctrlKey&&!c.metaKey){if(c.key==="s"||c.key==="S"){c.preventDefault(),u.onSetMode("select");return}if(c.key==="d"||c.key==="D"){c.preventDefault(),u.onSetMode("drag");return}}if((c.key==="Delete"||c.key==="Backspace")&&f&&(h||(c.preventDefault(),u.onDelete())),!h&&f&&u.onMoveSelection){if(c.key==="ArrowUp"){c.preventDefault(),u.onMoveSelection(0,-1);return}if(c.key==="ArrowDown"){c.preventDefault(),u.onMoveSelection(0,1);return}if(c.key==="ArrowLeft"){c.preventDefault(),u.onMoveSelection(-1,0);return}if(c.key==="ArrowRight"){c.preventDefault(),u.onMoveSelection(1,0);return}}if(!h&&f&&(c.ctrlKey||c.metaKey)){const g=c.key.toLowerCase();if(g==="j"){const m=c.shiftKey?u.onSendToFront:u.onBringForward;if(m){c.preventDefault(),m();return}}if(g==="k"){const m=c.shiftKey?u.onSendToBack:u.onBringBack;if(m){c.preventDefault(),m();return}}if(g==="g"&&!c.shiftKey&&u.onGroup){c.preventDefault(),u.onGroup();return}if(g==="g"&&c.shiftKey&&u.onUngroup){c.preventDefault(),u.onUngroup();return}}if(!h&&(c.ctrlKey||c.metaKey)){if(c.key==="["&&u.onZoomOut){c.preventDefault(),u.onZoomOut();return}if(c.key==="]"&&u.onZoomIn){c.preventDefault(),u.onZoomIn();return}if((c.key==="'"||c.key==='"'||c.code==="Quote")&&u.onResetZoom){c.preventDefault(),u.onResetZoom();return}if((c.key==="\\"||c.key==="|")&&u.onFitToScreen){c.preventDefault(),u.onFitToScreen();return}}};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[]),x.useEffect(()=>(document.body.style.userSelect="none",()=>{document.body.style.userSelect=""}),[])}const xA=Zt("project-v2"),fl=100,Al=t=>({elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0,ownerPageId:t}),wl=()=>{const t=to();return{pages:[{id:t,name:"Page 1",order:0}],canvases:{[t]:Al(t)},activePageId:t}},Xi=(t,o)=>{if(!t)return Al(o);const a=Aa(t);return a.ownerPageId=o,a},cj=()=>{try{const t=window.localStorage.getItem(xA);if(!t)return wl();const o=JSON.parse(t);if(!o.pages?.length||!o.canvases)return wl();const a={};o.pages.forEach(l=>{a[l.id]=Xi(o.canvases[l.id],l.id)});const i=a[o.activePageId]?o.activePageId:o.pages[0].id;return{pages:o.pages.slice().sort((l,c)=>l.order-c.order).map((l,c)=>({...l,order:c})),canvases:a,activePageId:i}}catch(t){return console.error("Failed to load project metadata",t),wl()}},uj=()=>{const[t,o]=x.useState(()=>typeof window>"u"?wl():cj()),a=x.useCallback(A=>{if(!(typeof window>"u"||po()))try{window.localStorage.setItem(xA,JSON.stringify(A))}catch(S){console.error("Failed to persist project",S)}},[]);x.useEffect(()=>{po()||a(t)},[a,t]);const i=x.useCallback(A=>{o(S=>{if(po())return S;const R=A(S);return R===S?S:(a(R),R)})},[a]),l=x.useCallback((A,S)=>{i(R=>{const M=Xi(S,A);return{...R,canvases:{...R.canvases,[A]:M}}})},[i]),c=x.useCallback(A=>{i(S=>{if(S.activePageId===A)return S;const R=S.canvases[A]?S.canvases:{...S.canvases,[A]:Al(A)};return{...S,canvases:R,activePageId:A}})},[i]),u=x.useCallback(()=>{i(A=>{if(A.pages.length>=fl)return console.warn(`Cannot add page. Maximum ${fl} pages reached.`),A;const S=to(),R=new Set(A.pages.map(z=>z.name));let M=A.pages.length+1,E=`Page ${M}`;for(;R.has(E);)M+=1,E=`Page ${M}`;const k=[...A.pages,{id:S,name:E,order:A.pages.length}],I={...A.canvases,[S]:Al(S)};return{pages:k,canvases:I,activePageId:S}})},[i]),f=x.useCallback(A=>{i(S=>{if(S.pages.length<=1)return console.warn("Cannot delete the last page"),S;const R=S.pages.filter(I=>I.id!==A).map((I,z)=>({...I,order:z})),{[A]:M,...E}=S.canvases,k=S.activePageId===A?R[0].id:S.activePageId;return{pages:R,canvases:E,activePageId:k}})},[i]),p=x.useCallback((A,S)=>{const R=S.trim();if(!R)return!1;let M=!0;return i(E=>{if(E.pages.some(I=>I.id!==A&&I.name===R))return console.warn("Page name already in use"),M=!1,E;const k=E.pages.map(I=>I.id===A?{...I,name:R}:I);return{...E,pages:k}}),M},[i]),h=x.useCallback(A=>{i(S=>{if(S.pages.length>=fl)return console.warn(`Cannot duplicate page. Maximum ${fl} pages reached.`),S;const R=S.pages.find(j=>j.id===A);if(!R)return S;const M=S.canvases[A]??Al(A);let E=`${R.name} (Copy)`,k=1;for(;S.pages.some(j=>j.name===E);)E=`${R.name} (Copy ${k++})`;const I=to(),z=[...S.pages,{id:I,name:E,order:S.pages.length}],D={...S.canvases,[I]:Xi(M,I)};return{pages:z,canvases:D,activePageId:I}})},[i]),g=x.useCallback((A,S)=>{i(R=>{const M=[...R.pages],E=M.findIndex(z=>z.id===A);if(E===-1)return R;const[k]=M.splice(E,1);M.splice(S,0,k);const I=M.map((z,D)=>({...z,order:D}));return{...R,pages:I}})},[i]),m=x.useCallback(()=>{const A=wl();po()||a(A),o(A)},[a]),b=x.useCallback((A,S)=>{if(!A.length){console.warn("Cannot replace project with zero pages.");return}i(()=>{const R=A.slice().sort((I,z)=>I.order-z.order).map((I,z)=>({...I,order:z})),M={};R.forEach(I=>{M[I.id]=Xi(I.canvasState,I.id)});const E=R.map(I=>({id:I.id,name:I.name,order:I.order})),k=S&&M[S]?S:R[0].id;return{pages:E,canvases:M,activePageId:k}})},[i]),w=x.useMemo(()=>t.pages.map(A=>({...A,canvasState:Xi(t.canvases[A.id],A.id)})),[t]),C=x.useMemo(()=>Xi(t.canvases[t.activePageId],t.activePageId),[t]);return{pages:w,activePageId:t.activePageId,activeCanvas:C,canAddPage:t.pages.length<fl,setActivePage:c,commitCanvasSnapshot:l,addPage:u,deletePage:f,renamePage:p,duplicatePage:h,reorderPages:g,resetProject:m,replaceProject:b}},dj=se.div.attrs(t=>({style:{top:`${t.$top}px`,left:`${t.$left}px`}}))`
  position: fixed;
  width: 240px;
  min-height: 160px;
  max-height: 70vh;
  resize: vertical;
  background: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  box-shadow: 0 18px 36px rgba(15, 23, 42, 0.14);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1100;
  backdrop-filter: blur(12px);
`,fj=se.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 14px;
  background: #f8fafc;
  border-bottom: 1px solid #e2e8f0;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`,hj=se.h3`
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
`,pj=se.button`
  border: none;
  background: transparent;
  color: #64748b;
  font-size: 16px;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;

  &:hover {
    background: rgba(226, 232, 240, 0.45);
    color: #0f172a;
  }
`,mj=se.ul`
  list-style: none;
  margin: 0;
  padding: 0;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
`,gj=se.li`
  padding: 10px 16px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: ${t=>t.$isCurrent?"#eef2ff":"transparent"};
  border-bottom: 1px solid #e5e7eb;

  &:last-child {
    border-bottom: none;
  }
`,yj=se.span`
  font-size: 14px;
  color: #1f2937;
  font-weight: 500;
`,xj=se.button`
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  font-size: 14px;
  font-weight: 500;
  text-align: left;
  color: ${t=>t.$position==="past"?"#1d4ed8":"#047857"};
  cursor: pointer;

  &:hover {
    text-decoration: underline;
  }
`,bj=se.span`
  font-size: 12px;
  color: #6b7280;
`,vj=se.div`
  padding: 24px 16px;
  text-align: center;
  color: #6b7280;
  font-size: 13px;
`;function Aj(t){const o=new Date(t);return`${o.toLocaleDateString()} ${o.toLocaleTimeString()}`}function wj({entries:t,currentIndex:o,onClose:a,onSelectEntry:i,position:l,onPositionChange:c}){const u=x.useRef(null),f=x.useRef(null),p=x.useCallback(m=>{if(!u.current)return;const b=m.clientX-u.current.x,w=m.clientY-u.current.y;c({x:Math.max(12,b),y:Math.max(12,w)})},[c]),h=x.useCallback(()=>{u.current=null,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h)},[p]),g=x.useCallback(m=>{m.preventDefault(),u.current={x:m.clientX-l.x,y:m.clientY-l.y},document.addEventListener("mousemove",p),document.addEventListener("mouseup",h)},[p,h,l.x,l.y]);return x.useEffect(()=>()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h)},[p,h]),x.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[t.length]),v.jsxs(dj,{"data-history-panel":!0,$top:l.y,$left:l.x,children:[v.jsxs(fj,{"data-history-header":!0,onMouseDown:g,children:[v.jsx(hj,{children:"History"}),v.jsx(pj,{type:"button",onClick:a,children:""})]}),t.length===0?v.jsx(vj,{children:"No history recorded yet."}):v.jsx(mj,{ref:f,children:t.map((m,b)=>{const w=m.position==="present"?"Current":m.position==="past"?"Undo":"Redo",C=m.position!=="present";return v.jsxs(gj,{$isCurrent:b===o,"data-history-entry":!0,"data-entry-position":m.position,children:[C?v.jsx(xj,{type:"button",$position:m.position==="past"?"past":"future",onClick:()=>i(m.id),"data-history-action":m.position==="past"?"undo":"redo","data-entry-id":m.id,children:m.description}):v.jsx(yj,{children:m.description}),v.jsxs(bj,{children:[w,"  ",Aj(m.timestamp)]})]},m.id)})})]})}const Cj=({isOpen:t,onClose:o,onRefresh:a})=>v.jsxs(ls,{isOpen:t,onClose:o,role:"alertdialog",ariaLabelledBy:"reset-notice-title",dataAttributes:{"data-reset-notice":"true"},closeOnOverlayClick:!1,children:[v.jsxs(as,{id:"reset-notice-title",children:[dr," Reset Complete"]}),v.jsx(is,{children:v.jsxs("p",{children:["Your local ",dr," data has been cleared. To finish applying the reset, refresh this browser tab."]})}),v.jsxs(ss,{children:[v.jsx(go,{onClick:o,children:"Close"}),v.jsx(go,{$variant:"primary",onClick:a,children:"Refresh Now"})]})]}),Cn={lineColour:"#6c757d",lineWidth:2,opacity:1,shadow:!1,shadowColour:"#000000",shadowOpacity:.36,shadowBlurRadius:6,startMark:"None",endMark:"None"},Ga="Untitled project",hl=Zt("project-name"),Sj=()=>{if(typeof navigator>"u")return"Unknown";const t=navigator.userAgent||"",o=[{name:"Microsoft Edge",regex:/Edg\/([\d.]+)/},{name:"Chrome",regex:/Chrome\/([\d.]+)/,skipIf:/Edg\//},{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/,skipIf:/Chrome\//}];for(const a of o){if(a.skipIf&&a.skipIf.test(t))continue;const i=t.match(a.regex);if(i&&i[1])return`${a.name} ${i[1]}`}return t},Ej=()=>{const{pages:t,activePageId:o,activeCanvas:a,canAddPage:i,setActivePage:l,commitCanvasSnapshot:c,addPage:u,deletePage:f,renamePage:p,duplicatePage:h,reorderPages:g,resetProject:m,replaceProject:b}=uj(),w=x.useRef(null),[C,A]=x.useState(!1),[S,R]=x.useState(()=>{if(typeof window>"u")return Ga;const V=window.localStorage.getItem(hl);if(typeof V=="string"){const ye=V.trim();if(ye.length>0)return ye}return Ga}),{canvasState:M,actions:E,canUndo:k,canRedo:I,historyEntries:z,historyIndex:D}=G_(a),j=E.exportHistoryState,$=E.importHistoryState,F=E.replaceCanvasState,[X,Z]=x.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Zt("history-panel-open"))==="true"),[K,te]=x.useState({x:24,y:80}),[Q,_]=x.useState(null),H=x.useRef({}),N=x.useRef(null),P=x.useCallback(V=>JSON.parse(JSON.stringify(V)),[]),O=x.useRef(!1),[U,L]=x.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Zt("library-collapsed"))==="true"),[Y,q]=x.useState(()=>{if(typeof window>"u")return!0;const V=window.localStorage.getItem(Zt("rulers-visible"));return V===null?!0:V==="true"}),[J,oe]=x.useState(()=>{if(typeof window<"u"){const V=window.localStorage.getItem(Zt("floating-toolbar-position"));if(V)try{const me=JSON.parse(V);if(typeof me.x=="number"&&typeof me.y=="number"&&Number.isFinite(me.x)&&Number.isFinite(me.y))return O.current=!0,{x:me.x,y:me.y}}catch(me){console.warn("Failed to parse stored toolbar position",me)}return{x:Math.max(0,Math.round(window.innerWidth/2-160)),y:24}}return{x:0,y:26}}),[le,fe]=x.useState(()=>{if(typeof window>"u")return!0;const V=window.localStorage.getItem(Zt("floating-toolbar-docked"));return V===null?!0:V==="true"}),[ge,Se]=x.useState(!1),[De,xe]=x.useState(!1),Te=x.useRef(!0),Ae=x.useRef(null),Oe=x.useRef(null),Le=4,[Pe,gt]=x.useState(null),{state:At,openMenu:zt,closeMenu:Qe,resetMenu:Re}=Ru(),Xe=x.useCallback(V=>{Promise.resolve().then(()=>{Te.current&&xe(V)})},[]);x.useEffect(()=>(Te.current=!0,()=>{Te.current=!1}),[]);const{state:je,openMenu:Nt,closeMenu:Ze,resetMenu:Je}=Ru(),ht=x.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[]),pe=ht?"":"Ctrl",He=ht?" Delete":"Delete",Ye=`${pe}+[`,$e=`${pe}+]`,ot=`${pe}+'`,rt=`${pe}+\\`,[ct,ut]=x.useState(!1),[Fe,Ee]=x.useState(!1),We=x.useMemo(()=>Sj(),[]),qe=x.useCallback(V=>JSON.stringify({elements:V.elements,connectors:V.connectors,zoom:V.zoom,panX:V.panX,panY:V.panY}),[]),_t=x.useRef(()=>{}),yn=x.useRef(null),jn=x.useCallback(()=>{ut(!1)},[]),xo=x.useCallback(()=>{window.location.reload()},[]),bo=x.useCallback(()=>{if(typeof window>"u")return;const V=new URLSearchParams({version:_p,browser:We});window.open(`/assets/bug-report/index.html?${V.toString()}`,"_blank","noopener")},[We]),Bn=x.useCallback(()=>t.some(V=>(V.canvasState.elements?.length??0)>0||(V.canvasState.connectors?.length??0)>0),[t]),Pn=x.useCallback(()=>{m(),R(Ga),typeof window<"u"&&window.localStorage.removeItem(hl)},[m,R]),Lo=x.useCallback(()=>{Ee(!1),Pn()},[Pn]),no=x.useCallback(()=>{Ee(!1)},[]),Wt=x.useCallback((V,ye)=>{H.current={},H.current[ye]=P(j()),yn.current=qe(V),N.current=ye},[P,j,qe]);x.useEffect(()=>{_t.current=()=>{const ye=E.exportHistoryState().present?.state??M,me={...Aa(ye),ownerPageId:o};c(o,me),H.current[o]=P(j()),yn.current=qe(me)}},[o,E,M,c,P,j,qe]),x.useEffect(()=>()=>{_t.current()},[]),x.useEffect(()=>{typeof window>"u"||po()||window.localStorage.setItem(Zt("history-panel-open"),String(X))},[X]),x.useEffect(()=>{typeof window>"u"||po()||window.localStorage.setItem(Zt("rulers-visible"),String(Y))},[Y]),x.useEffect(()=>{typeof window>"u"||po()||window.localStorage.setItem(Zt("library-collapsed"),String(U))},[U]),x.useEffect(()=>{typeof window>"u"||po()||window.localStorage.setItem(Zt("floating-toolbar-docked"),String(le))},[le]),x.useEffect(()=>{if(typeof window>"u"||po())return;const V=S.trim();V.length===0||V===Ga?window.localStorage.removeItem(hl):window.localStorage.setItem(hl,V)},[S]),x.useEffect(()=>{if(typeof document>"u")return;const V=S.trim(),ye=V.length>0?V:Ga;document.title=`${dr} - ${ye}`},[S]),x.useEffect(()=>{const V=t.find(st=>st.id===o);if(!V)return;const ye={...Aa(V.canvasState),ownerPageId:o},me=qe(ye),Ie=yn.current===me,it=N.current===o;if(Ie&&it){N.current=o;return}const ze=H.current[o];ze?$(P(ze)):(F(ye,{resetHistory:!0}),H.current[o]=P(j())),yn.current=me,N.current=o},[o,t,P,j,$,F,qe]),x.useEffect(()=>{const V=()=>{_t.current()};return window.addEventListener("beforeunload",V),()=>{window.removeEventListener("beforeunload",V)}},[]);const pt=x.useCallback(V=>{E.startTransaction(V)},[E]),wt=x.useCallback(()=>{E.endTransaction(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{_t.current()})})},[E]),St=W_({canvasState:M,setCanvasState:E.setCanvasState}),Ue=St.actions,qt=t.length>1,vo=i&&!!o,Ho=x.useCallback(()=>{!vo||!o||h(o)},[vo,o,h]),Ao=x.useCallback(()=>{!qt||!o||w.current?.requestDeletePage(o)},[qt,o]),pr=x.useCallback(V=>{const ye=V.trim();R(ye.length>0?ye:Ga)},[]),cn=x.useCallback(()=>{const V={elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0,ownerPageId:o};m(),E.replaceCanvasState(V,{resetHistory:!0}),E.clearSelection(),Ue.resetZoom(),Ue.updatePan(0,0),Ue.setMode("drag"),Ue.updateSelectionArea(null),Z(!1),te({x:24,y:80}),gt(null),Xt(null),zn({...Cn}),L(!1),_(null),R(Ga),typeof window<"u"&&window.localStorage.removeItem(hl),O.current=!1;const ye=typeof window<"u"?{x:Math.max(0,Math.round(window.innerWidth/2-160)),y:24}:{x:0,y:26};oe(ye),H.current={},N.current=null,yn.current=null},[o,E,Ue,m]);x.useEffect(()=>{if(typeof window>"u")return;const V=()=>{try{window.sessionStorage.getItem(Wh)==="true"&&(window.sessionStorage.removeItem(Wh),cn(),ut(!0))}catch(me){console.error("Failed to read reset notice flag:",me)}},ye=()=>{V()};return V(),window.addEventListener(Il,ye),()=>{window.removeEventListener(Il,ye)}},[cn]);const oo=St.canvasMode,[Vn,Xt]=x.useState(null),[Ft,zn]=x.useState({...Cn}),Yt=x.useCallback(V=>{Ue.setMode(V),V!=="draw-connector"&&(Xt(null),zn({...Cn}))},[Ue]),Rn=x.useCallback(V=>{const ye=V.label;if((Vn?.label??null)===ye&&oo==="draw-connector"){Xt(null),zn({...Cn}),Ue.setMode("drag");return}const Ie=V.defaultProps?.properties;Xt(V),zn({...Cn,...Ie??{}}),Ue.setMode("draw-connector")},[Vn,oo,Ue]),Et=q_({canvasState:M,setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),on=V_({setCanvasState:E.setCanvasState,zoom:St.zoom,onTransactionStart:pt,onTransactionEnd:wt}),Tt=Z_({setCanvasState:E.setCanvasState,zoom:St.zoom,onTransactionStart:pt,onTransactionEnd:wt}),Ra=x.useCallback(()=>{_t.current(),u()},[u]),hn=J_({canvasState:M,setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),Hr=x.useMemo(()=>{const V=t.find(ye=>ye.id===o);return V||{id:o,name:"Current Page",order:0,canvasState:M}},[t,o,M]),xt=ij({canvasState:M,setCanvasState:E.setCanvasState,replaceCanvasState:F,queueHistoryEntry:E.queueHistoryEntry,onSaveTimestampUpdate:()=>_(new Date),activePageId:o,activePage:Hr,pages:t,commitCanvasSnapshot:c,onImportApplied:Wt,replaceProject:b,startTransaction:E.startTransaction,endTransaction:E.endTransaction}),de=sj({setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),be=U?0:280;x.useEffect(()=>{typeof window>"u"||po()||window.localStorage.setItem(Zt("floating-toolbar-position"),JSON.stringify(J))},[J]);const et=M.selectedItemIds.length,at=M.selectedElements.length>0||M.selectedConnectors.length>0,ke=x.useMemo(()=>M.selectedElements.length>1,[M.selectedElements.length]),rn=x.useMemo(()=>M.selectedElements.some(V=>M.elements.find(ye=>ye.id===V&&ye.groupId)),[M.elements,M.selectedElements]);x.useEffect(()=>{(M.elements.length>0||M.connectors.length>0)&&_(new Date)},[M.elements,M.connectors]);const{singleElement:kn,singleConnector:Lt}=x.useMemo(()=>{if(et!==1)return{singleElement:null,singleConnector:null};const V=M.selectedElements[0]??null;if(V)return{singleElement:M.elements.find(Ie=>Ie.id===V)??null,singleConnector:null};const ye=M.selectedConnectors[0]??null;return ye?{singleElement:null,singleConnector:M.connectors.find(Ie=>Ie.id===ye)??null??null}:{singleElement:null,singleConnector:null}},[M.elements,M.connectors,M.selectedElements,M.selectedConnectors,et]),Nn=x.useCallback((V,ye)=>{Lt&&(E.updateConnectorProperty(Lt.id,V,ye),queueMicrotask(()=>{_t.current(),_(new Date)}))},[E,Lt]),Yo=x.useCallback((V,ye)=>{if(kn){E.updateElementProperty(kn.id,V,ye);return}Lt&&Nn(V,ye)},[E,Nn,Lt,kn]),ka=x.useCallback(()=>{if(kn){const V=ti(kn.type),ye=new Set(R1()),me=new Set(kT()),Ie=Ka(kn,kn.properties),it={};V.forEach(ze=>{if(ye.has(ze.id)||me.has(ze.id))return;const st=Ie[ze.id];st!==void 0&&(it[ze.id]=st)}),gt({kind:"element",elementType:kn.type,properties:it});return}if(Lt){const V=Lt.properties??Cn;gt({kind:"connector",properties:{lineColour:V.lineColour??Cn.lineColour,lineWidth:typeof V.lineWidth=="number"?Math.max(.5,V.lineWidth):Cn.lineWidth,opacity:typeof V.opacity=="number"?Math.min(1,Math.max(0,V.opacity)):Cn.opacity,shadow:typeof V.shadow=="boolean"?V.shadow:typeof V.dropShadow=="boolean"?V.dropShadow:Cn.shadow,shadowColour:typeof V.shadowColour=="string"&&V.shadowColour.trim().length>0?V.shadowColour:Cn.shadowColour??"#000000",shadowOpacity:typeof V.shadowOpacity=="number"?Math.min(1,Math.max(0,V.shadowOpacity)):Cn.shadowOpacity??.36,shadowBlurRadius:typeof V.shadowBlurRadius=="number"?Math.max(0,V.shadowBlurRadius):Cn.shadowBlurRadius??6,startMark:V.startMark==="HollowArrow"?"HollowArrow":Cn.startMark,endMark:V.endMark==="HollowArrow"?"HollowArrow":Cn.endMark}})}},[kn,Lt,Cn]),Mt=x.useCallback(()=>{if(Pe){if(Pe.kind==="element"){if(M.selectedElements.length===0)return;E.applyPropertiesToElements(M.selectedElements,Pe.properties);return}if(Pe.kind==="connector"){if(M.selectedConnectors.length===0)return;E.applyPropertiesToConnectors(M.selectedConnectors,Pe.properties)}}},[E,M.selectedConnectors,M.selectedElements,Pe]),$t=x.useCallback(()=>{M.selectedElements.length>1&&E.groupElements(M.selectedElements)},[E,M.selectedElements]),Dt=x.useCallback(()=>{const V=M.elements.find(ye=>M.selectedElements.includes(ye.id)&&ye.groupId)?.groupId;V&&E.ungroupElements(V)},[E,M.elements,M.selectedElements]),Qn=x.useCallback(()=>{Et.sendToFront()},[Et]),bt=x.useCallback(()=>{Et.bringForward()},[Et]),Ln=x.useCallback(()=>{Et.bringBack()},[Et]),$o=x.useCallback(()=>{Et.sendToBack()},[Et]),Yr=x.useCallback(()=>{Qn(),Qe()},[Qn,Qe]),Uo=x.useCallback(()=>{bt(),Qe()},[bt,Qe]),cs=x.useCallback(()=>{Ln(),Qe()},[Ln,Qe]),us=x.useCallback(()=>{$o(),Qe()},[$o,Qe]),mr=x.useCallback(()=>{$t(),Qe()},[$t,Qe]),$l=x.useCallback(()=>{Dt(),Qe()},[Dt,Qe]),ds=x.useCallback(()=>{E.deleteSelectedElements(),Qe()},[E.deleteSelectedElements,Qe]),fs=x.useMemo(()=>mI({modKeyLabel:pe,deleteShortcutLabel:He,hasAnySelection:at,canGroup:ke,canUngroup:rn,onBringToFront:Yr,onBringForward:Uo,onSendBackward:cs,onSendToBack:us,onGroup:mr,onUngroup:$l,onDelete:ds}),[ke,rn,He,at,Uo,Yr,ds,mr,cs,us,$l,pe]),ni=x.useCallback(()=>{Ue.zoomOut(),Ze()},[Ue,Ze]),Ul=x.useCallback(()=>{Ue.zoomIn(),Ze()},[Ue,Ze]),Xl=x.useCallback(()=>{Ue.resetZoom(),Ze()},[Ue,Ze]),Ta=x.useCallback(()=>{Ue.fitToScreen(),Ze()},[Ue,Ze]),oi=x.useMemo(()=>gI({zoomOutShortcutLabel:Ye,zoomInShortcutLabel:$e,resetZoomShortcutLabel:ot,fitShortcutLabel:rt,onZoomOut:ni,onZoomIn:Ul,onResetZoom:Xl,onFitToScreen:Ta}),[rt,Ta,Xl,Ul,ni,ot,$e,Ye]),hs=x.useCallback(V=>{if(!V){Qe(),Re();return}Ze(),Je(),zt({position:{x:V.x,y:V.y},entries:fs,dataAttributes:{"data-item-context-menu":"true"},metadata:{targetType:V.targetType,targetId:V.targetId}})},[Ze,Qe,fs,zt,Je,Re]),$r=x.useCallback(V=>{if(!V){Ze(),Je();return}Qe(),Re(),Nt({position:{x:V.x,y:V.y},entries:oi,dataAttributes:{"data-canvas-context-menu":"true"}})},[oi,Ze,Qe,Nt,Je,Re]);lj({handlers:{onSelectAll:E.selectAll,onCopy:hn.actions.copy,onCut:hn.actions.cut,onPaste:hn.actions.paste,onDelete:E.deleteSelectedElements,onSetMode:Yt,onUndo:E.undo,onRedo:E.redo,onMoveSelection:E.moveSelectedElements,onToggleHistory:()=>Z(V=>!V),onExportProjectJSON:xt.actions.exportProjectJSON,onImportProjectJSON:xt.actions.importProjectJSON,onGroup:$t,onUngroup:Dt,onBringForward:bt,onBringBack:Ln,onSendToFront:Qn,onSendToBack:$o,onZoomIn:Ue.zoomIn,onZoomOut:Ue.zoomOut,onResetZoom:Ue.resetZoom,onFitToScreen:Ue.fitToScreen,onCopyProperties:ka,onPasteProperties:Mt,onClearSelection:E.clearSelection},hasSelection:at}),x.useEffect(()=>{if(typeof window>"u")return;const V=window.__wiremeshTestHooks=window.__wiremeshTestHooks??{},ye=()=>E.getCanvasStateSnapshot();V.exportProjectJSON=xt.actions.exportProjectJSON,V.importProjectJSON=xt.actions.importProjectJSON,V.showNewProjectConfirm=()=>Ee(!0),V.triggerNewProject=()=>Bn()?(Ee(!0),"confirm"):(Pn(),"reset"),V.openProjectImportModal=me=>{xt.testHooks.openImportModal(me??null)},V.closeProjectImportModal=()=>{xt.testHooks.closeImportModal()},V.deleteSelection=()=>{E.deleteSelectedElements()},V.selectElement=(me,Ie=!1)=>{E.selectElement(me,Ie)},V.selectConnector=(me,Ie=!1)=>{E.selectConnector(me,Ie)},V.clearSelection=()=>{E.clearSelection()},V.clipboardCopy=()=>{hn.actions.copy()},V.clipboardCut=()=>{hn.actions.cut()},V.clipboardPaste=()=>{hn.actions.paste()},V.getClipboardSnapshot=()=>hn.clipboard,V.setClipboardSnapshot=me=>{hn.testHooks.setSnapshot(me)},V.setClipboardSnapshotByIds=(me,Ie)=>{const it=M.elements.filter(st=>me.includes(st.id)),ze=M.connectors.filter(st=>Ie.includes(st.id));hn.testHooks.setSnapshot({elements:it,connectors:ze})},V.updateElementText=(me,Ie)=>{E.updateElementText(me,Ie)},V.updateElementProperty=(me,Ie,it)=>{E.updateElementProperty(me,Ie,it)},V.getElementCount=()=>ye().elements.length,V.getElementIds=()=>ye().elements.map(me=>me.id),V.getElementState=me=>ye().elements.find(it=>it.id===me)??null,V.getHistoryState=()=>({canUndo:k,canRedo:I}),V.getSelectionState=()=>{const me=ye();return{elements:[...me.selectedElements],connectors:[...me.selectedConnectors]}},V.getConnectorIds=()=>ye().connectors.map(me=>me.id),V.getConnectorState=me=>ye().connectors.find(it=>it.id===me)??null,V.getConnectorResizingState=()=>({isResizing:Tt.isResizing,resizeConnectorId:Tt.resizeConnectorId,resizeEndpoint:Tt.resizeEndpoint,hasAnchorPreview:Tt.resizeHasAnchorPreview,anchorPreview:Tt.resizeAnchorPreview,pointerOffset:Tt.pointerOffset}),V.elementResizeStart=(me,Ie,it,ze)=>{on.actions.handleResizeStart(me,Ie,it,ze)},V.elementResizeMove=me=>{on.actions.handleResizeMove(me)},V.elementResizeEnd=()=>{on.actions.handleResizeEnd()},V.applyElementProperties=(me,Ie)=>{E.applyPropertiesToElements(me,Ie)},V.applyConnectorProperties=(me,Ie)=>{E.applyPropertiesToConnectors(me,Ie)},V.undo=()=>{E.undo()},V.redo=()=>{E.redo()},V.startTransaction=me=>{E.startTransaction(me)},V.endTransaction=()=>{E.endTransaction()},V.connectorResizeStart=(me,Ie,it,ze)=>{Tt.actions.handleResizeStart(me,Ie,it,ze?{pointerOffset:ze}:void 0)},V.connectorResizeMove=me=>{Tt.actions.handleResizeMove(me)},V.connectorResizeEnd=()=>{Tt.actions.handleResizeEnd()},V.flushPendingPersistence=()=>{E.flushPendingPersistence()},V.flushPendingWork=async()=>{E.flushPendingPersistence(),V.__rafFlushers?.forEach(Ie=>{try{Ie()}catch(it){console.warn("Failed to flush RAF callback",it)}})},V.getViewportState=()=>({panX:St.panX,panY:St.panY,zoom:St.zoom}),V.getTemporarySelectMode=()=>De},[E.deleteSelectedElements,E.selectElement,E.selectConnector,E.clearSelection,E.updateElementText,E.updateElementProperty,E.applyPropertiesToElements,E.applyPropertiesToConnectors,E.flushPendingPersistence,M.elements,M.connectors,M.selectedElements,M.selectedConnectors,xt.actions,xt.testHooks,Pn,Bn,k,I,Tt.isResizing,Tt.resizeConnectorId,Tt.resizeEndpoint,Tt.resizeHasAnchorPreview,Tt.resizeAnchorPreview,Tt.pointerOffset,Tt.actions.handleResizeStart,Tt.actions.handleResizeMove,Tt.actions.handleResizeEnd,on.actions.handleResizeStart,on.actions.handleResizeMove,on.actions.handleResizeEnd,E.undo,E.redo,E.startTransaction,E.endTransaction,St.panX,St.panY,St.zoom,hn.actions.copy,hn.actions.cut,hn.actions.paste,hn.clipboard,hn.testHooks.setSnapshot,De]);const Ur=x.useCallback(()=>{if(kn){E.resetElementStyling(kn.id);return}Lt&&E.resetConnectorProperties([Lt.id])},[E,Lt,kn]),Ql=x.useMemo(()=>Pe?Pe.kind==="element"?M.selectedElements.length>0:M.selectedConnectors.length>0:!1,[M.selectedConnectors.length,M.selectedElements.length,Pe]),ps=x.useCallback(V=>{V!==o&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{_t.current(),l(V),Xt(null),zn({...Cn}),Ue.setMode("drag")})})},[o,l,Ue]),Fl=x.useCallback(()=>{Se(!1),fe(!0)},[fe,Se]),Ia=x.useCallback(V=>{Se(V?.shouldCenter??!0),fe(!1)},[fe,Se]),xn=x.useCallback((V,ye,me,Ie)=>{const it=Ae.current?.getBoundingClientRect();if(!it)return;const ze=V-it.left-me,st=ye-it.top-Ie;oe({x:ze,y:st})},[]),Xr=x.useCallback((V,ye,me,Ie)=>{xn(V,ye,me,Ie),Se(!1),fe(!1);const it=Oe.current;it&&(it.undocked=!0)},[fe,Se,xn]),Oa=x.useCallback(V=>{if(V.button!==0||!le)return;const ye=V.currentTarget.closest('[data-floating-toolbar-docked="true"]');if(!ye)return;V.preventDefault();const me=ye.getBoundingClientRect();Oe.current={pointerOffsetX:V.clientX-me.left,pointerOffsetY:V.clientY-me.top,startClientX:V.clientX,startClientY:V.clientY,undocked:!1};const Ie=ze=>{const st=Oe.current;if(!st)return;const bn=ze.clientX-st.startClientX,an=ze.clientY-st.startClientY;if(!st.undocked){if(Math.hypot(bn,an)<Le)return;Xr(ze.clientX,ze.clientY,st.pointerOffsetX,st.pointerOffsetY)}st.undocked&&xn(ze.clientX,ze.clientY,st.pointerOffsetX,st.pointerOffsetY)},it=ze=>{const st=Oe.current;st?.undocked&&xn(ze.clientX,ze.clientY,st.pointerOffsetX,st.pointerOffsetY),Oe.current=null,document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",it)};document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",it)},[Le,Xr,le,xn]),Zo=x.useCallback(V=>{if(!le)return;const ye=V.touches[0];if(!ye)return;const me=V.currentTarget.closest('[data-floating-toolbar-docked="true"]');if(!me)return;V.preventDefault();const Ie=me.getBoundingClientRect();Oe.current={pointerOffsetX:ye.clientX-Ie.left,pointerOffsetY:ye.clientY-Ie.top,startClientX:ye.clientX,startClientY:ye.clientY,undocked:!1};const it=st=>{const bn=st.touches[0],an=Oe.current;if(!bn||!an)return;const Vu=bn.clientX-an.startClientX,ms=bn.clientY-an.startClientY;if(!an.undocked){if(Math.hypot(Vu,ms)<Le)return;Xr(bn.clientX,bn.clientY,an.pointerOffsetX,an.pointerOffsetY)}an.undocked&&xn(bn.clientX,bn.clientY,an.pointerOffsetX,an.pointerOffsetY)},ze=st=>{const bn=Oe.current,an=st.changedTouches[0];bn?.undocked&&an&&xn(an.clientX,an.clientY,bn.pointerOffsetX,bn.pointerOffsetY),Oe.current=null,document.removeEventListener("touchmove",it),document.removeEventListener("touchend",ze),document.removeEventListener("touchcancel",ze)};document.addEventListener("touchmove",it,{passive:!1}),document.addEventListener("touchend",ze),document.addEventListener("touchcancel",ze)},[Le,Xr,le,xn]),ri={canvasMode:St.canvasMode,isTemporarySelectMode:!1,onSetMode:Yt,onSendToBack:$o,onBringBack:Ln,onBringForward:bt,onSendToFront:Qn,hasSelection:at,onUndo:E.undo,onRedo:E.redo,canUndo:k,canRedo:I,onDelete:E.deleteSelectedElements,onGroup:$t,onUngroup:Dt,canGroup:ke,canUngroup:rn,onShapeDragStart:(V,ye)=>de.handleDragStart(V),onShapeDragMove:V=>de.handleDragMove(),onShapeDragEnd:V=>de.handleDragEnd(V),onShapeClick:de.handleElementClick,onConnectorToolSelect:Rn,activeConnectorPreset:Vn,position:J,onPositionChange:oe,shouldAutoCenter:!O.current,onDockToolbar:Fl,onUndockToolbar:Ia,shouldCenterOnUndock:ge,onCenterOnUndockHandled:()=>Se(!1),onDockedMouseDown:Oa,onDockedTouchStart:Zo};return v.jsxs(BS,{children:[v.jsx(vk,{onNew:()=>{if(Bn()){Ee(!0);return}Pn()},onExportPNG:xt.actions.exportPNG,onExportSelectedPNG:xt.actions.exportSelectedPNG,onExportPageJSON:xt.actions.exportPageJSON,onImportPageJSON:xt.actions.importPageJSON,onExportProjectJSON:xt.actions.exportProjectJSON,onImportProjectJSON:xt.actions.importProjectJSON,onToggleHistory:()=>Z(V=>!V),onToggleSidebar:()=>L(V=>!V),onToggleRulers:()=>q(V=>!V),onOpenBugReport:bo,onClearSelection:E.clearSelection,onSelectAll:E.selectAll,onSelectArea:()=>Ue.setMode("select"),projectName:S,onProjectNameChange:pr,onOpenAbout:()=>A(!0),onDuplicatePage:Ho,onDeletePage:Ao,onUndo:E.undo,onRedo:E.redo,onBringToFront:Qn,onSendToBack:$o,onBringForward:bt,onSendBackward:Ln,onGroup:$t,onUngroup:Dt,canGroup:ke,canUngroup:rn,hasSelection:at,lastSaved:Q,isHistoryOpen:X,isSidebarExpanded:!U,areRulersVisible:Y,dockedToolbar:le?v.jsx(Mx,{...ri,isDocked:!0}):void 0,canDuplicatePage:vo,canDeletePage:qt}),C&&v.jsx(Tk,{onClose:()=>A(!1)}),v.jsx(Bk,{isOpen:Fe,onConfirm:Lo,onCancel:no}),v.jsx(HT,{isCollapsed:U,onDragStart:de.handleDragStart,onDragMove:de.handleDragMove,onDragEnd:de.handleDragEnd,onElementClick:de.handleElementClick,selectedElement:kn,selectedConnector:Lt,selectionCount:et,onPropertyChange:Yo,onCopyProperties:ka,onPasteProperties:Mt,onResetProperties:Ur,canPasteProperties:Ql}),v.jsxs(PS,{ref:Ae,$libraryWidth:be,children:[!le&&v.jsx(Mx,{...ri,isDocked:!1}),X&&v.jsx(wj,{entries:z,currentIndex:D,onClose:()=>Z(!1),onSelectEntry:E.jumpToHistoryEntry,position:K,onPositionChange:te}),v.jsx(VO,{elements:M.elements,connectors:M.connectors,zoom:St.zoom,panX:St.panX,panY:St.panY,showRulers:Y,onPanChange:Ue.updatePan,onElementSelect:E.selectElement,onConnectorSelect:E.selectConnector,onElementsMoveTo:E.moveElementsTo,onConnectorsMoveTo:E.moveConnectorsTo,onElementTextEdit:E.updateElementText,onElementPropertyChange:E.updateElementProperty,onElementImageChange:E.updateElementImage,onZoomChange:Ue.setZoom,onZoomAtPoint:Ue.setZoomAtPoint,selectedElements:M.selectedElements,selectedConnectors:M.selectedConnectors,canvasMode:St.canvasMode,selectionArea:St.selectionArea,isSelecting:St.isSelecting,onSelectionStart:Ue.startSelection,onSelectionChange:Ue.updateSelectionArea,onSelectionComplete:V=>{const{elementIds:ye,connectorIds:me}=Ue.completeSelection(V,M);E.setCanvasState(Ie=>({...Ie,selectedElements:ye,selectedConnectors:me,selectedItemIds:Pr(ye,me)}))},onResizeStart:on.actions.handleResizeStart,onConnectorResizeStart:Tt.actions.handleResizeStart,isResizing:on.isResizing,isConnectorResizing:Tt.isResizing,resizingConnectorId:Tt.resizeConnectorId,resizeHasAnchorPreview:Tt.resizeHasAnchorPreview,resizeEndpoint:Tt.resizeEndpoint,resizeAnchorPreview:Tt.resizeAnchorPreview,onTransactionStart:pt,onTransactionEnd:wt,onTemporarySelectModeChange:Xe,onConnectorCreate:(V,ye,me)=>{const Ie=to();E.queueHistoryEntry("Add connector"),E.setCanvasState(it=>{const ze=_u(it),st={id:Ie,type:"line",startPoint:we(V),endPoint:we(ye),startAttachment:me?.start??null,endAttachment:me?.end??null,zIndex:ze,properties:{...Ft}};return{...it,connectors:[...it.connectors,st],selectedElements:[],selectedConnectors:[Ie],selectedItemIds:[Ie]}}),Xt(null),zn({...Cn}),Ue.setMode("drag")},onModeChange:Yt,onItemContextMenu:hs,onCanvasContextMenu:$r})]}),v.jsx(HI,{isOpen:xt.importModal.isOpen,pendingImportData:xt.importModal.pendingImportData,onConfirm:xt.importModal.onConfirm,onCancel:xt.importModal.onCancel}),v.jsx(Cj,{isOpen:ct,onClose:jn,onRefresh:xo}),v.jsx(YI,{isOpen:xt.pagePickerModal.isOpen,pages:xt.pagePickerModal.pages,onSelect:xt.pagePickerModal.onSelect,onCancel:xt.pagePickerModal.onCancel}),v.jsx($I,{isOpen:xt.projectImportModal.isOpen,pageCount:xt.projectImportModal.pageCount,onConfirm:xt.projectImportModal.onConfirm,onCancel:xt.projectImportModal.onCancel}),v.jsx(ku,{state:At,closeMenu:Qe,resetMenu:Re}),v.jsx(ku,{state:je,closeMenu:Ze,resetMenu:Je}),v.jsx(Z1,{ref:w,pages:t,activePageId:o,canAddPage:i,libraryWidth:be,isLibraryCollapsed:U,onAddPage:Ra,onToggleLibrary:()=>L(V=>!V),onDeletePage:f,onRenamePage:p,onDuplicatePage:h,onReorderPages:g,onSwitchToPage:ps,zoom:St.zoom,onZoomIn:Ue.zoomIn,onZoomOut:Ue.zoomOut,onResetZoom:Ue.resetZoom,onFitToScreen:Ue.fitToScreen})]})};if(typeof window<"u"){const t=()=>{try{window.sessionStorage.setItem(Wh,"true")}catch(a){console.error("Failed to set reset notice flag:",a)}window.dispatchEvent(new Event(Il))},o=()=>{if(window.location.hash!=="#reset")return;Kk(),Jk(),t();const a=`${window.location.pathname}${window.location.search}`;window.history.replaceState({},"",a)};window.addEventListener("hashchange",o),o()}kC.createRoot(document.getElementById("root")).render(v.jsx(Ce.StrictMode,{children:v.jsx(Ej,{})}));typeof document<"u"&&(document.title=Ak);
