function YC(e,o){for(var a=0;a<o.length;a++){const i=o[a];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in e)){const c=Object.getOwnPropertyDescriptor(i,l);c&&Object.defineProperty(e,l,c.get?c:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=a(l);fetch(l.href,c)}})();function ud(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mh={exports:{}},Il={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function $C(){if(Fy)return Il;Fy=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.fragment");function a(i,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var d in l)d!=="key"&&(c[d]=l[d])}else c=l;return l=c.ref,{$$typeof:e,type:i,key:u,ref:l!==void 0?l:null,props:c}}return Il.Fragment=o,Il.jsx=a,Il.jsxs=a,Il}var Qy;function UC(){return Qy||(Qy=1,Mh.exports=$C()),Mh.exports}var b=UC(),Rh={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function XC(){if(Gy)return rt;Gy=1;var e=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function v(T){return T===null||typeof T!="object"?null:(T=m&&T[m]||T["@@iterator"],typeof T=="function"?T:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(T,$,N){this.props=T,this.context=$,this.refs=S,this.updater=N||A}C.prototype.isReactComponent={},C.prototype.setState=function(T,$){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,$,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function M(){}M.prototype=C.prototype;function R(T,$,N){this.props=T,this.context=$,this.refs=S,this.updater=N||A}var E=R.prototype=new M;E.constructor=R,w(E,C.prototype),E.isPureReactComponent=!0;var k=Array.isArray,I={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function O(T,$,N,H,q,K){return N=K.ref,{$$typeof:e,type:T,key:$,ref:N!==void 0?N:null,props:K}}function j(T,$){return O(T.type,$,void 0,void 0,void 0,T.props)}function U(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function G(T){var $={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(N){return $[N]})}var X=/\/+/g;function W(T,$){return typeof T=="object"&&T!==null&&T.key!=null?G(""+T.key):$.toString(36)}function J(){}function oe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(J,J):(T.status="pending",T.then(function($){T.status==="pending"&&(T.status="fulfilled",T.value=$)},function($){T.status==="pending"&&(T.status="rejected",T.reason=$)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Z(T,$,N,H,q){var K=typeof T;(K==="undefined"||K==="boolean")&&(T=null);var ie=!1;if(T===null)ie=!0;else switch(K){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(T.$$typeof){case e:case o:ie=!0;break;case g:return ie=T._init,Z(ie(T._payload),$,N,H,q)}}if(ie)return q=q(T),ie=H===""?"."+W(T,0):H,k(q)?(N="",ie!=null&&(N=ie.replace(X,"$&/")+"/"),Z(q,$,N,"",function(ye){return ye})):q!=null&&(U(q)&&(q=j(q,N+(q.key==null||T&&T.key===q.key?"":(""+q.key).replace(X,"$&/")+"/")+ie)),$.push(q)),1;ie=0;var ue=H===""?".":H+":";if(k(T))for(var se=0;se<T.length;se++)H=T[se],K=ue+W(H,se),ie+=Z(H,$,N,K,q);else if(se=v(T),typeof se=="function")for(T=se.call(T),se=0;!(H=T.next()).done;)H=H.value,K=ue+W(H,se++),ie+=Z(H,$,N,K,q);else if(K==="object"){if(typeof T.then=="function")return Z(oe(T),$,N,H,q);throw $=String(T),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ie}function D(T,$,N){if(T==null)return T;var H=[],q=0;return Z(T,H,"","",function(K){return $.call(N,K,q++)}),H}function Y(T){if(T._status===-1){var $=T._result;$=$(),$.then(function(N){(T._status===0||T._status===-1)&&(T._status=1,T._result=N)},function(N){(T._status===0||T._status===-1)&&(T._status=2,T._result=N)}),T._status===-1&&(T._status=0,T._result=$)}if(T._status===1)return T._result.default;throw T._result}var z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function L(){}return rt.Children={map:D,forEach:function(T,$,N){D(T,function(){$.apply(this,arguments)},N)},count:function(T){var $=0;return D(T,function(){$++}),$},toArray:function(T){return D(T,function($){return $})||[]},only:function(T){if(!U(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},rt.Component=C,rt.Fragment=a,rt.Profiler=l,rt.PureComponent=R,rt.StrictMode=i,rt.Suspense=p,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,rt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return I.H.useMemoCache(T)}},rt.cache=function(T){return function(){return T.apply(null,arguments)}},rt.cloneElement=function(T,$,N){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var H=w({},T.props),q=T.key,K=void 0;if($!=null)for(ie in $.ref!==void 0&&(K=void 0),$.key!==void 0&&(q=""+$.key),$)!B.call($,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&$.ref===void 0||(H[ie]=$[ie]);var ie=arguments.length-2;if(ie===1)H.children=N;else if(1<ie){for(var ue=Array(ie),se=0;se<ie;se++)ue[se]=arguments[se+2];H.children=ue}return O(T.type,q,void 0,void 0,K,H)},rt.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},rt.createElement=function(T,$,N){var H,q={},K=null;if($!=null)for(H in $.key!==void 0&&(K=""+$.key),$)B.call($,H)&&H!=="key"&&H!=="__self"&&H!=="__source"&&(q[H]=$[H]);var ie=arguments.length-2;if(ie===1)q.children=N;else if(1<ie){for(var ue=Array(ie),se=0;se<ie;se++)ue[se]=arguments[se+2];q.children=ue}if(T&&T.defaultProps)for(H in ie=T.defaultProps,ie)q[H]===void 0&&(q[H]=ie[H]);return O(T,K,void 0,void 0,null,q)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(T){return{$$typeof:d,render:T}},rt.isValidElement=U,rt.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:Y}},rt.memo=function(T,$){return{$$typeof:h,type:T,compare:$===void 0?null:$}},rt.startTransition=function(T){var $=I.T,N={};I.T=N;try{var H=T(),q=I.S;q!==null&&q(N,H),typeof H=="object"&&H!==null&&typeof H.then=="function"&&H.then(L,z)}catch(K){z(K)}finally{I.T=$}},rt.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},rt.use=function(T){return I.H.use(T)},rt.useActionState=function(T,$,N){return I.H.useActionState(T,$,N)},rt.useCallback=function(T,$){return I.H.useCallback(T,$)},rt.useContext=function(T){return I.H.useContext(T)},rt.useDebugValue=function(){},rt.useDeferredValue=function(T,$){return I.H.useDeferredValue(T,$)},rt.useEffect=function(T,$,N){var H=I.H;if(typeof N=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return H.useEffect(T,$)},rt.useId=function(){return I.H.useId()},rt.useImperativeHandle=function(T,$,N){return I.H.useImperativeHandle(T,$,N)},rt.useInsertionEffect=function(T,$){return I.H.useInsertionEffect(T,$)},rt.useLayoutEffect=function(T,$){return I.H.useLayoutEffect(T,$)},rt.useMemo=function(T,$){return I.H.useMemo(T,$)},rt.useOptimistic=function(T,$){return I.H.useOptimistic(T,$)},rt.useReducer=function(T,$,N){return I.H.useReducer(T,$,N)},rt.useRef=function(T){return I.H.useRef(T)},rt.useState=function(T){return I.H.useState(T)},rt.useSyncExternalStore=function(T,$,N){return I.H.useSyncExternalStore(T,$,N)},rt.useTransition=function(){return I.H.useTransition()},rt.version="19.1.1",rt}var Wy;function Hp(){return Wy||(Wy=1,Rh.exports=XC()),Rh.exports}var y=Hp();const Me=ud(y),ev=YC({__proto__:null,default:Me},[y]);var kh={exports:{}},_l={},Th={exports:{}},Ih={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function FC(){return qy||(qy=1,(function(e){function o(D,Y){var z=D.length;D.push(Y);e:for(;0<z;){var L=z-1>>>1,T=D[L];if(0<l(T,Y))D[L]=Y,D[z]=T,z=L;else break e}}function a(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var Y=D[0],z=D.pop();if(z!==Y){D[0]=z;e:for(var L=0,T=D.length,$=T>>>1;L<$;){var N=2*(L+1)-1,H=D[N],q=N+1,K=D[q];if(0>l(H,z))q<T&&0>l(K,H)?(D[L]=K,D[q]=z,L=q):(D[L]=H,D[N]=z,L=N);else if(q<T&&0>l(K,z))D[L]=K,D[q]=z,L=q;else break e}}return Y}function l(D,Y){var z=D.sortIndex-Y.sortIndex;return z!==0?z:D.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var p=[],h=[],g=1,m=null,v=3,A=!1,w=!1,S=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function k(D){for(var Y=a(h);Y!==null;){if(Y.callback===null)i(h);else if(Y.startTime<=D)i(h),Y.sortIndex=Y.expirationTime,o(p,Y);else break;Y=a(h)}}function I(D){if(S=!1,k(D),!w)if(a(p)!==null)w=!0,B||(B=!0,W());else{var Y=a(h);Y!==null&&Z(I,Y.startTime-D)}}var B=!1,O=-1,j=5,U=-1;function G(){return C?!0:!(e.unstable_now()-U<j)}function X(){if(C=!1,B){var D=e.unstable_now();U=D;var Y=!0;try{e:{w=!1,S&&(S=!1,R(O),O=-1),A=!0;var z=v;try{t:{for(k(D),m=a(p);m!==null&&!(m.expirationTime>D&&G());){var L=m.callback;if(typeof L=="function"){m.callback=null,v=m.priorityLevel;var T=L(m.expirationTime<=D);if(D=e.unstable_now(),typeof T=="function"){m.callback=T,k(D),Y=!0;break t}m===a(p)&&i(p),k(D)}else i(p);m=a(p)}if(m!==null)Y=!0;else{var $=a(h);$!==null&&Z(I,$.startTime-D),Y=!1}}break e}finally{m=null,v=z,A=!1}Y=void 0}}finally{Y?W():B=!1}}}var W;if(typeof E=="function")W=function(){E(X)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,oe=J.port2;J.port1.onmessage=X,W=function(){oe.postMessage(null)}}else W=function(){M(X,0)};function Z(D,Y){O=M(function(){D(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(D){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var z=v;v=Y;try{return D()}finally{v=z}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var z=v;v=D;try{return Y()}finally{v=z}},e.unstable_scheduleCallback=function(D,Y,z){var L=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?L+z:L):z=L,D){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=z+T,D={id:g++,callback:Y,priorityLevel:D,startTime:z,expirationTime:T,sortIndex:-1},z>L?(D.sortIndex=z,o(h,D),a(p)===null&&D===a(h)&&(S?(R(O),O=-1):S=!0,Z(I,z-L))):(D.sortIndex=T,o(p,D),w||A||(w=!0,B||(B=!0,W()))),D},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(D){var Y=v;return function(){var z=v;v=Y;try{return D.apply(this,arguments)}finally{v=z}}}})(Ih)),Ih}var Vy;function QC(){return Vy||(Vy=1,Th.exports=FC()),Th.exports}var _h={exports:{}},to={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function GC(){if(Ky)return to;Ky=1;var e=Hp();function o(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,h,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:m==null?null:""+m,children:p,containerInfo:h,implementation:g}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return to.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,to.createPortal=function(p,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(o(299));return c(p,h,null,g)},to.flushSync=function(p){var h=u.T,g=i.p;try{if(u.T=null,i.p=2,p)return p()}finally{u.T=h,i.p=g,i.d.f()}},to.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(p,h))},to.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},to.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var g=h.as,m=d(g,h.crossOrigin),v=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?i.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:A}):g==="script"&&i.d.X(p,{crossOrigin:m,integrity:v,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},to.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=d(h.as,h.crossOrigin);i.d.M(p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(p)},to.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,m=d(g,h.crossOrigin);i.d.L(p,g,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},to.preloadModule=function(p,h){if(typeof p=="string")if(h){var g=d(h.as,h.crossOrigin);i.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(p)},to.requestFormReset=function(p){i.d.r(p)},to.unstable_batchedUpdates=function(p,h){return p(h)},to.useFormState=function(p,h,g){return u.H.useFormState(p,h,g)},to.useFormStatus=function(){return u.H.useHostTransitionStatus()},to.version="19.1.1",to}var Zy;function tv(){if(Zy)return _h.exports;Zy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(o){console.error(o)}}return e(),_h.exports=GC(),_h.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function WC(){if(Jy)return _l;Jy=1;var e=QC(),o=Hp(),a=tv();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function u(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function d(t){if(c(t)!==t)throw Error(i(188))}function p(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,s=n;;){var f=r.return;if(f===null)break;var x=f.alternate;if(x===null){if(s=f.return,s!==null){r=s;continue}break}if(f.child===x.child){for(x=f.child;x;){if(x===r)return d(f),t;if(x===s)return d(f),n;x=x.sibling}throw Error(i(188))}if(r.return!==s.return)r=f,s=x;else{for(var _=!1,P=f.child;P;){if(P===r){_=!0,r=f,s=x;break}if(P===s){_=!0,s=f,r=x;break}P=P.sibling}if(!_){for(P=x.child;P;){if(P===r){_=!0,r=x,s=f;break}if(P===s){_=!0,s=x,r=f;break}P=P.sibling}if(!_)throw Error(i(189))}}if(r.alternate!==s)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function h(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=h(t),n!==null)return n;t=t.sibling}return null}var g=Object.assign,m=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),R=Symbol.for("react.consumer"),E=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),G=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function W(t){return t===null||typeof t!="object"?null:(t=X&&t[X]||t["@@iterator"],typeof t=="function"?t:null)}var J=Symbol.for("react.client.reference");function oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===J?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case B:return"SuspenseList";case U:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case E:return(t.displayName||"Context")+".Provider";case R:return(t._context.displayName||"Context")+".Consumer";case k:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return n=t.displayName||null,n!==null?n:oe(t.type)||"Memo";case j:n=t._payload,t=t._init;try{return oe(t(n))}catch{}}return null}var Z=Array.isArray,D=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},L=[],T=-1;function $(t){return{current:t}}function N(t){0>T||(t.current=L[T],L[T]=null,T--)}function H(t,n){T++,L[T]=t.current,t.current=n}var q=$(null),K=$(null),ie=$(null),ue=$(null);function se(t,n){switch(H(ie,n),H(K,t),H(q,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?by(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=by(n),t=vy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}N(q),H(q,t)}function ye(){N(q),N(K),N(ie)}function ge(t){t.memoizedState!==null&&H(ue,t);var n=q.current,r=vy(n,t.type);n!==r&&(H(K,t),H(q,r))}function Ae(t){K.current===t&&(N(q),N(K)),ue.current===t&&(N(ue),El._currentValue=z)}var Se=Object.prototype.hasOwnProperty,Pe=e.unstable_scheduleCallback,Ee=e.unstable_cancelCallback,He=e.unstable_shouldYield,We=e.unstable_requestPaint,_e=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,ot=e.unstable_ImmediatePriority,Ye=e.unstable_UserBlockingPriority,et=e.unstable_NormalPriority,yt=e.unstable_LowPriority,ht=e.unstable_IdlePriority,It=e.log,cn=e.unstable_setDisableYieldValue,je=null,Te=null;function Be(t){if(typeof It=="function"&&cn(t),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(je,t)}catch{}}var Xe=Math.clz32?Math.clz32:Le,we=Math.log,Oe=Math.LN2;function Le(t){return t>>>=0,t===0?32:31-(we(t)/Oe|0)|0}var Ne=256,xt=4194304;function Fe(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $e(t,n,r){var s=t.pendingLanes;if(s===0)return 0;var f=0,x=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var P=s&134217727;return P!==0?(s=P&~x,s!==0?f=Fe(s):(_&=P,_!==0?f=Fe(_):r||(r=P&~t,r!==0&&(f=Fe(r))))):(P=s&~x,P!==0?f=Fe(P):_!==0?f=Fe(_):r||(r=s&~t,r!==0&&(f=Fe(r)))),f===0?0:n!==0&&n!==f&&(n&x)===0&&(x=f&-f,r=n&-n,x>=r||x===32&&(r&4194048)!==0)?n:f}function De(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function St(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(){var t=Ne;return Ne<<=1,(Ne&4194048)===0&&(Ne=256),t}function mn(){var t=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),t}function bn(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function Lt(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ao(t,n,r,s,f,x){var _=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var P=t.entanglements,Q=t.expirationTimes,ne=t.hiddenUpdates;for(r=_&~r;0<r;){var de=31-Xe(r),me=1<<de;P[de]=0,Q[de]=-1;var re=ne[de];if(re!==null)for(ne[de]=null,de=0;de<re.length;de++){var ae=re[de];ae!==null&&(ae.lane&=-536870913)}r&=~me}s!==0&&_n(t,s,0),x!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=x&~(_&~n))}function _n(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var s=31-Xe(n);t.entangledLanes|=n,t.entanglements[s]=t.entanglements[s]|1073741824|r&4194090}function Mn(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var s=31-Xe(r),f=1<<s;f&n|t[s]&n&&(t[s]|=n),r&=~f}}function Ue(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function at(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ze(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:Ly(t.type))}function On(t,n){var r=Y.p;try{return Y.p=t,n()}finally{Y.p=r}}var vn=Math.random().toString(36).slice(2),Et="__reactFiber$"+vn,nn="__reactProps$"+vn,Kn="__reactContainer$"+vn,Xn="__reactEvents$"+vn,bo="__reactListeners$"+vn,fr="__reactHandles$"+vn,Dn="__reactResources$"+vn,Zt="__reactMarker$"+vn;function Wt(t){delete t[Et],delete t[nn],delete t[Xn],delete t[bo],delete t[fr]}function gn(t){var n=t[Et];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Kn]||r[Et]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=Sy(t);t!==null;){if(r=t[Et])return r;t=Sy(t)}return n}t=r,r=t.parentNode}return null}function jn(t){if(t=t[Et]||t[Kn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function Pn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function io(t){var n=t[Dn];return n||(n=t[Dn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function vt(t){t[Zt]=!0}var Jt=new Set,ua={};function Bn(t,n){so(t,n),so(t+"Capture",n)}function so(t,n){for(ua[t]=n,t=0;t<n.length;t++)Jt.add(n[t])}var Br=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$t={},tt={};function zr(t){return Se.call(tt,t)?!0:Se.call($t,t)?!1:Br.test(t)?tt[t]=!0:($t[t]=!0,!1)}function vo(t,n,r){if(zr(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Bo(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function zn(t,n,r,s){if(s===null)t.removeAttribute(r);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+s)}}var tr,Nr;function hr(t){if(tr===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);tr=n&&n[1]||"",Nr=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tr+t+Nr}var pr=!1;function on(t,n){if(!t||pr)return"";pr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var re=ae}Reflect.construct(t,[],me)}else{try{me.call()}catch(ae){re=ae}t.call(me.prototype)}}else{try{throw Error()}catch(ae){re=ae}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&re&&typeof ae.stack=="string")return[ae.stack,re.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=s.DetermineComponentFrameRoot(),_=x[0],P=x[1];if(_&&P){var Q=_.split(`
`),ne=P.split(`
`);for(f=s=0;s<Q.length&&!Q[s].includes("DetermineComponentFrameRoot");)s++;for(;f<ne.length&&!ne[f].includes("DetermineComponentFrameRoot");)f++;if(s===Q.length||f===ne.length)for(s=Q.length-1,f=ne.length-1;1<=s&&0<=f&&Q[s]!==ne[f];)f--;for(;1<=s&&0<=f;s--,f--)if(Q[s]!==ne[f]){if(s!==1||f!==1)do if(s--,f--,0>f||Q[s]!==ne[f]){var de=`
`+Q[s].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=s&&0<=f);break}}}finally{pr=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?hr(r):""}function mr(t){switch(t.tag){case 26:case 27:case 5:return hr(t.type);case 16:return hr("Lazy");case 13:return hr("Suspense");case 19:return hr("SuspenseList");case 0:case 15:return on(t.type,!1);case 11:return on(t.type.render,!1);case 1:return on(t.type,!0);case 31:return hr("Activity");default:return""}}function Nn(t){try{var n="";do n+=mr(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ho(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function oi(t){var n=ho(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),s=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var f=r.get,x=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(_){s=""+_,x.call(this,_)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function po(t){t._valueTracker||(t._valueTracker=oi(t))}function gr(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return t&&(s=ho(t)?t.checked?"true":"false":t.value),t=s,t!==r?(n.setValue(t),!0):!1}function da(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zo=/[\n"\\]/g;function Vt(t){return t.replace(zo,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Mt(t,n,r,s,f,x,_,P){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+qt(n)):t.value!==""+qt(n)&&(t.value=""+qt(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?le(t,_,qt(n)):r!=null?le(t,_,qt(r)):s!=null&&t.removeAttribute("value"),f==null&&x!=null&&(t.defaultChecked=!!x),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?t.name=""+qt(P):t.removeAttribute("name")}function ri(t,n,r,s,f,x,_,P){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),n!=null||r!=null){if(!(x!=="submit"&&x!=="reset"||n!=null))return;r=r!=null?""+qt(r):"",n=n!=null?""+qt(n):r,P||n===t.value||(t.value=n),t.defaultValue=n}s=s??f,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=P?t.checked:!!s,t.defaultChecked=!!s,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function le(t,n,r){n==="number"&&da(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function pe(t,n,r,s){if(t=t.options,n){n={};for(var f=0;f<r.length;f++)n["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=n.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&s&&(t[r].defaultSelected=!0)}else{for(r=""+qt(r),n=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,s&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function be(t,n,r){if(n!=null&&(n=""+qt(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+qt(r):""}function Ie(t,n,r,s){if(n==null){if(s!=null){if(r!=null)throw Error(i(92));if(Z(s)){if(1<s.length)throw Error(i(93));s=s[0]}r=s}r==null&&(r=""),n=r}r=qt(n),t.defaultValue=r,s=t.textContent,s===r&&s!==""&&s!==null&&(t.value=s)}function Ce(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var pt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fn(t,n,r){var s=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?s?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":s?t.setProperty(n,r):typeof r!="number"||r===0||pt.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function wt(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var s in r)!r.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var f in n)s=n[f],n.hasOwnProperty(f)&&r[f]!==s&&Fn(t,f,s)}else for(var x in n)n.hasOwnProperty(x)&&Fn(t,x,n[x])}function Zn(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Je(t){return rn.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ct=null;function Rt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ut=null,Ke=null;function Xt(t){var n=jn(t);if(n&&(t=n.stateNode)){var r=t[nn]||null;e:switch(t=n.stateNode,n.type){case"input":if(Mt(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Vt(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==t&&s.form===t.form){var f=s[nn]||null;if(!f)throw Error(i(90));Mt(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<r.length;n++)s=r[n],s.form===t.form&&gr(s)}break e;case"textarea":be(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&pe(t,!!r.multiple,n,!1)}}}var Jn=!1;function nr(t,n,r){if(Jn)return t(n,r);Jn=!0;try{var s=t(n);return s}finally{if(Jn=!1,(Ut!==null||Ke!==null)&&(Zc(),Ut&&(n=Ut,t=Ke,Ke=Ut=null,Xt(n),t)))for(n=0;n<t.length;n++)Xt(t[n])}}function un(t,n){var r=t.stateNode;if(r===null)return null;var s=r[nn]||null;if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lr=!1;if(Ft)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){Lr=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{Lr=!1}var wo=null,Oi=null,Hr=null;function fa(){if(Hr)return Hr;var t,n=Oi,r=n.length,s,f="value"in wo?wo.value:wo.textContent,x=f.length;for(t=0;t<r&&n[t]===f[t];t++);var _=r-t;for(s=1;s<=_&&n[r-s]===f[x-s];s++);return Hr=f.slice(t,1<s?1-s:void 0)}function xr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function br(){return!0}function ha(){return!1}function wn(t){function n(r,s,f,x,_){this._reactName=r,this._targetInst=f,this.type=s,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(r=t[P],this[P]=r?r(x):x[P]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?br:ha,this.isPropagationStopped=ha,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),n}var Ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=wn(Ao),pa=g({},Ao,{view:0,detail:0}),dc=wn(pa),Di,ji,ma,ii=g({},pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(Di=t.screenX-ma.screenX,ji=t.screenY-ma.screenY):ji=Di=0,ma=t),Di)},movementY:function(t){return"movementY"in t?t.movementY:ji}}),Hs=wn(ii),fc=g({},ii,{dataTransfer:0}),hc=wn(fc),pc=g({},pa,{relatedTarget:0}),Pi=wn(pc),mc=g({},Ao,{animationName:0,elapsedTime:0,pseudoElement:0}),gc=wn(mc),Md=g({},Ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Rd=wn(Md),kd=g({},Ao,{data:0}),yc=wn(kd),Td={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_d={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vr(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=_d[t])?!!n[t]:!1}function ga(){return vr}var Od=g({},pa,{key:function(t){if(t.key){var n=Td[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Id[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dd=wn(Od),xc=g({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F=wn(xc),fe=g({},pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),xe=wn(fe),ve=g({},Ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=wn(ve),bt=g({},ii,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ct=wn(bt),an=g({},Ao,{newState:0,oldState:0}),Rn=wn(an),jd=[9,13,27,32],Ys=Ft&&"CompositionEvent"in window,$s=null;Ft&&"documentMode"in document&&($s=document.documentMode);var fA=Ft&&"TextEvent"in window&&!$s,km=Ft&&(!Ys||$s&&8<$s&&11>=$s),Tm=" ",Im=!1;function _m(t,n){switch(t){case"keyup":return jd.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Om(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bi=!1;function hA(t,n){switch(t){case"compositionend":return Om(n);case"keypress":return n.which!==32?null:(Im=!0,Tm);case"textInput":return t=n.data,t===Tm&&Im?null:t;default:return null}}function pA(t,n){if(Bi)return t==="compositionend"||!Ys&&_m(t,n)?(t=fa(),Hr=Oi=wo=null,Bi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return km&&n.locale!=="ko"?null:n.data;default:return null}}var mA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!mA[t.type]:n==="textarea"}function jm(t,n,r,s){Ut?Ke?Ke.push(s):Ke=[s]:Ut=s,n=ru(n,"onChange"),0<n.length&&(r=new ai("onChange","change",null,r,s),t.push({event:r,listeners:n}))}var Us=null,Xs=null;function gA(t){py(t,0)}function bc(t){var n=Pn(t);if(gr(n))return t}function Pm(t,n){if(t==="change")return n}var Bm=!1;if(Ft){var Pd;if(Ft){var Bd="oninput"in document;if(!Bd){var zm=document.createElement("div");zm.setAttribute("oninput","return;"),Bd=typeof zm.oninput=="function"}Pd=Bd}else Pd=!1;Bm=Pd&&(!document.documentMode||9<document.documentMode)}function Nm(){Us&&(Us.detachEvent("onpropertychange",Lm),Xs=Us=null)}function Lm(t){if(t.propertyName==="value"&&bc(Xs)){var n=[];jm(n,Xs,t,Rt(t)),nr(gA,n)}}function yA(t,n,r){t==="focusin"?(Nm(),Us=n,Xs=r,Us.attachEvent("onpropertychange",Lm)):t==="focusout"&&Nm()}function xA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(Xs)}function bA(t,n){if(t==="click")return bc(n)}function vA(t,n){if(t==="input"||t==="change")return bc(n)}function wA(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Co=typeof Object.is=="function"?Object.is:wA;function Fs(t,n){if(Co(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var f=r[s];if(!Se.call(n,f)||!Co(t[f],n[f]))return!1}return!0}function Hm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ym(t,n){var r=Hm(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=n&&s>=n)return{node:r,offset:n-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Hm(r)}}function $m(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?$m(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Um(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=da(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=da(t.document)}return n}function zd(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var AA=Ft&&"documentMode"in document&&11>=document.documentMode,zi=null,Nd=null,Qs=null,Ld=!1;function Xm(t,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ld||zi==null||zi!==da(s)||(s=zi,"selectionStart"in s&&zd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Qs&&Fs(Qs,s)||(Qs=s,s=ru(Nd,"onSelect"),0<s.length&&(n=new ai("onSelect","select",null,n,r),t.push({event:n,listeners:s}),n.target=zi)))}function si(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Ni={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},Hd={},Fm={};Ft&&(Fm=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function li(t){if(Hd[t])return Hd[t];if(!Ni[t])return t;var n=Ni[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Fm)return Hd[t]=n[r];return t}var Qm=li("animationend"),Gm=li("animationiteration"),Wm=li("animationstart"),CA=li("transitionrun"),SA=li("transitionstart"),EA=li("transitioncancel"),qm=li("transitionend"),Vm=new Map,Yd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yd.push("scrollEnd");function or(t,n){Vm.set(t,n),Bn(n,[t])}var Km=new WeakMap;function No(t,n){if(typeof t=="object"&&t!==null){var r=Km.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Nn(n)},Km.set(t,n),n)}return{value:t,source:n,stack:Nn(n)}}var Lo=[],Li=0,$d=0;function vc(){for(var t=Li,n=$d=Li=0;n<t;){var r=Lo[n];Lo[n++]=null;var s=Lo[n];Lo[n++]=null;var f=Lo[n];Lo[n++]=null;var x=Lo[n];if(Lo[n++]=null,s!==null&&f!==null){var _=s.pending;_===null?f.next=f:(f.next=_.next,_.next=f),s.pending=f}x!==0&&Zm(r,f,x)}}function wc(t,n,r,s){Lo[Li++]=t,Lo[Li++]=n,Lo[Li++]=r,Lo[Li++]=s,$d|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Ud(t,n,r,s){return wc(t,n,r,s),Ac(t)}function Hi(t,n){return wc(t,null,null,n),Ac(t)}function Zm(t,n,r){t.lanes|=r;var s=t.alternate;s!==null&&(s.lanes|=r);for(var f=!1,x=t.return;x!==null;)x.childLanes|=r,s=x.alternate,s!==null&&(s.childLanes|=r),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(f=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,f&&n!==null&&(f=31-Xe(r),t=x.hiddenUpdates,s=t[f],s===null?t[f]=[n]:s.push(n),n.lane=r|536870912),x):null}function Ac(t){if(50<yl)throw yl=0,Vf=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Yi={};function MA(t,n,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function So(t,n,r,s){return new MA(t,n,r,s)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Yr(t,n){var r=t.alternate;return r===null?(r=So(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Jm(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Cc(t,n,r,s,f,x){var _=0;if(s=t,typeof t=="function")Xd(t)&&(_=1);else if(typeof t=="string")_=kC(t,r,q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case U:return t=So(31,r,n,f),t.elementType=U,t.lanes=x,t;case w:return ci(r.children,f,x,n);case S:_=8,f|=24;break;case C:return t=So(12,r,n,f|2),t.elementType=C,t.lanes=x,t;case I:return t=So(13,r,n,f),t.elementType=I,t.lanes=x,t;case B:return t=So(19,r,n,f),t.elementType=B,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:case E:_=10;break e;case R:_=9;break e;case k:_=11;break e;case O:_=14;break e;case j:_=16,s=null;break e}_=29,r=Error(i(130,t===null?"null":typeof t,"")),s=null}return n=So(_,r,n,f),n.elementType=t,n.type=s,n.lanes=x,n}function ci(t,n,r,s){return t=So(7,t,s,n),t.lanes=r,t}function Fd(t,n,r){return t=So(6,t,null,n),t.lanes=r,t}function Qd(t,n,r){return n=So(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var $i=[],Ui=0,Sc=null,Ec=0,Ho=[],Yo=0,ui=null,$r=1,Ur="";function di(t,n){$i[Ui++]=Ec,$i[Ui++]=Sc,Sc=t,Ec=n}function eg(t,n,r){Ho[Yo++]=$r,Ho[Yo++]=Ur,Ho[Yo++]=ui,ui=t;var s=$r;t=Ur;var f=32-Xe(s)-1;s&=~(1<<f),r+=1;var x=32-Xe(n)+f;if(30<x){var _=f-f%5;x=(s&(1<<_)-1).toString(32),s>>=_,f-=_,$r=1<<32-Xe(n)+f|r<<f|s,Ur=x+t}else $r=1<<x|r<<f|s,Ur=t}function Gd(t){t.return!==null&&(di(t,1),eg(t,1,0))}function Wd(t){for(;t===Sc;)Sc=$i[--Ui],$i[Ui]=null,Ec=$i[--Ui],$i[Ui]=null;for(;t===ui;)ui=Ho[--Yo],Ho[Yo]=null,Ur=Ho[--Yo],Ho[Yo]=null,$r=Ho[--Yo],Ho[Yo]=null}var lo=null,dn=null,Tt=!1,fi=null,wr=!1,qd=Error(i(519));function hi(t){var n=Error(i(418,""));throw qs(No(n,t)),qd}function tg(t){var n=t.stateNode,r=t.type,s=t.memoizedProps;switch(n[Et]=t,n[nn]=s,r){case"dialog":ft("cancel",n),ft("close",n);break;case"iframe":case"object":case"embed":ft("load",n);break;case"video":case"audio":for(r=0;r<bl.length;r++)ft(bl[r],n);break;case"source":ft("error",n);break;case"img":case"image":case"link":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"input":ft("invalid",n),ri(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),po(n);break;case"select":ft("invalid",n);break;case"textarea":ft("invalid",n),Ie(n,s.value,s.defaultValue,s.children),po(n)}r=s.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||s.suppressHydrationWarning===!0||xy(n.textContent,r)?(s.popover!=null&&(ft("beforetoggle",n),ft("toggle",n)),s.onScroll!=null&&ft("scroll",n),s.onScrollEnd!=null&&ft("scrollend",n),s.onClick!=null&&(n.onclick=au),n=!0):n=!1,n||hi(t)}function ng(t){for(lo=t.return;lo;)switch(lo.tag){case 5:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:lo=lo.return}}function Gs(t){if(t!==lo)return!1;if(!Tt)return ng(t),Tt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||fh(t.type,t.memoizedProps)),r=!r),r&&dn&&hi(t),ng(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){dn=ar(t.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}dn=null}}else n===27?(n=dn,Oa(t.type)?(t=gh,gh=null,dn=t):dn=n):dn=lo?ar(t.stateNode.nextSibling):null;return!0}function Ws(){dn=lo=null,Tt=!1}function og(){var t=fi;return t!==null&&(yo===null?yo=t:yo.push.apply(yo,t),fi=null),t}function qs(t){fi===null?fi=[t]:fi.push(t)}var Vd=$(null),pi=null,Xr=null;function ya(t,n,r){H(Vd,n._currentValue),n._currentValue=r}function Fr(t){t._currentValue=Vd.current,N(Vd)}function Kd(t,n,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),t===r)break;t=t.return}}function Zd(t,n,r,s){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var x=f.dependencies;if(x!==null){var _=f.child;x=x.firstContext;e:for(;x!==null;){var P=x;x=f;for(var Q=0;Q<n.length;Q++)if(P.context===n[Q]){x.lanes|=r,P=x.alternate,P!==null&&(P.lanes|=r),Kd(x.return,r,t),s||(_=null);break e}x=P.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=r,x=_.alternate,x!==null&&(x.lanes|=r),Kd(_,r,t),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===t){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Vs(t,n,r,s){t=null;for(var f=n,x=!1;f!==null;){if(!x){if((f.flags&524288)!==0)x=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var P=f.type;Co(f.pendingProps.value,_.value)||(t!==null?t.push(P):t=[P])}}else if(f===ue.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(El):t=[El])}f=f.return}t!==null&&Zd(n,t,r,s),n.flags|=262144}function Mc(t){for(t=t.firstContext;t!==null;){if(!Co(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function mi(t){pi=t,Xr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function eo(t){return rg(pi,t)}function Rc(t,n){return pi===null&&mi(t),rg(t,n)}function rg(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Xr===null){if(t===null)throw Error(i(308));Xr=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Xr=Xr.next=n;return r}var RA=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,s){t.push(s)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},kA=e.unstable_scheduleCallback,TA=e.unstable_NormalPriority,kn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jd(){return{controller:new RA,data:new Map,refCount:0}}function Ks(t){t.refCount--,t.refCount===0&&kA(TA,function(){t.controller.abort()})}var Zs=null,ef=0,Xi=0,Fi=null;function IA(t,n){if(Zs===null){var r=Zs=[];ef=0,Xi=oh(),Fi={status:"pending",value:void 0,then:function(s){r.push(s)}}}return ef++,n.then(ag,ag),n}function ag(){if(--ef===0&&Zs!==null){Fi!==null&&(Fi.status="fulfilled");var t=Zs;Zs=null,Xi=0,Fi=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function _A(t,n){var r=[],s={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){s.status="fulfilled",s.value=n;for(var f=0;f<r.length;f++)(0,r[f])(n)},function(f){for(s.status="rejected",s.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),s}var ig=D.S;D.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&IA(t,n),ig!==null&&ig(t,n)};var gi=$(null);function tf(){var t=gi.current;return t!==null?t:Qt.pooledCache}function kc(t,n){n===null?H(gi,gi.current):H(gi,n.pool)}function sg(){var t=tf();return t===null?null:{parent:kn._currentValue,pool:t}}var Js=Error(i(460)),lg=Error(i(474)),Tc=Error(i(542)),nf={then:function(){}};function cg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ic(){}function ug(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Ic,Ic),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,fg(t),t;default:if(typeof n.status=="string")n.then(Ic,Ic);else{if(t=Qt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(s){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=s}},function(s){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,fg(t),t}throw el=n,Js}}var el=null;function dg(){if(el===null)throw Error(i(459));var t=el;return el=null,t}function fg(t){if(t===Js||t===Tc)throw Error(i(483))}var xa=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rf(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ba(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function va(t,n,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,(Dt&2)!==0){var f=s.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),s.pending=n,n=Ac(t),Zm(t,null,r),n}return wc(t,s,n,r),Ac(t)}function tl(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var s=n.lanes;s&=t.pendingLanes,r|=s,n.lanes=r,Mn(t,r)}}function af(t,n){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var f=null,x=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};x===null?f=x=_:x=x.next=_,r=r.next}while(r!==null);x===null?f=x=n:x=x.next=n}else f=x=n;r={baseState:s.baseState,firstBaseUpdate:f,lastBaseUpdate:x,shared:s.shared,callbacks:s.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var sf=!1;function nl(){if(sf){var t=Fi;if(t!==null)throw t}}function ol(t,n,r,s){sf=!1;var f=t.updateQueue;xa=!1;var x=f.firstBaseUpdate,_=f.lastBaseUpdate,P=f.shared.pending;if(P!==null){f.shared.pending=null;var Q=P,ne=Q.next;Q.next=null,_===null?x=ne:_.next=ne,_=Q;var de=t.alternate;de!==null&&(de=de.updateQueue,P=de.lastBaseUpdate,P!==_&&(P===null?de.firstBaseUpdate=ne:P.next=ne,de.lastBaseUpdate=Q))}if(x!==null){var me=f.baseState;_=0,de=ne=Q=null,P=x;do{var re=P.lane&-536870913,ae=re!==P.lane;if(ae?(At&re)===re:(s&re)===re){re!==0&&re===Xi&&(sf=!0),de!==null&&(de=de.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ve=t,Qe=P;re=n;var zt=r;switch(Qe.tag){case 1:if(Ve=Qe.payload,typeof Ve=="function"){me=Ve.call(zt,me,re);break e}me=Ve;break e;case 3:Ve.flags=Ve.flags&-65537|128;case 0:if(Ve=Qe.payload,re=typeof Ve=="function"?Ve.call(zt,me,re):Ve,re==null)break e;me=g({},me,re);break e;case 2:xa=!0}}re=P.callback,re!==null&&(t.flags|=64,ae&&(t.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[re]:ae.push(re))}else ae={lane:re,tag:P.tag,payload:P.payload,callback:P.callback,next:null},de===null?(ne=de=ae,Q=me):de=de.next=ae,_|=re;if(P=P.next,P===null){if(P=f.shared.pending,P===null)break;ae=P,P=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);de===null&&(Q=me),f.baseState=Q,f.firstBaseUpdate=ne,f.lastBaseUpdate=de,x===null&&(f.shared.lanes=0),ka|=_,t.lanes=_,t.memoizedState=me}}function hg(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function pg(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)hg(r[t],n)}var Qi=$(null),_c=$(0);function mg(t,n){t=Zr,H(_c,t),H(Qi,n),Zr=t|n.baseLanes}function lf(){H(_c,Zr),H(Qi,Qi.current)}function cf(){Zr=_c.current,N(Qi),N(_c)}var wa=0,st=null,Pt=null,An=null,Oc=!1,Gi=!1,yi=!1,Dc=0,rl=0,Wi=null,OA=0;function yn(){throw Error(i(321))}function uf(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Co(t[r],n[r]))return!1;return!0}function df(t,n,r,s,f,x){return wa=x,st=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,D.H=t===null||t.memoizedState===null?Zg:Jg,yi=!1,x=r(s,f),yi=!1,Gi&&(x=yg(n,r,s,f)),gg(t),x}function gg(t){D.H=Lc;var n=Pt!==null&&Pt.next!==null;if(wa=0,An=Pt=st=null,Oc=!1,rl=0,Wi=null,n)throw Error(i(300));t===null||Ln||(t=t.dependencies,t!==null&&Mc(t)&&(Ln=!0))}function yg(t,n,r,s){st=t;var f=0;do{if(Gi&&(Wi=null),rl=0,Gi=!1,25<=f)throw Error(i(301));if(f+=1,An=Pt=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}D.H=LA,x=n(r,s)}while(Gi);return x}function DA(){var t=D.H,n=t.useState()[0];return n=typeof n.then=="function"?al(n):n,t=t.useState()[0],(Pt!==null?Pt.memoizedState:null)!==t&&(st.flags|=1024),n}function ff(){var t=Dc!==0;return Dc=0,t}function hf(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function pf(t){if(Oc){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Oc=!1}wa=0,An=Pt=st=null,Gi=!1,rl=Dc=0,Wi=null}function mo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?st.memoizedState=An=t:An=An.next=t,An}function Cn(){if(Pt===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=Pt.next;var n=An===null?st.memoizedState:An.next;if(n!==null)An=n,Pt=t;else{if(t===null)throw st.alternate===null?Error(i(467)):Error(i(310));Pt=t,t={memoizedState:Pt.memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},An===null?st.memoizedState=An=t:An=An.next=t}return An}function mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(t){var n=rl;return rl+=1,Wi===null&&(Wi=[]),t=ug(Wi,t,n),n=st,(An===null?n.memoizedState:An.next)===null&&(n=n.alternate,D.H=n===null||n.memoizedState===null?Zg:Jg),t}function jc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return al(t);if(t.$$typeof===E)return eo(t)}throw Error(i(438,String(t)))}function gf(t){var n=null,r=st.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var s=st.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=mf(),st.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),s=0;s<t;s++)r[s]=G;return n.index++,r}function Qr(t,n){return typeof n=="function"?n(t):n}function Pc(t){var n=Cn();return yf(n,Pt,t)}function yf(t,n,r){var s=t.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=r;var f=t.baseQueue,x=s.pending;if(x!==null){if(f!==null){var _=f.next;f.next=x.next,x.next=_}n.baseQueue=f=x,s.pending=null}if(x=t.baseState,f===null)t.memoizedState=x;else{n=f.next;var P=_=null,Q=null,ne=n,de=!1;do{var me=ne.lane&-536870913;if(me!==ne.lane?(At&me)===me:(wa&me)===me){var re=ne.revertLane;if(re===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),me===Xi&&(de=!0);else if((wa&re)===re){ne=ne.next,re===Xi&&(de=!0);continue}else me={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Q===null?(P=Q=me,_=x):Q=Q.next=me,st.lanes|=re,ka|=re;me=ne.action,yi&&r(x,me),x=ne.hasEagerState?ne.eagerState:r(x,me)}else re={lane:me,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},Q===null?(P=Q=re,_=x):Q=Q.next=re,st.lanes|=me,ka|=me;ne=ne.next}while(ne!==null&&ne!==n);if(Q===null?_=x:Q.next=P,!Co(x,t.memoizedState)&&(Ln=!0,de&&(r=Fi,r!==null)))throw r;t.memoizedState=x,t.baseState=_,t.baseQueue=Q,s.lastRenderedState=x}return f===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function xf(t){var n=Cn(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var s=r.dispatch,f=r.pending,x=n.memoizedState;if(f!==null){r.pending=null;var _=f=f.next;do x=t(x,_.action),_=_.next;while(_!==f);Co(x,n.memoizedState)||(Ln=!0),n.memoizedState=x,n.baseQueue===null&&(n.baseState=x),r.lastRenderedState=x}return[x,s]}function xg(t,n,r){var s=st,f=Cn(),x=Tt;if(x){if(r===void 0)throw Error(i(407));r=r()}else r=n();var _=!Co((Pt||f).memoizedState,r);_&&(f.memoizedState=r,Ln=!0),f=f.queue;var P=wg.bind(null,s,f,t);if(il(2048,8,P,[t]),f.getSnapshot!==n||_||An!==null&&An.memoizedState.tag&1){if(s.flags|=2048,qi(9,Bc(),vg.bind(null,s,f,r,n),null),Qt===null)throw Error(i(349));x||(wa&124)!==0||bg(s,n,r)}return r}function bg(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=st.updateQueue,n===null?(n=mf(),st.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function vg(t,n,r,s){n.value=r,n.getSnapshot=s,Ag(n)&&Cg(t)}function wg(t,n,r){return r(function(){Ag(n)&&Cg(t)})}function Ag(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Co(t,r)}catch{return!0}}function Cg(t){var n=Hi(t,2);n!==null&&To(n,t,2)}function bf(t){var n=mo();if(typeof t=="function"){var r=t;if(t=r(),yi){Be(!0);try{r()}finally{Be(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:t},n}function Sg(t,n,r,s){return t.baseState=r,yf(t,Pt,typeof s=="function"?s:Qr)}function jA(t,n,r,s,f){if(Nc(t))throw Error(i(485));if(t=n.action,t!==null){var x={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};D.T!==null?r(!0):x.isTransition=!1,s(x),r=n.pending,r===null?(x.next=n.pending=x,Eg(n,x)):(x.next=r.next,n.pending=r.next=x)}}function Eg(t,n){var r=n.action,s=n.payload,f=t.state;if(n.isTransition){var x=D.T,_={};D.T=_;try{var P=r(f,s),Q=D.S;Q!==null&&Q(_,P),Mg(t,n,P)}catch(ne){vf(t,n,ne)}finally{D.T=x}}else try{x=r(f,s),Mg(t,n,x)}catch(ne){vf(t,n,ne)}}function Mg(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(s){Rg(t,n,s)},function(s){return vf(t,n,s)}):Rg(t,n,r)}function Rg(t,n,r){n.status="fulfilled",n.value=r,kg(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Eg(t,r)))}function vf(t,n,r){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=r,kg(n),n=n.next;while(n!==s)}t.action=null}function kg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Tg(t,n){return n}function Ig(t,n){if(Tt){var r=Qt.formState;if(r!==null){e:{var s=st;if(Tt){if(dn){t:{for(var f=dn,x=wr;f.nodeType!==8;){if(!x){f=null;break t}if(f=ar(f.nextSibling),f===null){f=null;break t}}x=f.data,f=x==="F!"||x==="F"?f:null}if(f){dn=ar(f.nextSibling),s=f.data==="F!";break e}}hi(s)}s=!1}s&&(n=r[0])}}return r=mo(),r.memoizedState=r.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tg,lastRenderedState:n},r.queue=s,r=qg.bind(null,st,s),s.dispatch=r,s=bf(!1),x=Ef.bind(null,st,!1,s.queue),s=mo(),f={state:n,dispatch:null,action:t,pending:null},s.queue=f,r=jA.bind(null,st,f,x,r),f.dispatch=r,s.memoizedState=t,[n,r,!1]}function _g(t){var n=Cn();return Og(n,Pt,t)}function Og(t,n,r){if(n=yf(t,n,Tg)[0],t=Pc(Qr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=al(n)}catch(_){throw _===Js?Tc:_}else s=n;n=Cn();var f=n.queue,x=f.dispatch;return r!==n.memoizedState&&(st.flags|=2048,qi(9,Bc(),PA.bind(null,f,r),null)),[s,x,t]}function PA(t,n){t.action=n}function Dg(t){var n=Cn(),r=Pt;if(r!==null)return Og(n,r,t);Cn(),n=n.memoizedState,r=Cn();var s=r.queue.dispatch;return r.memoizedState=t,[n,s,!1]}function qi(t,n,r,s){return t={tag:t,create:r,deps:s,inst:n,next:null},n=st.updateQueue,n===null&&(n=mf(),st.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,n.lastEffect=t),t}function Bc(){return{destroy:void 0,resource:void 0}}function jg(){return Cn().memoizedState}function zc(t,n,r,s){var f=mo();s=s===void 0?null:s,st.flags|=t,f.memoizedState=qi(1|n,Bc(),r,s)}function il(t,n,r,s){var f=Cn();s=s===void 0?null:s;var x=f.memoizedState.inst;Pt!==null&&s!==null&&uf(s,Pt.memoizedState.deps)?f.memoizedState=qi(n,x,r,s):(st.flags|=t,f.memoizedState=qi(1|n,x,r,s))}function Pg(t,n){zc(8390656,8,t,n)}function Bg(t,n){il(2048,8,t,n)}function zg(t,n){return il(4,2,t,n)}function Ng(t,n){return il(4,4,t,n)}function Lg(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Hg(t,n,r){r=r!=null?r.concat([t]):null,il(4,4,Lg.bind(null,n,t),r)}function wf(){}function Yg(t,n){var r=Cn();n=n===void 0?null:n;var s=r.memoizedState;return n!==null&&uf(n,s[1])?s[0]:(r.memoizedState=[t,n],t)}function $g(t,n){var r=Cn();n=n===void 0?null:n;var s=r.memoizedState;if(n!==null&&uf(n,s[1]))return s[0];if(s=t(),yi){Be(!0);try{t()}finally{Be(!1)}}return r.memoizedState=[s,n],s}function Af(t,n,r){return r===void 0||(wa&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=F0(),st.lanes|=t,ka|=t,r)}function Ug(t,n,r,s){return Co(r,n)?r:Qi.current!==null?(t=Af(t,r,s),Co(t,n)||(Ln=!0),t):(wa&42)===0?(Ln=!0,t.memoizedState=r):(t=F0(),st.lanes|=t,ka|=t,n)}function Xg(t,n,r,s,f){var x=Y.p;Y.p=x!==0&&8>x?x:8;var _=D.T,P={};D.T=P,Ef(t,!1,n,r);try{var Q=f(),ne=D.S;if(ne!==null&&ne(P,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var de=_A(Q,s);sl(t,n,de,ko(t))}else sl(t,n,s,ko(t))}catch(me){sl(t,n,{then:function(){},status:"rejected",reason:me},ko())}finally{Y.p=x,D.T=_}}function BA(){}function Cf(t,n,r,s){if(t.tag!==5)throw Error(i(476));var f=Fg(t).queue;Xg(t,f,n,z,r===null?BA:function(){return Qg(t),r(s)})}function Fg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:z},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qr,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Qg(t){var n=Fg(t).next.queue;sl(t,n,{},ko())}function Sf(){return eo(El)}function Gg(){return Cn().memoizedState}function Wg(){return Cn().memoizedState}function zA(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=ko();t=ba(r);var s=va(n,t,r);s!==null&&(To(s,n,r),tl(s,n,r)),n={cache:Jd()},t.payload=n;return}n=n.return}}function NA(t,n,r){var s=ko();r={lane:s,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Nc(t)?Vg(n,r):(r=Ud(t,n,r,s),r!==null&&(To(r,t,s),Kg(r,n,s)))}function qg(t,n,r){var s=ko();sl(t,n,r,s)}function sl(t,n,r,s){var f={lane:s,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nc(t))Vg(n,f);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=n.lastRenderedReducer,x!==null))try{var _=n.lastRenderedState,P=x(_,r);if(f.hasEagerState=!0,f.eagerState=P,Co(P,_))return wc(t,n,f,0),Qt===null&&vc(),!1}catch{}finally{}if(r=Ud(t,n,f,s),r!==null)return To(r,t,s),Kg(r,n,s),!0}return!1}function Ef(t,n,r,s){if(s={lane:2,revertLane:oh(),action:s,hasEagerState:!1,eagerState:null,next:null},Nc(t)){if(n)throw Error(i(479))}else n=Ud(t,r,s,2),n!==null&&To(n,t,2)}function Nc(t){var n=t.alternate;return t===st||n!==null&&n===st}function Vg(t,n){Gi=Oc=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Kg(t,n,r){if((r&4194048)!==0){var s=n.lanes;s&=t.pendingLanes,r|=s,n.lanes=r,Mn(t,r)}}var Lc={readContext:eo,use:jc,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn},Zg={readContext:eo,use:jc,useCallback:function(t,n){return mo().memoizedState=[t,n===void 0?null:n],t},useContext:eo,useEffect:Pg,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,zc(4194308,4,Lg.bind(null,n,t),r)},useLayoutEffect:function(t,n){return zc(4194308,4,t,n)},useInsertionEffect:function(t,n){zc(4,2,t,n)},useMemo:function(t,n){var r=mo();n=n===void 0?null:n;var s=t();if(yi){Be(!0);try{t()}finally{Be(!1)}}return r.memoizedState=[s,n],s},useReducer:function(t,n,r){var s=mo();if(r!==void 0){var f=r(n);if(yi){Be(!0);try{r(n)}finally{Be(!1)}}}else f=n;return s.memoizedState=s.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},s.queue=t,t=t.dispatch=NA.bind(null,st,t),[s.memoizedState,t]},useRef:function(t){var n=mo();return t={current:t},n.memoizedState=t},useState:function(t){t=bf(t);var n=t.queue,r=qg.bind(null,st,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:wf,useDeferredValue:function(t,n){var r=mo();return Af(r,t,n)},useTransition:function(){var t=bf(!1);return t=Xg.bind(null,st,t.queue,!0,!1),mo().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var s=st,f=mo();if(Tt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),Qt===null)throw Error(i(349));(At&124)!==0||bg(s,n,r)}f.memoizedState=r;var x={value:r,getSnapshot:n};return f.queue=x,Pg(wg.bind(null,s,x,t),[t]),s.flags|=2048,qi(9,Bc(),vg.bind(null,s,x,r,n),null),r},useId:function(){var t=mo(),n=Qt.identifierPrefix;if(Tt){var r=Ur,s=$r;r=(s&~(1<<32-Xe(s)-1)).toString(32)+r,n=""+n+"R"+r,r=Dc++,0<r&&(n+="H"+r.toString(32)),n+=""}else r=OA++,n=""+n+"r"+r.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:Sf,useFormState:Ig,useActionState:Ig,useOptimistic:function(t){var n=mo();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ef.bind(null,st,!0,r),r.dispatch=n,[t,n]},useMemoCache:gf,useCacheRefresh:function(){return mo().memoizedState=zA.bind(null,st)}},Jg={readContext:eo,use:jc,useCallback:Yg,useContext:eo,useEffect:Bg,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:Ng,useMemo:$g,useReducer:Pc,useRef:jg,useState:function(){return Pc(Qr)},useDebugValue:wf,useDeferredValue:function(t,n){var r=Cn();return Ug(r,Pt.memoizedState,t,n)},useTransition:function(){var t=Pc(Qr)[0],n=Cn().memoizedState;return[typeof t=="boolean"?t:al(t),n]},useSyncExternalStore:xg,useId:Gg,useHostTransitionStatus:Sf,useFormState:_g,useActionState:_g,useOptimistic:function(t,n){var r=Cn();return Sg(r,Pt,t,n)},useMemoCache:gf,useCacheRefresh:Wg},LA={readContext:eo,use:jc,useCallback:Yg,useContext:eo,useEffect:Bg,useImperativeHandle:Hg,useInsertionEffect:zg,useLayoutEffect:Ng,useMemo:$g,useReducer:xf,useRef:jg,useState:function(){return xf(Qr)},useDebugValue:wf,useDeferredValue:function(t,n){var r=Cn();return Pt===null?Af(r,t,n):Ug(r,Pt.memoizedState,t,n)},useTransition:function(){var t=xf(Qr)[0],n=Cn().memoizedState;return[typeof t=="boolean"?t:al(t),n]},useSyncExternalStore:xg,useId:Gg,useHostTransitionStatus:Sf,useFormState:Dg,useActionState:Dg,useOptimistic:function(t,n){var r=Cn();return Pt!==null?Sg(r,Pt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:gf,useCacheRefresh:Wg},Vi=null,ll=0;function Hc(t){var n=ll;return ll+=1,Vi===null&&(Vi=[]),ug(Vi,t,n)}function cl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Yc(t,n){throw n.$$typeof===m?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function e0(t){var n=t._init;return n(t._payload)}function t0(t){function n(ee,V){if(t){var te=ee.deletions;te===null?(ee.deletions=[V],ee.flags|=16):te.push(V)}}function r(ee,V){if(!t)return null;for(;V!==null;)n(ee,V),V=V.sibling;return null}function s(ee){for(var V=new Map;ee!==null;)ee.key!==null?V.set(ee.key,ee):V.set(ee.index,ee),ee=ee.sibling;return V}function f(ee,V){return ee=Yr(ee,V),ee.index=0,ee.sibling=null,ee}function x(ee,V,te){return ee.index=te,t?(te=ee.alternate,te!==null?(te=te.index,te<V?(ee.flags|=67108866,V):te):(ee.flags|=67108866,V)):(ee.flags|=1048576,V)}function _(ee){return t&&ee.alternate===null&&(ee.flags|=67108866),ee}function P(ee,V,te,he){return V===null||V.tag!==6?(V=Fd(te,ee.mode,he),V.return=ee,V):(V=f(V,te),V.return=ee,V)}function Q(ee,V,te,he){var ke=te.type;return ke===w?de(ee,V,te.props.children,he,te.key):V!==null&&(V.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&e0(ke)===V.type)?(V=f(V,te.props),cl(V,te),V.return=ee,V):(V=Cc(te.type,te.key,te.props,null,ee.mode,he),cl(V,te),V.return=ee,V)}function ne(ee,V,te,he){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=Qd(te,ee.mode,he),V.return=ee,V):(V=f(V,te.children||[]),V.return=ee,V)}function de(ee,V,te,he,ke){return V===null||V.tag!==7?(V=ci(te,ee.mode,he,ke),V.return=ee,V):(V=f(V,te),V.return=ee,V)}function me(ee,V,te){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Fd(""+V,ee.mode,te),V.return=ee,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return te=Cc(V.type,V.key,V.props,null,ee.mode,te),cl(te,V),te.return=ee,te;case A:return V=Qd(V,ee.mode,te),V.return=ee,V;case j:var he=V._init;return V=he(V._payload),me(ee,V,te)}if(Z(V)||W(V))return V=ci(V,ee.mode,te,null),V.return=ee,V;if(typeof V.then=="function")return me(ee,Hc(V),te);if(V.$$typeof===E)return me(ee,Rc(ee,V),te);Yc(ee,V)}return null}function re(ee,V,te,he){var ke=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return ke!==null?null:P(ee,V,""+te,he);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case v:return te.key===ke?Q(ee,V,te,he):null;case A:return te.key===ke?ne(ee,V,te,he):null;case j:return ke=te._init,te=ke(te._payload),re(ee,V,te,he)}if(Z(te)||W(te))return ke!==null?null:de(ee,V,te,he,null);if(typeof te.then=="function")return re(ee,V,Hc(te),he);if(te.$$typeof===E)return re(ee,V,Rc(ee,te),he);Yc(ee,te)}return null}function ae(ee,V,te,he,ke){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ee=ee.get(te)||null,P(V,ee,""+he,ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case v:return ee=ee.get(he.key===null?te:he.key)||null,Q(V,ee,he,ke);case A:return ee=ee.get(he.key===null?te:he.key)||null,ne(V,ee,he,ke);case j:var ut=he._init;return he=ut(he._payload),ae(ee,V,te,he,ke)}if(Z(he)||W(he))return ee=ee.get(te)||null,de(V,ee,he,ke,null);if(typeof he.then=="function")return ae(ee,V,te,Hc(he),ke);if(he.$$typeof===E)return ae(ee,V,te,Rc(V,he),ke);Yc(V,he)}return null}function Ve(ee,V,te,he){for(var ke=null,ut=null,ze=V,Ge=V=0,Yn=null;ze!==null&&Ge<te.length;Ge++){ze.index>Ge?(Yn=ze,ze=null):Yn=ze.sibling;var kt=re(ee,ze,te[Ge],he);if(kt===null){ze===null&&(ze=Yn);break}t&&ze&&kt.alternate===null&&n(ee,ze),V=x(kt,V,Ge),ut===null?ke=kt:ut.sibling=kt,ut=kt,ze=Yn}if(Ge===te.length)return r(ee,ze),Tt&&di(ee,Ge),ke;if(ze===null){for(;Ge<te.length;Ge++)ze=me(ee,te[Ge],he),ze!==null&&(V=x(ze,V,Ge),ut===null?ke=ze:ut.sibling=ze,ut=ze);return Tt&&di(ee,Ge),ke}for(ze=s(ze);Ge<te.length;Ge++)Yn=ae(ze,ee,Ge,te[Ge],he),Yn!==null&&(t&&Yn.alternate!==null&&ze.delete(Yn.key===null?Ge:Yn.key),V=x(Yn,V,Ge),ut===null?ke=Yn:ut.sibling=Yn,ut=Yn);return t&&ze.forEach(function(za){return n(ee,za)}),Tt&&di(ee,Ge),ke}function Qe(ee,V,te,he){if(te==null)throw Error(i(151));for(var ke=null,ut=null,ze=V,Ge=V=0,Yn=null,kt=te.next();ze!==null&&!kt.done;Ge++,kt=te.next()){ze.index>Ge?(Yn=ze,ze=null):Yn=ze.sibling;var za=re(ee,ze,kt.value,he);if(za===null){ze===null&&(ze=Yn);break}t&&ze&&za.alternate===null&&n(ee,ze),V=x(za,V,Ge),ut===null?ke=za:ut.sibling=za,ut=za,ze=Yn}if(kt.done)return r(ee,ze),Tt&&di(ee,Ge),ke;if(ze===null){for(;!kt.done;Ge++,kt=te.next())kt=me(ee,kt.value,he),kt!==null&&(V=x(kt,V,Ge),ut===null?ke=kt:ut.sibling=kt,ut=kt);return Tt&&di(ee,Ge),ke}for(ze=s(ze);!kt.done;Ge++,kt=te.next())kt=ae(ze,ee,Ge,kt.value,he),kt!==null&&(t&&kt.alternate!==null&&ze.delete(kt.key===null?Ge:kt.key),V=x(kt,V,Ge),ut===null?ke=kt:ut.sibling=kt,ut=kt);return t&&ze.forEach(function(HC){return n(ee,HC)}),Tt&&di(ee,Ge),ke}function zt(ee,V,te,he){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case v:e:{for(var ke=te.key;V!==null;){if(V.key===ke){if(ke=te.type,ke===w){if(V.tag===7){r(ee,V.sibling),he=f(V,te.props.children),he.return=ee,ee=he;break e}}else if(V.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===j&&e0(ke)===V.type){r(ee,V.sibling),he=f(V,te.props),cl(he,te),he.return=ee,ee=he;break e}r(ee,V);break}else n(ee,V);V=V.sibling}te.type===w?(he=ci(te.props.children,ee.mode,he,te.key),he.return=ee,ee=he):(he=Cc(te.type,te.key,te.props,null,ee.mode,he),cl(he,te),he.return=ee,ee=he)}return _(ee);case A:e:{for(ke=te.key;V!==null;){if(V.key===ke)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){r(ee,V.sibling),he=f(V,te.children||[]),he.return=ee,ee=he;break e}else{r(ee,V);break}else n(ee,V);V=V.sibling}he=Qd(te,ee.mode,he),he.return=ee,ee=he}return _(ee);case j:return ke=te._init,te=ke(te._payload),zt(ee,V,te,he)}if(Z(te))return Ve(ee,V,te,he);if(W(te)){if(ke=W(te),typeof ke!="function")throw Error(i(150));return te=ke.call(te),Qe(ee,V,te,he)}if(typeof te.then=="function")return zt(ee,V,Hc(te),he);if(te.$$typeof===E)return zt(ee,V,Rc(ee,te),he);Yc(ee,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,V!==null&&V.tag===6?(r(ee,V.sibling),he=f(V,te),he.return=ee,ee=he):(r(ee,V),he=Fd(te,ee.mode,he),he.return=ee,ee=he),_(ee)):r(ee,V)}return function(ee,V,te,he){try{ll=0;var ke=zt(ee,V,te,he);return Vi=null,ke}catch(ze){if(ze===Js||ze===Tc)throw ze;var ut=So(29,ze,null,ee.mode);return ut.lanes=he,ut.return=ee,ut}finally{}}}var Ki=t0(!0),n0=t0(!1),$o=$(null),Ar=null;function Aa(t){var n=t.alternate;H(Tn,Tn.current&1),H($o,t),Ar===null&&(n===null||Qi.current!==null||n.memoizedState!==null)&&(Ar=t)}function o0(t){if(t.tag===22){if(H(Tn,Tn.current),H($o,t),Ar===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Ar=t)}}else Ca()}function Ca(){H(Tn,Tn.current),H($o,$o.current)}function Gr(t){N($o),Ar===t&&(Ar=null),N(Tn)}var Tn=$(0);function $c(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||mh(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Mf(t,n,r,s){n=t.memoizedState,r=r(s,n),r=r==null?n:g({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Rf={enqueueSetState:function(t,n,r){t=t._reactInternals;var s=ko(),f=ba(s);f.payload=n,r!=null&&(f.callback=r),n=va(t,f,s),n!==null&&(To(n,t,s),tl(n,t,s))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var s=ko(),f=ba(s);f.tag=1,f.payload=n,r!=null&&(f.callback=r),n=va(t,f,s),n!==null&&(To(n,t,s),tl(n,t,s))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=ko(),s=ba(r);s.tag=2,n!=null&&(s.callback=n),n=va(t,s,r),n!==null&&(To(n,t,r),tl(n,t,r))}};function r0(t,n,r,s,f,x,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,x,_):n.prototype&&n.prototype.isPureReactComponent?!Fs(r,s)||!Fs(f,x):!0}function a0(t,n,r,s){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==t&&Rf.enqueueReplaceState(n,n.state,null)}function xi(t,n){var r=n;if("ref"in n){r={};for(var s in n)s!=="ref"&&(r[s]=n[s])}if(t=t.defaultProps){r===n&&(r=g({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}var Uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function i0(t){Uc(t)}function s0(t){console.error(t)}function l0(t){Uc(t)}function Xc(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function c0(t,n,r){try{var s=t.onCaughtError;s(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function kf(t,n,r){return r=ba(r),r.tag=3,r.payload={element:null},r.callback=function(){Xc(t,n)},r}function u0(t){return t=ba(t),t.tag=3,t}function d0(t,n,r,s){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var x=s.value;t.payload=function(){return f(x)},t.callback=function(){c0(n,r,s)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){c0(n,r,s),typeof f!="function"&&(Ta===null?Ta=new Set([this]):Ta.add(this));var P=s.stack;this.componentDidCatch(s.value,{componentStack:P!==null?P:""})})}function HA(t,n,r,s,f){if(r.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=r.alternate,n!==null&&Vs(n,r,f,!0),r=$o.current,r!==null){switch(r.tag){case 13:return Ar===null?Zf():r.alternate===null&&fn===0&&(fn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,s===nf?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([s]):n.add(s),eh(t,s,f)),!1;case 22:return r.flags|=65536,s===nf?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([s]):r.add(s)),eh(t,s,f)),!1}throw Error(i(435,r.tag))}return eh(t,s,f),Zf(),!1}if(Tt)return n=$o.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,s!==qd&&(t=Error(i(422),{cause:s}),qs(No(t,r)))):(s!==qd&&(n=Error(i(423),{cause:s}),qs(No(n,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,s=No(s,r),f=kf(t.stateNode,s,f),af(t,f),fn!==4&&(fn=2)),!1;var x=Error(i(520),{cause:s});if(x=No(x,r),gl===null?gl=[x]:gl.push(x),fn!==4&&(fn=2),n===null)return!0;s=No(s,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=kf(r.stateNode,s,t),af(r,t),!1;case 1:if(n=r.type,x=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ta===null||!Ta.has(x))))return r.flags|=65536,f&=-f,r.lanes|=f,f=u0(f),d0(f,t,r,s),af(r,f),!1}r=r.return}while(r!==null);return!1}var f0=Error(i(461)),Ln=!1;function Qn(t,n,r,s){n.child=t===null?n0(n,null,r,s):Ki(n,t.child,r,s)}function h0(t,n,r,s,f){r=r.render;var x=n.ref;if("ref"in s){var _={};for(var P in s)P!=="ref"&&(_[P]=s[P])}else _=s;return mi(n),s=df(t,n,r,_,x,f),P=ff(),t!==null&&!Ln?(hf(t,n,f),Wr(t,n,f)):(Tt&&P&&Gd(n),n.flags|=1,Qn(t,n,s,f),n.child)}function p0(t,n,r,s,f){if(t===null){var x=r.type;return typeof x=="function"&&!Xd(x)&&x.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=x,m0(t,n,x,s,f)):(t=Cc(r.type,null,s,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(x=t.child,!Bf(t,f)){var _=x.memoizedProps;if(r=r.compare,r=r!==null?r:Fs,r(_,s)&&t.ref===n.ref)return Wr(t,n,f)}return n.flags|=1,t=Yr(x,s),t.ref=n.ref,t.return=n,n.child=t}function m0(t,n,r,s,f){if(t!==null){var x=t.memoizedProps;if(Fs(x,s)&&t.ref===n.ref)if(Ln=!1,n.pendingProps=s=x,Bf(t,f))(t.flags&131072)!==0&&(Ln=!0);else return n.lanes=t.lanes,Wr(t,n,f)}return Tf(t,n,r,s,f)}function g0(t,n,r){var s=n.pendingProps,f=s.children,x=t!==null?t.memoizedState:null;if(s.mode==="hidden"){if((n.flags&128)!==0){if(s=x!==null?x.baseLanes|r:r,t!==null){for(f=n.child=t.child,x=0;f!==null;)x=x|f.lanes|f.childLanes,f=f.sibling;n.childLanes=x&~s}else n.childLanes=0,n.child=null;return y0(t,n,s,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&kc(n,x!==null?x.cachePool:null),x!==null?mg(n,x):lf(),o0(n);else return n.lanes=n.childLanes=536870912,y0(t,n,x!==null?x.baseLanes|r:r,r)}else x!==null?(kc(n,x.cachePool),mg(n,x),Ca(),n.memoizedState=null):(t!==null&&kc(n,null),lf(),Ca());return Qn(t,n,f,r),n.child}function y0(t,n,r,s){var f=tf();return f=f===null?null:{parent:kn._currentValue,pool:f},n.memoizedState={baseLanes:r,cachePool:f},t!==null&&kc(n,null),lf(),o0(n),t!==null&&Vs(t,n,s,!0),null}function Fc(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Tf(t,n,r,s,f){return mi(n),r=df(t,n,r,s,void 0,f),s=ff(),t!==null&&!Ln?(hf(t,n,f),Wr(t,n,f)):(Tt&&s&&Gd(n),n.flags|=1,Qn(t,n,r,f),n.child)}function x0(t,n,r,s,f,x){return mi(n),n.updateQueue=null,r=yg(n,s,r,f),gg(t),s=ff(),t!==null&&!Ln?(hf(t,n,x),Wr(t,n,x)):(Tt&&s&&Gd(n),n.flags|=1,Qn(t,n,r,x),n.child)}function b0(t,n,r,s,f){if(mi(n),n.stateNode===null){var x=Yi,_=r.contextType;typeof _=="object"&&_!==null&&(x=eo(_)),x=new r(s,x),n.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Rf,n.stateNode=x,x._reactInternals=n,x=n.stateNode,x.props=s,x.state=n.memoizedState,x.refs={},of(n),_=r.contextType,x.context=typeof _=="object"&&_!==null?eo(_):Yi,x.state=n.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(Mf(n,r,_,s),x.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&Rf.enqueueReplaceState(x,x.state,null),ol(n,s,x,f),nl(),x.state=n.memoizedState),typeof x.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(t===null){x=n.stateNode;var P=n.memoizedProps,Q=xi(r,P);x.props=Q;var ne=x.context,de=r.contextType;_=Yi,typeof de=="object"&&de!==null&&(_=eo(de));var me=r.getDerivedStateFromProps;de=typeof me=="function"||typeof x.getSnapshotBeforeUpdate=="function",P=n.pendingProps!==P,de||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(P||ne!==_)&&a0(n,x,s,_),xa=!1;var re=n.memoizedState;x.state=re,ol(n,s,x,f),nl(),ne=n.memoizedState,P||re!==ne||xa?(typeof me=="function"&&(Mf(n,r,me,s),ne=n.memoizedState),(Q=xa||r0(n,r,Q,s,re,ne,_))?(de||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(n.flags|=4194308)):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=ne),x.props=s,x.state=ne,x.context=_,s=Q):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{x=n.stateNode,rf(t,n),_=n.memoizedProps,de=xi(r,_),x.props=de,me=n.pendingProps,re=x.context,ne=r.contextType,Q=Yi,typeof ne=="object"&&ne!==null&&(Q=eo(ne)),P=r.getDerivedStateFromProps,(ne=typeof P=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==me||re!==Q)&&a0(n,x,s,Q),xa=!1,re=n.memoizedState,x.state=re,ol(n,s,x,f),nl();var ae=n.memoizedState;_!==me||re!==ae||xa||t!==null&&t.dependencies!==null&&Mc(t.dependencies)?(typeof P=="function"&&(Mf(n,r,P,s),ae=n.memoizedState),(de=xa||r0(n,r,de,s,re,ae,Q)||t!==null&&t.dependencies!==null&&Mc(t.dependencies))?(ne||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(s,ae,Q),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(s,ae,Q)),typeof x.componentDidUpdate=="function"&&(n.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=ae),x.props=s,x.state=ae,x.context=Q,s=de):(typeof x.componentDidUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&re===t.memoizedState||(n.flags|=1024),s=!1)}return x=s,Fc(t,n),s=(n.flags&128)!==0,x||s?(x=n.stateNode,r=s&&typeof r.getDerivedStateFromError!="function"?null:x.render(),n.flags|=1,t!==null&&s?(n.child=Ki(n,t.child,null,f),n.child=Ki(n,null,r,f)):Qn(t,n,r,f),n.memoizedState=x.state,t=n.child):t=Wr(t,n,f),t}function v0(t,n,r,s){return Ws(),n.flags|=256,Qn(t,n,r,s),n.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _f(t){return{baseLanes:t,cachePool:sg()}}function Of(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Uo),t}function w0(t,n,r){var s=n.pendingProps,f=!1,x=(n.flags&128)!==0,_;if((_=x)||(_=t!==null&&t.memoizedState===null?!1:(Tn.current&2)!==0),_&&(f=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(Tt){if(f?Aa(n):Ca(),Tt){var P=dn,Q;if(Q=P){e:{for(Q=P,P=wr;Q.nodeType!==8;){if(!P){P=null;break e}if(Q=ar(Q.nextSibling),Q===null){P=null;break e}}P=Q}P!==null?(n.memoizedState={dehydrated:P,treeContext:ui!==null?{id:$r,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},Q=So(18,null,null,0),Q.stateNode=P,Q.return=n,n.child=Q,lo=n,dn=null,Q=!0):Q=!1}Q||hi(n)}if(P=n.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return mh(P)?n.lanes=32:n.lanes=536870912,null;Gr(n)}return P=s.children,s=s.fallback,f?(Ca(),f=n.mode,P=Qc({mode:"hidden",children:P},f),s=ci(s,f,r,null),P.return=n,s.return=n,P.sibling=s,n.child=P,f=n.child,f.memoizedState=_f(r),f.childLanes=Of(t,_,r),n.memoizedState=If,s):(Aa(n),Df(n,P))}if(Q=t.memoizedState,Q!==null&&(P=Q.dehydrated,P!==null)){if(x)n.flags&256?(Aa(n),n.flags&=-257,n=jf(t,n,r)):n.memoizedState!==null?(Ca(),n.child=t.child,n.flags|=128,n=null):(Ca(),f=s.fallback,P=n.mode,s=Qc({mode:"visible",children:s.children},P),f=ci(f,P,r,null),f.flags|=2,s.return=n,f.return=n,s.sibling=f,n.child=s,Ki(n,t.child,null,r),s=n.child,s.memoizedState=_f(r),s.childLanes=Of(t,_,r),n.memoizedState=If,n=f);else if(Aa(n),mh(P)){if(_=P.nextSibling&&P.nextSibling.dataset,_)var ne=_.dgst;_=ne,s=Error(i(419)),s.stack="",s.digest=_,qs({value:s,source:null,stack:null}),n=jf(t,n,r)}else if(Ln||Vs(t,n,r,!1),_=(r&t.childLanes)!==0,Ln||_){if(_=Qt,_!==null&&(s=r&-r,s=(s&42)!==0?1:Ue(s),s=(s&(_.suspendedLanes|r))!==0?0:s,s!==0&&s!==Q.retryLane))throw Q.retryLane=s,Hi(t,s),To(_,t,s),f0;P.data==="$?"||Zf(),n=jf(t,n,r)}else P.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=Q.treeContext,dn=ar(P.nextSibling),lo=n,Tt=!0,fi=null,wr=!1,t!==null&&(Ho[Yo++]=$r,Ho[Yo++]=Ur,Ho[Yo++]=ui,$r=t.id,Ur=t.overflow,ui=n),n=Df(n,s.children),n.flags|=4096);return n}return f?(Ca(),f=s.fallback,P=n.mode,Q=t.child,ne=Q.sibling,s=Yr(Q,{mode:"hidden",children:s.children}),s.subtreeFlags=Q.subtreeFlags&65011712,ne!==null?f=Yr(ne,f):(f=ci(f,P,r,null),f.flags|=2),f.return=n,s.return=n,s.sibling=f,n.child=s,s=f,f=n.child,P=t.child.memoizedState,P===null?P=_f(r):(Q=P.cachePool,Q!==null?(ne=kn._currentValue,Q=Q.parent!==ne?{parent:ne,pool:ne}:Q):Q=sg(),P={baseLanes:P.baseLanes|r,cachePool:Q}),f.memoizedState=P,f.childLanes=Of(t,_,r),n.memoizedState=If,s):(Aa(n),r=t.child,t=r.sibling,r=Yr(r,{mode:"visible",children:s.children}),r.return=n,r.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=r,n.memoizedState=null,r)}function Df(t,n){return n=Qc({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Qc(t,n){return t=So(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function jf(t,n,r){return Ki(n,t.child,null,r),t=Df(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function A0(t,n,r){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n),Kd(t.return,n,r)}function Pf(t,n,r,s,f){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:f}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=s,x.tail=r,x.tailMode=f)}function C0(t,n,r){var s=n.pendingProps,f=s.revealOrder,x=s.tail;if(Qn(t,n,s.children,r),s=Tn.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&A0(t,r,n);else if(t.tag===19)A0(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}switch(H(Tn,s),f){case"forwards":for(r=n.child,f=null;r!==null;)t=r.alternate,t!==null&&$c(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=n.child,n.child=null):(f=r.sibling,r.sibling=null),Pf(n,!1,f,r,x);break;case"backwards":for(r=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&$c(t)===null){n.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}Pf(n,!0,r,null,x);break;case"together":Pf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wr(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),ka|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(Vs(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=Yr(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=Yr(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Bf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Mc(t)))}function YA(t,n,r){switch(n.tag){case 3:se(n,n.stateNode.containerInfo),ya(n,kn,t.memoizedState.cache),Ws();break;case 27:case 5:ge(n);break;case 4:se(n,n.stateNode.containerInfo);break;case 10:ya(n,n.type,n.memoizedProps.value);break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(Aa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?w0(t,n,r):(Aa(n),t=Wr(t,n,r),t!==null?t.sibling:null);Aa(n);break;case 19:var f=(t.flags&128)!==0;if(s=(r&n.childLanes)!==0,s||(Vs(t,n,r,!1),s=(r&n.childLanes)!==0),f){if(s)return C0(t,n,r);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),H(Tn,Tn.current),s)break;return null;case 22:case 23:return n.lanes=0,g0(t,n,r);case 24:ya(n,kn,t.memoizedState.cache)}return Wr(t,n,r)}function S0(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ln=!0;else{if(!Bf(t,r)&&(n.flags&128)===0)return Ln=!1,YA(t,n,r);Ln=(t.flags&131072)!==0}else Ln=!1,Tt&&(n.flags&1048576)!==0&&eg(n,Ec,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var s=n.elementType,f=s._init;if(s=f(s._payload),n.type=s,typeof s=="function")Xd(s)?(t=xi(s,t),n.tag=1,n=b0(null,n,s,t,r)):(n.tag=0,n=Tf(null,n,s,t,r));else{if(s!=null){if(f=s.$$typeof,f===k){n.tag=11,n=h0(null,n,s,t,r);break e}else if(f===O){n.tag=14,n=p0(null,n,s,t,r);break e}}throw n=oe(s)||s,Error(i(306,n,""))}}return n;case 0:return Tf(t,n,n.type,n.pendingProps,r);case 1:return s=n.type,f=xi(s,n.pendingProps),b0(t,n,s,f,r);case 3:e:{if(se(n,n.stateNode.containerInfo),t===null)throw Error(i(387));s=n.pendingProps;var x=n.memoizedState;f=x.element,rf(t,n),ol(n,s,null,r);var _=n.memoizedState;if(s=_.cache,ya(n,kn,s),s!==x.cache&&Zd(n,[kn],r,!0),nl(),s=_.element,x.isDehydrated)if(x={element:s,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=x,n.memoizedState=x,n.flags&256){n=v0(t,n,s,r);break e}else if(s!==f){f=No(Error(i(424)),n),qs(f),n=v0(t,n,s,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dn=ar(t.firstChild),lo=n,Tt=!0,fi=null,wr=!0,r=n0(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ws(),s===f){n=Wr(t,n,r);break e}Qn(t,n,s,r)}n=n.child}return n;case 26:return Fc(t,n),t===null?(r=ky(n.type,null,n.pendingProps,null))?n.memoizedState=r:Tt||(r=n.type,t=n.pendingProps,s=iu(ie.current).createElement(r),s[Et]=n,s[nn]=t,Wn(s,r,t),vt(s),n.stateNode=s):n.memoizedState=ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ge(n),t===null&&Tt&&(s=n.stateNode=Ey(n.type,n.pendingProps,ie.current),lo=n,wr=!0,f=dn,Oa(n.type)?(gh=f,dn=ar(s.firstChild)):dn=f),Qn(t,n,n.pendingProps.children,r),Fc(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Tt&&((f=s=dn)&&(s=mC(s,n.type,n.pendingProps,wr),s!==null?(n.stateNode=s,lo=n,dn=ar(s.firstChild),wr=!1,f=!0):f=!1),f||hi(n)),ge(n),f=n.type,x=n.pendingProps,_=t!==null?t.memoizedProps:null,s=x.children,fh(f,x)?s=null:_!==null&&fh(f,_)&&(n.flags|=32),n.memoizedState!==null&&(f=df(t,n,DA,null,null,r),El._currentValue=f),Fc(t,n),Qn(t,n,s,r),n.child;case 6:return t===null&&Tt&&((t=r=dn)&&(r=gC(r,n.pendingProps,wr),r!==null?(n.stateNode=r,lo=n,dn=null,t=!0):t=!1),t||hi(n)),null;case 13:return w0(t,n,r);case 4:return se(n,n.stateNode.containerInfo),s=n.pendingProps,t===null?n.child=Ki(n,null,s,r):Qn(t,n,s,r),n.child;case 11:return h0(t,n,n.type,n.pendingProps,r);case 7:return Qn(t,n,n.pendingProps,r),n.child;case 8:return Qn(t,n,n.pendingProps.children,r),n.child;case 12:return Qn(t,n,n.pendingProps.children,r),n.child;case 10:return s=n.pendingProps,ya(n,n.type,s.value),Qn(t,n,s.children,r),n.child;case 9:return f=n.type._context,s=n.pendingProps.children,mi(n),f=eo(f),s=s(f),n.flags|=1,Qn(t,n,s,r),n.child;case 14:return p0(t,n,n.type,n.pendingProps,r);case 15:return m0(t,n,n.type,n.pendingProps,r);case 19:return C0(t,n,r);case 31:return s=n.pendingProps,r=n.mode,s={mode:s.mode,children:s.children},t===null?(r=Qc(s,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=Yr(t.child,s),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return g0(t,n,r);case 24:return mi(n),s=eo(kn),t===null?(f=tf(),f===null&&(f=Qt,x=Jd(),f.pooledCache=x,x.refCount++,x!==null&&(f.pooledCacheLanes|=r),f=x),n.memoizedState={parent:s,cache:f},of(n),ya(n,kn,f)):((t.lanes&r)!==0&&(rf(t,n),ol(n,null,null,r),nl()),f=t.memoizedState,x=n.memoizedState,f.parent!==s?(f={parent:s,cache:s},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),ya(n,kn,s)):(s=x.cache,ya(n,kn,s),s!==f.cache&&Zd(n,[kn],r,!0))),Qn(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function qr(t){t.flags|=4}function E0(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Dy(n)){if(n=$o.current,n!==null&&((At&4194048)===At?Ar!==null:(At&62914560)!==At&&(At&536870912)===0||n!==Ar))throw el=nf,lg;t.flags|=8192}}function Gc(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?mn():536870912,t.lanes|=n,ts|=n)}function ul(t,n){if(!Tt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function sn(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(n)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,s|=f.subtreeFlags&65011712,s|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,s|=f.subtreeFlags,s|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=s,t.childLanes=r,n}function $A(t,n,r){var s=n.pendingProps;switch(Wd(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(n),null;case 1:return sn(n),null;case 3:return r=n.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Fr(kn),ye(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gs(n)?qr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,og())),sn(n),null;case 26:return r=n.memoizedState,t===null?(qr(n),r!==null?(sn(n),E0(n,r)):(sn(n),n.flags&=-16777217)):r?r!==t.memoizedState?(qr(n),sn(n),E0(n,r)):(sn(n),n.flags&=-16777217):(t.memoizedProps!==s&&qr(n),sn(n),n.flags&=-16777217),null;case 27:Ae(n),r=ie.current;var f=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==s&&qr(n);else{if(!s){if(n.stateNode===null)throw Error(i(166));return sn(n),null}t=q.current,Gs(n)?tg(n):(t=Ey(f,s,r),n.stateNode=t,qr(n))}return sn(n),null;case 5:if(Ae(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==s&&qr(n);else{if(!s){if(n.stateNode===null)throw Error(i(166));return sn(n),null}if(t=q.current,Gs(n))tg(n);else{switch(f=iu(ie.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?t.multiple=!0:s.size&&(t.size=s.size);break;default:t=typeof s.is=="string"?f.createElement(r,{is:s.is}):f.createElement(r)}}t[Et]=n,t[nn]=s;e:for(f=n.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}n.stateNode=t;e:switch(Wn(t,r,s),r){case"button":case"input":case"select":case"textarea":t=!!s.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qr(n)}}return sn(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==s&&qr(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(i(166));if(t=ie.current,Gs(n)){if(t=n.stateNode,r=n.memoizedProps,s=null,f=lo,f!==null)switch(f.tag){case 27:case 5:s=f.memoizedProps}t[Et]=n,t=!!(t.nodeValue===r||s!==null&&s.suppressHydrationWarning===!0||xy(t.nodeValue,r)),t||hi(n)}else t=iu(t).createTextNode(s),t[Et]=n,n.stateNode=t}return sn(n),null;case 13:if(s=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Gs(n),s!==null&&s.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Et]=n}else Ws(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;sn(n),f=!1}else f=og(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(Gr(n),n):(Gr(n),null)}if(Gr(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=s!==null,t=t!==null&&t.memoizedState!==null,r){s=n.child,f=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(f=s.alternate.memoizedState.cachePool.pool);var x=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),x!==f&&(s.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),Gc(n,n.updateQueue),sn(n),null;case 4:return ye(),t===null&&sh(n.stateNode.containerInfo),sn(n),null;case 10:return Fr(n.type),sn(n),null;case 19:if(N(Tn),f=n.memoizedState,f===null)return sn(n),null;if(s=(n.flags&128)!==0,x=f.rendering,x===null)if(s)ul(f,!1);else{if(fn!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(x=$c(t),x!==null){for(n.flags|=128,ul(f,!1),t=x.updateQueue,n.updateQueue=t,Gc(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Jm(r,t),r=r.sibling;return H(Tn,Tn.current&1|2),n.child}t=t.sibling}f.tail!==null&&_e()>Vc&&(n.flags|=128,s=!0,ul(f,!1),n.lanes=4194304)}else{if(!s)if(t=$c(x),t!==null){if(n.flags|=128,s=!0,t=t.updateQueue,n.updateQueue=t,Gc(n,t),ul(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!Tt)return sn(n),null}else 2*_e()-f.renderingStartTime>Vc&&r!==536870912&&(n.flags|=128,s=!0,ul(f,!1),n.lanes=4194304);f.isBackwards?(x.sibling=n.child,n.child=x):(t=f.last,t!==null?t.sibling=x:n.child=x,f.last=x)}return f.tail!==null?(n=f.tail,f.rendering=n,f.tail=n.sibling,f.renderingStartTime=_e(),n.sibling=null,t=Tn.current,H(Tn,s?t&1|2:t&1),n):(sn(n),null);case 22:case 23:return Gr(n),cf(),s=n.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(r&536870912)!==0&&(n.flags&128)===0&&(sn(n),n.subtreeFlags&6&&(n.flags|=8192)):sn(n),r=n.updateQueue,r!==null&&Gc(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==r&&(n.flags|=2048),t!==null&&N(gi),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Fr(kn),sn(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function UA(t,n){switch(Wd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Fr(kn),ye(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Ae(n),null;case 13:if(Gr(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));Ws()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return N(Tn),null;case 4:return ye(),null;case 10:return Fr(n.type),null;case 22:case 23:return Gr(n),cf(),t!==null&&N(gi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Fr(kn),null;case 25:return null;default:return null}}function M0(t,n){switch(Wd(n),n.tag){case 3:Fr(kn),ye();break;case 26:case 27:case 5:Ae(n);break;case 4:ye();break;case 13:Gr(n);break;case 19:N(Tn);break;case 10:Fr(n.type);break;case 22:case 23:Gr(n),cf(),t!==null&&N(gi);break;case 24:Fr(kn)}}function dl(t,n){try{var r=n.updateQueue,s=r!==null?r.lastEffect:null;if(s!==null){var f=s.next;r=f;do{if((r.tag&t)===t){s=void 0;var x=r.create,_=r.inst;s=x(),_.destroy=s}r=r.next}while(r!==f)}}catch(P){Yt(n,n.return,P)}}function Sa(t,n,r){try{var s=n.updateQueue,f=s!==null?s.lastEffect:null;if(f!==null){var x=f.next;s=x;do{if((s.tag&t)===t){var _=s.inst,P=_.destroy;if(P!==void 0){_.destroy=void 0,f=n;var Q=r,ne=P;try{ne()}catch(de){Yt(f,Q,de)}}}s=s.next}while(s!==x)}}catch(de){Yt(n,n.return,de)}}function R0(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{pg(n,r)}catch(s){Yt(t,t.return,s)}}}function k0(t,n,r){r.props=xi(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(s){Yt(t,n,s)}}function fl(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof r=="function"?t.refCleanup=r(s):r.current=s}}catch(f){Yt(t,n,f)}}function Cr(t,n){var r=t.ref,s=t.refCleanup;if(r!==null)if(typeof s=="function")try{s()}catch(f){Yt(t,n,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Yt(t,n,f)}else r.current=null}function T0(t){var n=t.type,r=t.memoizedProps,s=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&s.focus();break e;case"img":r.src?s.src=r.src:r.srcSet&&(s.srcset=r.srcSet)}}catch(f){Yt(t,t.return,f)}}function zf(t,n,r){try{var s=t.stateNode;uC(s,t.type,r,n),s[nn]=n}catch(f){Yt(t,t.return,f)}}function I0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Oa(t.type)||t.tag===4}function Nf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||I0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Oa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lf(t,n,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=au));else if(s!==4&&(s===27&&Oa(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Lf(t,n,r),t=t.sibling;t!==null;)Lf(t,n,r),t=t.sibling}function Wc(t,n,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(s!==4&&(s===27&&Oa(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Wc(t,n,r),t=t.sibling;t!==null;)Wc(t,n,r),t=t.sibling}function _0(t){var n=t.stateNode,r=t.memoizedProps;try{for(var s=t.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Wn(n,s,r),n[Et]=t,n[nn]=r}catch(x){Yt(t,t.return,x)}}var Vr=!1,xn=!1,Hf=!1,O0=typeof WeakSet=="function"?WeakSet:Set,Hn=null;function XA(t,n){if(t=t.containerInfo,uh=fu,t=Um(t),zd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var f=s.anchorOffset,x=s.focusNode;s=s.focusOffset;try{r.nodeType,x.nodeType}catch{r=null;break e}var _=0,P=-1,Q=-1,ne=0,de=0,me=t,re=null;t:for(;;){for(var ae;me!==r||f!==0&&me.nodeType!==3||(P=_+f),me!==x||s!==0&&me.nodeType!==3||(Q=_+s),me.nodeType===3&&(_+=me.nodeValue.length),(ae=me.firstChild)!==null;)re=me,me=ae;for(;;){if(me===t)break t;if(re===r&&++ne===f&&(P=_),re===x&&++de===s&&(Q=_),(ae=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=ae}r=P===-1||Q===-1?null:{start:P,end:Q}}else r=null}r=r||{start:0,end:0}}else r=null;for(dh={focusedElem:t,selectionRange:r},fu=!1,Hn=n;Hn!==null;)if(n=Hn,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Hn=t;else for(;Hn!==null;){switch(n=Hn,x=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,r=n,f=x.memoizedProps,x=x.memoizedState,s=r.stateNode;try{var Ve=xi(r.type,f,r.elementType===r.type);t=s.getSnapshotBeforeUpdate(Ve,x),s.__reactInternalSnapshotBeforeUpdate=t}catch(Qe){Yt(r,r.return,Qe)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)ph(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ph(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Hn=t;break}Hn=n.return}}function D0(t,n,r){var s=r.flags;switch(r.tag){case 0:case 11:case 15:Ea(t,r),s&4&&dl(5,r);break;case 1:if(Ea(t,r),s&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(_){Yt(r,r.return,_)}else{var f=xi(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(f,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Yt(r,r.return,_)}}s&64&&R0(r),s&512&&fl(r,r.return);break;case 3:if(Ea(t,r),s&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{pg(t,n)}catch(_){Yt(r,r.return,_)}}break;case 27:n===null&&s&4&&_0(r);case 26:case 5:Ea(t,r),n===null&&s&4&&T0(r),s&512&&fl(r,r.return);break;case 12:Ea(t,r);break;case 13:Ea(t,r),s&4&&B0(t,r),s&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=JA.bind(null,r),yC(t,r))));break;case 22:if(s=r.memoizedState!==null||Vr,!s){n=n!==null&&n.memoizedState!==null||xn,f=Vr;var x=xn;Vr=s,(xn=n)&&!x?Ma(t,r,(r.subtreeFlags&8772)!==0):Ea(t,r),Vr=f,xn=x}break;case 30:break;default:Ea(t,r)}}function j0(t){var n=t.alternate;n!==null&&(t.alternate=null,j0(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Wt(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var en=null,go=!1;function Kr(t,n,r){for(r=r.child;r!==null;)P0(t,n,r),r=r.sibling}function P0(t,n,r){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(je,r)}catch{}switch(r.tag){case 26:xn||Cr(r,n),Kr(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:xn||Cr(r,n);var s=en,f=go;Oa(r.type)&&(en=r.stateNode,go=!1),Kr(t,n,r),wl(r.stateNode),en=s,go=f;break;case 5:xn||Cr(r,n);case 6:if(s=en,f=go,en=null,Kr(t,n,r),en=s,go=f,en!==null)if(go)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(r.stateNode)}catch(x){Yt(r,n,x)}else try{en.removeChild(r.stateNode)}catch(x){Yt(r,n,x)}break;case 18:en!==null&&(go?(t=en,Cy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Tl(t)):Cy(en,r.stateNode));break;case 4:s=en,f=go,en=r.stateNode.containerInfo,go=!0,Kr(t,n,r),en=s,go=f;break;case 0:case 11:case 14:case 15:xn||Sa(2,r,n),xn||Sa(4,r,n),Kr(t,n,r);break;case 1:xn||(Cr(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"&&k0(r,n,s)),Kr(t,n,r);break;case 21:Kr(t,n,r);break;case 22:xn=(s=xn)||r.memoizedState!==null,Kr(t,n,r),xn=s;break;default:Kr(t,n,r)}}function B0(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Tl(t)}catch(r){Yt(n,n.return,r)}}function FA(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new O0),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new O0),n;default:throw Error(i(435,t.tag))}}function Yf(t,n){var r=FA(t);n.forEach(function(s){var f=eC.bind(null,t,s);r.has(s)||(r.add(s),s.then(f,f))})}function Eo(t,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var f=r[s],x=t,_=n,P=_;e:for(;P!==null;){switch(P.tag){case 27:if(Oa(P.type)){en=P.stateNode,go=!1;break e}break;case 5:en=P.stateNode,go=!1;break e;case 3:case 4:en=P.stateNode.containerInfo,go=!0;break e}P=P.return}if(en===null)throw Error(i(160));P0(x,_,f),en=null,go=!1,x=f.alternate,x!==null&&(x.return=null),f.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)z0(n,t),n=n.sibling}var rr=null;function z0(t,n){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Eo(n,t),Mo(t),s&4&&(Sa(3,t,t.return),dl(3,t),Sa(5,t,t.return));break;case 1:Eo(n,t),Mo(t),s&512&&(xn||r===null||Cr(r,r.return)),s&64&&Vr&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?s:r.concat(s))));break;case 26:var f=rr;if(Eo(n,t),Mo(t),s&512&&(xn||r===null||Cr(r,r.return)),s&4){var x=r!==null?r.memoizedState:null;if(s=t.memoizedState,r===null)if(s===null)if(t.stateNode===null){e:{s=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(s){case"title":x=f.getElementsByTagName("title")[0],(!x||x[Zt]||x[Et]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=f.createElement(s),f.head.insertBefore(x,f.querySelector("head > title"))),Wn(x,s,r),x[Et]=t,vt(x),s=x;break e;case"link":var _=_y("link","href",f).get(s+(r.href||""));if(_){for(var P=0;P<_.length;P++)if(x=_[P],x.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&x.getAttribute("rel")===(r.rel==null?null:r.rel)&&x.getAttribute("title")===(r.title==null?null:r.title)&&x.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(P,1);break t}}x=f.createElement(s),Wn(x,s,r),f.head.appendChild(x);break;case"meta":if(_=_y("meta","content",f).get(s+(r.content||""))){for(P=0;P<_.length;P++)if(x=_[P],x.getAttribute("content")===(r.content==null?null:""+r.content)&&x.getAttribute("name")===(r.name==null?null:r.name)&&x.getAttribute("property")===(r.property==null?null:r.property)&&x.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&x.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(P,1);break t}}x=f.createElement(s),Wn(x,s,r),f.head.appendChild(x);break;default:throw Error(i(468,s))}x[Et]=t,vt(x),s=x}t.stateNode=s}else Oy(f,t.type,t.stateNode);else t.stateNode=Iy(f,s,t.memoizedProps);else x!==s?(x===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):x.count--,s===null?Oy(f,t.type,t.stateNode):Iy(f,s,t.memoizedProps)):s===null&&t.stateNode!==null&&zf(t,t.memoizedProps,r.memoizedProps)}break;case 27:Eo(n,t),Mo(t),s&512&&(xn||r===null||Cr(r,r.return)),r!==null&&s&4&&zf(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Eo(n,t),Mo(t),s&512&&(xn||r===null||Cr(r,r.return)),t.flags&32){f=t.stateNode;try{Ce(f,"")}catch(ae){Yt(t,t.return,ae)}}s&4&&t.stateNode!=null&&(f=t.memoizedProps,zf(t,f,r!==null?r.memoizedProps:f)),s&1024&&(Hf=!0);break;case 6:if(Eo(n,t),Mo(t),s&4){if(t.stateNode===null)throw Error(i(162));s=t.memoizedProps,r=t.stateNode;try{r.nodeValue=s}catch(ae){Yt(t,t.return,ae)}}break;case 3:if(cu=null,f=rr,rr=su(n.containerInfo),Eo(n,t),rr=f,Mo(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Tl(n.containerInfo)}catch(ae){Yt(t,t.return,ae)}Hf&&(Hf=!1,N0(t));break;case 4:s=rr,rr=su(t.stateNode.containerInfo),Eo(n,t),Mo(t),rr=s;break;case 12:Eo(n,t),Mo(t);break;case 13:Eo(n,t),Mo(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Gf=_e()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Yf(t,s)));break;case 22:f=t.memoizedState!==null;var Q=r!==null&&r.memoizedState!==null,ne=Vr,de=xn;if(Vr=ne||f,xn=de||Q,Eo(n,t),xn=de,Vr=ne,Mo(t),s&8192)e:for(n=t.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(r===null||Q||Vr||xn||bi(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){Q=r=n;try{if(x=Q.stateNode,f)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{P=Q.stateNode;var me=Q.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ae){Yt(Q,Q.return,ae)}}}else if(n.tag===6){if(r===null){Q=n;try{Q.stateNode.nodeValue=f?"":Q.memoizedProps}catch(ae){Yt(Q,Q.return,ae)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=t.updateQueue,s!==null&&(r=s.retryQueue,r!==null&&(s.retryQueue=null,Yf(t,r))));break;case 19:Eo(n,t),Mo(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,Yf(t,s)));break;case 30:break;case 21:break;default:Eo(n,t),Mo(t)}}function Mo(t){var n=t.flags;if(n&2){try{for(var r,s=t.return;s!==null;){if(I0(s)){r=s;break}s=s.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,x=Nf(t);Wc(t,x,f);break;case 5:var _=r.stateNode;r.flags&32&&(Ce(_,""),r.flags&=-33);var P=Nf(t);Wc(t,P,_);break;case 3:case 4:var Q=r.stateNode.containerInfo,ne=Nf(t);Lf(t,ne,Q);break;default:throw Error(i(161))}}catch(de){Yt(t,t.return,de)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function N0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;N0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ea(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)D0(t,n.alternate,n),n=n.sibling}function bi(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Sa(4,n,n.return),bi(n);break;case 1:Cr(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&k0(n,n.return,r),bi(n);break;case 27:wl(n.stateNode);case 26:case 5:Cr(n,n.return),bi(n);break;case 22:n.memoizedState===null&&bi(n);break;case 30:bi(n);break;default:bi(n)}t=t.sibling}}function Ma(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,f=t,x=n,_=x.flags;switch(x.tag){case 0:case 11:case 15:Ma(f,x,r),dl(4,x);break;case 1:if(Ma(f,x,r),s=x,f=s.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ne){Yt(s,s.return,ne)}if(s=x,f=s.updateQueue,f!==null){var P=s.stateNode;try{var Q=f.shared.hiddenCallbacks;if(Q!==null)for(f.shared.hiddenCallbacks=null,f=0;f<Q.length;f++)hg(Q[f],P)}catch(ne){Yt(s,s.return,ne)}}r&&_&64&&R0(x),fl(x,x.return);break;case 27:_0(x);case 26:case 5:Ma(f,x,r),r&&s===null&&_&4&&T0(x),fl(x,x.return);break;case 12:Ma(f,x,r);break;case 13:Ma(f,x,r),r&&_&4&&B0(f,x);break;case 22:x.memoizedState===null&&Ma(f,x,r),fl(x,x.return);break;case 30:break;default:Ma(f,x,r)}n=n.sibling}}function $f(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Ks(r))}function Uf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ks(t))}function Sr(t,n,r,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)L0(t,n,r,s),n=n.sibling}function L0(t,n,r,s){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Sr(t,n,r,s),f&2048&&dl(9,n);break;case 1:Sr(t,n,r,s);break;case 3:Sr(t,n,r,s),f&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Ks(t)));break;case 12:if(f&2048){Sr(t,n,r,s),t=n.stateNode;try{var x=n.memoizedProps,_=x.id,P=x.onPostCommit;typeof P=="function"&&P(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Q){Yt(n,n.return,Q)}}else Sr(t,n,r,s);break;case 13:Sr(t,n,r,s);break;case 23:break;case 22:x=n.stateNode,_=n.alternate,n.memoizedState!==null?x._visibility&2?Sr(t,n,r,s):hl(t,n):x._visibility&2?Sr(t,n,r,s):(x._visibility|=2,Zi(t,n,r,s,(n.subtreeFlags&10256)!==0)),f&2048&&$f(_,n);break;case 24:Sr(t,n,r,s),f&2048&&Uf(n.alternate,n);break;default:Sr(t,n,r,s)}}function Zi(t,n,r,s,f){for(f=f&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var x=t,_=n,P=r,Q=s,ne=_.flags;switch(_.tag){case 0:case 11:case 15:Zi(x,_,P,Q,f),dl(8,_);break;case 23:break;case 22:var de=_.stateNode;_.memoizedState!==null?de._visibility&2?Zi(x,_,P,Q,f):hl(x,_):(de._visibility|=2,Zi(x,_,P,Q,f)),f&&ne&2048&&$f(_.alternate,_);break;case 24:Zi(x,_,P,Q,f),f&&ne&2048&&Uf(_.alternate,_);break;default:Zi(x,_,P,Q,f)}n=n.sibling}}function hl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,s=n,f=s.flags;switch(s.tag){case 22:hl(r,s),f&2048&&$f(s.alternate,s);break;case 24:hl(r,s),f&2048&&Uf(s.alternate,s);break;default:hl(r,s)}n=n.sibling}}var pl=8192;function Ji(t){if(t.subtreeFlags&pl)for(t=t.child;t!==null;)H0(t),t=t.sibling}function H0(t){switch(t.tag){case 26:Ji(t),t.flags&pl&&t.memoizedState!==null&&IC(rr,t.memoizedState,t.memoizedProps);break;case 5:Ji(t);break;case 3:case 4:var n=rr;rr=su(t.stateNode.containerInfo),Ji(t),rr=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=pl,pl=16777216,Ji(t),pl=n):Ji(t));break;default:Ji(t)}}function Y0(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function ml(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];Hn=s,U0(s,t)}Y0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$0(t),t=t.sibling}function $0(t){switch(t.tag){case 0:case 11:case 15:ml(t),t.flags&2048&&Sa(9,t,t.return);break;case 3:ml(t);break;case 12:ml(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,qc(t)):ml(t);break;default:ml(t)}}function qc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];Hn=s,U0(s,t)}Y0(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Sa(8,n,n.return),qc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,qc(n));break;default:qc(n)}t=t.sibling}}function U0(t,n){for(;Hn!==null;){var r=Hn;switch(r.tag){case 0:case 11:case 15:Sa(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var s=r.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ks(r.memoizedState.cache)}if(s=r.child,s!==null)s.return=r,Hn=s;else e:for(r=t;Hn!==null;){s=Hn;var f=s.sibling,x=s.return;if(j0(s),s===r){Hn=null;break e}if(f!==null){f.return=x,Hn=f;break e}Hn=x}}}var QA={getCacheForType:function(t){var n=eo(kn),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},GA=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Qt=null,dt=null,At=0,jt=0,Ro=null,Ra=!1,es=!1,Xf=!1,Zr=0,fn=0,ka=0,vi=0,Ff=0,Uo=0,ts=0,gl=null,yo=null,Qf=!1,Gf=0,Vc=1/0,Kc=null,Ta=null,Gn=0,Ia=null,ns=null,os=0,Wf=0,qf=null,X0=null,yl=0,Vf=null;function ko(){if((Dt&2)!==0&&At!==0)return At&-At;if(D.T!==null){var t=Xi;return t!==0?t:oh()}return Ze()}function F0(){Uo===0&&(Uo=(At&536870912)===0||Tt?Nt():536870912);var t=$o.current;return t!==null&&(t.flags|=32),Uo}function To(t,n,r){(t===Qt&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(rs(t,0),_a(t,At,Uo,!1)),Lt(t,r),((Dt&2)===0||t!==Qt)&&(t===Qt&&((Dt&2)===0&&(vi|=r),fn===4&&_a(t,At,Uo,!1)),Er(t))}function Q0(t,n,r){if((Dt&6)!==0)throw Error(i(327));var s=!r&&(n&124)===0&&(n&t.expiredLanes)===0||De(t,n),f=s?VA(t,n):Jf(t,n,!0),x=s;do{if(f===0){es&&!s&&_a(t,n,0,!1);break}else{if(r=t.current.alternate,x&&!WA(r)){f=Jf(t,n,!1),x=!1;continue}if(f===2){if(x=n,t.errorRecoveryDisabledLanes&x)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var P=t;f=gl;var Q=P.current.memoizedState.isDehydrated;if(Q&&(rs(P,_).flags|=256),_=Jf(P,_,!1),_!==2){if(Xf&&!Q){P.errorRecoveryDisabledLanes|=x,vi|=x,f=4;break e}x=yo,yo=f,x!==null&&(yo===null?yo=x:yo.push.apply(yo,x))}f=_}if(x=!1,f!==2)continue}}if(f===1){rs(t,0),_a(t,n,0,!0);break}e:{switch(s=t,x=f,x){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:_a(s,n,Uo,!Ra);break e;case 2:yo=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(f=Gf+300-_e(),10<f)){if(_a(s,n,Uo,!Ra),$e(s,0,!0)!==0)break e;s.timeoutHandle=wy(G0.bind(null,s,r,yo,Kc,Qf,n,Uo,vi,ts,Ra,x,2,-0,0),f);break e}G0(s,r,yo,Kc,Qf,n,Uo,vi,ts,Ra,x,0,-0,0)}}break}while(!0);Er(t)}function G0(t,n,r,s,f,x,_,P,Q,ne,de,me,re,ae){if(t.timeoutHandle=-1,me=n.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Sl={stylesheets:null,count:0,unsuspend:TC},H0(n),me=_C(),me!==null)){t.cancelPendingCommit=me(ey.bind(null,t,n,x,r,s,f,_,P,Q,de,1,re,ae)),_a(t,x,_,!ne);return}ey(t,n,x,r,s,f,_,P,Q)}function WA(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var s=0;s<r.length;s++){var f=r[s],x=f.getSnapshot;f=f.value;try{if(!Co(x(),f))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function _a(t,n,r,s){n&=~Ff,n&=~vi,t.suspendedLanes|=n,t.pingedLanes&=~n,s&&(t.warmLanes|=n),s=t.expirationTimes;for(var f=n;0<f;){var x=31-Xe(f),_=1<<x;s[x]=-1,f&=~_}r!==0&&_n(t,r,n)}function Zc(){return(Dt&6)===0?(xl(0),!1):!0}function Kf(){if(dt!==null){if(jt===0)var t=dt.return;else t=dt,Xr=pi=null,pf(t),Vi=null,ll=0,t=dt;for(;t!==null;)M0(t.alternate,t),t=t.return;dt=null}}function rs(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,fC(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Kf(),Qt=t,dt=r=Yr(t.current,null),At=n,jt=0,Ro=null,Ra=!1,es=De(t,n),Xf=!1,ts=Uo=Ff=vi=ka=fn=0,yo=gl=null,Qf=!1,(n&8)!==0&&(n|=n&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=n;0<s;){var f=31-Xe(s),x=1<<f;n|=t[f],s&=~x}return Zr=n,vc(),r}function W0(t,n){st=null,D.H=Lc,n===Js||n===Tc?(n=dg(),jt=3):n===lg?(n=dg(),jt=4):jt=n===f0?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ro=n,dt===null&&(fn=1,Xc(t,No(n,t.current)))}function q0(){var t=D.H;return D.H=Lc,t===null?Lc:t}function V0(){var t=D.A;return D.A=QA,t}function Zf(){fn=4,Ra||(At&4194048)!==At&&$o.current!==null||(es=!0),(ka&134217727)===0&&(vi&134217727)===0||Qt===null||_a(Qt,At,Uo,!1)}function Jf(t,n,r){var s=Dt;Dt|=2;var f=q0(),x=V0();(Qt!==t||At!==n)&&(Kc=null,rs(t,n)),n=!1;var _=fn;e:do try{if(jt!==0&&dt!==null){var P=dt,Q=Ro;switch(jt){case 8:Kf(),_=6;break e;case 3:case 2:case 9:case 6:$o.current===null&&(n=!0);var ne=jt;if(jt=0,Ro=null,as(t,P,Q,ne),r&&es){_=0;break e}break;default:ne=jt,jt=0,Ro=null,as(t,P,Q,ne)}}qA(),_=fn;break}catch(de){W0(t,de)}while(!0);return n&&t.shellSuspendCounter++,Xr=pi=null,Dt=s,D.H=f,D.A=x,dt===null&&(Qt=null,At=0,vc()),_}function qA(){for(;dt!==null;)K0(dt)}function VA(t,n){var r=Dt;Dt|=2;var s=q0(),f=V0();Qt!==t||At!==n?(Kc=null,Vc=_e()+500,rs(t,n)):es=De(t,n);e:do try{if(jt!==0&&dt!==null){n=dt;var x=Ro;t:switch(jt){case 1:jt=0,Ro=null,as(t,n,x,1);break;case 2:case 9:if(cg(x)){jt=0,Ro=null,Z0(n);break}n=function(){jt!==2&&jt!==9||Qt!==t||(jt=7),Er(t)},x.then(n,n);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:cg(x)?(jt=0,Ro=null,Z0(n)):(jt=0,Ro=null,as(t,n,x,7));break;case 5:var _=null;switch(dt.tag){case 26:_=dt.memoizedState;case 5:case 27:var P=dt;if(!_||Dy(_)){jt=0,Ro=null;var Q=P.sibling;if(Q!==null)dt=Q;else{var ne=P.return;ne!==null?(dt=ne,Jc(ne)):dt=null}break t}}jt=0,Ro=null,as(t,n,x,5);break;case 6:jt=0,Ro=null,as(t,n,x,6);break;case 8:Kf(),fn=6;break e;default:throw Error(i(462))}}KA();break}catch(de){W0(t,de)}while(!0);return Xr=pi=null,D.H=s,D.A=f,Dt=r,dt!==null?0:(Qt=null,At=0,vc(),fn)}function KA(){for(;dt!==null&&!He();)K0(dt)}function K0(t){var n=S0(t.alternate,t,Zr);t.memoizedProps=t.pendingProps,n===null?Jc(t):dt=n}function Z0(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=x0(r,n,n.pendingProps,n.type,void 0,At);break;case 11:n=x0(r,n,n.pendingProps,n.type.render,n.ref,At);break;case 5:pf(n);default:M0(r,n),n=dt=Jm(n,Zr),n=S0(r,n,Zr)}t.memoizedProps=t.pendingProps,n===null?Jc(t):dt=n}function as(t,n,r,s){Xr=pi=null,pf(n),Vi=null,ll=0;var f=n.return;try{if(HA(t,f,n,r,At)){fn=1,Xc(t,No(r,t.current)),dt=null;return}}catch(x){if(f!==null)throw dt=f,x;fn=1,Xc(t,No(r,t.current)),dt=null;return}n.flags&32768?(Tt||s===1?t=!0:es||(At&536870912)!==0?t=!1:(Ra=t=!0,(s===2||s===9||s===3||s===6)&&(s=$o.current,s!==null&&s.tag===13&&(s.flags|=16384))),J0(n,t)):Jc(n)}function Jc(t){var n=t;do{if((n.flags&32768)!==0){J0(n,Ra);return}t=n.return;var r=$A(n.alternate,n,Zr);if(r!==null){dt=r;return}if(n=n.sibling,n!==null){dt=n;return}dt=n=t}while(n!==null);fn===0&&(fn=5)}function J0(t,n){do{var r=UA(t.alternate,t);if(r!==null){r.flags&=32767,dt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){dt=t;return}dt=t=r}while(t!==null);fn=6,dt=null}function ey(t,n,r,s,f,x,_,P,Q){t.cancelPendingCommit=null;do eu();while(Gn!==0);if((Dt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(x=n.lanes|n.childLanes,x|=$d,ao(t,r,x,_,P,Q),t===Qt&&(dt=Qt=null,At=0),ns=n,Ia=t,os=r,Wf=x,qf=f,X0=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,tC(et,function(){return ay(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=D.T,D.T=null,f=Y.p,Y.p=2,_=Dt,Dt|=4;try{XA(t,n,r)}finally{Dt=_,Y.p=f,D.T=s}}Gn=1,ty(),ny(),oy()}}function ty(){if(Gn===1){Gn=0;var t=Ia,n=ns,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=D.T,D.T=null;var s=Y.p;Y.p=2;var f=Dt;Dt|=4;try{z0(n,t);var x=dh,_=Um(t.containerInfo),P=x.focusedElem,Q=x.selectionRange;if(_!==P&&P&&P.ownerDocument&&$m(P.ownerDocument.documentElement,P)){if(Q!==null&&zd(P)){var ne=Q.start,de=Q.end;if(de===void 0&&(de=ne),"selectionStart"in P)P.selectionStart=ne,P.selectionEnd=Math.min(de,P.value.length);else{var me=P.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var ae=re.getSelection(),Ve=P.textContent.length,Qe=Math.min(Q.start,Ve),zt=Q.end===void 0?Qe:Math.min(Q.end,Ve);!ae.extend&&Qe>zt&&(_=zt,zt=Qe,Qe=_);var ee=Ym(P,Qe),V=Ym(P,zt);if(ee&&V&&(ae.rangeCount!==1||ae.anchorNode!==ee.node||ae.anchorOffset!==ee.offset||ae.focusNode!==V.node||ae.focusOffset!==V.offset)){var te=me.createRange();te.setStart(ee.node,ee.offset),ae.removeAllRanges(),Qe>zt?(ae.addRange(te),ae.extend(V.node,V.offset)):(te.setEnd(V.node,V.offset),ae.addRange(te))}}}}for(me=[],ae=P;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var he=me[P];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}fu=!!uh,dh=uh=null}finally{Dt=f,Y.p=s,D.T=r}}t.current=n,Gn=2}}function ny(){if(Gn===2){Gn=0;var t=Ia,n=ns,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=D.T,D.T=null;var s=Y.p;Y.p=2;var f=Dt;Dt|=4;try{D0(t,n.alternate,n)}finally{Dt=f,Y.p=s,D.T=r}}Gn=3}}function oy(){if(Gn===4||Gn===3){Gn=0,We();var t=Ia,n=ns,r=os,s=X0;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Gn=5:(Gn=0,ns=Ia=null,ry(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ta=null),at(r),n=n.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(je,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=D.T,f=Y.p,Y.p=2,D.T=null;try{for(var x=t.onRecoverableError,_=0;_<s.length;_++){var P=s[_];x(P.value,{componentStack:P.stack})}}finally{D.T=n,Y.p=f}}(os&3)!==0&&eu(),Er(t),f=t.pendingLanes,(r&4194090)!==0&&(f&42)!==0?t===Vf?yl++:(yl=0,Vf=t):yl=0,xl(0)}}function ry(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Ks(n)))}function eu(t){return ty(),ny(),oy(),ay()}function ay(){if(Gn!==5)return!1;var t=Ia,n=Wf;Wf=0;var r=at(os),s=D.T,f=Y.p;try{Y.p=32>r?32:r,D.T=null,r=qf,qf=null;var x=Ia,_=os;if(Gn=0,ns=Ia=null,os=0,(Dt&6)!==0)throw Error(i(331));var P=Dt;if(Dt|=4,$0(x.current),L0(x,x.current,_,r),Dt=P,xl(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(je,x)}catch{}return!0}finally{Y.p=f,D.T=s,ry(t,n)}}function iy(t,n,r){n=No(r,n),n=kf(t.stateNode,n,2),t=va(t,n,2),t!==null&&(Lt(t,2),Er(t))}function Yt(t,n,r){if(t.tag===3)iy(t,t,r);else for(;n!==null;){if(n.tag===3){iy(n,t,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Ta===null||!Ta.has(s))){t=No(r,t),r=u0(2),s=va(n,r,2),s!==null&&(d0(r,s,n,t),Lt(s,2),Er(s));break}}n=n.return}}function eh(t,n,r){var s=t.pingCache;if(s===null){s=t.pingCache=new GA;var f=new Set;s.set(n,f)}else f=s.get(n),f===void 0&&(f=new Set,s.set(n,f));f.has(r)||(Xf=!0,f.add(r),t=ZA.bind(null,t,n,r),n.then(t,t))}function ZA(t,n,r){var s=t.pingCache;s!==null&&s.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Qt===t&&(At&r)===r&&(fn===4||fn===3&&(At&62914560)===At&&300>_e()-Gf?(Dt&2)===0&&rs(t,0):Ff|=r,ts===At&&(ts=0)),Er(t)}function sy(t,n){n===0&&(n=mn()),t=Hi(t,n),t!==null&&(Lt(t,n),Er(t))}function JA(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),sy(t,r)}function eC(t,n){var r=0;switch(t.tag){case 13:var s=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(n),sy(t,r)}function tC(t,n){return Pe(t,n)}var tu=null,is=null,th=!1,nu=!1,nh=!1,wi=0;function Er(t){t!==is&&t.next===null&&(is===null?tu=is=t:is=is.next=t),nu=!0,th||(th=!0,oC())}function xl(t,n){if(!nh&&nu){nh=!0;do for(var r=!1,s=tu;s!==null;){if(t!==0){var f=s.pendingLanes;if(f===0)var x=0;else{var _=s.suspendedLanes,P=s.pingedLanes;x=(1<<31-Xe(42|t)+1)-1,x&=f&~(_&~P),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(r=!0,dy(s,x))}else x=At,x=$e(s,s===Qt?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(x&3)===0||De(s,x)||(r=!0,dy(s,x));s=s.next}while(r);nh=!1}}function nC(){ly()}function ly(){nu=th=!1;var t=0;wi!==0&&(dC()&&(t=wi),wi=0);for(var n=_e(),r=null,s=tu;s!==null;){var f=s.next,x=cy(s,n);x===0?(s.next=null,r===null?tu=f:r.next=f,f===null&&(is=r)):(r=s,(t!==0||(x&3)!==0)&&(nu=!0)),s=f}xl(t)}function cy(t,n){for(var r=t.suspendedLanes,s=t.pingedLanes,f=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var _=31-Xe(x),P=1<<_,Q=f[_];Q===-1?((P&r)===0||(P&s)!==0)&&(f[_]=St(P,n)):Q<=n&&(t.expiredLanes|=P),x&=~P}if(n=Qt,r=At,r=$e(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,r===0||t===n&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Ee(s),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||De(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(s!==null&&Ee(s),at(r)){case 2:case 8:r=Ye;break;case 32:r=et;break;case 268435456:r=ht;break;default:r=et}return s=uy.bind(null,t),r=Pe(r,s),t.callbackPriority=n,t.callbackNode=r,n}return s!==null&&s!==null&&Ee(s),t.callbackPriority=2,t.callbackNode=null,2}function uy(t,n){if(Gn!==0&&Gn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(eu()&&t.callbackNode!==r)return null;var s=At;return s=$e(t,t===Qt?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(Q0(t,s,n),cy(t,_e()),t.callbackNode!=null&&t.callbackNode===r?uy.bind(null,t):null)}function dy(t,n){if(eu())return null;Q0(t,n,!0)}function oC(){hC(function(){(Dt&6)!==0?Pe(ot,nC):ly()})}function oh(){return wi===0&&(wi=Nt()),wi}function fy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Je(""+t)}function hy(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function rC(t,n,r,s,f){if(n==="submit"&&r&&r.stateNode===f){var x=fy((f[nn]||null).action),_=s.submitter;_&&(n=(n=_[nn]||null)?fy(n.formAction):_.getAttribute("formAction"),n!==null&&(x=n,_=null));var P=new ai("action","action",null,s,f);t.push({event:P,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(wi!==0){var Q=_?hy(f,_):new FormData(f);Cf(r,{pending:!0,data:Q,method:f.method,action:x},null,Q)}}else typeof x=="function"&&(P.preventDefault(),Q=_?hy(f,_):new FormData(f),Cf(r,{pending:!0,data:Q,method:f.method,action:x},x,Q))},currentTarget:f}]})}}for(var rh=0;rh<Yd.length;rh++){var ah=Yd[rh],aC=ah.toLowerCase(),iC=ah[0].toUpperCase()+ah.slice(1);or(aC,"on"+iC)}or(Qm,"onAnimationEnd"),or(Gm,"onAnimationIteration"),or(Wm,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(CA,"onTransitionRun"),or(SA,"onTransitionStart"),or(EA,"onTransitionCancel"),or(qm,"onTransitionEnd"),so("onMouseEnter",["mouseout","mouseover"]),so("onMouseLeave",["mouseout","mouseover"]),so("onPointerEnter",["pointerout","pointerover"]),so("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bl));function py(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],f=s.event;s=s.listeners;e:{var x=void 0;if(n)for(var _=s.length-1;0<=_;_--){var P=s[_],Q=P.instance,ne=P.currentTarget;if(P=P.listener,Q!==x&&f.isPropagationStopped())break e;x=P,f.currentTarget=ne;try{x(f)}catch(de){Uc(de)}f.currentTarget=null,x=Q}else for(_=0;_<s.length;_++){if(P=s[_],Q=P.instance,ne=P.currentTarget,P=P.listener,Q!==x&&f.isPropagationStopped())break e;x=P,f.currentTarget=ne;try{x(f)}catch(de){Uc(de)}f.currentTarget=null,x=Q}}}}function ft(t,n){var r=n[Xn];r===void 0&&(r=n[Xn]=new Set);var s=t+"__bubble";r.has(s)||(my(n,t,2,!1),r.add(s))}function ih(t,n,r){var s=0;n&&(s|=4),my(r,t,s,n)}var ou="_reactListening"+Math.random().toString(36).slice(2);function sh(t){if(!t[ou]){t[ou]=!0,Jt.forEach(function(r){r!=="selectionchange"&&(sC.has(r)||ih(r,!1,t),ih(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ou]||(n[ou]=!0,ih("selectionchange",!1,n))}}function my(t,n,r,s){switch(Ly(n)){case 2:var f=jC;break;case 8:f=PC;break;default:f=wh}r=f.bind(null,n,r,t),f=void 0,!Lr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),s?f!==void 0?t.addEventListener(n,r,{capture:!0,passive:f}):t.addEventListener(n,r,!0):f!==void 0?t.addEventListener(n,r,{passive:f}):t.addEventListener(n,r,!1)}function lh(t,n,r,s,f){var x=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var _=s.tag;if(_===3||_===4){var P=s.stateNode.containerInfo;if(P===f)break;if(_===4)for(_=s.return;_!==null;){var Q=_.tag;if((Q===3||Q===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;P!==null;){if(_=gn(P),_===null)return;if(Q=_.tag,Q===5||Q===6||Q===26||Q===27){s=x=_;continue e}P=P.parentNode}}s=s.return}nr(function(){var ne=x,de=Rt(r),me=[];e:{var re=Vm.get(t);if(re!==void 0){var ae=ai,Ve=t;switch(t){case"keypress":if(xr(r)===0)break e;case"keydown":case"keyup":ae=Dd;break;case"focusin":Ve="focus",ae=Pi;break;case"focusout":Ve="blur",ae=Pi;break;case"beforeblur":case"afterblur":ae=Pi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=xe;break;case Qm:case Gm:case Wm:ae=gc;break;case qm:ae=qe;break;case"scroll":case"scrollend":ae=dc;break;case"wheel":ae=Ct;break;case"copy":case"cut":case"paste":ae=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=F;break;case"toggle":case"beforetoggle":ae=Rn}var Qe=(n&4)!==0,zt=!Qe&&(t==="scroll"||t==="scrollend"),ee=Qe?re!==null?re+"Capture":null:re;Qe=[];for(var V=ne,te;V!==null;){var he=V;if(te=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||te===null||ee===null||(he=un(V,ee),he!=null&&Qe.push(vl(V,he,te))),zt)break;V=V.return}0<Qe.length&&(re=new ae(re,Ve,null,r,de),me.push({event:re,listeners:Qe}))}}if((n&7)===0){e:{if(re=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",re&&r!==ct&&(Ve=r.relatedTarget||r.fromElement)&&(gn(Ve)||Ve[Kn]))break e;if((ae||re)&&(re=de.window===de?de:(re=de.ownerDocument)?re.defaultView||re.parentWindow:window,ae?(Ve=r.relatedTarget||r.toElement,ae=ne,Ve=Ve?gn(Ve):null,Ve!==null&&(zt=c(Ve),Qe=Ve.tag,Ve!==zt||Qe!==5&&Qe!==27&&Qe!==6)&&(Ve=null)):(ae=null,Ve=ne),ae!==Ve)){if(Qe=Hs,he="onMouseLeave",ee="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Qe=F,he="onPointerLeave",ee="onPointerEnter",V="pointer"),zt=ae==null?re:Pn(ae),te=Ve==null?re:Pn(Ve),re=new Qe(he,V+"leave",ae,r,de),re.target=zt,re.relatedTarget=te,he=null,gn(de)===ne&&(Qe=new Qe(ee,V+"enter",Ve,r,de),Qe.target=te,Qe.relatedTarget=zt,he=Qe),zt=he,ae&&Ve)t:{for(Qe=ae,ee=Ve,V=0,te=Qe;te;te=ss(te))V++;for(te=0,he=ee;he;he=ss(he))te++;for(;0<V-te;)Qe=ss(Qe),V--;for(;0<te-V;)ee=ss(ee),te--;for(;V--;){if(Qe===ee||ee!==null&&Qe===ee.alternate)break t;Qe=ss(Qe),ee=ss(ee)}Qe=null}else Qe=null;ae!==null&&gy(me,re,ae,Qe,!1),Ve!==null&&zt!==null&&gy(me,zt,Ve,Qe,!0)}}e:{if(re=ne?Pn(ne):window,ae=re.nodeName&&re.nodeName.toLowerCase(),ae==="select"||ae==="input"&&re.type==="file")var ke=Pm;else if(Dm(re))if(Bm)ke=vA;else{ke=xA;var ut=yA}else ae=re.nodeName,!ae||ae.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ne&&Zn(ne.elementType)&&(ke=Pm):ke=bA;if(ke&&(ke=ke(t,ne))){jm(me,ke,r,de);break e}ut&&ut(t,re,ne),t==="focusout"&&ne&&re.type==="number"&&ne.memoizedProps.value!=null&&le(re,"number",re.value)}switch(ut=ne?Pn(ne):window,t){case"focusin":(Dm(ut)||ut.contentEditable==="true")&&(zi=ut,Nd=ne,Qs=null);break;case"focusout":Qs=Nd=zi=null;break;case"mousedown":Ld=!0;break;case"contextmenu":case"mouseup":case"dragend":Ld=!1,Xm(me,r,de);break;case"selectionchange":if(AA)break;case"keydown":case"keyup":Xm(me,r,de)}var ze;if(Ys)e:{switch(t){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Bi?_m(t,r)&&(Ge="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Ge="onCompositionStart");Ge&&(km&&r.locale!=="ko"&&(Bi||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Bi&&(ze=fa()):(wo=de,Oi="value"in wo?wo.value:wo.textContent,Bi=!0)),ut=ru(ne,Ge),0<ut.length&&(Ge=new yc(Ge,t,null,r,de),me.push({event:Ge,listeners:ut}),ze?Ge.data=ze:(ze=Om(r),ze!==null&&(Ge.data=ze)))),(ze=fA?hA(t,r):pA(t,r))&&(Ge=ru(ne,"onBeforeInput"),0<Ge.length&&(ut=new yc("onBeforeInput","beforeinput",null,r,de),me.push({event:ut,listeners:Ge}),ut.data=ze)),rC(me,t,ne,r,de)}py(me,n)})}function vl(t,n,r){return{instance:t,listener:n,currentTarget:r}}function ru(t,n){for(var r=n+"Capture",s=[];t!==null;){var f=t,x=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||x===null||(f=un(t,r),f!=null&&s.unshift(vl(t,f,x)),f=un(t,n),f!=null&&s.push(vl(t,f,x))),t.tag===3)return s;t=t.return}return[]}function ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gy(t,n,r,s,f){for(var x=n._reactName,_=[];r!==null&&r!==s;){var P=r,Q=P.alternate,ne=P.stateNode;if(P=P.tag,Q!==null&&Q===s)break;P!==5&&P!==26&&P!==27||ne===null||(Q=ne,f?(ne=un(r,x),ne!=null&&_.unshift(vl(r,ne,Q))):f||(ne=un(r,x),ne!=null&&_.push(vl(r,ne,Q)))),r=r.return}_.length!==0&&t.push({event:n,listeners:_})}var lC=/\r\n?/g,cC=/\u0000|\uFFFD/g;function yy(t){return(typeof t=="string"?t:""+t).replace(lC,`
`).replace(cC,"")}function xy(t,n){return n=yy(n),yy(t)===n}function au(){}function Bt(t,n,r,s,f,x){switch(r){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||Ce(t,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&Ce(t,""+s);break;case"className":Bo(t,"class",s);break;case"tabIndex":Bo(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(t,r,s);break;case"style":wt(t,s,x);break;case"data":if(n!=="object"){Bo(t,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(r);break}s=Je(""+s),t.setAttribute(r,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(r==="formAction"?(n!=="input"&&Bt(t,n,"name",f.name,f,null),Bt(t,n,"formEncType",f.formEncType,f,null),Bt(t,n,"formMethod",f.formMethod,f,null),Bt(t,n,"formTarget",f.formTarget,f,null)):(Bt(t,n,"encType",f.encType,f,null),Bt(t,n,"method",f.method,f,null),Bt(t,n,"target",f.target,f,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(r);break}s=Je(""+s),t.setAttribute(r,s);break;case"onClick":s!=null&&(t.onclick=au);break;case"onScroll":s!=null&&ft("scroll",t);break;case"onScrollEnd":s!=null&&ft("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(r=s.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}r=Je(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(r,""+s):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":s===!0?t.setAttribute(r,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(r,s):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(r,s):t.removeAttribute(r);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(r):t.setAttribute(r,s);break;case"popover":ft("beforetoggle",t),ft("toggle",t),vo(t,"popover",s);break;case"xlinkActuate":zn(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":zn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":zn(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":zn(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":zn(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":zn(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":zn(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":zn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":zn(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":vo(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Ht.get(r)||r,vo(t,r,s))}}function ch(t,n,r,s,f,x){switch(r){case"style":wt(t,s,x);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(r=s.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof s=="string"?Ce(t,s):(typeof s=="number"||typeof s=="bigint")&&Ce(t,""+s);break;case"onScroll":s!=null&&ft("scroll",t);break;case"onScrollEnd":s!=null&&ft("scrollend",t);break;case"onClick":s!=null&&(t.onclick=au);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ua.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),n=r.slice(2,f?r.length-7:void 0),x=t[nn]||null,x=x!=null?x[r]:null,typeof x=="function"&&t.removeEventListener(n,x,f),typeof s=="function")){typeof x!="function"&&x!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,s,f);break e}r in t?t[r]=s:s===!0?t.setAttribute(r,""):vo(t,r,s)}}}function Wn(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",t),ft("load",t);var s=!1,f=!1,x;for(x in r)if(r.hasOwnProperty(x)){var _=r[x];if(_!=null)switch(x){case"src":s=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(t,n,x,_,r,null)}}f&&Bt(t,n,"srcSet",r.srcSet,r,null),s&&Bt(t,n,"src",r.src,r,null);return;case"input":ft("invalid",t);var P=x=_=f=null,Q=null,ne=null;for(s in r)if(r.hasOwnProperty(s)){var de=r[s];if(de!=null)switch(s){case"name":f=de;break;case"type":_=de;break;case"checked":Q=de;break;case"defaultChecked":ne=de;break;case"value":x=de;break;case"defaultValue":P=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,n));break;default:Bt(t,n,s,de,r,null)}}ri(t,x,P,Q,ne,_,f,!1),po(t);return;case"select":ft("invalid",t),s=_=x=null;for(f in r)if(r.hasOwnProperty(f)&&(P=r[f],P!=null))switch(f){case"value":x=P;break;case"defaultValue":_=P;break;case"multiple":s=P;default:Bt(t,n,f,P,r,null)}n=x,r=_,t.multiple=!!s,n!=null?pe(t,!!s,n,!1):r!=null&&pe(t,!!s,r,!0);return;case"textarea":ft("invalid",t),x=f=s=null;for(_ in r)if(r.hasOwnProperty(_)&&(P=r[_],P!=null))switch(_){case"value":s=P;break;case"defaultValue":f=P;break;case"children":x=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(91));break;default:Bt(t,n,_,P,r,null)}Ie(t,s,f,x),po(t);return;case"option":for(Q in r)if(r.hasOwnProperty(Q)&&(s=r[Q],s!=null))switch(Q){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Bt(t,n,Q,s,r,null)}return;case"dialog":ft("beforetoggle",t),ft("toggle",t),ft("cancel",t),ft("close",t);break;case"iframe":case"object":ft("load",t);break;case"video":case"audio":for(s=0;s<bl.length;s++)ft(bl[s],t);break;case"image":ft("error",t),ft("load",t);break;case"details":ft("toggle",t);break;case"embed":case"source":case"link":ft("error",t),ft("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in r)if(r.hasOwnProperty(ne)&&(s=r[ne],s!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:Bt(t,n,ne,s,r,null)}return;default:if(Zn(n)){for(de in r)r.hasOwnProperty(de)&&(s=r[de],s!==void 0&&ch(t,n,de,s,r,void 0));return}}for(P in r)r.hasOwnProperty(P)&&(s=r[P],s!=null&&Bt(t,n,P,s,r,null))}function uC(t,n,r,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,x=null,_=null,P=null,Q=null,ne=null,de=null;for(ae in r){var me=r[ae];if(r.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":Q=me;default:s.hasOwnProperty(ae)||Bt(t,n,ae,null,s,me)}}for(var re in s){var ae=s[re];if(me=r[re],s.hasOwnProperty(re)&&(ae!=null||me!=null))switch(re){case"type":x=ae;break;case"name":f=ae;break;case"checked":ne=ae;break;case"defaultChecked":de=ae;break;case"value":_=ae;break;case"defaultValue":P=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,n));break;default:ae!==me&&Bt(t,n,re,ae,s,me)}}Mt(t,_,P,Q,ne,de,x,f);return;case"select":ae=_=P=re=null;for(x in r)if(Q=r[x],r.hasOwnProperty(x)&&Q!=null)switch(x){case"value":break;case"multiple":ae=Q;default:s.hasOwnProperty(x)||Bt(t,n,x,null,s,Q)}for(f in s)if(x=s[f],Q=r[f],s.hasOwnProperty(f)&&(x!=null||Q!=null))switch(f){case"value":re=x;break;case"defaultValue":P=x;break;case"multiple":_=x;default:x!==Q&&Bt(t,n,f,x,s,Q)}n=P,r=_,s=ae,re!=null?pe(t,!!r,re,!1):!!s!=!!r&&(n!=null?pe(t,!!r,n,!0):pe(t,!!r,r?[]:"",!1));return;case"textarea":ae=re=null;for(P in r)if(f=r[P],r.hasOwnProperty(P)&&f!=null&&!s.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:Bt(t,n,P,null,s,f)}for(_ in s)if(f=s[_],x=r[_],s.hasOwnProperty(_)&&(f!=null||x!=null))switch(_){case"value":re=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==x&&Bt(t,n,_,f,s,x)}be(t,re,ae);return;case"option":for(var Ve in r)if(re=r[Ve],r.hasOwnProperty(Ve)&&re!=null&&!s.hasOwnProperty(Ve))switch(Ve){case"selected":t.selected=!1;break;default:Bt(t,n,Ve,null,s,re)}for(Q in s)if(re=s[Q],ae=r[Q],s.hasOwnProperty(Q)&&re!==ae&&(re!=null||ae!=null))switch(Q){case"selected":t.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Bt(t,n,Q,re,s,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in r)re=r[Qe],r.hasOwnProperty(Qe)&&re!=null&&!s.hasOwnProperty(Qe)&&Bt(t,n,Qe,null,s,re);for(ne in s)if(re=s[ne],ae=r[ne],s.hasOwnProperty(ne)&&re!==ae&&(re!=null||ae!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,n));break;default:Bt(t,n,ne,re,s,ae)}return;default:if(Zn(n)){for(var zt in r)re=r[zt],r.hasOwnProperty(zt)&&re!==void 0&&!s.hasOwnProperty(zt)&&ch(t,n,zt,void 0,s,re);for(de in s)re=s[de],ae=r[de],!s.hasOwnProperty(de)||re===ae||re===void 0&&ae===void 0||ch(t,n,de,re,s,ae);return}}for(var ee in r)re=r[ee],r.hasOwnProperty(ee)&&re!=null&&!s.hasOwnProperty(ee)&&Bt(t,n,ee,null,s,re);for(me in s)re=s[me],ae=r[me],!s.hasOwnProperty(me)||re===ae||re==null&&ae==null||Bt(t,n,me,re,s,ae)}var uh=null,dh=null;function iu(t){return t.nodeType===9?t:t.ownerDocument}function by(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function fh(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var hh=null;function dC(){var t=window.event;return t&&t.type==="popstate"?t===hh?!1:(hh=t,!0):(hh=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,fC=typeof clearTimeout=="function"?clearTimeout:void 0,Ay=typeof Promise=="function"?Promise:void 0,hC=typeof queueMicrotask=="function"?queueMicrotask:typeof Ay<"u"?function(t){return Ay.resolve(null).then(t).catch(pC)}:wy;function pC(t){setTimeout(function(){throw t})}function Oa(t){return t==="head"}function Cy(t,n){var r=n,s=0,f=0;do{var x=r.nextSibling;if(t.removeChild(r),x&&x.nodeType===8)if(r=x.data,r==="/$"){if(0<s&&8>s){r=s;var _=t.ownerDocument;if(r&1&&wl(_.documentElement),r&2&&wl(_.body),r&4)for(r=_.head,wl(r),_=r.firstChild;_;){var P=_.nextSibling,Q=_.nodeName;_[Zt]||Q==="SCRIPT"||Q==="STYLE"||Q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||r.removeChild(_),_=P}}if(f===0){t.removeChild(x),Tl(n);return}f--}else r==="$"||r==="$?"||r==="$!"?f++:s=r.charCodeAt(0)-48;else s=0;r=x}while(r);Tl(n)}function ph(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":ph(r),Wt(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function mC(t,n,r,s){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[Zt])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var x=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=ar(t.nextSibling),t===null)break}return null}function gC(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ar(t.nextSibling),t===null))return null;return t}function mh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function yC(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var s=function(){n(),r.removeEventListener("DOMContentLoaded",s)};r.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function ar(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var gh=null;function Sy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function Ey(t,n,r){switch(n=iu(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function wl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Wt(t)}var Xo=new Map,My=new Set;function su(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jr=Y.d;Y.d={f:xC,r:bC,D:vC,C:wC,L:AC,m:CC,X:EC,S:SC,M:MC};function xC(){var t=Jr.f(),n=Zc();return t||n}function bC(t){var n=jn(t);n!==null&&n.tag===5&&n.type==="form"?Qg(n):Jr.r(t)}var ls=typeof document>"u"?null:document;function Ry(t,n,r){var s=ls;if(s&&typeof n=="string"&&n){var f=Vt(n);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),My.has(f)||(My.add(f),t={rel:t,crossOrigin:r,href:n},s.querySelector(f)===null&&(n=s.createElement("link"),Wn(n,"link",t),vt(n),s.head.appendChild(n)))}}function vC(t){Jr.D(t),Ry("dns-prefetch",t,null)}function wC(t,n){Jr.C(t,n),Ry("preconnect",t,n)}function AC(t,n,r){Jr.L(t,n,r);var s=ls;if(s&&t&&n){var f='link[rel="preload"][as="'+Vt(n)+'"]';n==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Vt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Vt(r.imageSizes)+'"]')):f+='[href="'+Vt(t)+'"]';var x=f;switch(n){case"style":x=cs(t);break;case"script":x=us(t)}Xo.has(x)||(t=g({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Xo.set(x,t),s.querySelector(f)!==null||n==="style"&&s.querySelector(Al(x))||n==="script"&&s.querySelector(Cl(x))||(n=s.createElement("link"),Wn(n,"link",t),vt(n),s.head.appendChild(n)))}}function CC(t,n){Jr.m(t,n);var r=ls;if(r&&t){var s=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+Vt(s)+'"][href="'+Vt(t)+'"]',x=f;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=us(t)}if(!Xo.has(x)&&(t=g({rel:"modulepreload",href:t},n),Xo.set(x,t),r.querySelector(f)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Cl(x)))return}s=r.createElement("link"),Wn(s,"link",t),vt(s),r.head.appendChild(s)}}}function SC(t,n,r){Jr.S(t,n,r);var s=ls;if(s&&t){var f=io(s).hoistableStyles,x=cs(t);n=n||"default";var _=f.get(x);if(!_){var P={loading:0,preload:null};if(_=s.querySelector(Al(x)))P.loading=5;else{t=g({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Xo.get(x))&&yh(t,r);var Q=_=s.createElement("link");vt(Q),Wn(Q,"link",t),Q._p=new Promise(function(ne,de){Q.onload=ne,Q.onerror=de}),Q.addEventListener("load",function(){P.loading|=1}),Q.addEventListener("error",function(){P.loading|=2}),P.loading|=4,lu(_,n,s)}_={type:"stylesheet",instance:_,count:1,state:P},f.set(x,_)}}}function EC(t,n){Jr.X(t,n);var r=ls;if(r&&t){var s=io(r).hoistableScripts,f=us(t),x=s.get(f);x||(x=r.querySelector(Cl(f)),x||(t=g({src:t,async:!0},n),(n=Xo.get(f))&&xh(t,n),x=r.createElement("script"),vt(x),Wn(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},s.set(f,x))}}function MC(t,n){Jr.M(t,n);var r=ls;if(r&&t){var s=io(r).hoistableScripts,f=us(t),x=s.get(f);x||(x=r.querySelector(Cl(f)),x||(t=g({src:t,async:!0,type:"module"},n),(n=Xo.get(f))&&xh(t,n),x=r.createElement("script"),vt(x),Wn(x,"link",t),r.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},s.set(f,x))}}function ky(t,n,r,s){var f=(f=ie.current)?su(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=cs(r.href),r=io(f).hoistableStyles,s=r.get(n),s||(s={type:"style",instance:null,count:0,state:null},r.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=cs(r.href);var x=io(f).hoistableStyles,_=x.get(t);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,_),(x=f.querySelector(Al(t)))&&!x._p&&(_.instance=x,_.state.loading=5),Xo.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Xo.set(t,r),x||RC(f,t,r,_.state))),n&&s===null)throw Error(i(528,""));return _}if(n&&s!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=us(r),r=io(f).hoistableScripts,s=r.get(n),s||(s={type:"script",instance:null,count:0,state:null},r.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function cs(t){return'href="'+Vt(t)+'"'}function Al(t){return'link[rel="stylesheet"]['+t+"]"}function Ty(t){return g({},t,{"data-precedence":t.precedence,precedence:null})}function RC(t,n,r,s){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=t.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),Wn(n,"link",r),vt(n),t.head.appendChild(n))}function us(t){return'[src="'+Vt(t)+'"]'}function Cl(t){return"script[async]"+t}function Iy(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var s=t.querySelector('style[data-href~="'+Vt(r.href)+'"]');if(s)return n.instance=s,vt(s),s;var f=g({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),vt(s),Wn(s,"style",f),lu(s,r.precedence,t),n.instance=s;case"stylesheet":f=cs(r.href);var x=t.querySelector(Al(f));if(x)return n.state.loading|=4,n.instance=x,vt(x),x;s=Ty(r),(f=Xo.get(f))&&yh(s,f),x=(t.ownerDocument||t).createElement("link"),vt(x);var _=x;return _._p=new Promise(function(P,Q){_.onload=P,_.onerror=Q}),Wn(x,"link",s),n.state.loading|=4,lu(x,r.precedence,t),n.instance=x;case"script":return x=us(r.src),(f=t.querySelector(Cl(x)))?(n.instance=f,vt(f),f):(s=r,(f=Xo.get(x))&&(s=g({},r),xh(s,f)),t=t.ownerDocument||t,f=t.createElement("script"),vt(f),Wn(f,"link",s),t.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,lu(s,r.precedence,t));return n.instance}function lu(t,n,r){for(var s=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=s.length?s[s.length-1]:null,x=f,_=0;_<s.length;_++){var P=s[_];if(P.dataset.precedence===n)x=P;else if(x!==f)break}x?x.parentNode.insertBefore(t,x.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function yh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function xh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var cu=null;function _y(t,n,r){if(cu===null){var s=new Map,f=cu=new Map;f.set(r,s)}else f=cu,s=f.get(r),s||(s=new Map,f.set(r,s));if(s.has(t))return s;for(s.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var x=r[f];if(!(x[Zt]||x[Et]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(n)||"";_=t+_;var P=s.get(_);P?P.push(x):s.set(_,[x])}}return s}function Oy(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function kC(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Dy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Sl=null;function TC(){}function IC(t,n,r){if(Sl===null)throw Error(i(475));var s=Sl;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var f=cs(r.href),x=t.querySelector(Al(f));if(x){t=x._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(s.count++,s=uu.bind(s),t.then(s,s)),n.state.loading|=4,n.instance=x,vt(x);return}x=t.ownerDocument||t,r=Ty(r),(f=Xo.get(f))&&yh(r,f),x=x.createElement("link"),vt(x);var _=x;_._p=new Promise(function(P,Q){_.onload=P,_.onerror=Q}),Wn(x,"link",r),n.instance=x}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(s.count++,n=uu.bind(s),t.addEventListener("load",n),t.addEventListener("error",n))}}function _C(){if(Sl===null)throw Error(i(475));var t=Sl;return t.stylesheets&&t.count===0&&bh(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&bh(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function uu(){if(this.count--,this.count===0){if(this.stylesheets)bh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var du=null;function bh(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,du=new Map,n.forEach(OC,t),du=null,uu.call(t))}function OC(t,n){if(!(n.state.loading&4)){var r=du.get(t);if(r)var s=r.get(null);else{r=new Map,du.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<f.length;x++){var _=f[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),s=_)}s&&r.set(null,s)}f=n.instance,_=f.getAttribute("data-precedence"),x=r.get(_)||s,x===s&&r.set(null,f),r.set(_,f),this.count++,s=uu.bind(this),f.addEventListener("load",s),f.addEventListener("error",s),x?x.parentNode.insertBefore(f,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),n.state.loading|=4}}var El={$$typeof:E,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function DC(t,n,r,s,f,x,_,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bn(0),this.hiddenUpdates=bn(null),this.identifierPrefix=s,this.onUncaughtError=f,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function jy(t,n,r,s,f,x,_,P,Q,ne,de,me){return t=new DC(t,n,r,_,P,Q,ne,me),n=1,x===!0&&(n|=24),x=So(3,null,null,n),t.current=x,x.stateNode=t,n=Jd(),n.refCount++,t.pooledCache=n,n.refCount++,x.memoizedState={element:s,isDehydrated:r,cache:n},of(x),t}function Py(t){return t?(t=Yi,t):Yi}function By(t,n,r,s,f,x){f=Py(f),s.context===null?s.context=f:s.pendingContext=f,s=ba(n),s.payload={element:r},x=x===void 0?null:x,x!==null&&(s.callback=x),r=va(t,s,n),r!==null&&(To(r,t,n),tl(r,t,n))}function zy(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function vh(t,n){zy(t,n),(t=t.alternate)&&zy(t,n)}function Ny(t){if(t.tag===13){var n=Hi(t,67108864);n!==null&&To(n,t,67108864),vh(t,67108864)}}var fu=!0;function jC(t,n,r,s){var f=D.T;D.T=null;var x=Y.p;try{Y.p=2,wh(t,n,r,s)}finally{Y.p=x,D.T=f}}function PC(t,n,r,s){var f=D.T;D.T=null;var x=Y.p;try{Y.p=8,wh(t,n,r,s)}finally{Y.p=x,D.T=f}}function wh(t,n,r,s){if(fu){var f=Ah(s);if(f===null)lh(t,n,s,hu,r),Hy(t,s);else if(zC(f,t,n,r,s))s.stopPropagation();else if(Hy(t,s),n&4&&-1<BC.indexOf(t)){for(;f!==null;){var x=jn(f);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=Fe(x.pendingLanes);if(_!==0){var P=x;for(P.pendingLanes|=2,P.entangledLanes|=2;_;){var Q=1<<31-Xe(_);P.entanglements[1]|=Q,_&=~Q}Er(x),(Dt&6)===0&&(Vc=_e()+500,xl(0))}}break;case 13:P=Hi(x,2),P!==null&&To(P,x,2),Zc(),vh(x,2)}if(x=Ah(s),x===null&&lh(t,n,s,hu,r),x===f)break;f=x}f!==null&&s.stopPropagation()}else lh(t,n,s,null,r)}}function Ah(t){return t=Rt(t),Ch(t)}var hu=null;function Ch(t){if(hu=null,t=gn(t),t!==null){var n=c(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=u(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return hu=t,null}function Ly(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case ot:return 2;case Ye:return 8;case et:case yt:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Sh=!1,Da=null,ja=null,Pa=null,Ml=new Map,Rl=new Map,Ba=[],BC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hy(t,n){switch(t){case"focusin":case"focusout":Da=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Ml.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(n.pointerId)}}function kl(t,n,r,s,f,x){return t===null||t.nativeEvent!==x?(t={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:x,targetContainers:[f]},n!==null&&(n=jn(n),n!==null&&Ny(n)),t):(t.eventSystemFlags|=s,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function zC(t,n,r,s,f){switch(n){case"focusin":return Da=kl(Da,t,n,r,s,f),!0;case"dragenter":return ja=kl(ja,t,n,r,s,f),!0;case"mouseover":return Pa=kl(Pa,t,n,r,s,f),!0;case"pointerover":var x=f.pointerId;return Ml.set(x,kl(Ml.get(x)||null,t,n,r,s,f)),!0;case"gotpointercapture":return x=f.pointerId,Rl.set(x,kl(Rl.get(x)||null,t,n,r,s,f)),!0}return!1}function Yy(t){var n=gn(t.target);if(n!==null){var r=c(n);if(r!==null){if(n=r.tag,n===13){if(n=u(r),n!==null){t.blockedOn=n,On(t.priority,function(){if(r.tag===13){var s=ko();s=Ue(s);var f=Hi(r,s);f!==null&&To(f,r,s),vh(r,s)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Ah(t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);ct=s,r.target.dispatchEvent(s),ct=null}else return n=jn(r),n!==null&&Ny(n),t.blockedOn=r,!1;n.shift()}return!0}function $y(t,n,r){pu(t)&&r.delete(n)}function NC(){Sh=!1,Da!==null&&pu(Da)&&(Da=null),ja!==null&&pu(ja)&&(ja=null),Pa!==null&&pu(Pa)&&(Pa=null),Ml.forEach($y),Rl.forEach($y)}function mu(t,n){t.blockedOn===n&&(t.blockedOn=null,Sh||(Sh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,NC)))}var gu=null;function Uy(t){gu!==t&&(gu=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gu===t&&(gu=null);for(var n=0;n<t.length;n+=3){var r=t[n],s=t[n+1],f=t[n+2];if(typeof s!="function"){if(Ch(s||r)===null)continue;break}var x=jn(r);x!==null&&(t.splice(n,3),n-=3,Cf(x,{pending:!0,data:f,method:r.method,action:s},s,f))}}))}function Tl(t){function n(Q){return mu(Q,t)}Da!==null&&mu(Da,t),ja!==null&&mu(ja,t),Pa!==null&&mu(Pa,t),Ml.forEach(n),Rl.forEach(n);for(var r=0;r<Ba.length;r++){var s=Ba[r];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Ba.length&&(r=Ba[0],r.blockedOn===null);)Yy(r),r.blockedOn===null&&Ba.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(s=0;s<r.length;s+=3){var f=r[s],x=r[s+1],_=f[nn]||null;if(typeof x=="function")_||Uy(r);else if(_){var P=null;if(x&&x.hasAttribute("formAction")){if(f=x,_=x[nn]||null)P=_.formAction;else if(Ch(f)!==null)continue}else P=_.action;typeof P=="function"?r[s+1]=P:(r.splice(s,3),s-=3),Uy(r)}}}function Eh(t){this._internalRoot=t}yu.prototype.render=Eh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,s=ko();By(r,s,t,n,null,null)},yu.prototype.unmount=Eh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;By(t.current,2,null,t,null,null),Zc(),n[Kn]=null}};function yu(t){this._internalRoot=t}yu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ze();t={blockedOn:null,target:t,priority:n};for(var r=0;r<Ba.length&&n!==0&&n<Ba[r].priority;r++);Ba.splice(r,0,t),r===0&&Yy(t)}};var Xy=o.version;if(Xy!=="19.1.1")throw Error(i(527,Xy,"19.1.1"));Y.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(n),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var LC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{je=xu.inject(LC),Te=xu}catch{}}return _l.createRoot=function(t,n){if(!l(t))throw Error(i(299));var r=!1,s="",f=i0,x=s0,_=l0,P=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(x=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(P=n.unstable_transitionCallbacks)),n=jy(t,1,!1,null,null,r,s,f,x,_,P,null),t[Kn]=n.current,sh(t),new Eh(n)},_l.hydrateRoot=function(t,n,r){if(!l(t))throw Error(i(299));var s=!1,f="",x=i0,_=s0,P=l0,Q=null,ne=null;return r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(P=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(Q=r.unstable_transitionCallbacks),r.formState!==void 0&&(ne=r.formState)),n=jy(t,1,!0,n,r??null,s,f,x,_,P,Q,ne),n.context=Py(null),r=n.current,s=ko(),s=Ue(s),f=ba(s),f.callback=null,va(r,f,s),r=s,n.current.lanes=r,Lt(n,r),Er(n),t[Kn]=n.current,sh(t),new yu(n)},_l.version="19.1.1",_l}var ex;function qC(){if(ex)return kh.exports;ex=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(o){console.error(o)}}return e(),kh.exports=WC(),kh.exports}var VC=qC();const KC=ud(VC);var dr=tv();const ZC=ud(dr);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JC={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=(e,o,a,i)=>{const l=y.forwardRef(({color:c="currentColor",size:u=24,stroke:d=2,title:p,className:h,children:g,...m},v)=>y.createElement("svg",{ref:v,...JC[e],width:u,height:u,className:["tabler-icon",`tabler-icon-${o}`,h].join(" "),strokeWidth:d,stroke:c,...m},[p&&y.createElement("title",{key:"svg-title"},p),...i.map(([A,w])=>y.createElement(A,w)),...Array.isArray(g)?g:[g]]));return l.displayName=`${a}`,l};/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],tS=ti("outline","arrow-left","ArrowLeft",eS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],oS=ti("outline","arrow-right","ArrowRight",nS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h3m9 -9v-5a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M13 17v-1a1 1 0 0 1 1 -1h1m3 0h1a1 1 0 0 1 1 1v1m0 3v1a1 1 0 0 1 -1 1h-1m-3 0h-1a1 1 0 0 1 -1 -1v-1",key:"svg-1"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-2"}]],aS=ti("outline","clipboard-copy","ClipboardCopy",rS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]],sS=ti("outline","download","Download",iS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=[["path",{d:"M17.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0",key:"svg-0"}],["path",{d:"M3 19v-10.5a3.5 3.5 0 0 1 7 0v10.5",key:"svg-1"}],["path",{d:"M3 13h7",key:"svg-2"}],["path",{d:"M21 12v7",key:"svg-3"}]],cS=ti("outline","letter-case","LetterCase",lS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],dS=ti("outline","plus","Plus",uS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]],hS=ti("outline","printer","Printer",fS);/**
 * @license @tabler/icons-react v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],mS=ti("outline","trash","Trash",pS),tx="print-preview-modal-root",gS=()=>{if(typeof document>"u")return null;let e=document.getElementById(tx);return e||(e=document.createElement("div"),e.setAttribute("id",tx),document.body.appendChild(e)),e},yS=({isOpen:e,imageSrc:o,onClose:a,onPrint:i,onSave:l,onCopy:c,isGenerating:u})=>{const d=gS(),[p,h]=y.useState(!1),[g,m]=y.useState("idle");y.useEffect(()=>{e||(h(!1),m("idle"))},[e]),y.useEffect(()=>{if(!e)return;const w=S=>{S.key==="Escape"&&(S.preventDefault(),a())};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}},[e,a]);const v=y.useCallback(async()=>{if(!(!o||u||p)){h(!0);try{await l()}finally{h(!1)}}},[o,u,p,l]),A=y.useCallback(async()=>{if(!(!o||u||g==="copied"))try{await c(),m("copied")}catch{m("idle")}},[o,u,g,c]);return y.useEffect(()=>{o||m("idle")},[o]),!e||!d?null:dr.createPortal(b.jsx("div",{role:"dialog","aria-modal":"true","data-print-preview-modal":"true",style:xS,children:b.jsxs("div",{style:bS,children:[b.jsxs("header",{style:vS,children:[b.jsx("h2",{style:{margin:0,fontSize:"1.1rem"},children:"Print Preview"}),b.jsx("button",{type:"button",onClick:a,style:wS,"aria-label":"Close",children:""})]}),b.jsx("section",{style:AS,children:u?b.jsx("div",{style:nx,children:"Generating preview"}):o?b.jsx("img",{src:o,alt:"Print preview",style:CS,"data-print-preview-image":!0}):b.jsx("div",{style:nx,children:"Preview unavailable"})}),b.jsxs("footer",{style:SS,children:[b.jsxs("button",{type:"button",onClick:i,disabled:!o||u,style:{...Oh,...o&&!u?ES:Dh},children:[b.jsx(hS,{size:18,stroke:1.8,"aria-hidden":"true"}),b.jsx("span",{children:"Print"})]}),b.jsxs("button",{type:"button",onClick:A,disabled:!o||u||g==="copied",style:{...Oh,...o&&!u?ox:Dh},children:[b.jsx(aS,{size:18,stroke:1.8,"aria-hidden":"true"}),b.jsx("span",{children:g==="copied"?"Copied":"Copy to clipboard"})]}),b.jsxs("button",{type:"button",onClick:v,disabled:!o||u||p,"aria-busy":p,style:{...Oh,...o&&!u?ox:Dh,...p?MS:{}},children:[b.jsx(sS,{size:18,stroke:1.8,"aria-hidden":"true"}),b.jsx("span",{children:p?"Saving":"Save as PNG"})]})]})]})}),d)},xS={position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"24px"},bS={background:"#ffffff",borderRadius:"8px",boxShadow:"0 12px 40px rgba(15, 23, 42, 0.2)",width:"80vw",height:"80vh",maxWidth:"1280px",maxHeight:"80vh",display:"flex",flexDirection:"column"},vS={display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 20px",borderBottom:"1px solid #e5e7eb"},wS={background:"transparent",border:"none",color:"#475569",fontSize:"1.4rem",cursor:"pointer"},AS={flex:1,padding:"24px",background:"#f8fafc",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},CS={maxWidth:"100%",maxHeight:"100%",border:"1px solid #e2e8f0",borderRadius:"4px",background:"#ffffff"},nx={display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:"#6b7280",fontSize:"0.95rem"},SS={padding:"12px 20px",borderTop:"1px solid #e5e7eb",display:"flex",gap:"12px",justifyContent:"flex-end"},Oh={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px 18px",borderRadius:"8px",border:"none",fontWeight:600,fontSize:"0.9rem",lineHeight:1.2,minWidth:"140px",cursor:"pointer",transition:"background 0.18s ease, box-shadow 0.18s ease"},ES={background:"#2563eb",color:"#ffffff"},ox={background:"#f3f4f6",color:"#1f2937",boxShadow:"none"},Dh={background:"#e2e8f0",color:"#94a3b8",border:"none",cursor:"not-allowed",boxShadow:"none"},MS={background:"#1d4ed8",color:"#ffffff",cursor:"progress"},qn=[];for(let e=0;e<256;++e)qn.push((e+256).toString(16).slice(1));function RS(e,o=0){return(qn[e[o+0]]+qn[e[o+1]]+qn[e[o+2]]+qn[e[o+3]]+"-"+qn[e[o+4]]+qn[e[o+5]]+"-"+qn[e[o+6]]+qn[e[o+7]]+"-"+qn[e[o+8]]+qn[e[o+9]]+"-"+qn[e[o+10]]+qn[e[o+11]]+qn[e[o+12]]+qn[e[o+13]]+qn[e[o+14]]+qn[e[o+15]]).toLowerCase()}let jh;const kS=new Uint8Array(16);function TS(){if(!jh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jh=crypto.getRandomValues.bind(crypto)}return jh(kS)}const IS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),rx={randomUUID:IS};function _S(e,o,a){e=e||{};const i=e.random??e.rng?.()??TS();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,RS(i)}function xo(e,o,a){return rx.randomUUID&&!e?rx.randomUUID():_S(e)}var pn=function(){return pn=Object.assign||function(o){for(var a,i=1,l=arguments.length;i<l;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},pn.apply(this,arguments)};function nv(e,o){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&o.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(e);l<i.length;l++)o.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]]);return a}function Gl(e,o,a){if(a||arguments.length===2)for(var i=0,l=o.length,c;i<l;i++)(c||!(i in o))&&(c||(c=Array.prototype.slice.call(o,0,i)),c[i]=o[i]);return e.concat(c||Array.prototype.slice.call(o))}var Kt="-ms-",Ul="-moz-",_t="-webkit-",ov="comm",dd="rule",Yp="decl",OS="@import",rv="@keyframes",DS="@layer",av=Math.abs,$p=String.fromCharCode,fp=Object.assign;function jS(e,o){return Un(e,0)^45?(((o<<2^Un(e,0))<<2^Un(e,1))<<2^Un(e,2))<<2^Un(e,3):0}function iv(e){return e.trim()}function na(e,o){return(e=o.exec(e))?e[0]:e}function it(e,o,a){return e.replace(o,a)}function zu(e,o,a){return e.indexOf(o,a)}function Un(e,o){return e.charCodeAt(o)|0}function Ms(e,o,a){return e.slice(o,a)}function Rr(e){return e.length}function sv(e){return e.length}function Ll(e,o){return o.push(e),e}function PS(e,o){return e.map(o).join("")}function ax(e,o){return e.filter(function(a){return!na(a,o)})}var fd=1,Rs=1,lv=0,Jo=0,Sn=0,Ds="";function hd(e,o,a,i,l,c,u,d){return{value:e,root:o,parent:a,type:i,props:l,children:c,line:fd,column:Rs,length:u,return:"",siblings:d}}function $a(e,o){return fp(hd("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},o)}function ds(e){for(;e.root;)e=$a(e.root,{children:[e]});Ll(e,e.siblings)}function BS(){return Sn}function zS(){return Sn=Jo>0?Un(Ds,--Jo):0,Rs--,Sn===10&&(Rs=1,fd--),Sn}function sr(){return Sn=Jo<lv?Un(Ds,Jo++):0,Rs++,Sn===10&&(Rs=1,fd++),Sn}function Ei(){return Un(Ds,Jo)}function Nu(){return Jo}function pd(e,o){return Ms(Ds,e,o)}function hp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function NS(e){return fd=Rs=1,lv=Rr(Ds=e),Jo=0,[]}function LS(e){return Ds="",e}function Ph(e){return iv(pd(Jo-1,pp(e===91?e+2:e===40?e+1:e)))}function HS(e){for(;(Sn=Ei())&&Sn<33;)sr();return hp(e)>2||hp(Sn)>3?"":" "}function YS(e,o){for(;--o&&sr()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return pd(e,Nu()+(o<6&&Ei()==32&&sr()==32))}function pp(e){for(;sr();)switch(Sn){case e:return Jo;case 34:case 39:e!==34&&e!==39&&pp(Sn);break;case 40:e===41&&pp(e);break;case 92:sr();break}return Jo}function $S(e,o){for(;sr()&&e+Sn!==57;)if(e+Sn===84&&Ei()===47)break;return"/*"+pd(o,Jo-1)+"*"+$p(e===47?e:sr())}function US(e){for(;!hp(Ei());)sr();return pd(e,Jo)}function XS(e){return LS(Lu("",null,null,null,[""],e=NS(e),0,[0],e))}function Lu(e,o,a,i,l,c,u,d,p){for(var h=0,g=0,m=u,v=0,A=0,w=0,S=1,C=1,M=1,R=0,E="",k=l,I=c,B=i,O=E;C;)switch(w=R,R=sr()){case 40:if(w!=108&&Un(O,m-1)==58){zu(O+=it(Ph(R),"&","&\f"),"&\f",av(h?d[h-1]:0))!=-1&&(M=-1);break}case 34:case 39:case 91:O+=Ph(R);break;case 9:case 10:case 13:case 32:O+=HS(w);break;case 92:O+=YS(Nu()-1,7);continue;case 47:switch(Ei()){case 42:case 47:Ll(FS($S(sr(),Nu()),o,a,p),p);break;default:O+="/"}break;case 123*S:d[h++]=Rr(O)*M;case 125*S:case 59:case 0:switch(R){case 0:case 125:C=0;case 59+g:M==-1&&(O=it(O,/\f/g,"")),A>0&&Rr(O)-m&&Ll(A>32?sx(O+";",i,a,m-1,p):sx(it(O," ","")+";",i,a,m-2,p),p);break;case 59:O+=";";default:if(Ll(B=ix(O,o,a,h,g,l,d,E,k=[],I=[],m,c),c),R===123)if(g===0)Lu(O,o,B,B,k,c,m,d,I);else switch(v===99&&Un(O,3)===110?100:v){case 100:case 108:case 109:case 115:Lu(e,B,B,i&&Ll(ix(e,B,B,0,0,l,d,E,l,k=[],m,I),I),l,I,m,d,i?k:I);break;default:Lu(O,B,B,B,[""],I,0,d,I)}}h=g=A=0,S=M=1,E=O="",m=u;break;case 58:m=1+Rr(O),A=w;default:if(S<1){if(R==123)--S;else if(R==125&&S++==0&&zS()==125)continue}switch(O+=$p(R),R*S){case 38:M=g>0?1:(O+="\f",-1);break;case 44:d[h++]=(Rr(O)-1)*M,M=1;break;case 64:Ei()===45&&(O+=Ph(sr())),v=Ei(),g=m=Rr(E=O+=US(Nu())),R++;break;case 45:w===45&&Rr(O)==2&&(S=0)}}return c}function ix(e,o,a,i,l,c,u,d,p,h,g,m){for(var v=l-1,A=l===0?c:[""],w=sv(A),S=0,C=0,M=0;S<i;++S)for(var R=0,E=Ms(e,v+1,v=av(C=u[S])),k=e;R<w;++R)(k=iv(C>0?A[R]+" "+E:it(E,/&\f/g,A[R])))&&(p[M++]=k);return hd(e,o,a,l===0?dd:d,p,h,g,m)}function FS(e,o,a,i){return hd(e,o,a,ov,$p(BS()),Ms(e,2,-2),0,i)}function sx(e,o,a,i,l){return hd(e,o,a,Yp,Ms(e,0,i),Ms(e,i+1,-1),i,l)}function cv(e,o,a){switch(jS(e,o)){case 5103:return _t+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _t+e+e;case 4789:return Ul+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _t+e+Ul+e+Kt+e+e;case 5936:switch(Un(e,o+11)){case 114:return _t+e+Kt+it(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _t+e+Kt+it(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _t+e+Kt+it(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return _t+e+Kt+e+e;case 6165:return _t+e+Kt+"flex-"+e+e;case 5187:return _t+e+it(e,/(\w+).+(:[^]+)/,_t+"box-$1$2"+Kt+"flex-$1$2")+e;case 5443:return _t+e+Kt+"flex-item-"+it(e,/flex-|-self/g,"")+(na(e,/flex-|baseline/)?"":Kt+"grid-row-"+it(e,/flex-|-self/g,""))+e;case 4675:return _t+e+Kt+"flex-line-pack"+it(e,/align-content|flex-|-self/g,"")+e;case 5548:return _t+e+Kt+it(e,"shrink","negative")+e;case 5292:return _t+e+Kt+it(e,"basis","preferred-size")+e;case 6060:return _t+"box-"+it(e,"-grow","")+_t+e+Kt+it(e,"grow","positive")+e;case 4554:return _t+it(e,/([^-])(transform)/g,"$1"+_t+"$2")+e;case 6187:return it(it(it(e,/(zoom-|grab)/,_t+"$1"),/(image-set)/,_t+"$1"),e,"")+e;case 5495:case 3959:return it(e,/(image-set\([^]*)/,_t+"$1$`$1");case 4968:return it(it(e,/(.+:)(flex-)?(.*)/,_t+"box-pack:$3"+Kt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_t+e+e;case 4200:if(!na(e,/flex-|baseline/))return Kt+"grid-column-align"+Ms(e,o)+e;break;case 2592:case 3360:return Kt+it(e,"template-","")+e;case 4384:case 3616:return a&&a.some(function(i,l){return o=l,na(i.props,/grid-\w+-end/)})?~zu(e+(a=a[o].value),"span",0)?e:Kt+it(e,"-start","")+e+Kt+"grid-row-span:"+(~zu(a,"span",0)?na(a,/\d+/):+na(a,/\d+/)-+na(e,/\d+/))+";":Kt+it(e,"-start","")+e;case 4896:case 4128:return a&&a.some(function(i){return na(i.props,/grid-\w+-start/)})?e:Kt+it(it(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return it(e,/(.+)-inline(.+)/,_t+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rr(e)-1-o>6)switch(Un(e,o+1)){case 109:if(Un(e,o+4)!==45)break;case 102:return it(e,/(.+:)(.+)-([^]+)/,"$1"+_t+"$2-$3$1"+Ul+(Un(e,o+3)==108?"$3":"$2-$3"))+e;case 115:return~zu(e,"stretch",0)?cv(it(e,"stretch","fill-available"),o,a)+e:e}break;case 5152:case 5920:return it(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(i,l,c,u,d,p,h){return Kt+l+":"+c+h+(u?Kt+l+"-span:"+(d?p:+p-+c)+h:"")+e});case 4949:if(Un(e,o+6)===121)return it(e,":",":"+_t)+e;break;case 6444:switch(Un(e,Un(e,14)===45?18:11)){case 120:return it(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+_t+(Un(e,14)===45?"inline-":"")+"box$3$1"+_t+"$2$3$1"+Kt+"$2box$3")+e;case 100:return it(e,":",":"+Kt)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return it(e,"scroll-","scroll-snap-")+e}return e}function Qu(e,o){for(var a="",i=0;i<e.length;i++)a+=o(e[i],i,e,o)||"";return a}function QS(e,o,a,i){switch(e.type){case DS:if(e.children.length)break;case OS:case Yp:return e.return=e.return||e.value;case ov:return"";case rv:return e.return=e.value+"{"+Qu(e.children,i)+"}";case dd:if(!Rr(e.value=e.props.join(",")))return""}return Rr(a=Qu(e.children,i))?e.return=e.value+"{"+a+"}":""}function GS(e){var o=sv(e);return function(a,i,l,c){for(var u="",d=0;d<o;d++)u+=e[d](a,i,l,c)||"";return u}}function WS(e){return function(o){o.root||(o=o.return)&&e(o)}}function qS(e,o,a,i){if(e.length>-1&&!e.return)switch(e.type){case Yp:e.return=cv(e.value,e.length,a);return;case rv:return Qu([$a(e,{value:it(e.value,"@","@"+_t)})],i);case dd:if(e.length)return PS(a=e.props,function(l){switch(na(l,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ds($a(e,{props:[it(l,/:(read-\w+)/,":"+Ul+"$1")]})),ds($a(e,{props:[l]})),fp(e,{props:ax(a,i)});break;case"::placeholder":ds($a(e,{props:[it(l,/:(plac\w+)/,":"+_t+"input-$1")]})),ds($a(e,{props:[it(l,/:(plac\w+)/,":"+Ul+"$1")]})),ds($a(e,{props:[it(l,/:(plac\w+)/,Kt+"input-$1")]})),ds($a(e,{props:[l]})),fp(e,{props:ax(a,i)});break}return""})}}var VS={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Io={},ks=typeof process<"u"&&Io!==void 0&&(Io.REACT_APP_SC_ATTR||Io.SC_ATTR)||"data-styled",uv="active",dv="data-styled-version",md="6.1.19",Up=`/*!sc*/
`,Gu=typeof window<"u"&&typeof document<"u",KS=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Io!==void 0&&Io.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Io.REACT_APP_SC_DISABLE_SPEEDY!==""?Io.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Io.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Io!==void 0&&Io.SC_DISABLE_SPEEDY!==void 0&&Io.SC_DISABLE_SPEEDY!==""&&Io.SC_DISABLE_SPEEDY!=="false"&&Io.SC_DISABLE_SPEEDY),gd=Object.freeze([]),Ts=Object.freeze({});function ZS(e,o,a){return a===void 0&&(a=Ts),e.theme!==a.theme&&e.theme||o||a.theme}var fv=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),JS=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,eE=/(^-|-$)/g;function lx(e){return e.replace(JS,"-").replace(eE,"")}var tE=/(a)(d)/gi,bu=52,cx=function(e){return String.fromCharCode(e+(e>25?39:97))};function mp(e){var o,a="";for(o=Math.abs(e);o>bu;o=o/bu|0)a=cx(o%bu)+a;return(cx(o%bu)+a).replace(tE,"$1-$2")}var Bh,hv=5381,As=function(e,o){for(var a=o.length;a;)e=33*e^o.charCodeAt(--a);return e},pv=function(e){return As(hv,e)};function nE(e){return mp(pv(e)>>>0)}function oE(e){return e.displayName||e.name||"Component"}function zh(e){return typeof e=="string"&&!0}var mv=typeof Symbol=="function"&&Symbol.for,gv=mv?Symbol.for("react.memo"):60115,rE=mv?Symbol.for("react.forward_ref"):60112,aE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},iE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},sE=((Bh={})[rE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Bh[gv]=yv,Bh);function ux(e){return("type"in(o=e)&&o.type.$$typeof)===gv?yv:"$$typeof"in e?sE[e.$$typeof]:aE;var o}var lE=Object.defineProperty,cE=Object.getOwnPropertyNames,dx=Object.getOwnPropertySymbols,uE=Object.getOwnPropertyDescriptor,dE=Object.getPrototypeOf,fx=Object.prototype;function xv(e,o,a){if(typeof o!="string"){if(fx){var i=dE(o);i&&i!==fx&&xv(e,i,a)}var l=cE(o);dx&&(l=l.concat(dx(o)));for(var c=ux(e),u=ux(o),d=0;d<l.length;++d){var p=l[d];if(!(p in iE||a&&a[p]||u&&p in u||c&&p in c)){var h=uE(o,p);try{lE(e,p,h)}catch{}}}}return e}function Is(e){return typeof e=="function"}function Xp(e){return typeof e=="object"&&"styledComponentId"in e}function Si(e,o){return e&&o?"".concat(e," ").concat(o):e||o||""}function hx(e,o){if(e.length===0)return"";for(var a=e[0],i=1;i<e.length;i++)a+=e[i];return a}function Wl(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function gp(e,o,a){if(a===void 0&&(a=!1),!a&&!Wl(e)&&!Array.isArray(e))return o;if(Array.isArray(o))for(var i=0;i<o.length;i++)e[i]=gp(e[i],o[i]);else if(Wl(o))for(var i in o)e[i]=gp(e[i],o[i]);return e}function Fp(e,o){Object.defineProperty(e,"toString",{value:o})}function tc(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(o.length>0?" Args: ".concat(o.join(", ")):""))}var fE=(function(){function e(o){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=o}return e.prototype.indexOfGroup=function(o){for(var a=0,i=0;i<o;i++)a+=this.groupSizes[i];return a},e.prototype.insertRules=function(o,a){if(o>=this.groupSizes.length){for(var i=this.groupSizes,l=i.length,c=l;o>=c;)if((c<<=1)<0)throw tc(16,"".concat(o));this.groupSizes=new Uint32Array(c),this.groupSizes.set(i),this.length=c;for(var u=l;u<c;u++)this.groupSizes[u]=0}for(var d=this.indexOfGroup(o+1),p=(u=0,a.length);u<p;u++)this.tag.insertRule(d,a[u])&&(this.groupSizes[o]++,d++)},e.prototype.clearGroup=function(o){if(o<this.length){var a=this.groupSizes[o],i=this.indexOfGroup(o),l=i+a;this.groupSizes[o]=0;for(var c=i;c<l;c++)this.tag.deleteRule(i)}},e.prototype.getGroup=function(o){var a="";if(o>=this.length||this.groupSizes[o]===0)return a;for(var i=this.groupSizes[o],l=this.indexOfGroup(o),c=l+i,u=l;u<c;u++)a+="".concat(this.tag.getRule(u)).concat(Up);return a},e})(),Hu=new Map,Wu=new Map,Yu=1,vu=function(e){if(Hu.has(e))return Hu.get(e);for(;Wu.has(Yu);)Yu++;var o=Yu++;return Hu.set(e,o),Wu.set(o,e),o},hE=function(e,o){Yu=o+1,Hu.set(e,o),Wu.set(o,e)},pE="style[".concat(ks,"][").concat(dv,'="').concat(md,'"]'),mE=new RegExp("^".concat(ks,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),gE=function(e,o,a){for(var i,l=a.split(","),c=0,u=l.length;c<u;c++)(i=l[c])&&e.registerName(o,i)},yE=function(e,o){for(var a,i=((a=o.textContent)!==null&&a!==void 0?a:"").split(Up),l=[],c=0,u=i.length;c<u;c++){var d=i[c].trim();if(d){var p=d.match(mE);if(p){var h=0|parseInt(p[1],10),g=p[2];h!==0&&(hE(g,h),gE(e,g,p[3]),e.getTag().insertRules(h,l)),l.length=0}else l.push(d)}}},px=function(e){for(var o=document.querySelectorAll(pE),a=0,i=o.length;a<i;a++){var l=o[a];l&&l.getAttribute(ks)!==uv&&(yE(e,l),l.parentNode&&l.parentNode.removeChild(l))}};function xE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var bv=function(e){var o=document.head,a=e||o,i=document.createElement("style"),l=(function(d){var p=Array.from(d.querySelectorAll("style[".concat(ks,"]")));return p[p.length-1]})(a),c=l!==void 0?l.nextSibling:null;i.setAttribute(ks,uv),i.setAttribute(dv,md);var u=xE();return u&&i.setAttribute("nonce",u),a.insertBefore(i,c),i},bE=(function(){function e(o){this.element=bv(o),this.element.appendChild(document.createTextNode("")),this.sheet=(function(a){if(a.sheet)return a.sheet;for(var i=document.styleSheets,l=0,c=i.length;l<c;l++){var u=i[l];if(u.ownerNode===a)return u}throw tc(17)})(this.element),this.length=0}return e.prototype.insertRule=function(o,a){try{return this.sheet.insertRule(a,o),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(o){this.sheet.deleteRule(o),this.length--},e.prototype.getRule=function(o){var a=this.sheet.cssRules[o];return a&&a.cssText?a.cssText:""},e})(),vE=(function(){function e(o){this.element=bv(o),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(o,a){if(o<=this.length&&o>=0){var i=document.createTextNode(a);return this.element.insertBefore(i,this.nodes[o]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(o){this.element.removeChild(this.nodes[o]),this.length--},e.prototype.getRule=function(o){return o<this.length?this.nodes[o].textContent:""},e})(),wE=(function(){function e(o){this.rules=[],this.length=0}return e.prototype.insertRule=function(o,a){return o<=this.length&&(this.rules.splice(o,0,a),this.length++,!0)},e.prototype.deleteRule=function(o){this.rules.splice(o,1),this.length--},e.prototype.getRule=function(o){return o<this.length?this.rules[o]:""},e})(),mx=Gu,AE={isServer:!Gu,useCSSOMInjection:!KS},vv=(function(){function e(o,a,i){o===void 0&&(o=Ts),a===void 0&&(a={});var l=this;this.options=pn(pn({},AE),o),this.gs=a,this.names=new Map(i),this.server=!!o.isServer,!this.server&&Gu&&mx&&(mx=!1,px(this)),Fp(this,function(){return(function(c){for(var u=c.getTag(),d=u.length,p="",h=function(m){var v=(function(M){return Wu.get(M)})(m);if(v===void 0)return"continue";var A=c.names.get(v),w=u.getGroup(m);if(A===void 0||!A.size||w.length===0)return"continue";var S="".concat(ks,".g").concat(m,'[id="').concat(v,'"]'),C="";A!==void 0&&A.forEach(function(M){M.length>0&&(C+="".concat(M,","))}),p+="".concat(w).concat(S,'{content:"').concat(C,'"}').concat(Up)},g=0;g<d;g++)h(g);return p})(l)})}return e.registerId=function(o){return vu(o)},e.prototype.rehydrate=function(){!this.server&&Gu&&px(this)},e.prototype.reconstructWithOptions=function(o,a){return a===void 0&&(a=!0),new e(pn(pn({},this.options),o),this.gs,a&&this.names||void 0)},e.prototype.allocateGSInstance=function(o){return this.gs[o]=(this.gs[o]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(o=(function(a){var i=a.useCSSOMInjection,l=a.target;return a.isServer?new wE(l):i?new bE(l):new vE(l)})(this.options),new fE(o)));var o},e.prototype.hasNameForId=function(o,a){return this.names.has(o)&&this.names.get(o).has(a)},e.prototype.registerName=function(o,a){if(vu(o),this.names.has(o))this.names.get(o).add(a);else{var i=new Set;i.add(a),this.names.set(o,i)}},e.prototype.insertRules=function(o,a,i){this.registerName(o,a),this.getTag().insertRules(vu(o),i)},e.prototype.clearNames=function(o){this.names.has(o)&&this.names.get(o).clear()},e.prototype.clearRules=function(o){this.getTag().clearGroup(vu(o)),this.clearNames(o)},e.prototype.clearTag=function(){this.tag=void 0},e})(),CE=/&/g,SE=/^\s*\/\/.*$/gm;function wv(e,o){return e.map(function(a){return a.type==="rule"&&(a.value="".concat(o," ").concat(a.value),a.value=a.value.replaceAll(",",",".concat(o," ")),a.props=a.props.map(function(i){return"".concat(o," ").concat(i)})),Array.isArray(a.children)&&a.type!=="@keyframes"&&(a.children=wv(a.children,o)),a})}function EE(e){var o,a,i,l=Ts,c=l.options,u=c===void 0?Ts:c,d=l.plugins,p=d===void 0?gd:d,h=function(v,A,w){return w.startsWith(a)&&w.endsWith(a)&&w.replaceAll(a,"").length>0?".".concat(o):v},g=p.slice();g.push(function(v){v.type===dd&&v.value.includes("&")&&(v.props[0]=v.props[0].replace(CE,a).replace(i,h))}),u.prefix&&g.push(qS),g.push(QS);var m=function(v,A,w,S){A===void 0&&(A=""),w===void 0&&(w=""),S===void 0&&(S="&"),o=S,a=A,i=new RegExp("\\".concat(a,"\\b"),"g");var C=v.replace(SE,""),M=XS(w||A?"".concat(w," ").concat(A," { ").concat(C," }"):C);u.namespace&&(M=wv(M,u.namespace));var R=[];return Qu(M,GS(g.concat(WS(function(E){return R.push(E)})))),R};return m.hash=p.length?p.reduce(function(v,A){return A.name||tc(15),As(v,A.name)},hv).toString():"",m}var ME=new vv,yp=EE(),Av=Me.createContext({shouldForwardProp:void 0,styleSheet:ME,stylis:yp});Av.Consumer;Me.createContext(void 0);function gx(){return y.useContext(Av)}var RE=(function(){function e(o,a){var i=this;this.inject=function(l,c){c===void 0&&(c=yp);var u=i.name+c.hash;l.hasNameForId(i.id,u)||l.insertRules(i.id,u,c(i.rules,u,"@keyframes"))},this.name=o,this.id="sc-keyframes-".concat(o),this.rules=a,Fp(this,function(){throw tc(12,String(i.name))})}return e.prototype.getName=function(o){return o===void 0&&(o=yp),this.name+o.hash},e})(),kE=function(e){return e>="A"&&e<="Z"};function yx(e){for(var o="",a=0;a<e.length;a++){var i=e[a];if(a===1&&i==="-"&&e[0]==="-")return e;kE(i)?o+="-"+i.toLowerCase():o+=i}return o.startsWith("ms-")?"-"+o:o}var Cv=function(e){return e==null||e===!1||e===""},Sv=function(e){var o,a,i=[];for(var l in e){var c=e[l];e.hasOwnProperty(l)&&!Cv(c)&&(Array.isArray(c)&&c.isCss||Is(c)?i.push("".concat(yx(l),":"),c,";"):Wl(c)?i.push.apply(i,Gl(Gl(["".concat(l," {")],Sv(c),!1),["}"],!1)):i.push("".concat(yx(l),": ").concat((o=l,(a=c)==null||typeof a=="boolean"||a===""?"":typeof a!="number"||a===0||o in VS||o.startsWith("--")?String(a).trim():"".concat(a,"px")),";")))}return i};function Mi(e,o,a,i){if(Cv(e))return[];if(Xp(e))return[".".concat(e.styledComponentId)];if(Is(e)){if(!Is(c=e)||c.prototype&&c.prototype.isReactComponent||!o)return[e];var l=e(o);return Mi(l,o,a,i)}var c;return e instanceof RE?a?(e.inject(a,i),[e.getName(i)]):[e]:Wl(e)?Sv(e):Array.isArray(e)?Array.prototype.concat.apply(gd,e.map(function(u){return Mi(u,o,a,i)})):[e.toString()]}function TE(e){for(var o=0;o<e.length;o+=1){var a=e[o];if(Is(a)&&!Xp(a))return!1}return!0}var IE=pv(md),_E=(function(){function e(o,a,i){this.rules=o,this.staticRulesId="",this.isStatic=(i===void 0||i.isStatic)&&TE(o),this.componentId=a,this.baseHash=As(IE,a),this.baseStyle=i,vv.registerId(a)}return e.prototype.generateAndInjectStyles=function(o,a,i){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(o,a,i):"";if(this.isStatic&&!i.hash)if(this.staticRulesId&&a.hasNameForId(this.componentId,this.staticRulesId))l=Si(l,this.staticRulesId);else{var c=hx(Mi(this.rules,o,a,i)),u=mp(As(this.baseHash,c)>>>0);if(!a.hasNameForId(this.componentId,u)){var d=i(c,".".concat(u),void 0,this.componentId);a.insertRules(this.componentId,u,d)}l=Si(l,u),this.staticRulesId=u}else{for(var p=As(this.baseHash,i.hash),h="",g=0;g<this.rules.length;g++){var m=this.rules[g];if(typeof m=="string")h+=m;else if(m){var v=hx(Mi(m,o,a,i));p=As(p,v+g),h+=v}}if(h){var A=mp(p>>>0);a.hasNameForId(this.componentId,A)||a.insertRules(this.componentId,A,i(h,".".concat(A),void 0,this.componentId)),l=Si(l,A)}}return l},e})(),Ev=Me.createContext(void 0);Ev.Consumer;var Nh={};function OE(e,o,a){var i=Xp(e),l=e,c=!zh(e),u=o.attrs,d=u===void 0?gd:u,p=o.componentId,h=p===void 0?(function(k,I){var B=typeof k!="string"?"sc":lx(k);Nh[B]=(Nh[B]||0)+1;var O="".concat(B,"-").concat(nE(md+B+Nh[B]));return I?"".concat(I,"-").concat(O):O})(o.displayName,o.parentComponentId):p,g=o.displayName,m=g===void 0?(function(k){return zh(k)?"styled.".concat(k):"Styled(".concat(oE(k),")")})(e):g,v=o.displayName&&o.componentId?"".concat(lx(o.displayName),"-").concat(o.componentId):o.componentId||h,A=i&&l.attrs?l.attrs.concat(d).filter(Boolean):d,w=o.shouldForwardProp;if(i&&l.shouldForwardProp){var S=l.shouldForwardProp;if(o.shouldForwardProp){var C=o.shouldForwardProp;w=function(k,I){return S(k,I)&&C(k,I)}}else w=S}var M=new _E(a,v,i?l.componentStyle:void 0);function R(k,I){return(function(B,O,j){var U=B.attrs,G=B.componentStyle,X=B.defaultProps,W=B.foldedComponentIds,J=B.styledComponentId,oe=B.target,Z=Me.useContext(Ev),D=gx(),Y=B.shouldForwardProp||D.shouldForwardProp,z=ZS(O,Z,X)||Ts,L=(function(K,ie,ue){for(var se,ye=pn(pn({},ie),{className:void 0,theme:ue}),ge=0;ge<K.length;ge+=1){var Ae=Is(se=K[ge])?se(ye):se;for(var Se in Ae)ye[Se]=Se==="className"?Si(ye[Se],Ae[Se]):Se==="style"?pn(pn({},ye[Se]),Ae[Se]):Ae[Se]}return ie.className&&(ye.className=Si(ye.className,ie.className)),ye})(U,O,z),T=L.as||oe,$={};for(var N in L)L[N]===void 0||N[0]==="$"||N==="as"||N==="theme"&&L.theme===z||(N==="forwardedAs"?$.as=L.forwardedAs:Y&&!Y(N,T)||($[N]=L[N]));var H=(function(K,ie){var ue=gx(),se=K.generateAndInjectStyles(ie,ue.styleSheet,ue.stylis);return se})(G,L),q=Si(W,J);return H&&(q+=" "+H),L.className&&(q+=" "+L.className),$[zh(T)&&!fv.has(T)?"class":"className"]=q,j&&($.ref=j),y.createElement(T,$)})(E,k,I)}R.displayName=m;var E=Me.forwardRef(R);return E.attrs=A,E.componentStyle=M,E.displayName=m,E.shouldForwardProp=w,E.foldedComponentIds=i?Si(l.foldedComponentIds,l.styledComponentId):"",E.styledComponentId=v,E.target=i?l.target:e,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=i?(function(I){for(var B=[],O=1;O<arguments.length;O++)B[O-1]=arguments[O];for(var j=0,U=B;j<U.length;j++)gp(I,U[j],!0);return I})({},l.defaultProps,k):k}}),Fp(E,function(){return".".concat(E.styledComponentId)}),c&&xv(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function xx(e,o){for(var a=[e[0]],i=0,l=o.length;i<l;i+=1)a.push(o[i],e[i+1]);return a}var bx=function(e){return Object.assign(e,{isCss:!0})};function lr(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];if(Is(e)||Wl(e))return bx(Mi(xx(gd,Gl([e],o,!0))));var i=e;return o.length===0&&i.length===1&&typeof i[0]=="string"?Mi(i):bx(Mi(xx(i,o)))}function xp(e,o,a){if(a===void 0&&(a=Ts),!o)throw tc(1,o);var i=function(l){for(var c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];return e(o,a,lr.apply(void 0,Gl([l],c,!1)))};return i.attrs=function(l){return xp(e,o,pn(pn({},a),{attrs:Array.prototype.concat(a.attrs,l).filter(Boolean)}))},i.withConfig=function(l){return xp(e,o,pn(pn({},a),l))},i}var Mv=function(e){return xp(OE,e)},ce=Mv;fv.forEach(function(e){ce[e]=Mv(e)});const DE=ce.div`
  display: flex;
  height: 100vh;
  width: 100vw;
  background: #f8f9fa;
`,jE=ce.div.attrs(e=>({style:{marginLeft:`${e.$libraryWidth}px`,width:`calc(100vw - ${e.$libraryWidth}px)`}}))`
  margin-top: 60px;
  height: calc(100vh - 60px - 34px);
  position: relative;
  overflow: hidden;
`,PE=ce.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: white;
  border-bottom: 1px solid #e1e5e9;
  z-index: 1000;
  display: flex;
  align-items: center;
  padding: 6px 12px 6px 20px;
  gap: 15px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
`,BE=ce.div`
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
`,zE=ce.img`
  width: 48px;
  height: 48px;
  flex-shrink: 0;
`,NE=ce.div`
  display: flex;
  grid-column: 1;
  grid-row: 2;
  justify-self: stretch;
  min-width: 0;
  width: 100%;
`,LE=ce.div`
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
  min-width: 0;
`,HE=ce.div`
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 16px;
  width: 100%;
  grid-column: 1;
  grid-row: 1;
`,YE=ce.div`
  display: flex;
  align-items: center;
  min-width: 0;
  width: 220px;
  justify-content: space-between;
  gap: 8px;
  grid-column: 1;
  grid-row: 1;
`,$E=ce.button`
  border: none;
  background: none;
  font-size: 16px;
  font-weight: 600;
  color: #2c3e50;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 6px;
  width: 220px;
  text-align: left;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;

  &:hover {
    background: rgba(33, 37, 41, 0.05);
  }
`,UE=ce.input`
  font-size: 16px;
  font-weight: 600;
  color: #2c3e50;
  border: 1px solid rgba(108, 117, 125, 0.35);
  border-radius: 6px;
  padding: 4px 6px;
  width: 100%;
  max-width: 220px;
  outline: none;
  text-align: left;

  &:focus {
    border-color: #1d6ff2;
    box-shadow: 0 0 0 2px rgba(29, 111, 242, 0.2);
  }
`,XE=ce.div`
  display: inline-grid;
  grid-template-columns: minmax(200px, max-content);
  grid-auto-rows: auto;
  row-gap: 0;
  align-items: center;
`,FE=ce.div`
  position: ${e=>e.$visible?"absolute":"static"};
  right: 20px;
  top: 50%;
  transform: ${e=>e.$visible?"translateY(-50%)":"none"};
  display: ${e=>e.$visible?"flex":"none"};
  align-items: center;
  justify-content: flex-end;
  pointer-events: none;
  gap: 12px;
  z-index: 1;

  > * {
    pointer-events: auto;
  }
`,QE=ce.div`
  margin-left: auto;
  padding-left: ${e=>e.$hasDocked?"32px":"0"};
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
`,GE=ce.div`
  font-size: 12px;
  color: rgba(108, 117, 125, 0.55);
  text-align: left;
  white-space: nowrap;
  min-height: 18px;
  flex-shrink: 0;
  align-self: baseline;
`;function nc(e,o=[]){let a=[];function i(c,u){const d=y.createContext(u),p=a.length;a=[...a,u];const h=m=>{const{scope:v,children:A,...w}=m,S=v?.[e]?.[p]||d,C=y.useMemo(()=>w,Object.values(w));return b.jsx(S.Provider,{value:C,children:A})};h.displayName=c+"Provider";function g(m,v){const A=v?.[e]?.[p]||d,w=y.useContext(A);if(w)return w;if(u!==void 0)return u;throw new Error(`\`${m}\` must be used within \`${c}\``)}return[h,g]}const l=()=>{const c=a.map(u=>y.createContext(u));return function(d){const p=d?.[e]||c;return y.useMemo(()=>({[`__scope${e}`]:{...d,[e]:p}}),[d,p])}};return l.scopeName=e,[i,WE(l,...o)]}function WE(...e){const o=e[0];if(e.length===1)return o;const a=()=>{const i=e.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(c){const u=i.reduce((d,{useScope:p,scopeName:h})=>{const m=p(c)[`__scope${h}`];return{...d,...m}},{});return y.useMemo(()=>({[`__scope${o.scopeName}`]:u}),[u])}};return a.scopeName=o.scopeName,a}function vx(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function Qp(...e){return o=>{let a=!1;const i=e.map(l=>{const c=vx(l,o);return!a&&typeof c=="function"&&(a=!0),c});if(a)return()=>{for(let l=0;l<i.length;l++){const c=i[l];typeof c=="function"?c():vx(e[l],null)}}}}function fo(...e){return y.useCallback(Qp(...e),e)}function qu(e){const o=qE(e),a=y.forwardRef((i,l)=>{const{children:c,...u}=i,d=y.Children.toArray(c),p=d.find(KE);if(p){const h=p.props.children,g=d.map(m=>m===p?y.Children.count(h)>1?y.Children.only(null):y.isValidElement(h)?h.props.children:null:m);return b.jsx(o,{...u,ref:l,children:y.isValidElement(h)?y.cloneElement(h,void 0,g):null})}return b.jsx(o,{...u,ref:l,children:c})});return a.displayName=`${e}.Slot`,a}function qE(e){const o=y.forwardRef((a,i)=>{const{children:l,...c}=a;if(y.isValidElement(l)){const u=JE(l),d=ZE(c,l.props);return l.type!==y.Fragment&&(d.ref=i?Qp(i,u):u),y.cloneElement(l,d)}return y.Children.count(l)>1?y.Children.only(null):null});return o.displayName=`${e}.SlotClone`,o}var VE=Symbol("radix.slottable");function KE(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VE}function ZE(e,o){const a={...o};for(const i in o){const l=e[i],c=o[i];/^on[A-Z]/.test(i)?l&&c?a[i]=(...d)=>{const p=c(...d);return l(...d),p}:l&&(a[i]=l):i==="style"?a[i]={...l,...c}:i==="className"&&(a[i]=[l,c].filter(Boolean).join(" "))}return{...e,...a}}function JE(e){let o=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning;return a?e.ref:(o=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}function Gp(e){const o=e+"CollectionProvider",[a,i]=nc(o),[l,c]=a(o,{collectionRef:{current:null},itemMap:new Map}),u=S=>{const{scope:C,children:M}=S,R=Me.useRef(null),E=Me.useRef(new Map).current;return b.jsx(l,{scope:C,itemMap:E,collectionRef:R,children:M})};u.displayName=o;const d=e+"CollectionSlot",p=qu(d),h=Me.forwardRef((S,C)=>{const{scope:M,children:R}=S,E=c(d,M),k=fo(C,E.collectionRef);return b.jsx(p,{ref:k,children:R})});h.displayName=d;const g=e+"CollectionItemSlot",m="data-radix-collection-item",v=qu(g),A=Me.forwardRef((S,C)=>{const{scope:M,children:R,...E}=S,k=Me.useRef(null),I=fo(C,k),B=c(g,M);return Me.useEffect(()=>(B.itemMap.set(k,{ref:k,...E}),()=>void B.itemMap.delete(k))),b.jsx(v,{[m]:"",ref:I,children:R})});A.displayName=g;function w(S){const C=c(e+"CollectionConsumer",S);return Me.useCallback(()=>{const R=C.collectionRef.current;if(!R)return[];const E=Array.from(R.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((B,O)=>E.indexOf(B.ref.current)-E.indexOf(O.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:u,Slot:h,ItemSlot:A},w,i]}var e2=y.createContext(void 0);function Wp(e){const o=y.useContext(e2);return e||o||"ltr"}function lt(e,o,{checkForDefaultPrevented:a=!0}={}){return function(l){if(e?.(l),a===!1||!l.defaultPrevented)return o?.(l)}}var Za=globalThis?.document?y.useLayoutEffect:()=>{},t2=ev[" useId ".trim().toString()]||(()=>{}),n2=0;function Cs(e){const[o,a]=y.useState(t2());return Za(()=>{a(i=>i??String(n2++))},[e]),o?`radix-${o}`:""}var o2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oo=o2.reduce((e,o)=>{const a=qu(`Primitive.${o}`),i=y.forwardRef((l,c)=>{const{asChild:u,...d}=l,p=u?a:o;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(p,{...d,ref:c})});return i.displayName=`Primitive.${o}`,{...e,[o]:i}},{});function Rv(e,o){e&&dr.flushSync(()=>e.dispatchEvent(o))}function _r(e){const o=y.useRef(e);return y.useEffect(()=>{o.current=e}),y.useMemo(()=>(...a)=>o.current?.(...a),[])}function r2(e,o=globalThis?.document){const a=_r(e);y.useEffect(()=>{const i=l=>{l.key==="Escape"&&a(l)};return o.addEventListener("keydown",i,{capture:!0}),()=>o.removeEventListener("keydown",i,{capture:!0})},[a,o])}var a2="DismissableLayer",bp="dismissableLayer.update",i2="dismissableLayer.pointerDownOutside",s2="dismissableLayer.focusOutside",wx,kv=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tv=y.forwardRef((e,o)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...p}=e,h=y.useContext(kv),[g,m]=y.useState(null),v=g?.ownerDocument??globalThis?.document,[,A]=y.useState({}),w=fo(o,O=>m(O)),S=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),M=S.indexOf(C),R=g?S.indexOf(g):-1,E=h.layersWithOutsidePointerEventsDisabled.size>0,k=R>=M,I=u2(O=>{const j=O.target,U=[...h.branches].some(G=>G.contains(j));!k||U||(l?.(O),u?.(O),O.defaultPrevented||d?.())},v),B=d2(O=>{const j=O.target;[...h.branches].some(G=>G.contains(j))||(c?.(O),u?.(O),O.defaultPrevented||d?.())},v);return r2(O=>{R===h.layers.size-1&&(i?.(O),!O.defaultPrevented&&d&&(O.preventDefault(),d()))},v),y.useEffect(()=>{if(g)return a&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(wx=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(g)),h.layers.add(g),Ax(),()=>{a&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=wx)}},[g,v,a,h]),y.useEffect(()=>()=>{g&&(h.layers.delete(g),h.layersWithOutsidePointerEventsDisabled.delete(g),Ax())},[g,h]),y.useEffect(()=>{const O=()=>A({});return document.addEventListener(bp,O),()=>document.removeEventListener(bp,O)},[]),b.jsx(oo.div,{...p,ref:w,style:{pointerEvents:E?k?"auto":"none":void 0,...e.style},onFocusCapture:lt(e.onFocusCapture,B.onFocusCapture),onBlurCapture:lt(e.onBlurCapture,B.onBlurCapture),onPointerDownCapture:lt(e.onPointerDownCapture,I.onPointerDownCapture)})});Tv.displayName=a2;var l2="DismissableLayerBranch",c2=y.forwardRef((e,o)=>{const a=y.useContext(kv),i=y.useRef(null),l=fo(o,i);return y.useEffect(()=>{const c=i.current;if(c)return a.branches.add(c),()=>{a.branches.delete(c)}},[a.branches]),b.jsx(oo.div,{...e,ref:l})});c2.displayName=l2;function u2(e,o=globalThis?.document){const a=_r(e),i=y.useRef(!1),l=y.useRef(()=>{});return y.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let p=function(){Iv(i2,a,h,{discrete:!0})};const h={originalEvent:d};d.pointerType==="touch"?(o.removeEventListener("click",l.current),l.current=p,o.addEventListener("click",l.current,{once:!0})):p()}else o.removeEventListener("click",l.current);i.current=!1},u=window.setTimeout(()=>{o.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),o.removeEventListener("pointerdown",c),o.removeEventListener("click",l.current)}},[o,a]),{onPointerDownCapture:()=>i.current=!0}}function d2(e,o=globalThis?.document){const a=_r(e),i=y.useRef(!1);return y.useEffect(()=>{const l=c=>{c.target&&!i.current&&Iv(s2,a,{originalEvent:c},{discrete:!1})};return o.addEventListener("focusin",l),()=>o.removeEventListener("focusin",l)},[o,a]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Ax(){const e=new CustomEvent(bp);document.dispatchEvent(e)}function Iv(e,o,a,{discrete:i}){const l=a.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});o&&l.addEventListener(e,o,{once:!0}),i?Rv(l,c):l.dispatchEvent(c)}var Lh=0;function f2(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Cx()),document.body.insertAdjacentElement("beforeend",e[1]??Cx()),Lh++,()=>{Lh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(o=>o.remove()),Lh--}},[])}function Cx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Hh="focusScope.autoFocusOnMount",Yh="focusScope.autoFocusOnUnmount",Sx={bubbles:!1,cancelable:!0},h2="FocusScope",_v=y.forwardRef((e,o)=>{const{loop:a=!1,trapped:i=!1,onMountAutoFocus:l,onUnmountAutoFocus:c,...u}=e,[d,p]=y.useState(null),h=_r(l),g=_r(c),m=y.useRef(null),v=fo(o,S=>p(S)),A=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(i){let S=function(E){if(A.paused||!d)return;const k=E.target;d.contains(k)?m.current=k:Ua(m.current,{select:!0})},C=function(E){if(A.paused||!d)return;const k=E.relatedTarget;k!==null&&(d.contains(k)||Ua(m.current,{select:!0}))},M=function(E){if(document.activeElement===document.body)for(const I of E)I.removedNodes.length>0&&Ua(d)};document.addEventListener("focusin",S),document.addEventListener("focusout",C);const R=new MutationObserver(M);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",C),R.disconnect()}}},[i,d,A.paused]),y.useEffect(()=>{if(d){Mx.add(A);const S=document.activeElement;if(!d.contains(S)){const M=new CustomEvent(Hh,Sx);d.addEventListener(Hh,h),d.dispatchEvent(M),M.defaultPrevented||(p2(b2(Ov(d)),{select:!0}),document.activeElement===S&&Ua(d))}return()=>{d.removeEventListener(Hh,h),setTimeout(()=>{const M=new CustomEvent(Yh,Sx);d.addEventListener(Yh,g),d.dispatchEvent(M),M.defaultPrevented||Ua(S??document.body,{select:!0}),d.removeEventListener(Yh,g),Mx.remove(A)},0)}}},[d,h,g,A]);const w=y.useCallback(S=>{if(!a&&!i||A.paused)return;const C=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,M=document.activeElement;if(C&&M){const R=S.currentTarget,[E,k]=m2(R);E&&k?!S.shiftKey&&M===k?(S.preventDefault(),a&&Ua(E,{select:!0})):S.shiftKey&&M===E&&(S.preventDefault(),a&&Ua(k,{select:!0})):M===R&&S.preventDefault()}},[a,i,A.paused]);return b.jsx(oo.div,{tabIndex:-1,...u,ref:v,onKeyDown:w})});_v.displayName=h2;function p2(e,{select:o=!1}={}){const a=document.activeElement;for(const i of e)if(Ua(i,{select:o}),document.activeElement!==a)return}function m2(e){const o=Ov(e),a=Ex(o,e),i=Ex(o.reverse(),e);return[a,i]}function Ov(e){const o=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const l=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||l?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)o.push(a.currentNode);return o}function Ex(e,o){for(const a of e)if(!g2(a,{upTo:o}))return a}function g2(e,{upTo:o}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(o!==void 0&&e===o)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function y2(e){return e instanceof HTMLInputElement&&"select"in e}function Ua(e,{select:o=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&y2(e)&&o&&e.select()}}var Mx=x2();function x2(){let e=[];return{add(o){const a=e[0];o!==a&&a?.pause(),e=Rx(e,o),e.unshift(o)},remove(o){e=Rx(e,o),e[0]?.resume()}}}function Rx(e,o){const a=[...e],i=a.indexOf(o);return i!==-1&&a.splice(i,1),a}function b2(e){return e.filter(o=>o.tagName!=="A")}const v2=["top","right","bottom","left"],Ja=Math.min,Oo=Math.max,Vu=Math.round,wu=Math.floor,Ir=e=>({x:e,y:e}),w2={left:"right",right:"left",bottom:"top",top:"bottom"},A2={start:"end",end:"start"};function vp(e,o,a){return Oo(e,Ja(o,a))}function la(e,o){return typeof e=="function"?e(o):e}function ca(e){return e.split("-")[0]}function js(e){return e.split("-")[1]}function qp(e){return e==="x"?"y":"x"}function Vp(e){return e==="y"?"height":"width"}const C2=new Set(["top","bottom"]);function Tr(e){return C2.has(ca(e))?"y":"x"}function Kp(e){return qp(Tr(e))}function S2(e,o,a){a===void 0&&(a=!1);const i=js(e),l=Kp(e),c=Vp(l);let u=l==="x"?i===(a?"end":"start")?"right":"left":i==="start"?"bottom":"top";return o.reference[c]>o.floating[c]&&(u=Ku(u)),[u,Ku(u)]}function E2(e){const o=Ku(e);return[wp(e),o,wp(o)]}function wp(e){return e.replace(/start|end/g,o=>A2[o])}const kx=["left","right"],Tx=["right","left"],M2=["top","bottom"],R2=["bottom","top"];function k2(e,o,a){switch(e){case"top":case"bottom":return a?o?Tx:kx:o?kx:Tx;case"left":case"right":return o?M2:R2;default:return[]}}function T2(e,o,a,i){const l=js(e);let c=k2(ca(e),a==="start",i);return l&&(c=c.map(u=>u+"-"+l),o&&(c=c.concat(c.map(wp)))),c}function Ku(e){return e.replace(/left|right|bottom|top/g,o=>w2[o])}function I2(e){return{top:0,right:0,bottom:0,left:0,...e}}function Dv(e){return typeof e!="number"?I2(e):{top:e,right:e,bottom:e,left:e}}function Zu(e){const{x:o,y:a,width:i,height:l}=e;return{width:i,height:l,top:a,left:o,right:o+i,bottom:a+l,x:o,y:a}}function Ix(e,o,a){let{reference:i,floating:l}=e;const c=Tr(o),u=Kp(o),d=Vp(u),p=ca(o),h=c==="y",g=i.x+i.width/2-l.width/2,m=i.y+i.height/2-l.height/2,v=i[d]/2-l[d]/2;let A;switch(p){case"top":A={x:g,y:i.y-l.height};break;case"bottom":A={x:g,y:i.y+i.height};break;case"right":A={x:i.x+i.width,y:m};break;case"left":A={x:i.x-l.width,y:m};break;default:A={x:i.x,y:i.y}}switch(js(o)){case"start":A[u]-=v*(a&&h?-1:1);break;case"end":A[u]+=v*(a&&h?-1:1);break}return A}const _2=async(e,o,a)=>{const{placement:i="bottom",strategy:l="absolute",middleware:c=[],platform:u}=a,d=c.filter(Boolean),p=await(u.isRTL==null?void 0:u.isRTL(o));let h=await u.getElementRects({reference:e,floating:o,strategy:l}),{x:g,y:m}=Ix(h,i,p),v=i,A={},w=0;for(let S=0;S<d.length;S++){const{name:C,fn:M}=d[S],{x:R,y:E,data:k,reset:I}=await M({x:g,y:m,initialPlacement:i,placement:v,strategy:l,middlewareData:A,rects:h,platform:u,elements:{reference:e,floating:o}});g=R??g,m=E??m,A={...A,[C]:{...A[C],...k}},I&&w<=50&&(w++,typeof I=="object"&&(I.placement&&(v=I.placement),I.rects&&(h=I.rects===!0?await u.getElementRects({reference:e,floating:o,strategy:l}):I.rects),{x:g,y:m}=Ix(h,v,p)),S=-1)}return{x:g,y:m,placement:v,strategy:l,middlewareData:A}};async function ql(e,o){var a;o===void 0&&(o={});const{x:i,y:l,platform:c,rects:u,elements:d,strategy:p}=e,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:v=!1,padding:A=0}=la(o,e),w=Dv(A),C=d[v?m==="floating"?"reference":"floating":m],M=Zu(await c.getClippingRect({element:(a=await(c.isElement==null?void 0:c.isElement(C)))==null||a?C:C.contextElement||await(c.getDocumentElement==null?void 0:c.getDocumentElement(d.floating)),boundary:h,rootBoundary:g,strategy:p})),R=m==="floating"?{x:i,y:l,width:u.floating.width,height:u.floating.height}:u.reference,E=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d.floating)),k=await(c.isElement==null?void 0:c.isElement(E))?await(c.getScale==null?void 0:c.getScale(E))||{x:1,y:1}:{x:1,y:1},I=Zu(c.convertOffsetParentRelativeRectToViewportRelativeRect?await c.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:R,offsetParent:E,strategy:p}):R);return{top:(M.top-I.top+w.top)/k.y,bottom:(I.bottom-M.bottom+w.bottom)/k.y,left:(M.left-I.left+w.left)/k.x,right:(I.right-M.right+w.right)/k.x}}const O2=e=>({name:"arrow",options:e,async fn(o){const{x:a,y:i,placement:l,rects:c,platform:u,elements:d,middlewareData:p}=o,{element:h,padding:g=0}=la(e,o)||{};if(h==null)return{};const m=Dv(g),v={x:a,y:i},A=Kp(l),w=Vp(A),S=await u.getDimensions(h),C=A==="y",M=C?"top":"left",R=C?"bottom":"right",E=C?"clientHeight":"clientWidth",k=c.reference[w]+c.reference[A]-v[A]-c.floating[w],I=v[A]-c.reference[A],B=await(u.getOffsetParent==null?void 0:u.getOffsetParent(h));let O=B?B[E]:0;(!O||!await(u.isElement==null?void 0:u.isElement(B)))&&(O=d.floating[E]||c.floating[w]);const j=k/2-I/2,U=O/2-S[w]/2-1,G=Ja(m[M],U),X=Ja(m[R],U),W=G,J=O-S[w]-X,oe=O/2-S[w]/2+j,Z=vp(W,oe,J),D=!p.arrow&&js(l)!=null&&oe!==Z&&c.reference[w]/2-(oe<W?G:X)-S[w]/2<0,Y=D?oe<W?oe-W:oe-J:0;return{[A]:v[A]+Y,data:{[A]:Z,centerOffset:oe-Z-Y,...D&&{alignmentOffset:Y}},reset:D}}}),D2=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(o){var a,i;const{placement:l,middlewareData:c,rects:u,initialPlacement:d,platform:p,elements:h}=o,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...C}=la(e,o);if((a=c.arrow)!=null&&a.alignmentOffset)return{};const M=ca(l),R=Tr(d),E=ca(d)===d,k=await(p.isRTL==null?void 0:p.isRTL(h.floating)),I=v||(E||!S?[Ku(d)]:E2(d)),B=w!=="none";!v&&B&&I.push(...T2(d,S,w,k));const O=[d,...I],j=await ql(o,C),U=[];let G=((i=c.flip)==null?void 0:i.overflows)||[];if(g&&U.push(j[M]),m){const oe=S2(l,u,k);U.push(j[oe[0]],j[oe[1]])}if(G=[...G,{placement:l,overflows:U}],!U.every(oe=>oe<=0)){var X,W;const oe=(((X=c.flip)==null?void 0:X.index)||0)+1,Z=O[oe];if(Z&&(!(m==="alignment"?R!==Tr(Z):!1)||G.every(z=>Tr(z.placement)===R?z.overflows[0]>0:!0)))return{data:{index:oe,overflows:G},reset:{placement:Z}};let D=(W=G.filter(Y=>Y.overflows[0]<=0).sort((Y,z)=>Y.overflows[1]-z.overflows[1])[0])==null?void 0:W.placement;if(!D)switch(A){case"bestFit":{var J;const Y=(J=G.filter(z=>{if(B){const L=Tr(z.placement);return L===R||L==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(L=>L>0).reduce((L,T)=>L+T,0)]).sort((z,L)=>z[1]-L[1])[0])==null?void 0:J[0];Y&&(D=Y);break}case"initialPlacement":D=d;break}if(l!==D)return{reset:{placement:D}}}return{}}}};function _x(e,o){return{top:e.top-o.height,right:e.right-o.width,bottom:e.bottom-o.height,left:e.left-o.width}}function Ox(e){return v2.some(o=>e[o]>=0)}const j2=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(o){const{rects:a}=o,{strategy:i="referenceHidden",...l}=la(e,o);switch(i){case"referenceHidden":{const c=await ql(o,{...l,elementContext:"reference"}),u=_x(c,a.reference);return{data:{referenceHiddenOffsets:u,referenceHidden:Ox(u)}}}case"escaped":{const c=await ql(o,{...l,altBoundary:!0}),u=_x(c,a.floating);return{data:{escapedOffsets:u,escaped:Ox(u)}}}default:return{}}}}},jv=new Set(["left","top"]);async function P2(e,o){const{placement:a,platform:i,elements:l}=e,c=await(i.isRTL==null?void 0:i.isRTL(l.floating)),u=ca(a),d=js(a),p=Tr(a)==="y",h=jv.has(u)?-1:1,g=c&&p?-1:1,m=la(o,e);let{mainAxis:v,crossAxis:A,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return d&&typeof w=="number"&&(A=d==="end"?w*-1:w),p?{x:A*g,y:v*h}:{x:v*h,y:A*g}}const B2=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(o){var a,i;const{x:l,y:c,placement:u,middlewareData:d}=o,p=await P2(o,e);return u===((a=d.offset)==null?void 0:a.placement)&&(i=d.arrow)!=null&&i.alignmentOffset?{}:{x:l+p.x,y:c+p.y,data:{...p,placement:u}}}}},z2=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(o){const{x:a,y:i,placement:l}=o,{mainAxis:c=!0,crossAxis:u=!1,limiter:d={fn:C=>{let{x:M,y:R}=C;return{x:M,y:R}}},...p}=la(e,o),h={x:a,y:i},g=await ql(o,p),m=Tr(ca(l)),v=qp(m);let A=h[v],w=h[m];if(c){const C=v==="y"?"top":"left",M=v==="y"?"bottom":"right",R=A+g[C],E=A-g[M];A=vp(R,A,E)}if(u){const C=m==="y"?"top":"left",M=m==="y"?"bottom":"right",R=w+g[C],E=w-g[M];w=vp(R,w,E)}const S=d.fn({...o,[v]:A,[m]:w});return{...S,data:{x:S.x-a,y:S.y-i,enabled:{[v]:c,[m]:u}}}}}},N2=function(e){return e===void 0&&(e={}),{options:e,fn(o){const{x:a,y:i,placement:l,rects:c,middlewareData:u}=o,{offset:d=0,mainAxis:p=!0,crossAxis:h=!0}=la(e,o),g={x:a,y:i},m=Tr(l),v=qp(m);let A=g[v],w=g[m];const S=la(d,o),C=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(p){const E=v==="y"?"height":"width",k=c.reference[v]-c.floating[E]+C.mainAxis,I=c.reference[v]+c.reference[E]-C.mainAxis;A<k?A=k:A>I&&(A=I)}if(h){var M,R;const E=v==="y"?"width":"height",k=jv.has(ca(l)),I=c.reference[m]-c.floating[E]+(k&&((M=u.offset)==null?void 0:M[m])||0)+(k?0:C.crossAxis),B=c.reference[m]+c.reference[E]+(k?0:((R=u.offset)==null?void 0:R[m])||0)-(k?C.crossAxis:0);w<I?w=I:w>B&&(w=B)}return{[v]:A,[m]:w}}}},L2=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(o){var a,i;const{placement:l,rects:c,platform:u,elements:d}=o,{apply:p=()=>{},...h}=la(e,o),g=await ql(o,h),m=ca(l),v=js(l),A=Tr(l)==="y",{width:w,height:S}=c.floating;let C,M;m==="top"||m==="bottom"?(C=m,M=v===(await(u.isRTL==null?void 0:u.isRTL(d.floating))?"start":"end")?"left":"right"):(M=m,C=v==="end"?"top":"bottom");const R=S-g.top-g.bottom,E=w-g.left-g.right,k=Ja(S-g[C],R),I=Ja(w-g[M],E),B=!o.middlewareData.shift;let O=k,j=I;if((a=o.middlewareData.shift)!=null&&a.enabled.x&&(j=E),(i=o.middlewareData.shift)!=null&&i.enabled.y&&(O=R),B&&!v){const G=Oo(g.left,0),X=Oo(g.right,0),W=Oo(g.top,0),J=Oo(g.bottom,0);A?j=w-2*(G!==0||X!==0?G+X:Oo(g.left,g.right)):O=S-2*(W!==0||J!==0?W+J:Oo(g.top,g.bottom))}await p({...o,availableWidth:j,availableHeight:O});const U=await u.getDimensions(d.floating);return w!==U.width||S!==U.height?{reset:{rects:!0}}:{}}}};function yd(){return typeof window<"u"}function Ps(e){return Pv(e)?(e.nodeName||"").toLowerCase():"#document"}function Do(e){var o;return(e==null||(o=e.ownerDocument)==null?void 0:o.defaultView)||window}function Pr(e){var o;return(o=(Pv(e)?e.ownerDocument:e.document)||window.document)==null?void 0:o.documentElement}function Pv(e){return yd()?e instanceof Node||e instanceof Do(e).Node:!1}function cr(e){return yd()?e instanceof Element||e instanceof Do(e).Element:!1}function Or(e){return yd()?e instanceof HTMLElement||e instanceof Do(e).HTMLElement:!1}function Dx(e){return!yd()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Do(e).ShadowRoot}const H2=new Set(["inline","contents"]);function oc(e){const{overflow:o,overflowX:a,overflowY:i,display:l}=ur(e);return/auto|scroll|overlay|hidden|clip/.test(o+i+a)&&!H2.has(l)}const Y2=new Set(["table","td","th"]);function $2(e){return Y2.has(Ps(e))}const U2=[":popover-open",":modal"];function xd(e){return U2.some(o=>{try{return e.matches(o)}catch{return!1}})}const X2=["transform","translate","scale","rotate","perspective"],F2=["transform","translate","scale","rotate","perspective","filter"],Q2=["paint","layout","strict","content"];function Zp(e){const o=Jp(),a=cr(e)?ur(e):e;return X2.some(i=>a[i]?a[i]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!o&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!o&&(a.filter?a.filter!=="none":!1)||F2.some(i=>(a.willChange||"").includes(i))||Q2.some(i=>(a.contain||"").includes(i))}function G2(e){let o=ei(e);for(;Or(o)&&!_s(o);){if(Zp(o))return o;if(xd(o))return null;o=ei(o)}return null}function Jp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const W2=new Set(["html","body","#document"]);function _s(e){return W2.has(Ps(e))}function ur(e){return Do(e).getComputedStyle(e)}function bd(e){return cr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ei(e){if(Ps(e)==="html")return e;const o=e.assignedSlot||e.parentNode||Dx(e)&&e.host||Pr(e);return Dx(o)?o.host:o}function Bv(e){const o=ei(e);return _s(o)?e.ownerDocument?e.ownerDocument.body:e.body:Or(o)&&oc(o)?o:Bv(o)}function Vl(e,o,a){var i;o===void 0&&(o=[]),a===void 0&&(a=!0);const l=Bv(e),c=l===((i=e.ownerDocument)==null?void 0:i.body),u=Do(l);if(c){const d=Ap(u);return o.concat(u,u.visualViewport||[],oc(l)?l:[],d&&a?Vl(d):[])}return o.concat(l,Vl(l,[],a))}function Ap(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zv(e){const o=ur(e);let a=parseFloat(o.width)||0,i=parseFloat(o.height)||0;const l=Or(e),c=l?e.offsetWidth:a,u=l?e.offsetHeight:i,d=Vu(a)!==c||Vu(i)!==u;return d&&(a=c,i=u),{width:a,height:i,$:d}}function em(e){return cr(e)?e:e.contextElement}function Ss(e){const o=em(e);if(!Or(o))return Ir(1);const a=o.getBoundingClientRect(),{width:i,height:l,$:c}=zv(o);let u=(c?Vu(a.width):a.width)/i,d=(c?Vu(a.height):a.height)/l;return(!u||!Number.isFinite(u))&&(u=1),(!d||!Number.isFinite(d))&&(d=1),{x:u,y:d}}const q2=Ir(0);function Nv(e){const o=Do(e);return!Jp()||!o.visualViewport?q2:{x:o.visualViewport.offsetLeft,y:o.visualViewport.offsetTop}}function V2(e,o,a){return o===void 0&&(o=!1),!a||o&&a!==Do(e)?!1:o}function Ri(e,o,a,i){o===void 0&&(o=!1),a===void 0&&(a=!1);const l=e.getBoundingClientRect(),c=em(e);let u=Ir(1);o&&(i?cr(i)&&(u=Ss(i)):u=Ss(e));const d=V2(c,a,i)?Nv(c):Ir(0);let p=(l.left+d.x)/u.x,h=(l.top+d.y)/u.y,g=l.width/u.x,m=l.height/u.y;if(c){const v=Do(c),A=i&&cr(i)?Do(i):i;let w=v,S=Ap(w);for(;S&&i&&A!==w;){const C=Ss(S),M=S.getBoundingClientRect(),R=ur(S),E=M.left+(S.clientLeft+parseFloat(R.paddingLeft))*C.x,k=M.top+(S.clientTop+parseFloat(R.paddingTop))*C.y;p*=C.x,h*=C.y,g*=C.x,m*=C.y,p+=E,h+=k,w=Do(S),S=Ap(w)}}return Zu({width:g,height:m,x:p,y:h})}function vd(e,o){const a=bd(e).scrollLeft;return o?o.left+a:Ri(Pr(e)).left+a}function Lv(e,o){const a=e.getBoundingClientRect(),i=a.left+o.scrollLeft-vd(e,a),l=a.top+o.scrollTop;return{x:i,y:l}}function K2(e){let{elements:o,rect:a,offsetParent:i,strategy:l}=e;const c=l==="fixed",u=Pr(i),d=o?xd(o.floating):!1;if(i===u||d&&c)return a;let p={scrollLeft:0,scrollTop:0},h=Ir(1);const g=Ir(0),m=Or(i);if((m||!m&&!c)&&((Ps(i)!=="body"||oc(u))&&(p=bd(i)),Or(i))){const A=Ri(i);h=Ss(i),g.x=A.x+i.clientLeft,g.y=A.y+i.clientTop}const v=u&&!m&&!c?Lv(u,p):Ir(0);return{width:a.width*h.x,height:a.height*h.y,x:a.x*h.x-p.scrollLeft*h.x+g.x+v.x,y:a.y*h.y-p.scrollTop*h.y+g.y+v.y}}function Z2(e){return Array.from(e.getClientRects())}function J2(e){const o=Pr(e),a=bd(e),i=e.ownerDocument.body,l=Oo(o.scrollWidth,o.clientWidth,i.scrollWidth,i.clientWidth),c=Oo(o.scrollHeight,o.clientHeight,i.scrollHeight,i.clientHeight);let u=-a.scrollLeft+vd(e);const d=-a.scrollTop;return ur(i).direction==="rtl"&&(u+=Oo(o.clientWidth,i.clientWidth)-l),{width:l,height:c,x:u,y:d}}const jx=25;function eM(e,o){const a=Do(e),i=Pr(e),l=a.visualViewport;let c=i.clientWidth,u=i.clientHeight,d=0,p=0;if(l){c=l.width,u=l.height;const g=Jp();(!g||g&&o==="fixed")&&(d=l.offsetLeft,p=l.offsetTop)}const h=vd(i);if(h<=0){const g=i.ownerDocument,m=g.body,v=getComputedStyle(m),A=g.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,w=Math.abs(i.clientWidth-m.clientWidth-A);w<=jx&&(c-=w)}else h<=jx&&(c+=h);return{width:c,height:u,x:d,y:p}}const tM=new Set(["absolute","fixed"]);function nM(e,o){const a=Ri(e,!0,o==="fixed"),i=a.top+e.clientTop,l=a.left+e.clientLeft,c=Or(e)?Ss(e):Ir(1),u=e.clientWidth*c.x,d=e.clientHeight*c.y,p=l*c.x,h=i*c.y;return{width:u,height:d,x:p,y:h}}function Px(e,o,a){let i;if(o==="viewport")i=eM(e,a);else if(o==="document")i=J2(Pr(e));else if(cr(o))i=nM(o,a);else{const l=Nv(e);i={x:o.x-l.x,y:o.y-l.y,width:o.width,height:o.height}}return Zu(i)}function Hv(e,o){const a=ei(e);return a===o||!cr(a)||_s(a)?!1:ur(a).position==="fixed"||Hv(a,o)}function oM(e,o){const a=o.get(e);if(a)return a;let i=Vl(e,[],!1).filter(d=>cr(d)&&Ps(d)!=="body"),l=null;const c=ur(e).position==="fixed";let u=c?ei(e):e;for(;cr(u)&&!_s(u);){const d=ur(u),p=Zp(u);!p&&d.position==="fixed"&&(l=null),(c?!p&&!l:!p&&d.position==="static"&&!!l&&tM.has(l.position)||oc(u)&&!p&&Hv(e,u))?i=i.filter(g=>g!==u):l=d,u=ei(u)}return o.set(e,i),i}function rM(e){let{element:o,boundary:a,rootBoundary:i,strategy:l}=e;const u=[...a==="clippingAncestors"?xd(o)?[]:oM(o,this._c):[].concat(a),i],d=u[0],p=u.reduce((h,g)=>{const m=Px(o,g,l);return h.top=Oo(m.top,h.top),h.right=Ja(m.right,h.right),h.bottom=Ja(m.bottom,h.bottom),h.left=Oo(m.left,h.left),h},Px(o,d,l));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function aM(e){const{width:o,height:a}=zv(e);return{width:o,height:a}}function iM(e,o,a){const i=Or(o),l=Pr(o),c=a==="fixed",u=Ri(e,!0,c,o);let d={scrollLeft:0,scrollTop:0};const p=Ir(0);function h(){p.x=vd(l)}if(i||!i&&!c)if((Ps(o)!=="body"||oc(l))&&(d=bd(o)),i){const A=Ri(o,!0,c,o);p.x=A.x+o.clientLeft,p.y=A.y+o.clientTop}else l&&h();c&&!i&&l&&h();const g=l&&!i&&!c?Lv(l,d):Ir(0),m=u.left+d.scrollLeft-p.x-g.x,v=u.top+d.scrollTop-p.y-g.y;return{x:m,y:v,width:u.width,height:u.height}}function $h(e){return ur(e).position==="static"}function Bx(e,o){if(!Or(e)||ur(e).position==="fixed")return null;if(o)return o(e);let a=e.offsetParent;return Pr(e)===a&&(a=a.ownerDocument.body),a}function Yv(e,o){const a=Do(e);if(xd(e))return a;if(!Or(e)){let l=ei(e);for(;l&&!_s(l);){if(cr(l)&&!$h(l))return l;l=ei(l)}return a}let i=Bx(e,o);for(;i&&$2(i)&&$h(i);)i=Bx(i,o);return i&&_s(i)&&$h(i)&&!Zp(i)?a:i||G2(e)||a}const sM=async function(e){const o=this.getOffsetParent||Yv,a=this.getDimensions,i=await a(e.floating);return{reference:iM(e.reference,await o(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function lM(e){return ur(e).direction==="rtl"}const cM={convertOffsetParentRelativeRectToViewportRelativeRect:K2,getDocumentElement:Pr,getClippingRect:rM,getOffsetParent:Yv,getElementRects:sM,getClientRects:Z2,getDimensions:aM,getScale:Ss,isElement:cr,isRTL:lM};function $v(e,o){return e.x===o.x&&e.y===o.y&&e.width===o.width&&e.height===o.height}function uM(e,o){let a=null,i;const l=Pr(e);function c(){var d;clearTimeout(i),(d=a)==null||d.disconnect(),a=null}function u(d,p){d===void 0&&(d=!1),p===void 0&&(p=1),c();const h=e.getBoundingClientRect(),{left:g,top:m,width:v,height:A}=h;if(d||o(),!v||!A)return;const w=wu(m),S=wu(l.clientWidth-(g+v)),C=wu(l.clientHeight-(m+A)),M=wu(g),E={rootMargin:-w+"px "+-S+"px "+-C+"px "+-M+"px",threshold:Oo(0,Ja(1,p))||1};let k=!0;function I(B){const O=B[0].intersectionRatio;if(O!==p){if(!k)return u();O?u(!1,O):i=setTimeout(()=>{u(!1,1e-7)},1e3)}O===1&&!$v(h,e.getBoundingClientRect())&&u(),k=!1}try{a=new IntersectionObserver(I,{...E,root:l.ownerDocument})}catch{a=new IntersectionObserver(I,E)}a.observe(e)}return u(!0),c}function dM(e,o,a,i){i===void 0&&(i={});const{ancestorScroll:l=!0,ancestorResize:c=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:d=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,h=em(e),g=l||c?[...h?Vl(h):[],...Vl(o)]:[];g.forEach(M=>{l&&M.addEventListener("scroll",a,{passive:!0}),c&&M.addEventListener("resize",a)});const m=h&&d?uM(h,a):null;let v=-1,A=null;u&&(A=new ResizeObserver(M=>{let[R]=M;R&&R.target===h&&A&&(A.unobserve(o),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var E;(E=A)==null||E.observe(o)})),a()}),h&&!p&&A.observe(h),A.observe(o));let w,S=p?Ri(e):null;p&&C();function C(){const M=Ri(e);S&&!$v(S,M)&&a(),S=M,w=requestAnimationFrame(C)}return a(),()=>{var M;g.forEach(R=>{l&&R.removeEventListener("scroll",a),c&&R.removeEventListener("resize",a)}),m?.(),(M=A)==null||M.disconnect(),A=null,p&&cancelAnimationFrame(w)}}const fM=B2,hM=z2,pM=D2,mM=L2,gM=j2,zx=O2,yM=N2,xM=(e,o,a)=>{const i=new Map,l={platform:cM,...a},c={...l.platform,_c:i};return _2(e,o,{...l,platform:c})};var bM=typeof document<"u",vM=function(){},$u=bM?y.useLayoutEffect:vM;function Ju(e,o){if(e===o)return!0;if(typeof e!=typeof o)return!1;if(typeof e=="function"&&e.toString()===o.toString())return!0;let a,i,l;if(e&&o&&typeof e=="object"){if(Array.isArray(e)){if(a=e.length,a!==o.length)return!1;for(i=a;i--!==0;)if(!Ju(e[i],o[i]))return!1;return!0}if(l=Object.keys(e),a=l.length,a!==Object.keys(o).length)return!1;for(i=a;i--!==0;)if(!{}.hasOwnProperty.call(o,l[i]))return!1;for(i=a;i--!==0;){const c=l[i];if(!(c==="_owner"&&e.$$typeof)&&!Ju(e[c],o[c]))return!1}return!0}return e!==e&&o!==o}function Uv(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Nx(e,o){const a=Uv(e);return Math.round(o*a)/a}function Uh(e){const o=y.useRef(e);return $u(()=>{o.current=e}),o}function wM(e){e===void 0&&(e={});const{placement:o="bottom",strategy:a="absolute",middleware:i=[],platform:l,elements:{reference:c,floating:u}={},transform:d=!0,whileElementsMounted:p,open:h}=e,[g,m]=y.useState({x:0,y:0,strategy:a,placement:o,middlewareData:{},isPositioned:!1}),[v,A]=y.useState(i);Ju(v,i)||A(i);const[w,S]=y.useState(null),[C,M]=y.useState(null),R=y.useCallback(z=>{z!==B.current&&(B.current=z,S(z))},[]),E=y.useCallback(z=>{z!==O.current&&(O.current=z,M(z))},[]),k=c||w,I=u||C,B=y.useRef(null),O=y.useRef(null),j=y.useRef(g),U=p!=null,G=Uh(p),X=Uh(l),W=Uh(h),J=y.useCallback(()=>{if(!B.current||!O.current)return;const z={placement:o,strategy:a,middleware:v};X.current&&(z.platform=X.current),xM(B.current,O.current,z).then(L=>{const T={...L,isPositioned:W.current!==!1};oe.current&&!Ju(j.current,T)&&(j.current=T,dr.flushSync(()=>{m(T)}))})},[v,o,a,X,W]);$u(()=>{h===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(z=>({...z,isPositioned:!1})))},[h]);const oe=y.useRef(!1);$u(()=>(oe.current=!0,()=>{oe.current=!1}),[]),$u(()=>{if(k&&(B.current=k),I&&(O.current=I),k&&I){if(G.current)return G.current(k,I,J);J()}},[k,I,J,G,U]);const Z=y.useMemo(()=>({reference:B,floating:O,setReference:R,setFloating:E}),[R,E]),D=y.useMemo(()=>({reference:k,floating:I}),[k,I]),Y=y.useMemo(()=>{const z={position:a,left:0,top:0};if(!D.floating)return z;const L=Nx(D.floating,g.x),T=Nx(D.floating,g.y);return d?{...z,transform:"translate("+L+"px, "+T+"px)",...Uv(D.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:L,top:T}},[a,d,D.floating,g.x,g.y]);return y.useMemo(()=>({...g,update:J,refs:Z,elements:D,floatingStyles:Y}),[g,J,Z,D,Y])}const AM=e=>{function o(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:e,fn(a){const{element:i,padding:l}=typeof e=="function"?e(a):e;return i&&o(i)?i.current!=null?zx({element:i.current,padding:l}).fn(a):{}:i?zx({element:i,padding:l}).fn(a):{}}}},CM=(e,o)=>({...fM(e),options:[e,o]}),SM=(e,o)=>({...hM(e),options:[e,o]}),EM=(e,o)=>({...yM(e),options:[e,o]}),MM=(e,o)=>({...pM(e),options:[e,o]}),RM=(e,o)=>({...mM(e),options:[e,o]}),kM=(e,o)=>({...gM(e),options:[e,o]}),TM=(e,o)=>({...AM(e),options:[e,o]});var IM="Arrow",Xv=y.forwardRef((e,o)=>{const{children:a,width:i=10,height:l=5,...c}=e;return b.jsx(oo.svg,{...c,ref:o,width:i,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?a:b.jsx("polygon",{points:"0,0 30,0 15,10"})})});Xv.displayName=IM;var _M=Xv;function OM(e){const[o,a]=y.useState(void 0);return Za(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(l=>{if(!Array.isArray(l)||!l.length)return;const c=l[0];let u,d;if("borderBoxSize"in c){const p=c.borderBoxSize,h=Array.isArray(p)?p[0]:p;u=h.inlineSize,d=h.blockSize}else u=e.offsetWidth,d=e.offsetHeight;a({width:u,height:d})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else a(void 0)},[e]),o}var tm="Popper",[Fv,Qv]=nc(tm),[DM,Gv]=Fv(tm),Wv=e=>{const{__scopePopper:o,children:a}=e,[i,l]=y.useState(null);return b.jsx(DM,{scope:o,anchor:i,onAnchorChange:l,children:a})};Wv.displayName=tm;var qv="PopperAnchor",Vv=y.forwardRef((e,o)=>{const{__scopePopper:a,virtualRef:i,...l}=e,c=Gv(qv,a),u=y.useRef(null),d=fo(o,u),p=y.useRef(null);return y.useEffect(()=>{const h=p.current;p.current=i?.current||u.current,h!==p.current&&c.onAnchorChange(p.current)}),i?null:b.jsx(oo.div,{...l,ref:d})});Vv.displayName=qv;var nm="PopperContent",[jM,PM]=Fv(nm),Kv=y.forwardRef((e,o)=>{const{__scopePopper:a,side:i="bottom",sideOffset:l=0,align:c="center",alignOffset:u=0,arrowPadding:d=0,avoidCollisions:p=!0,collisionBoundary:h=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:A="optimized",onPlaced:w,...S}=e,C=Gv(nm,a),[M,R]=y.useState(null),E=fo(o,ue=>R(ue)),[k,I]=y.useState(null),B=OM(k),O=B?.width??0,j=B?.height??0,U=i+(c!=="center"?"-"+c:""),G=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},X=Array.isArray(h)?h:[h],W=X.length>0,J={padding:G,boundary:X.filter(zM),altBoundary:W},{refs:oe,floatingStyles:Z,placement:D,isPositioned:Y,middlewareData:z}=wM({strategy:"fixed",placement:U,whileElementsMounted:(...ue)=>dM(...ue,{animationFrame:A==="always"}),elements:{reference:C.anchor},middleware:[CM({mainAxis:l+j,alignmentAxis:u}),p&&SM({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?EM():void 0,...J}),p&&MM({...J}),RM({...J,apply:({elements:ue,rects:se,availableWidth:ye,availableHeight:ge})=>{const{width:Ae,height:Se}=se.reference,Pe=ue.floating.style;Pe.setProperty("--radix-popper-available-width",`${ye}px`),Pe.setProperty("--radix-popper-available-height",`${ge}px`),Pe.setProperty("--radix-popper-anchor-width",`${Ae}px`),Pe.setProperty("--radix-popper-anchor-height",`${Se}px`)}}),k&&TM({element:k,padding:d}),NM({arrowWidth:O,arrowHeight:j}),v&&kM({strategy:"referenceHidden",...J})]}),[L,T]=e1(D),$=_r(w);Za(()=>{Y&&$?.()},[Y,$]);const N=z.arrow?.x,H=z.arrow?.y,q=z.arrow?.centerOffset!==0,[K,ie]=y.useState();return Za(()=>{M&&ie(window.getComputedStyle(M).zIndex)},[M]),b.jsx("div",{ref:oe.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:Y?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:b.jsx(jM,{scope:a,placedSide:L,onArrowChange:I,arrowX:N,arrowY:H,shouldHideArrow:q,children:b.jsx(oo.div,{"data-side":L,"data-align":T,...S,ref:E,style:{...S.style,animation:Y?void 0:"none"}})})})});Kv.displayName=nm;var Zv="PopperArrow",BM={top:"bottom",right:"left",bottom:"top",left:"right"},Jv=y.forwardRef(function(o,a){const{__scopePopper:i,...l}=o,c=PM(Zv,i),u=BM[c.placedSide];return b.jsx("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[u]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0},children:b.jsx(_M,{...l,ref:a,style:{...l.style,display:"block"}})})});Jv.displayName=Zv;function zM(e){return e!==null}var NM=e=>({name:"transformOrigin",options:e,fn(o){const{placement:a,rects:i,middlewareData:l}=o,u=l.arrow?.centerOffset!==0,d=u?0:e.arrowWidth,p=u?0:e.arrowHeight,[h,g]=e1(a),m={start:"0%",center:"50%",end:"100%"}[g],v=(l.arrow?.x??0)+d/2,A=(l.arrow?.y??0)+p/2;let w="",S="";return h==="bottom"?(w=u?m:`${v}px`,S=`${-p}px`):h==="top"?(w=u?m:`${v}px`,S=`${i.floating.height+p}px`):h==="right"?(w=`${-p}px`,S=u?m:`${A}px`):h==="left"&&(w=`${i.floating.width+p}px`,S=u?m:`${A}px`),{data:{x:w,y:S}}}});function e1(e){const[o,a="center"]=e.split("-");return[o,a]}var t1=Wv,LM=Vv,HM=Kv,YM=Jv,$M="Portal",n1=y.forwardRef((e,o)=>{const{container:a,...i}=e,[l,c]=y.useState(!1);Za(()=>c(!0),[]);const u=a||l&&globalThis?.document?.body;return u?ZC.createPortal(b.jsx(oo.div,{...i,ref:o}),u):null});n1.displayName=$M;function UM(e,o){return y.useReducer((a,i)=>o[a][i]??a,e)}var rc=e=>{const{present:o,children:a}=e,i=XM(o),l=typeof a=="function"?a({present:i.isPresent}):y.Children.only(a),c=fo(i.ref,FM(l));return typeof a=="function"||i.isPresent?y.cloneElement(l,{ref:c}):null};rc.displayName="Presence";function XM(e){const[o,a]=y.useState(),i=y.useRef(null),l=y.useRef(e),c=y.useRef("none"),u=e?"mounted":"unmounted",[d,p]=UM(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const h=Au(i.current);c.current=d==="mounted"?h:"none"},[d]),Za(()=>{const h=i.current,g=l.current;if(g!==e){const v=c.current,A=Au(h);e?p("MOUNT"):A==="none"||h?.display==="none"?p("UNMOUNT"):p(g&&v!==A?"ANIMATION_OUT":"UNMOUNT"),l.current=e}},[e,p]),Za(()=>{if(o){let h;const g=o.ownerDocument.defaultView??window,m=A=>{const S=Au(i.current).includes(CSS.escape(A.animationName));if(A.target===o&&S&&(p("ANIMATION_END"),!l.current)){const C=o.style.animationFillMode;o.style.animationFillMode="forwards",h=g.setTimeout(()=>{o.style.animationFillMode==="forwards"&&(o.style.animationFillMode=C)})}},v=A=>{A.target===o&&(c.current=Au(i.current))};return o.addEventListener("animationstart",v),o.addEventListener("animationcancel",m),o.addEventListener("animationend",m),()=>{g.clearTimeout(h),o.removeEventListener("animationstart",v),o.removeEventListener("animationcancel",m),o.removeEventListener("animationend",m)}}else p("ANIMATION_END")},[o,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:y.useCallback(h=>{i.current=h?getComputedStyle(h):null,a(h)},[])}}function Au(e){return e?.animationName||"none"}function FM(e){let o=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning;return a?e.ref:(o=Object.getOwnPropertyDescriptor(e,"ref")?.get,a=o&&"isReactWarning"in o&&o.isReactWarning,a?e.props.ref:e.props.ref||e.ref)}var QM=ev[" useInsertionEffect ".trim().toString()]||Za;function om({prop:e,defaultProp:o,onChange:a=()=>{},caller:i}){const[l,c,u]=GM({defaultProp:o,onChange:a}),d=e!==void 0,p=d?e:l;{const g=y.useRef(e!==void 0);y.useEffect(()=>{const m=g.current;m!==d&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=d},[d,i])}const h=y.useCallback(g=>{if(d){const m=WM(g)?g(e):g;m!==e&&u.current?.(m)}else c(g)},[d,e,c,u]);return[p,h]}function GM({defaultProp:e,onChange:o}){const[a,i]=y.useState(e),l=y.useRef(a),c=y.useRef(o);return QM(()=>{c.current=o},[o]),y.useEffect(()=>{l.current!==a&&(c.current?.(a),l.current=a)},[a,l]),[a,i,c]}function WM(e){return typeof e=="function"}var Xh="rovingFocusGroup.onEntryFocus",qM={bubbles:!1,cancelable:!0},ac="RovingFocusGroup",[Cp,o1,VM]=Gp(ac),[KM,wd]=nc(ac,[VM]),[ZM,JM]=KM(ac),r1=y.forwardRef((e,o)=>b.jsx(Cp.Provider,{scope:e.__scopeRovingFocusGroup,children:b.jsx(Cp.Slot,{scope:e.__scopeRovingFocusGroup,children:b.jsx(eR,{...e,ref:o})})}));r1.displayName=ac;var eR=y.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:a,orientation:i,loop:l=!1,dir:c,currentTabStopId:u,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:p,onEntryFocus:h,preventScrollOnEntryFocus:g=!1,...m}=e,v=y.useRef(null),A=fo(o,v),w=Wp(c),[S,C]=om({prop:u,defaultProp:d??null,onChange:p,caller:ac}),[M,R]=y.useState(!1),E=_r(h),k=o1(a),I=y.useRef(!1),[B,O]=y.useState(0);return y.useEffect(()=>{const j=v.current;if(j)return j.addEventListener(Xh,E),()=>j.removeEventListener(Xh,E)},[E]),b.jsx(ZM,{scope:a,orientation:i,dir:w,loop:l,currentTabStopId:S,onItemFocus:y.useCallback(j=>C(j),[C]),onItemShiftTab:y.useCallback(()=>R(!0),[]),onFocusableItemAdd:y.useCallback(()=>O(j=>j+1),[]),onFocusableItemRemove:y.useCallback(()=>O(j=>j-1),[]),children:b.jsx(oo.div,{tabIndex:M||B===0?-1:0,"data-orientation":i,...m,ref:A,style:{outline:"none",...e.style},onMouseDown:lt(e.onMouseDown,()=>{I.current=!0}),onFocus:lt(e.onFocus,j=>{const U=!I.current;if(j.target===j.currentTarget&&U&&!M){const G=new CustomEvent(Xh,qM);if(j.currentTarget.dispatchEvent(G),!G.defaultPrevented){const X=k().filter(D=>D.focusable),W=X.find(D=>D.active),J=X.find(D=>D.id===S),Z=[W,J,...X].filter(Boolean).map(D=>D.ref.current);s1(Z,g)}}I.current=!1}),onBlur:lt(e.onBlur,()=>R(!1))})})}),a1="RovingFocusGroupItem",i1=y.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:a,focusable:i=!0,active:l=!1,tabStopId:c,children:u,...d}=e,p=Cs(),h=c||p,g=JM(a1,a),m=g.currentTabStopId===h,v=o1(a),{onFocusableItemAdd:A,onFocusableItemRemove:w,currentTabStopId:S}=g;return y.useEffect(()=>{if(i)return A(),()=>w()},[i,A,w]),b.jsx(Cp.ItemSlot,{scope:a,id:h,focusable:i,active:l,children:b.jsx(oo.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...d,ref:o,onMouseDown:lt(e.onMouseDown,C=>{i?g.onItemFocus(h):C.preventDefault()}),onFocus:lt(e.onFocus,()=>g.onItemFocus(h)),onKeyDown:lt(e.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){g.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const M=oR(C,g.orientation,g.dir);if(M!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let E=v().filter(k=>k.focusable).map(k=>k.ref.current);if(M==="last")E.reverse();else if(M==="prev"||M==="next"){M==="prev"&&E.reverse();const k=E.indexOf(C.currentTarget);E=g.loop?rR(E,k+1):E.slice(k+1)}setTimeout(()=>s1(E))}}),children:typeof u=="function"?u({isCurrentTabStop:m,hasTabStop:S!=null}):u})})});i1.displayName=a1;var tR={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nR(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oR(e,o,a){const i=nR(e.key,a);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return tR[i]}function s1(e,o=!1){const a=document.activeElement;for(const i of e)if(i===a||(i.focus({preventScroll:o}),document.activeElement!==a))return}function rR(e,o){return e.map((a,i)=>e[(o+i)%e.length])}var l1=r1,c1=i1,aR=function(e){if(typeof document>"u")return null;var o=Array.isArray(e)?e[0]:e;return o.ownerDocument.body},fs=new WeakMap,Cu=new WeakMap,Su={},Fh=0,u1=function(e){return e&&(e.host||u1(e.parentNode))},iR=function(e,o){return o.map(function(a){if(e.contains(a))return a;var i=u1(a);return i&&e.contains(i)?i:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},sR=function(e,o,a,i){var l=iR(o,Array.isArray(e)?e:[e]);Su[a]||(Su[a]=new WeakMap);var c=Su[a],u=[],d=new Set,p=new Set(l),h=function(m){!m||d.has(m)||(d.add(m),h(m.parentNode))};l.forEach(h);var g=function(m){!m||p.has(m)||Array.prototype.forEach.call(m.children,function(v){if(d.has(v))g(v);else try{var A=v.getAttribute(i),w=A!==null&&A!=="false",S=(fs.get(v)||0)+1,C=(c.get(v)||0)+1;fs.set(v,S),c.set(v,C),u.push(v),S===1&&w&&Cu.set(v,!0),C===1&&v.setAttribute(a,"true"),w||v.setAttribute(i,"true")}catch(M){console.error("aria-hidden: cannot operate on ",v,M)}})};return g(o),d.clear(),Fh++,function(){u.forEach(function(m){var v=fs.get(m)-1,A=c.get(m)-1;fs.set(m,v),c.set(m,A),v||(Cu.has(m)||m.removeAttribute(i),Cu.delete(m)),A||m.removeAttribute(a)}),Fh--,Fh||(fs=new WeakMap,fs=new WeakMap,Cu=new WeakMap,Su={})}},lR=function(e,o,a){a===void 0&&(a="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),l=aR(e);return l?(i.push.apply(i,Array.from(l.querySelectorAll("[aria-live], script"))),sR(i,l,a,"aria-hidden")):function(){return null}},Uu="right-scroll-bar-position",Xu="width-before-scroll-bar",cR="with-scroll-bars-hidden",uR="--removed-body-scroll-bar-size";function Qh(e,o){return typeof e=="function"?e(o):e&&(e.current=o),e}function dR(e,o){var a=y.useState(function(){return{value:e,callback:o,facade:{get current(){return a.value},set current(i){var l=a.value;l!==i&&(a.value=i,a.callback(i,l))}}}})[0];return a.callback=o,a.facade}var fR=typeof window<"u"?y.useLayoutEffect:y.useEffect,Lx=new WeakMap;function hR(e,o){var a=dR(null,function(i){return e.forEach(function(l){return Qh(l,i)})});return fR(function(){var i=Lx.get(a);if(i){var l=new Set(i),c=new Set(e),u=a.current;l.forEach(function(d){c.has(d)||Qh(d,null)}),c.forEach(function(d){l.has(d)||Qh(d,u)})}Lx.set(a,e)},[e]),a}function pR(e){return e}function mR(e,o){o===void 0&&(o=pR);var a=[],i=!1,l={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(c){var u=o(c,i);return a.push(u),function(){a=a.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;a.length;){var u=a;a=[],u.forEach(c)}a={push:function(d){return c(d)},filter:function(){return a}}},assignMedium:function(c){i=!0;var u=[];if(a.length){var d=a;a=[],d.forEach(c),u=a}var p=function(){var g=u;u=[],g.forEach(c)},h=function(){return Promise.resolve().then(p)};h(),a={push:function(g){u.push(g),h()},filter:function(g){return u=u.filter(g),a}}}};return l}function gR(e){e===void 0&&(e={});var o=mR(null);return o.options=pn({async:!0,ssr:!1},e),o}var d1=function(e){var o=e.sideCar,a=nv(e,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=o.read();if(!i)throw new Error("Sidecar medium not found");return y.createElement(i,pn({},a))};d1.isSideCarExport=!0;function yR(e,o){return e.useMedium(o),d1}var f1=gR(),Gh=function(){},Ad=y.forwardRef(function(e,o){var a=y.useRef(null),i=y.useState({onScrollCapture:Gh,onWheelCapture:Gh,onTouchMoveCapture:Gh}),l=i[0],c=i[1],u=e.forwardProps,d=e.children,p=e.className,h=e.removeScrollBar,g=e.enabled,m=e.shards,v=e.sideCar,A=e.noRelative,w=e.noIsolation,S=e.inert,C=e.allowPinchZoom,M=e.as,R=M===void 0?"div":M,E=e.gapMode,k=nv(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,B=hR([a,o]),O=pn(pn({},k),l);return y.createElement(y.Fragment,null,g&&y.createElement(I,{sideCar:f1,removeScrollBar:h,shards:m,noRelative:A,noIsolation:w,inert:S,setCallbacks:c,allowPinchZoom:!!C,lockRef:a,gapMode:E}),u?y.cloneElement(y.Children.only(d),pn(pn({},O),{ref:B})):y.createElement(R,pn({},O,{className:p,ref:B}),d))});Ad.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ad.classNames={fullWidth:Xu,zeroRight:Uu};var xR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function bR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var o=xR();return o&&e.setAttribute("nonce",o),e}function vR(e,o){e.styleSheet?e.styleSheet.cssText=o:e.appendChild(document.createTextNode(o))}function wR(e){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(e)}var AR=function(){var e=0,o=null;return{add:function(a){e==0&&(o=bR())&&(vR(o,a),wR(o)),e++},remove:function(){e--,!e&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}},CR=function(){var e=AR();return function(o,a){y.useEffect(function(){return e.add(o),function(){e.remove()}},[o&&a])}},h1=function(){var e=CR(),o=function(a){var i=a.styles,l=a.dynamic;return e(i,l),null};return o},SR={left:0,top:0,right:0,gap:0},Wh=function(e){return parseInt(e||"",10)||0},ER=function(e){var o=window.getComputedStyle(document.body),a=o[e==="padding"?"paddingLeft":"marginLeft"],i=o[e==="padding"?"paddingTop":"marginTop"],l=o[e==="padding"?"paddingRight":"marginRight"];return[Wh(a),Wh(i),Wh(l)]},MR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return SR;var o=ER(e),a=document.documentElement.clientWidth,i=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,i-a+o[2]-o[0])}},RR=h1(),Es="data-scroll-locked",kR=function(e,o,a,i){var l=e.left,c=e.top,u=e.right,d=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(cR,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(Es,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(i,";"),a==="margin"&&`
    padding-left: `.concat(l,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),a==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uu,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Xu,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Uu," .").concat(Uu,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Xu," .").concat(Xu,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Es,`] {
    `).concat(uR,": ").concat(d,`px;
  }
`)},Hx=function(){var e=parseInt(document.body.getAttribute(Es)||"0",10);return isFinite(e)?e:0},TR=function(){y.useEffect(function(){return document.body.setAttribute(Es,(Hx()+1).toString()),function(){var e=Hx()-1;e<=0?document.body.removeAttribute(Es):document.body.setAttribute(Es,e.toString())}},[])},IR=function(e){var o=e.noRelative,a=e.noImportant,i=e.gapMode,l=i===void 0?"margin":i;TR();var c=y.useMemo(function(){return MR(l)},[l]);return y.createElement(RR,{styles:kR(c,!o,l,a?"":"!important")})},Sp=!1;if(typeof window<"u")try{var Eu=Object.defineProperty({},"passive",{get:function(){return Sp=!0,!0}});window.addEventListener("test",Eu,Eu),window.removeEventListener("test",Eu,Eu)}catch{Sp=!1}var hs=Sp?{passive:!1}:!1,_R=function(e){return e.tagName==="TEXTAREA"},p1=function(e,o){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[o]!=="hidden"&&!(a.overflowY===a.overflowX&&!_R(e)&&a[o]==="visible")},OR=function(e){return p1(e,"overflowY")},DR=function(e){return p1(e,"overflowX")},Yx=function(e,o){var a=o.ownerDocument,i=o;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var l=m1(e,i);if(l){var c=g1(e,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==a.body);return!1},jR=function(e){var o=e.scrollTop,a=e.scrollHeight,i=e.clientHeight;return[o,a,i]},PR=function(e){var o=e.scrollLeft,a=e.scrollWidth,i=e.clientWidth;return[o,a,i]},m1=function(e,o){return e==="v"?OR(o):DR(o)},g1=function(e,o){return e==="v"?jR(o):PR(o)},BR=function(e,o){return e==="h"&&o==="rtl"?-1:1},zR=function(e,o,a,i,l){var c=BR(e,window.getComputedStyle(o).direction),u=c*i,d=a.target,p=o.contains(d),h=!1,g=u>0,m=0,v=0;do{if(!d)break;var A=g1(e,d),w=A[0],S=A[1],C=A[2],M=S-C-c*w;(w||M)&&m1(e,d)&&(m+=M,v+=w);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!p&&d!==document.body||p&&(o.contains(d)||o===d));return(g&&Math.abs(m)<1||!g&&Math.abs(v)<1)&&(h=!0),h},Mu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$x=function(e){return[e.deltaX,e.deltaY]},Ux=function(e){return e&&"current"in e?e.current:e},NR=function(e,o){return e[0]===o[0]&&e[1]===o[1]},LR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HR=0,ps=[];function YR(e){var o=y.useRef([]),a=y.useRef([0,0]),i=y.useRef(),l=y.useState(HR++)[0],c=y.useState(h1)[0],u=y.useRef(e);y.useEffect(function(){u.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(l));var S=Gl([e.lockRef.current],(e.shards||[]).map(Ux),!0).filter(Boolean);return S.forEach(function(C){return C.classList.add("allow-interactivity-".concat(l))}),function(){document.body.classList.remove("block-interactivity-".concat(l)),S.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(l))})}}},[e.inert,e.lockRef.current,e.shards]);var d=y.useCallback(function(S,C){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!u.current.allowPinchZoom;var M=Mu(S),R=a.current,E="deltaX"in S?S.deltaX:R[0]-M[0],k="deltaY"in S?S.deltaY:R[1]-M[1],I,B=S.target,O=Math.abs(E)>Math.abs(k)?"h":"v";if("touches"in S&&O==="h"&&B.type==="range")return!1;var j=Yx(O,B);if(!j)return!0;if(j?I=O:(I=O==="v"?"h":"v",j=Yx(O,B)),!j)return!1;if(!i.current&&"changedTouches"in S&&(E||k)&&(i.current=I),!I)return!0;var U=i.current||I;return zR(U,C,S,U==="h"?E:k)},[]),p=y.useCallback(function(S){var C=S;if(!(!ps.length||ps[ps.length-1]!==c)){var M="deltaY"in C?$x(C):Mu(C),R=o.current.filter(function(I){return I.name===C.type&&(I.target===C.target||C.target===I.shadowParent)&&NR(I.delta,M)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var E=(u.current.shards||[]).map(Ux).filter(Boolean).filter(function(I){return I.contains(C.target)}),k=E.length>0?d(C,E[0]):!u.current.noIsolation;k&&C.cancelable&&C.preventDefault()}}},[]),h=y.useCallback(function(S,C,M,R){var E={name:S,delta:C,target:M,should:R,shadowParent:$R(M)};o.current.push(E),setTimeout(function(){o.current=o.current.filter(function(k){return k!==E})},1)},[]),g=y.useCallback(function(S){a.current=Mu(S),i.current=void 0},[]),m=y.useCallback(function(S){h(S.type,$x(S),S.target,d(S,e.lockRef.current))},[]),v=y.useCallback(function(S){h(S.type,Mu(S),S.target,d(S,e.lockRef.current))},[]);y.useEffect(function(){return ps.push(c),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",p,hs),document.addEventListener("touchmove",p,hs),document.addEventListener("touchstart",g,hs),function(){ps=ps.filter(function(S){return S!==c}),document.removeEventListener("wheel",p,hs),document.removeEventListener("touchmove",p,hs),document.removeEventListener("touchstart",g,hs)}},[]);var A=e.removeScrollBar,w=e.inert;return y.createElement(y.Fragment,null,w?y.createElement(c,{styles:LR(l)}):null,A?y.createElement(IR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function $R(e){for(var o=null;e!==null;)e instanceof ShadowRoot&&(o=e.host,e=e.host),e=e.parentNode;return o}const UR=yR(f1,YR);var y1=y.forwardRef(function(e,o){return y.createElement(Ad,pn({},e,{ref:o,sideCar:UR}))});y1.classNames=Ad.classNames;var Ep=["Enter"," "],XR=["ArrowDown","PageUp","Home"],x1=["ArrowUp","PageDown","End"],FR=[...XR,...x1],QR={ltr:[...Ep,"ArrowRight"],rtl:[...Ep,"ArrowLeft"]},GR={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ic="Menu",[Kl,WR,qR]=Gp(ic),[Ti,VR]=nc(ic,[qR,Qv,wd]),sc=Qv(),b1=wd(),[v1,ni]=Ti(ic),[KR,lc]=Ti(ic),w1=e=>{const{__scopeMenu:o,open:a=!1,children:i,dir:l,onOpenChange:c,modal:u=!0}=e,d=sc(o),[p,h]=y.useState(null),g=y.useRef(!1),m=_r(c),v=Wp(l);return y.useEffect(()=>{const A=()=>{g.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>g.current=!1;return document.addEventListener("keydown",A,{capture:!0}),()=>{document.removeEventListener("keydown",A,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),b.jsx(t1,{...d,children:b.jsx(v1,{scope:o,open:a,onOpenChange:m,content:p,onContentChange:h,children:b.jsx(KR,{scope:o,onClose:y.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:v,modal:u,children:i})})})};w1.displayName=ic;var ZR="MenuAnchor",rm=y.forwardRef((e,o)=>{const{__scopeMenu:a,...i}=e,l=sc(a);return b.jsx(LM,{...l,...i,ref:o})});rm.displayName=ZR;var am="MenuPortal",[JR,A1]=Ti(am,{forceMount:void 0}),C1=e=>{const{__scopeMenu:o,forceMount:a,children:i,container:l}=e,c=ni(am,o);return b.jsx(JR,{scope:o,forceMount:a,children:b.jsx(rc,{present:a||c.open,children:b.jsx(n1,{asChild:!0,container:l,children:i})})})};C1.displayName=am;var Vo="MenuContent",[ek,im]=Ti(Vo),S1=y.forwardRef((e,o)=>{const a=A1(Vo,e.__scopeMenu),{forceMount:i=a.forceMount,...l}=e,c=ni(Vo,e.__scopeMenu),u=lc(Vo,e.__scopeMenu);return b.jsx(Kl.Provider,{scope:e.__scopeMenu,children:b.jsx(rc,{present:i||c.open,children:b.jsx(Kl.Slot,{scope:e.__scopeMenu,children:u.modal?b.jsx(tk,{...l,ref:o}):b.jsx(nk,{...l,ref:o})})})})}),tk=y.forwardRef((e,o)=>{const a=ni(Vo,e.__scopeMenu),i=y.useRef(null),l=fo(o,i);return y.useEffect(()=>{const c=i.current;if(c)return lR(c)},[]),b.jsx(sm,{...e,ref:l,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:lt(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),nk=y.forwardRef((e,o)=>{const a=ni(Vo,e.__scopeMenu);return b.jsx(sm,{...e,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),ok=qu("MenuContent.ScrollLock"),sm=y.forwardRef((e,o)=>{const{__scopeMenu:a,loop:i=!1,trapFocus:l,onOpenAutoFocus:c,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEntryFocus:p,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:A,disableOutsideScroll:w,...S}=e,C=ni(Vo,a),M=lc(Vo,a),R=sc(a),E=b1(a),k=WR(a),[I,B]=y.useState(null),O=y.useRef(null),j=fo(o,O,C.onContentChange),U=y.useRef(0),G=y.useRef(""),X=y.useRef(0),W=y.useRef(null),J=y.useRef("right"),oe=y.useRef(0),Z=w?y1:y.Fragment,D=w?{as:ok,allowPinchZoom:!0}:void 0,Y=L=>{const T=G.current+L,$=k().filter(ue=>!ue.disabled),N=document.activeElement,H=$.find(ue=>ue.ref.current===N)?.textValue,q=$.map(ue=>ue.textValue),K=mk(q,T,H),ie=$.find(ue=>ue.textValue===K)?.ref.current;(function ue(se){G.current=se,window.clearTimeout(U.current),se!==""&&(U.current=window.setTimeout(()=>ue(""),1e3))})(T),ie&&setTimeout(()=>ie.focus())};y.useEffect(()=>()=>window.clearTimeout(U.current),[]),f2();const z=y.useCallback(L=>J.current===W.current?.side&&yk(L,W.current?.area),[]);return b.jsx(ek,{scope:a,searchRef:G,onItemEnter:y.useCallback(L=>{z(L)&&L.preventDefault()},[z]),onItemLeave:y.useCallback(L=>{z(L)||(O.current?.focus(),B(null))},[z]),onTriggerLeave:y.useCallback(L=>{z(L)&&L.preventDefault()},[z]),pointerGraceTimerRef:X,onPointerGraceIntentChange:y.useCallback(L=>{W.current=L},[]),children:b.jsx(Z,{...D,children:b.jsx(_v,{asChild:!0,trapped:l,onMountAutoFocus:lt(c,L=>{L.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:u,children:b.jsx(Tv,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:v,onDismiss:A,children:b.jsx(l1,{asChild:!0,...E,dir:M.dir,orientation:"vertical",loop:i,currentTabStopId:I,onCurrentTabStopIdChange:B,onEntryFocus:lt(p,L=>{M.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:b.jsx(HM,{role:"menu","aria-orientation":"vertical","data-state":Y1(C.open),"data-radix-menu-content":"",dir:M.dir,...R,...S,ref:j,style:{outline:"none",...S.style},onKeyDown:lt(S.onKeyDown,L=>{const $=L.target.closest("[data-radix-menu-content]")===L.currentTarget,N=L.ctrlKey||L.altKey||L.metaKey,H=L.key.length===1;$&&(L.key==="Tab"&&L.preventDefault(),!N&&H&&Y(L.key));const q=O.current;if(L.target!==q||!FR.includes(L.key))return;L.preventDefault();const ie=k().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);x1.includes(L.key)&&ie.reverse(),hk(ie)}),onBlur:lt(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(U.current),G.current="")}),onPointerMove:lt(e.onPointerMove,Zl(L=>{const T=L.target,$=oe.current!==L.clientX;if(L.currentTarget.contains(T)&&$){const N=L.clientX>oe.current?"right":"left";J.current=N,oe.current=L.clientX}}))})})})})})})});S1.displayName=Vo;var rk="MenuGroup",lm=y.forwardRef((e,o)=>{const{__scopeMenu:a,...i}=e;return b.jsx(oo.div,{role:"group",...i,ref:o})});lm.displayName=rk;var ak="MenuLabel",E1=y.forwardRef((e,o)=>{const{__scopeMenu:a,...i}=e;return b.jsx(oo.div,{...i,ref:o})});E1.displayName=ak;var ed="MenuItem",Xx="menu.itemSelect",Cd=y.forwardRef((e,o)=>{const{disabled:a=!1,onSelect:i,...l}=e,c=y.useRef(null),u=lc(ed,e.__scopeMenu),d=im(ed,e.__scopeMenu),p=fo(o,c),h=y.useRef(!1),g=()=>{const m=c.current;if(!a&&m){const v=new CustomEvent(Xx,{bubbles:!0,cancelable:!0});m.addEventListener(Xx,A=>i?.(A),{once:!0}),Rv(m,v),v.defaultPrevented?h.current=!1:u.onClose()}};return b.jsx(M1,{...l,ref:p,disabled:a,onClick:lt(e.onClick,g),onPointerDown:m=>{e.onPointerDown?.(m),h.current=!0},onPointerUp:lt(e.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:lt(e.onKeyDown,m=>{const v=d.searchRef.current!=="";a||v&&m.key===" "||Ep.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Cd.displayName=ed;var M1=y.forwardRef((e,o)=>{const{__scopeMenu:a,disabled:i=!1,textValue:l,...c}=e,u=im(ed,a),d=b1(a),p=y.useRef(null),h=fo(o,p),[g,m]=y.useState(!1),[v,A]=y.useState("");return y.useEffect(()=>{const w=p.current;w&&A((w.textContent??"").trim())},[c.children]),b.jsx(Kl.ItemSlot,{scope:a,disabled:i,textValue:l??v,children:b.jsx(c1,{asChild:!0,...d,focusable:!i,children:b.jsx(oo.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...c,ref:h,onPointerMove:lt(e.onPointerMove,Zl(w=>{i?u.onItemLeave(w):(u.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:lt(e.onPointerLeave,Zl(w=>u.onItemLeave(w))),onFocus:lt(e.onFocus,()=>m(!0)),onBlur:lt(e.onBlur,()=>m(!1))})})})}),ik="MenuCheckboxItem",R1=y.forwardRef((e,o)=>{const{checked:a=!1,onCheckedChange:i,...l}=e;return b.jsx(O1,{scope:e.__scopeMenu,checked:a,children:b.jsx(Cd,{role:"menuitemcheckbox","aria-checked":td(a)?"mixed":a,...l,ref:o,"data-state":dm(a),onSelect:lt(l.onSelect,()=>i?.(td(a)?!0:!a),{checkForDefaultPrevented:!1})})})});R1.displayName=ik;var k1="MenuRadioGroup",[sk,lk]=Ti(k1,{value:void 0,onValueChange:()=>{}}),T1=y.forwardRef((e,o)=>{const{value:a,onValueChange:i,...l}=e,c=_r(i);return b.jsx(sk,{scope:e.__scopeMenu,value:a,onValueChange:c,children:b.jsx(lm,{...l,ref:o})})});T1.displayName=k1;var I1="MenuRadioItem",_1=y.forwardRef((e,o)=>{const{value:a,...i}=e,l=lk(I1,e.__scopeMenu),c=a===l.value;return b.jsx(O1,{scope:e.__scopeMenu,checked:c,children:b.jsx(Cd,{role:"menuitemradio","aria-checked":c,...i,ref:o,"data-state":dm(c),onSelect:lt(i.onSelect,()=>l.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});_1.displayName=I1;var cm="MenuItemIndicator",[O1,ck]=Ti(cm,{checked:!1}),D1=y.forwardRef((e,o)=>{const{__scopeMenu:a,forceMount:i,...l}=e,c=ck(cm,a);return b.jsx(rc,{present:i||td(c.checked)||c.checked===!0,children:b.jsx(oo.span,{...l,ref:o,"data-state":dm(c.checked)})})});D1.displayName=cm;var uk="MenuSeparator",j1=y.forwardRef((e,o)=>{const{__scopeMenu:a,...i}=e;return b.jsx(oo.div,{role:"separator","aria-orientation":"horizontal",...i,ref:o})});j1.displayName=uk;var dk="MenuArrow",P1=y.forwardRef((e,o)=>{const{__scopeMenu:a,...i}=e,l=sc(a);return b.jsx(YM,{...l,...i,ref:o})});P1.displayName=dk;var um="MenuSub",[fk,B1]=Ti(um),z1=e=>{const{__scopeMenu:o,children:a,open:i=!1,onOpenChange:l}=e,c=ni(um,o),u=sc(o),[d,p]=y.useState(null),[h,g]=y.useState(null),m=_r(l);return y.useEffect(()=>(c.open===!1&&m(!1),()=>m(!1)),[c.open,m]),b.jsx(t1,{...u,children:b.jsx(v1,{scope:o,open:i,onOpenChange:m,content:h,onContentChange:g,children:b.jsx(fk,{scope:o,contentId:Cs(),triggerId:Cs(),trigger:d,onTriggerChange:p,children:a})})})};z1.displayName=um;var Hl="MenuSubTrigger",N1=y.forwardRef((e,o)=>{const a=ni(Hl,e.__scopeMenu),i=lc(Hl,e.__scopeMenu),l=B1(Hl,e.__scopeMenu),c=im(Hl,e.__scopeMenu),u=y.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:p}=c,h={__scopeMenu:e.__scopeMenu},g=y.useCallback(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return y.useEffect(()=>g,[g]),y.useEffect(()=>{const m=d.current;return()=>{window.clearTimeout(m),p(null)}},[d,p]),b.jsx(rm,{asChild:!0,...h,children:b.jsx(M1,{id:l.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":l.contentId,"data-state":Y1(a.open),...e,ref:Qp(o,l.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:lt(e.onPointerMove,Zl(m=>{c.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!a.open&&!u.current&&(c.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{a.onOpenChange(!0),g()},100))})),onPointerLeave:lt(e.onPointerLeave,Zl(m=>{g();const v=a.content?.getBoundingClientRect();if(v){const A=a.content?.dataset.side,w=A==="right",S=w?-5:5,C=v[w?"left":"right"],M=v[w?"right":"left"];c.onPointerGraceIntentChange({area:[{x:m.clientX+S,y:m.clientY},{x:C,y:v.top},{x:M,y:v.top},{x:M,y:v.bottom},{x:C,y:v.bottom}],side:A}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(m),m.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:lt(e.onKeyDown,m=>{const v=c.searchRef.current!=="";e.disabled||v&&m.key===" "||QR[i.dir].includes(m.key)&&(a.onOpenChange(!0),a.content?.focus(),m.preventDefault())})})})});N1.displayName=Hl;var L1="MenuSubContent",H1=y.forwardRef((e,o)=>{const a=A1(Vo,e.__scopeMenu),{forceMount:i=a.forceMount,...l}=e,c=ni(Vo,e.__scopeMenu),u=lc(Vo,e.__scopeMenu),d=B1(L1,e.__scopeMenu),p=y.useRef(null),h=fo(o,p);return b.jsx(Kl.Provider,{scope:e.__scopeMenu,children:b.jsx(rc,{present:i||c.open,children:b.jsx(Kl.Slot,{scope:e.__scopeMenu,children:b.jsx(sm,{id:d.contentId,"aria-labelledby":d.triggerId,...l,ref:h,align:"start",side:u.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{u.isUsingKeyboardRef.current&&p.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:lt(e.onFocusOutside,g=>{g.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:lt(e.onEscapeKeyDown,g=>{u.onClose(),g.preventDefault()}),onKeyDown:lt(e.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),v=GR[u.dir].includes(g.key);m&&v&&(c.onOpenChange(!1),d.trigger?.focus(),g.preventDefault())})})})})})});H1.displayName=L1;function Y1(e){return e?"open":"closed"}function td(e){return e==="indeterminate"}function dm(e){return td(e)?"indeterminate":e?"checked":"unchecked"}function hk(e){const o=document.activeElement;for(const a of e)if(a===o||(a.focus(),document.activeElement!==o))return}function pk(e,o){return e.map((a,i)=>e[(o+i)%e.length])}function mk(e,o,a){const l=o.length>1&&Array.from(o).every(h=>h===o[0])?o[0]:o,c=a?e.indexOf(a):-1;let u=pk(e,Math.max(c,0));l.length===1&&(u=u.filter(h=>h!==a));const p=u.find(h=>h.toLowerCase().startsWith(l.toLowerCase()));return p!==a?p:void 0}function gk(e,o){const{x:a,y:i}=e;let l=!1;for(let c=0,u=o.length-1;c<o.length;u=c++){const d=o[c],p=o[u],h=d.x,g=d.y,m=p.x,v=p.y;g>i!=v>i&&a<(m-h)*(i-g)/(v-g)+h&&(l=!l)}return l}function yk(e,o){if(!o)return!1;const a={x:e.clientX,y:e.clientY};return gk(a,o)}function Zl(e){return o=>o.pointerType==="mouse"?e(o):void 0}var xk=w1,bk=rm,vk=C1,wk=S1,Ak=lm,Ck=E1,Sk=Cd,Ek=R1,Mk=T1,Rk=_1,kk=D1,Tk=j1,Ik=P1,_k=z1,Ok=N1,Dk=H1,cc="Menubar",[Mp,jk,Pk]=Gp(cc),[$1]=nc(cc,[Pk,wd]),ro=VR(),U1=wd(),[Bk,fm]=$1(cc),X1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,value:i,onValueChange:l,defaultValue:c,loop:u=!0,dir:d,...p}=e,h=Wp(d),g=U1(a),[m,v]=om({prop:i,onChange:l,defaultProp:c??"",caller:cc}),[A,w]=y.useState(null);return b.jsx(Bk,{scope:a,value:m,onMenuOpen:y.useCallback(S=>{v(S),w(S)},[v]),onMenuClose:y.useCallback(()=>v(""),[v]),onMenuToggle:y.useCallback(S=>{v(C=>C?"":S),w(S)},[v]),dir:h,loop:u,children:b.jsx(Mp.Provider,{scope:a,children:b.jsx(Mp.Slot,{scope:a,children:b.jsx(l1,{asChild:!0,...g,orientation:"horizontal",loop:u,dir:h,currentTabStopId:A,onCurrentTabStopIdChange:w,children:b.jsx(oo.div,{role:"menubar",...p,ref:o})})})})})});X1.displayName=cc;var hm="MenubarMenu",[zk,F1]=$1(hm),Q1=e=>{const{__scopeMenubar:o,value:a,...i}=e,l=Cs(),c=a||l||"LEGACY_REACT_AUTO_VALUE",u=fm(hm,o),d=ro(o),p=y.useRef(null),h=y.useRef(!1),g=u.value===c;return y.useEffect(()=>{g||(h.current=!1)},[g]),b.jsx(zk,{scope:o,value:c,triggerId:Cs(),triggerRef:p,contentId:Cs(),wasKeyboardTriggerOpenRef:h,children:b.jsx(xk,{...d,open:g,onOpenChange:m=>{m||u.onMenuClose()},modal:!1,dir:u.dir,...i})})};Q1.displayName=hm;var Rp="MenubarTrigger",G1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,disabled:i=!1,...l}=e,c=U1(a),u=ro(a),d=fm(Rp,a),p=F1(Rp,a),h=y.useRef(null),g=fo(o,h,p.triggerRef),[m,v]=y.useState(!1),A=d.value===p.value;return b.jsx(Mp.ItemSlot,{scope:a,value:p.value,disabled:i,children:b.jsx(c1,{asChild:!0,...c,focusable:!i,tabStopId:p.value,children:b.jsx(bk,{asChild:!0,...u,children:b.jsx(oo.button,{type:"button",role:"menuitem",id:p.triggerId,"aria-haspopup":"menu","aria-expanded":A,"aria-controls":A?p.contentId:void 0,"data-highlighted":m?"":void 0,"data-state":A?"open":"closed","data-disabled":i?"":void 0,disabled:i,...l,ref:g,onPointerDown:lt(e.onPointerDown,w=>{!i&&w.button===0&&w.ctrlKey===!1&&(d.onMenuOpen(p.value),A||w.preventDefault())}),onPointerEnter:lt(e.onPointerEnter,()=>{!!d.value&&!A&&(d.onMenuOpen(p.value),h.current?.focus())}),onKeyDown:lt(e.onKeyDown,w=>{i||(["Enter"," "].includes(w.key)&&d.onMenuToggle(p.value),w.key==="ArrowDown"&&d.onMenuOpen(p.value),["Enter"," ","ArrowDown"].includes(w.key)&&(p.wasKeyboardTriggerOpenRef.current=!0,w.preventDefault()))}),onFocus:lt(e.onFocus,()=>v(!0)),onBlur:lt(e.onBlur,()=>v(!1))})})})})});G1.displayName=Rp;var Nk="MenubarPortal",W1=e=>{const{__scopeMenubar:o,...a}=e,i=ro(o);return b.jsx(vk,{...i,...a})};W1.displayName=Nk;var kp="MenubarContent",q1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,align:i="start",...l}=e,c=ro(a),u=fm(kp,a),d=F1(kp,a),p=jk(a),h=y.useRef(!1);return b.jsx(wk,{id:d.contentId,"aria-labelledby":d.triggerId,"data-radix-menubar-content":"",...c,...l,ref:o,align:i,onCloseAutoFocus:lt(e.onCloseAutoFocus,g=>{!!!u.value&&!h.current&&d.triggerRef.current?.focus(),h.current=!1,g.preventDefault()}),onFocusOutside:lt(e.onFocusOutside,g=>{const m=g.target;p().some(A=>A.ref.current?.contains(m))&&g.preventDefault()}),onInteractOutside:lt(e.onInteractOutside,()=>{h.current=!0}),onEntryFocus:g=>{d.wasKeyboardTriggerOpenRef.current||g.preventDefault()},onKeyDown:lt(e.onKeyDown,g=>{if(["ArrowRight","ArrowLeft"].includes(g.key)){const m=g.target,v=m.hasAttribute("data-radix-menubar-subtrigger"),A=m.closest("[data-radix-menubar-content]")!==g.currentTarget,S=(u.dir==="rtl"?"ArrowRight":"ArrowLeft")===g.key;if(!S&&v||A&&S)return;let R=p().filter(I=>!I.disabled).map(I=>I.value);S&&R.reverse();const E=R.indexOf(d.value);R=u.loop?tT(R,E+1):R.slice(E+1);const[k]=R;k&&u.onMenuOpen(k)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});q1.displayName=kp;var Lk="MenubarGroup",Hk=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Ak,{...l,...i,ref:o})});Hk.displayName=Lk;var Yk="MenubarLabel",$k=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Ck,{...l,...i,ref:o})});$k.displayName=Yk;var Uk="MenubarItem",V1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Sk,{...l,...i,ref:o})});V1.displayName=Uk;var Xk="MenubarCheckboxItem",K1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Ek,{...l,...i,ref:o})});K1.displayName=Xk;var Fk="MenubarRadioGroup",Qk=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Mk,{...l,...i,ref:o})});Qk.displayName=Fk;var Gk="MenubarRadioItem",Wk=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Rk,{...l,...i,ref:o})});Wk.displayName=Gk;var qk="MenubarItemIndicator",Z1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(kk,{...l,...i,ref:o})});Z1.displayName=qk;var Vk="MenubarSeparator",J1=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Tk,{...l,...i,ref:o})});J1.displayName=Vk;var Kk="MenubarArrow",Zk=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Ik,{...l,...i,ref:o})});Zk.displayName=Kk;var ew="MenubarSub",tw=e=>{const{__scopeMenubar:o,children:a,open:i,onOpenChange:l,defaultOpen:c}=e,u=ro(o),[d,p]=om({prop:i,defaultProp:c??!1,onChange:l,caller:ew});return b.jsx(_k,{...u,open:d,onOpenChange:p,children:a})};tw.displayName=ew;var Jk="MenubarSubTrigger",nw=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Ok,{"data-radix-menubar-subtrigger":"",...l,...i,ref:o})});nw.displayName=Jk;var eT="MenubarSubContent",ow=y.forwardRef((e,o)=>{const{__scopeMenubar:a,...i}=e,l=ro(a);return b.jsx(Dk,{...l,"data-radix-menubar-content":"",...i,ref:o,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});ow.displayName=eT;function tT(e,o){return e.map((a,i)=>e[(o+i)%e.length])}var nT=X1,oT=Q1,rT=G1,aT=W1,iT=q1,sT=V1,lT=K1,cT=Z1,uT=J1,dT=tw,fT=nw,hT=ow;const pT=ce(nT)`
  display: flex;
  background-color: white;
  padding: 0;
  border-radius: 4px;
`,ms=oT,gs=ce(rT)`
  padding: 6px 10px 6px 6px;
  outline: none;
  user-select: none;
  font-size: 12px;
  line-height: 1;
  border-radius: 4px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  background: transparent;
  border: none;
  cursor: pointer;
  font-family: inherit;

  &:hover {
    background-color: #f5f5f5;
  }

  &[data-state='open'] {
    background-color: #f5f5f5;
  }

  &[data-disabled] {
    color: #94a3b8;
    cursor: not-allowed;
    pointer-events: none;
  }
`,ea=aT,ys=ce(iT)`
  min-width: 200px;
  background-color: white;
  border-radius: 6px;
  padding: 4px;
  box-shadow: 0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2);
  border: 1px solid #e1e5e9;
  z-index: 1500;
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;

  &[data-side='top'] {
    animation-name: slideDownAndFade;
  }
  &[data-side='right'] {
    animation-name: slideLeftAndFade;
  }
  &[data-side='bottom'] {
    animation-name: slideUpAndFade;
  }
  &[data-side='left'] {
    animation-name: slideRightAndFade;
  }

  @keyframes slideUpAndFade {
    from {
      opacity: 0;
      transform: translateY(2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideRightAndFade {
    from {
      opacity: 0;
      transform: translateX(-2px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideDownAndFade {
    from {
      opacity: 0;
      transform: translateY(-2px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideLeftAndFade {
    from {
      opacity: 0;
      transform: translateX(2px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
`,rw=lr`
  all: unset;
  font-size: 12px;
  line-height: 1;
  color: #2c3e50;
  border-radius: 4px;
  display: flex;
  align-items: center;
  height: 28px;
  position: relative;
  user-select: none;
  cursor: pointer;

  &[data-disabled] {
    color: #94a3b8;
    pointer-events: none;
  }

  &[data-highlighted] {
    background-color: #f5f5f5;
    color: #2c3e50;
  }
`,tn=ce(sT)`
  ${rw};
  padding: 0 8px;
`,Ru=ce(lT)`
  ${rw};
  padding: 0 8px 0 28px;
`,ku=ce(cT)`
  position: absolute;
  left: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  color: #2c3e50;
`,Na=ce(uT)`
  height: 1px;
  background-color: #e1e5e9;
  margin: 4px;
`,qh=dT,Vh=ce(fT)`
  all: unset;
  font-size: 12px;
  line-height: 1;
  color: #2c3e50;
  border-radius: 4px;
  display: flex;
  align-items: center;
  height: 28px;
  padding: 0 8px;
  position: relative;
  user-select: none;
  cursor: pointer;

  &[data-state='open'] {
    background-color: #f5f5f5;
  }

  &[data-highlighted] {
    background-color: #f5f5f5;
    color: #2c3e50;
  }

  &[data-disabled] {
    color: #94a3b8;
    pointer-events: none;
  }
`,Kh=ce(hT)`
  min-width: 200px;
  background-color: white;
  border-radius: 6px;
  padding: 4px;
  box-shadow: 0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2);
  border: 1px solid #e1e5e9;
  z-index: 1500;
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  will-change: transform, opacity;
`,no=ce.div`
  margin-left: auto;
  padding-left: 20px;
  color: #6c757d;
  font-size: 12px;

  :where([data-highlighted]) & {
    color: #2c3e50;
  }

  :where([data-disabled]) & {
    color: #94a3b8;
  }
`,Zh=ce.span`
  margin-left: auto;
  padding-left: 12px;
  color: #6c757d;
`,Tu=()=>b.jsx("svg",{width:"14.4",height:"14.4",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:b.jsx("path",{d:"M5 12.5L9.5 17L19 7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function mT({onNew:e,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onToggleHistory:d,onToggleSidebar:p,onToggleRulers:h,onToggleGrid:g,onPrintPreview:m,onOpenBugReport:v,onOpenAbout:A,onSelectionClear:w,onSelectAll:S,onSelectArea:C,onDuplicatePage:M,onDeletePage:R,onUndo:E,onRedo:k,onBringToFront:I,onSendToBack:B,onBringForward:O,onSendBackward:j,onGroup:U,onUngroup:G,onSnapToGrid:X,canGroup:W,canUngroup:J,canSnapToGrid:oe,hasSelection:Z,isHistoryOpen:D,isSidebarExpanded:Y,areRulersVisible:z,isGridVisible:L,canDuplicatePage:T,canDeletePage:$}){const N=navigator.platform.toUpperCase().indexOf("MAC")>=0,H=N?"":"Ctrl",q=N?"":"Alt";return b.jsxs(pT,{children:[b.jsxs(ms,{children:[b.jsx(gs,{children:"Project"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsx(tn,{onSelect:e,children:"New"}),b.jsx(Na,{}),b.jsxs(qh,{children:[b.jsxs(Vh,{children:["Export",b.jsx(Zh,{children:""})]}),b.jsx(ea,{children:b.jsx(Kh,{alignOffset:-5,children:b.jsxs(tn,{onSelect:c,children:["JSON",b.jsxs(no,{children:[H,"+S"]})]})})})]}),b.jsxs(tn,{onSelect:u,children:["Import JSON",b.jsxs(no,{children:[H,"+O"]})]})]})})]}),b.jsxs(ms,{children:[b.jsx(gs,{children:"Page"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsxs(qh,{children:[b.jsxs(Vh,{children:["Export",b.jsx(Zh,{children:""})]}),b.jsx(ea,{children:b.jsxs(Kh,{alignOffset:-5,children:[b.jsx(tn,{onSelect:o,children:"PNG"}),b.jsx(tn,{onSelect:i,children:"JSON"})]})})]}),b.jsx(Na,{}),b.jsxs(tn,{onSelect:m,children:["Print preview",b.jsxs(no,{children:[H,"+P"]})]}),b.jsx(Na,{}),b.jsx(tn,{onSelect:l,children:"Import JSON"}),b.jsx(Na,{}),b.jsx(tn,{onSelect:M,disabled:!T,children:"Duplicate"}),b.jsx(tn,{onSelect:R,disabled:!$,children:"Delete"})]})})]}),b.jsxs(ms,{children:[b.jsx(gs,{disabled:!Z,children:"Selection"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsx(tn,{onSelect:a,children:"Export as PNG"}),b.jsxs(tn,{onSelect:w,children:["Clear",b.jsx(no,{children:"Esc"})]})]})})]}),b.jsxs(ms,{children:[b.jsx(gs,{"data-menubar-trigger":"edit",children:"Edit"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsxs(tn,{onSelect:E,children:["Undo",b.jsxs(no,{children:[H,"+Z"]})]}),b.jsxs(tn,{onSelect:k,children:["Redo",b.jsxs(no,{children:[H,"+Shift+Z"]})]}),b.jsx(Na,{}),b.jsxs(tn,{onSelect:C,children:["Select area",b.jsx(no,{children:"S"})]}),b.jsxs(tn,{onSelect:S,children:["Select all",b.jsxs(no,{children:[H,"+A"]})]}),b.jsx(Na,{}),b.jsxs(qh,{children:[b.jsxs(Vh,{"data-menubar-submenu":"arrange",children:["Arrange",b.jsx(Zh,{children:""})]}),b.jsx(ea,{children:b.jsxs(Kh,{alignOffset:-5,children:[b.jsxs(tn,{disabled:!Z,onSelect:I,children:["Bring to front",b.jsxs(no,{children:[H,"+Shift+J"]})]}),b.jsxs(tn,{disabled:!Z,onSelect:O,children:["Bring forward",b.jsxs(no,{children:[H,"+J"]})]}),b.jsxs(tn,{disabled:!Z,onSelect:j,children:["Send backward",b.jsxs(no,{children:[H,"+K"]})]}),b.jsxs(tn,{disabled:!Z,onSelect:B,children:["Send to back",b.jsxs(no,{children:[H,"+Shift+K"]})]}),b.jsx(Na,{}),b.jsxs(tn,{"data-menu-item":"snap-to-grid",disabled:!oe,onSelect:X,children:["Snap to grid",b.jsxs(no,{children:[H,"+G"]})]}),b.jsx(Na,{}),b.jsxs(tn,{disabled:!W,onSelect:U,children:["Group",b.jsxs(no,{children:[H,"+",q,"+G"]})]}),b.jsxs(tn,{disabled:!J,onSelect:G,children:["Ungroup",b.jsxs(no,{children:[H,"+Shift+G"]})]})]})})]})]})})]}),b.jsxs(ms,{children:[b.jsx(gs,{children:"View"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsxs(Ru,{checked:Y,onCheckedChange:()=>p(),children:[b.jsx(ku,{children:b.jsx(Tu,{})}),"Sidebar"]}),b.jsxs(Ru,{checked:z,onCheckedChange:()=>h(),children:[b.jsx(ku,{children:b.jsx(Tu,{})}),"Rulers"]}),b.jsxs(Ru,{checked:L,onCheckedChange:()=>g(),children:[b.jsx(ku,{children:b.jsx(Tu,{})}),"Grid"]}),b.jsxs(Ru,{checked:D,onCheckedChange:()=>d(),children:[b.jsx(ku,{children:b.jsx(Tu,{})}),"History",b.jsxs(no,{children:[H,"+H"]})]})]})})]}),b.jsxs(ms,{children:[b.jsx(gs,{children:"Help"}),b.jsx(ea,{children:b.jsxs(ys,{align:"start",sideOffset:5,children:[b.jsx(tn,{onSelect:A,children:"About"}),b.jsx(tn,{onSelect:v,children:"Submit bug report"})]})})]})]})}const gT="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20viewBox='-3%20-3%20126%20126'%20version='1.1'%20id='svg11'%20sodipodi:docname='wiremesh-mark.svg'%20inkscape:version='1.4.2%20(ebf0e940,%202025-05-08)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs11'%20/%3e%3csodipodi:namedview%20id='namedview11'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='4.7161164'%20inkscape:cx='93.615163'%20inkscape:cy='71.881178'%20inkscape:window-width='1712'%20inkscape:window-height='991'%20inkscape:window-x='970'%20inkscape:window-y='134'%20inkscape:window-maximized='0'%20inkscape:current-layer='svg11'%20/%3e%3cpath%20style='opacity:0.45;fill:none;stroke:%233a3a3a;stroke-width:2.507;stroke-dasharray:none;stroke-opacity:1'%20d='m%2021.194645,33.426505%2039.707427,7.844991%2042.290018,-9.00245%20v%20-0.257212'%20id='path1'%20/%3e%3cpath%20d='m%2019.008152,32.272233%2018,52%2024,-45.044883%2024,45.044883%2017.999998,-52'%20style='fill:none;stroke:%233e3e3e;stroke-width:8.1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1'%20id='path2'%20/%3e%3cline%20x1='37.008152'%20y1='84.272232'%20x2='85.008148'%20y2='84.272232'%20style='opacity:0.45;stroke:%233a3a3a;stroke-width:2.5;stroke-linecap:round;stroke-dasharray:none;stroke-opacity:1'%20id='line2'%20/%3e%3ccircle%20cx='19.667637'%20cy='34.198151'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle2'%20/%3e%3ccircle%20cx='61.0956'%20cy='40.98053'%20r='9.4874649'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:2.41972;stroke-dasharray:none;stroke-opacity:1'%20id='circle7'%20/%3e%3ccircle%20cx='102.8'%20cy='32.74707'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle8'%20/%3e%3ccircle%20cx='37.31707'%20cy='82.888725'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle9'%20/%3e%3ccircle%20cx='84.621346'%20cy='82.063026'%20r='7.5822606'%20style='fill:%23111111;fill-opacity:1;stroke:%23ffffff;stroke-width:1.93381;stroke-dasharray:none;stroke-opacity:1'%20id='circle10'%20/%3e%3c/svg%3e";function yT({onNew:e,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onPrintPreview:d,onToggleHistory:p,onToggleSidebar:h,onToggleRulers:g,onToggleGrid:m,onOpenBugReport:v,onClearSelection:A,onSelectAll:w,onSelectArea:S,projectName:C,onProjectNameChange:M,onOpenAbout:R,onDuplicatePage:E,onDeletePage:k,onUndo:I,onRedo:B,onBringToFront:O,onSendToBack:j,onBringForward:U,onSendBackward:G,onGroup:X,onUngroup:W,onSnapToGrid:J,canGroup:oe,canUngroup:Z,canSnapToGrid:D,lastSaved:Y,hasSelection:z,isHistoryOpen:L,isSidebarExpanded:T,areRulersVisible:$,isGridVisible:N,dockedToolbar:H,canDuplicatePage:q,canDeletePage:K}){const ie=y.useRef(null),ue=y.useRef(null),[se,ye]=y.useState(!1),[ge,Ae]=y.useState(C),Se=y.useRef(null),[Pe,Ee]=y.useState(null);y.useEffect(()=>{se||Ae(C)},[C,se]),y.useEffect(()=>{se&&Se.current&&(Se.current.focus(),Se.current.select())},[se]);const He=y.useCallback(()=>{M(ge),ye(!1)},[ge,M]),We=y.useCallback(()=>{Ae(C),ye(!1)},[C]);return y.useLayoutEffect(()=>{const _e=ue.current;if(!_e)return;const gt=()=>{const et=(_e.querySelector('[role="menubar"]')??_e).getBoundingClientRect().width,yt=Math.max(200,Math.round(et));Ee(ht=>ht===yt?ht:yt)};if(gt(),typeof ResizeObserver<"u"){const ot=new ResizeObserver(()=>{gt()});return ot.observe(_e),()=>ot.disconnect()}return window.addEventListener("resize",gt),()=>{window.removeEventListener("resize",gt)}},[]),b.jsxs(PE,{"data-testid":"app-toolbar",ref:ie,children:[b.jsx(BE,{children:b.jsx(zE,{src:gT,alt:"Wiremesh logo"})}),b.jsx(LE,{children:b.jsxs(XE,{children:[b.jsxs(HE,{style:Pe?{minWidth:`${Pe}px`}:void 0,children:[b.jsx(YE,{children:se?b.jsx(UE,{ref:Se,value:ge,onChange:_e=>Ae(_e.target.value),onBlur:He,onKeyDown:_e=>{_e.key==="Enter"?(_e.preventDefault(),He()):_e.key==="Escape"&&(_e.preventDefault(),We())},"data-project-name-input":"true"}):b.jsx($E,{type:"button",onClick:()=>ye(!0),title:"Rename project","data-project-name-display":"true",children:C})}),b.jsx(GE,{"data-save-timestamp":"true",children:Y?`auto-saved at ${Y.toLocaleTimeString()}`:null})]}),b.jsx(NE,{ref:ue,style:Pe?{width:`${Pe}px`}:void 0,children:b.jsx(mT,{onNew:e,onExportPNG:o,onExportSelectedPNG:a,onExportPageJSON:i,onImportPageJSON:l,onExportProjectJSON:c,onImportProjectJSON:u,onPrintPreview:d,onToggleHistory:p,onToggleSidebar:h,onToggleRulers:g,onToggleGrid:m,onOpenBugReport:v,onSelectionClear:A,onSelectAll:w,onSelectArea:S,onOpenAbout:R,onDuplicatePage:E,onDeletePage:k,onUndo:I,onRedo:B,onBringToFront:O,onSendToBack:j,onBringForward:U,onSendBackward:G,onGroup:X,onUngroup:W,onSnapToGrid:J,canGroup:oe,canUngroup:Z,canSnapToGrid:D,hasSelection:z,isHistoryOpen:L,isSidebarExpanded:T,areRulersVisible:$,isGridVisible:N,canDuplicatePage:q,canDeletePage:K})})]})}),b.jsx(FE,{$visible:!!H,children:H}),b.jsx(QE,{$hasDocked:!!H})]})}const Dr="Wiremesh",xT=Dr,pm="1.3.0",uc=Dr.toLowerCase().replace(/\s+/g,""),aw=`${uc}-`,Gt=e=>`${aw}${e}`,Jl=`__${uc}TestHooks`,Tp=Gt("reset-notice"),ec=`${uc}:reset-notice`,iw=`__${uc}ResetLock`,bT=`${uc}-export`,Fx=Gt("last-project-export-info"),sw=Gt("last-project-import-info"),Vn=10,vT=ce.div`
  position: fixed;
  inset: 0;
  background: rgba(15, 22, 36, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2200;
`,wT=ce.div`
  background: white;
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(15, 22, 36, 0.18);
  padding: 28px 32px;
  max-width: 420px;
  width: 90%;
  display: flex;
  flex-direction: column;
  gap: 18px;
`,AT=ce.h2`
  margin: 0;
  font-size: 22px;
  color: #233044;
`,CT=ce.p`
  margin: 0;
  font-size: 15px;
  line-height: 1.6;
  color: #465162;
`,ST=ce.span`
  font-size: 13px;
  color: rgba(70, 81, 98, 0.75);
`,ET=ce.button`
  align-self: flex-end;
  border: none;
  background: #1d6ff2;
  color: white;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;

  &:hover {
    background: #1457c7;
  }
`,MT=({onClose:e})=>b.jsx(vT,{role:"presentation",onClick:e,children:b.jsxs(wT,{role:"dialog","aria-modal":"true","aria-labelledby":"about-title",onClick:o=>o.stopPropagation(),children:[b.jsxs(AT,{id:"about-title",children:["About ",Dr]}),b.jsx(CT,{children:"Simple and elegant wireframing."}),b.jsxs(ST,{children:["Version ",pm]}),b.jsx(ET,{type:"button",onClick:e,children:"Close"})]})}),RT=ce.div`
  display: ${e=>e.$isOpen?"flex":"none"};
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  align-items: center;
  justify-content: center;
  z-index: 2000;
`,kT=ce.div`
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  max-width: 500px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideIn 0.2s ease-out;

  @keyframes slideIn {
    from {
      transform: translateY(-20px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
`,Bs=ce.h3`
  margin: 0;
  padding: 20px;
  border-bottom: 1px solid #e1e5e9;
  font-size: 18px;
  color: #2c3e50;
`,zs=ce.div`
  padding: 20px;
  color: #6c757d;
  line-height: 1.6;

  > p {
    margin: 0 0 18px;
  }
`,mm=ce.p`
  margin: 12px 0 0;
  color: #e74c3c;
  font-weight: 500;
`,Ns=ce.div`
  padding: 20px;
  border-top: 1px solid #e1e5e9;
  display: flex;
  justify-content: flex-end;
  gap: 10px;
`,TT=ce.div`
  display: flex;
  flex-direction: column;
  gap: 8px;
`,IT=ce.label`
  font-size: 13px;
  font-weight: 600;
  color: #2c3e50;
`,_T=ce.select`
  padding: 10px 12px;
  border-radius: 6px;
  border: 1px solid #d0d7de;
  font-size: 14px;
  color: #2c3e50;
  background: #fff;
  appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, #6c757d 50%),
    linear-gradient(135deg, #6c757d 50%, transparent 50%),
    linear-gradient(to right, #f8f9fa, #f8f9fa);
  background-position:
    calc(100% - 18px) calc(50% - 2px),
    calc(100% - 12px) calc(50% - 2px),
    calc(100% - 36px) 50%;
  background-size: 6px 6px, 6px 6px, 1px 70%;
  background-repeat: no-repeat;

  &:focus {
    outline: none;
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
  }
`,jo=ce.button`
  padding: 10px 20px;
  border: 1px solid ${e=>e.$variant==="primary"?"#3498db":e.$variant==="danger"?"#e74c3c":"#ddd"};
  background: ${e=>e.$variant==="primary"?"#3498db":e.$variant==="danger"?"#e74c3c":"white"};
  color: ${e=>e.$variant==="primary"||e.$variant==="danger"?"white":"#6c757d"};
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s;

  &:hover {
    background: ${e=>e.$variant==="primary"?"#2980b9":e.$variant==="danger"?"#cf4334":"#f5f5f5"};
    border-color: ${e=>e.$variant==="primary"?"#2980b9":e.$variant==="danger"?"#c43d2f":"#bbb"};
  }

  &:active {
    transform: translateY(1px);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
`,Ls=({isOpen:e,onClose:o,role:a="dialog",ariaLabelledBy:i,closeOnOverlayClick:l=!0,dataAttributes:c,overlayAttributes:u,portalTarget:d,children:p})=>{const h=y.useRef(null);y.useEffect(()=>{if(!e)return;const A=w=>{w.key==="Escape"&&o&&o()};return document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[e,o]);const g=y.useCallback(A=>{!l||!o||A.target===A.currentTarget&&o()},[l,o]);if(!e)return null;const m=d??(typeof document<"u"?document.body:null),v=b.jsx(RT,{$isOpen:e,onMouseDown:g,...u??{},children:b.jsx(kT,{role:a,"aria-modal":"true","aria-labelledby":i,ref:h,...c??{},children:p})});return m?dr.createPortal(v,m):v},Qx="new-projectConfirm-modal-title",OT=({isOpen:e,onConfirm:o,onCancel:a})=>b.jsxs(Ls,{isOpen:e,onClose:a,ariaLabelledBy:Qx,dataAttributes:{"data-new-project-modal":"true"},closeOnOverlayClick:!1,children:[b.jsxs(Bs,{id:Qx,children:["Start a New ",Dr," Project?"]}),b.jsxs(zs,{children:[b.jsxs("p",{children:["You have unsaved changes. Starting a new ",Dr," project will discard the current canvas and project history."]}),b.jsx(mm,{role:"note",children:"This action cannot be undone."})]}),b.jsxs(Ns,{children:[b.jsx(jo,{onClick:a,children:"Cancel"}),b.jsx(jo,{$variant:"danger",onClick:o,children:"Start New Project"})]})]}),DT=ce.div`
  position: fixed;
  left: 0;
  top: 60px;
  bottom: 0;
  width: ${e=>e.$isCollapsed?"0px":"280px"};
  background: white;
  border-right: ${e=>e.$isCollapsed?"none":"1px solid #e1e5e9"};
  z-index: 900;
  transition: width 0.3s ease;
  overflow: hidden;
`,jT=ce.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
`,PT=ce.div`
  flex: 1 1 0%;
  min-height: 0;
  overflow-y: auto;
  padding: 20px;
`,BT=ce.div`
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px;
`,zT=ce.div`
  position: relative;
  width: 100%;
  height: 14px;
  cursor: row-resize;
  flex-shrink: 0;
  background: transparent;

  &:before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 50%;
    height: 1px;
    background: ${e=>e.$isDragging?"#3498db":"#e1e5e9"};
    transform: translateY(-50%);
  }
`,NT=ce.div`
  flex: 1 1 0%;
  min-height: 170px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,LT=ce.div`
  flex: 1 1 0%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
`,HT=ce.div`
  flex: 1 1 0%;
  display: flex;
  flex-direction: column;
  min-height: 0;
  box-sizing: border-box;
  padding: 8px;
  gap: 10px;
`,YT=ce.div`
  padding: 8px;
  border: none;
  border-radius: 12px;
  cursor: ${e=>e.$isDragging?"grabbing":"grab"};
  text-align: center;
  background: transparent;
  transition: all 0.2s;
  user-select: none;
  opacity: ${e=>e.$isDragging?.5:1};

  &:hover {
    box-shadow: 0 4px 12px rgba(76, 86, 103, 0.18);
    transform: translateY(-2px);
  }
`,$T=ce.div`
  width: 52px;
  height: 40px;
  margin: 0 auto 6px;
  border-radius: 8px;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
`,UT=ce.svg`
  width: 48px;
  height: 32px;
`,XT=ce.div`
  font-size: 10px;
  font-weight: 500;
  color: #2c3e50;
`,FT=ce.div.attrs(e=>({style:{left:`${e.$x}px`,top:`${e.$y}px`,opacity:e.$visible?.8:0}}))`
  position: fixed;
  pointer-events: none;
  z-index: 10000;
  transform: translate(-50%, -50%);
  background: white;
  border: 2px solid #3498db;
  border-radius: 4px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: opacity 0.2s;
`,QT=({element:e,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=y.useState(!1),[d,p]=y.useState({x:0,y:0}),h=y.useRef({x:0,y:0}),g=y.useCallback(v=>{if(v.button!==0)return;const A={x:v.clientX,y:v.clientY};h.current=A,u(!0),p(A),o(e,A);let w=!1;const S=M=>{const R={x:M.clientX,y:M.clientY},E=Math.abs(R.x-A.x),k=Math.abs(R.y-A.y);(E>3||k>3)&&(w=!0),p(R),a(R)},C=M=>{const R={x:M.clientX,y:M.clientY};if(u(!1),i(R),!w&&l){const E=Math.abs(R.x-A.x),k=Math.abs(R.y-A.y);E<=1&&k<=1&&l(e)}document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",C),v.preventDefault()},[e,o,a,i,l]),m=({type:v})=>{const A="#4c5667",w="#e7eaef";switch(v){case"button":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"8",y:"14",width:"64",height:"28",rx:"6",fill:w,stroke:A,strokeWidth:"2"}),b.jsx("rect",{x:"22",y:"26",width:"36",height:"6",rx:"3",fill:A})]});case"container":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"6",fill:"#ffffff",stroke:A,strokeWidth:"2",strokeDasharray:"5 4"}),b.jsx("rect",{x:"12",y:"18",width:"20",height:"6",rx:"3",fill:A,opacity:"0.4"}),b.jsx("rect",{x:"12",y:"28",width:"44",height:"6",rx:"3",fill:A,opacity:"0.2"})]});case"input":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"6",y:"14",width:"68",height:"24",rx:"4",fill:"#ffffff",stroke:A,strokeWidth:"2"}),b.jsx("rect",{x:"12",y:"22",width:"26",height:"4",rx:"2",fill:A,opacity:"0.6"})]});case"textarea":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"4",fill:"#ffffff",stroke:A,strokeWidth:"2"}),b.jsx("rect",{x:"12",y:"18",width:"44",height:"4",rx:"2",fill:A,opacity:"0.6"}),b.jsx("rect",{x:"12",y:"24",width:"40",height:"4",rx:"2",fill:A,opacity:"0.4"}),b.jsx("rect",{x:"12",y:"30",width:"36",height:"4",rx:"2",fill:A,opacity:"0.3"})]});case"checkbox":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"28",y:"16",width:"20",height:"20",rx:"4",fill:"#ffffff",stroke:A,strokeWidth:"3"}),b.jsx("polyline",{points:"31,26 36,32 45,20",fill:"none",stroke:A,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]});case"radio":return b.jsxs(b.Fragment,{children:[b.jsx("circle",{cx:"38",cy:"28",r:"10",fill:"#ffffff",stroke:A,strokeWidth:"3"}),b.jsx("circle",{cx:"38",cy:"28",r:"4",fill:A})]});case"dropdown":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"6",y:"14",width:"68",height:"24",rx:"4",fill:"#ffffff",stroke:A,strokeWidth:"2"}),b.jsx("rect",{x:"12",y:"22",width:"30",height:"4",rx:"2",fill:A,opacity:"0.6"}),b.jsx("polygon",{points:"62,26 58,22 66,22",fill:A})]});case"image":return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"6",y:"10",width:"68",height:"36",rx:"4",fill:"#ffffff",stroke:A,strokeWidth:"2"}),b.jsx("circle",{cx:"52",cy:"22",r:"4",fill:A,opacity:"0.5"}),b.jsx("polyline",{points:"14,40 28,28 36,36 44,30 60,40",fill:"none",stroke:A,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})]});default:return b.jsxs(b.Fragment,{children:[b.jsx("rect",{x:"8",y:"12",width:"60",height:"32",rx:"6",fill:w,stroke:A,strokeWidth:"2"}),b.jsx("rect",{x:"18",y:"24",width:"40",height:"6",rx:"3",fill:A,opacity:"0.6"})]})}};return b.jsxs(b.Fragment,{children:[b.jsxs(YT,{"data-library-element-type":e.type,"data-library-element-label":e.label,$isDragging:c,onMouseDown:g,children:[b.jsx($T,{children:b.jsx(UT,{viewBox:"0 0 80 56",role:"presentation","aria-hidden":"true",children:b.jsx(m,{type:e.type})})}),b.jsx(XT,{children:e.label})]}),b.jsx(FT,{$x:d.x,$y:d.y,$visible:c,children:e.label})]})},GT={type:"text",label:"Text",icon:"T",defaultProps:{width:120,height:24,text:"Some text",style:{textAlign:"left",borderColor:"#e0e0e0"},properties:{lineWidth:0}},constraints:{minWidth:10,minHeight:10}},gm=[{type:"button",label:"Button",icon:"",defaultProps:{width:100,height:36,text:"Button",style:{backgroundColor:"#e9ecef",borderColor:"#6c757d",textAlign:"center"}},constraints:{minWidth:10,minHeight:10}},{type:"container",label:"Container",icon:"",defaultProps:{width:300,height:200,text:"",style:{backgroundColor:"#f8f9fa",borderColor:"#dee2e6"}},constraints:{minWidth:10,minHeight:10}},{type:"input",label:"Text Input",icon:"",defaultProps:{width:130,height:30,text:"Input field",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:10,minHeight:10}},{type:"textarea",label:"Text Area",icon:"",defaultProps:{width:250,height:120,text:"Text area",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:100,minHeight:20}},{type:"checkbox",label:"Checkbox",icon:"",defaultProps:{width:20,height:20,text:"",style:{backgroundColor:"white",borderColor:"#6c757d"}},constraints:{minWidth:10,minHeight:10}},{type:"radio",label:"Radio",icon:"",defaultProps:{width:20,height:20,text:"",style:{backgroundColor:"white",borderColor:"#6c757d"}},constraints:{minWidth:10,minHeight:10}},{type:"dropdown",label:"Dropdown",icon:"",defaultProps:{width:130,height:30,text:"Select option",style:{backgroundColor:"white",borderColor:"#ced4da"}},constraints:{minWidth:10,minHeight:10}},{type:"image",label:"Image",icon:"",defaultProps:{width:200,height:150,text:"",imageSrc:"",style:{backgroundColor:"#ffffff",borderColor:"#dee2e6"}},constraints:{minWidth:10,minHeight:10}}],Ip=gm.reduce((e,o)=>(o.constraints&&(e[o.type]=o.constraints),e),{}),lw=[{type:"rectangle",label:"Rectangle",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"rectangle",label:"Square",icon:"",defaultProps:{width:140,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{constrainRatio:!0}}},{type:"oval",label:"Oval",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"oval",label:"Circle",icon:"",defaultProps:{width:140,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{constrainRatio:!0}}},{type:"rhombus",label:"Rhombus",icon:"",defaultProps:{width:160,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"triangle",label:"Triangle",icon:"",defaultProps:{width:160,height:140,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"cylinder",label:"Cylinder",icon:"",defaultProps:{width:160,height:180,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"pipe",label:"Pipe",icon:"",defaultProps:{width:160,height:160,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"parallelogram",label:"Parallelogram",icon:"",defaultProps:{width:180,height:120,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"hexagon",label:"Hexagon",icon:"",defaultProps:{width:200,height:173,text:"",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"}}},{type:"card",label:"Card",icon:"",defaultProps:{width:200,height:140,text:"Card",style:{backgroundColor:"#ffffff",borderColor:"#6c757d"},properties:{textAlign:"left"}}},{type:"note",label:"Note",icon:"",defaultProps:{width:200,height:200,text:"Note",style:{backgroundColor:"#f7dd72",borderColor:"#c7a744",textAlign:"left"},properties:{textAlign:"left",fontFamily:'"Comic Sans MS", "Comic Sans", cursive',shadow:!0,shadowColour:"rgba(0,0,0,0.18)",shadowOpacity:.35,shadowBlurRadius:16,opacity:1}}},{type:"actor",label:"Actor",icon:"",defaultProps:{width:100,height:220,text:"actor",style:{backgroundColor:"transparent",borderColor:"#2c3e50",textAlign:"center"},properties:{lineWidth:4,textAlign:"center",textColour:"#2c3e50",fontSize:16,fontFamily:'"Comic Sans MS", "Comic Sans", cursive'}}}];Object.assign(Ip,{rectangle:{minWidth:10,minHeight:10},oval:{minWidth:10,minHeight:10},rhombus:{minWidth:10,minHeight:10},triangle:{minWidth:10,minHeight:10},cylinder:{minWidth:10,minHeight:10},pipe:{minWidth:10,minHeight:10},parallelogram:{minWidth:10,minHeight:10},hexagon:{minWidth:10,minHeight:10},card:{minWidth:10,minHeight:10},note:{minWidth:10,minHeight:10},actor:{minWidth:10,minHeight:10}});const Gx=new Set([Gt("project-v2"),Gt("current-project"),Gt("history-panel-open"),Gt("floating-toolbar-position"),Gt("library-properties-split"),Gt("project")]);function WT(){const e=[];for(let o=0;o<window.localStorage.length;o+=1){const a=window.localStorage.key(o);a&&(a.startsWith(aw)||Gx.has(a))&&e.push(a)}return Array.from(new Set([...e,...Gx]))}function qT(){try{WT().forEach(o=>{window.localStorage.removeItem(o)})}catch(e){console.error("Failed to reset local state:",e)}}function VT(){typeof window>"u"||(window[iw]=!0)}function _o(){return typeof window>"u"?!1:!!window[iw]}const KT=ce.div`
  display: flex;
  flex-direction: column;
  flex: 0 1 auto;
  min-height: 0;
  gap: 10px;
  padding: 0;
`,ZT=ce.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin: 0;
`,JT=ce.h4`
  margin: 0 0 0 5px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #6c757d;
`,eI=ce.div`
  display: flex;
  gap: 1px;
`,Jh=ce.button`
  border: none;
  background: transparent;
  color: #2c3e50;
  width: 30px;
  height: 26px;
  border-radius: 6px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease, color 0.15s ease, transform 0.15s ease;

  &:disabled {
    cursor: not-allowed;
    opacity: 0.5;
  }

  &:hover:not(:disabled) {
    background: #f4f6f8;
    transform: translateY(-1px);
  }
`,ep=ce.span`
  display: inline-flex;
  width: 14px;
  height: 14px;
  align-items: center;
  justify-content: center;

  svg {
    width: 14px;
    height: 14px;
    display: block;
  }
`,tI=ce.div`
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  overflow: hidden;
  background: #ffffff;
  display: flex;
  flex-direction: column;
  flex: 0 1 auto;
  max-height: 100%;
  width: 100%;
  align-self: stretch;
`,nI=ce.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  background: #f8f9fa;
  padding: 6px 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: #6c757d;
  flex-shrink: 0;
  column-gap: 12px;

  > div:last-child {
    text-align: center;
  }
`,oI=ce.div`
  overflow-y: auto;
  flex: 1 1 0%;
  min-height: 0;
  width: 100%;
  align-self: stretch;
`,rI=ce.div`
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  padding: 6px 10px;
  font-size: 12px;
  color: #2c3e50;
  border-top: 1px solid #eef1f4;

  &:nth-child(even) {
    background: #fbfcfd;
  }
`,Wx=ce.div`
  display: flex;
  align-items: center;
  justify-content: ${e=>e.$align==="right"?"flex-end":"flex-start"};
  gap: 4px;
  max-width: 100%;
`,aI=ce.div`
  padding: 14px 16px;
  font-size: 12px;
  color: #6c757d;
  border: 1px dashed #d6dbe1;
  border-radius: 6px;
  text-align: center;
  background: #f9fbff;
`,iI=ce.div`
  display: inline-flex;
  align-items: center;
  border: 1px solid #d4d9de;
  border-radius: 4px;
  overflow: hidden;
  background: #ffffff;
`,qx=ce.button`
  background: #f1f3f5;
  border: none;
  padding: 4px 6px;
  font-size: 12px;
  cursor: pointer;
  color: #2c3e50;

  &:hover:not(:disabled) {
    background: #e2e6ea;
  }

  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
`,sI=ce.input`
  width: 54px;
  border: none;
  text-align: center;
  font-size: 12px;
  padding: 4px;
  outline: none;
  color: #2c3e50;
  background: #ffffff;

  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &[type='number'] {
    -moz-appearance: textfield;
  }
`,lI=ce.input`
  padding: 0;
  width: 30px;
  height: 24px;
  border: none;
  background: transparent;
`,cI=ce.input`
  width: 86px;
  border: 1px solid #d4d9de;
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 12px;
  color: #2c3e50;
  background: #ffffff;
  outline: none;
`,Vx=ce.div`
  font-size: 12px;
  color: #88909b;
  max-width: 100%;
  text-align: right;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,uI=ce.select`
  border: 1px solid #d4d9de;
  border-radius: 4px;
  padding: 4px 6px;
  font-size: 12px;
  color: #2c3e50;
  background: #ffffff;
  display: block;
  ${e=>e.$width?`width: ${e.$width}px; max-width: ${e.$width}px;`:""}
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,Po='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',dI=[{label:"System Default",value:Po},{label:"Arial",value:'Arial, "Helvetica Neue", Helvetica, sans-serif'},{label:"Georgia",value:'Georgia, "Times New Roman", Times, serif'},{label:"Courier New",value:'"Courier New", Courier, monospace'},{label:"Verdana",value:"Verdana, Geneva, sans-serif"},{label:"Comic Sans",value:'"Comic Sans MS", "Comic Sans", cursive'}],Ko="#000000",Ii=.36,jr=6,oa=0,ra=2,cw=/^#([0-9a-fA-F]{6})$/,tp=e=>typeof e=="string"&&cw.test(e)?e.toLowerCase():Ko,Kx=e=>typeof e=="number"&&Number.isFinite(e)?Math.min(1,Math.max(0,e)):Ii,Zx=e=>typeof e=="number"&&Number.isFinite(e)?Math.max(0,e):jr,fI=e=>{const o=cw.exec(e);if(!o)return{red:0,green:0,blue:0};const a=parseInt(o[1],16),i=a>>16&255,l=a>>8&255,c=a&255;return{red:i,green:l,blue:c}},uw=(e,o)=>{const{red:a,green:i,blue:l}=fI(e),c=Math.min(1,Math.max(0,o));return`rgba(${a}, ${i}, ${l}, ${c})`},hI=()=>{const e={},o=a=>{const i=a.defaultProps.properties,l=a.defaultProps.style;!i&&!l||(e[a.type]={properties:i?{...i}:void 0,style:l?{...l}:void 0})};return[...gm,...lw].forEach(o),e},pI=hI(),Qo=(e,o,a={})=>({id:e,type:"number",group:o,min:a.min,max:a.max,step:a.step,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),nd=(e,o,a={})=>({id:e,type:"boolean",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),dw=(e,o,a={})=>({id:e,type:"color",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),Jx=(e,o,a={})=>({id:e,type:"string",group:o,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),ym=(e,o,a)=>({id:e,type:"select",group:o,options:a.options,defaultValue:a.defaultValue,label:a.label,description:a.description,isReadOnly:a.isReadOnly??!1}),Xa=(e=Po)=>ym("fontFamily","custom",{options:dI,defaultValue:e}),mI=[{label:"Normal",value:"normal"},{label:"Bold",value:"bold"}],gI=[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}],Fa=e=>Qo("lineWidth","custom",{defaultValue:e,min:0,max:99,step:1}),Qa=e=>Qo("fontSize","custom",{defaultValue:e,min:8,max:144,step:1}),Ga=(e="normal")=>ym("fontWeight","custom",{options:mI,defaultValue:e}),Wa=e=>ym("textAlign","custom",{options:gI,defaultValue:e}),Ot=(e,o)=>dw(e,"custom",{defaultValue:o}),Mr=e=>{const o=[Fa(e.lineWidth??2)];return o.push(Ot("lineColour",e.lineColour)),e.backgroundColour&&o.push(Ot("backgroundColour",e.backgroundColour)),e.textColour&&o.push(Ot("textColour",e.textColour)),o.push(Qa(e.fontSize)),o.push(Ga(e.fontWeight)),o.push(Xa(e.fontFamily)),o.push(Wa(e.textAlign)),o},yI=[Qo("posX","common",{min:0,max:4e3,step:1}),Qo("posY","common",{min:0,max:4e3,step:1}),Qo("width","common",{min:1,max:4e3,step:1}),Qo("height","common",{min:1,max:4e3,step:1}),nd("shadow","common",{defaultValue:!1}),dw("shadowColour","common",{defaultValue:Ko}),Qo("shadowOpacity","common",{defaultValue:Ii,min:0,max:1,step:.05}),Qo("shadowBlurRadius","common",{defaultValue:jr,min:0,max:64,step:.5}),nd("constrainRatio","common",{defaultValue:!1,label:"constrainRatio"}),Qo("opacity","common",{defaultValue:1,min:0,max:1,step:.05})],xm=[Jx("id","immutable",{isReadOnly:!0}),Jx("type","immutable",{isReadOnly:!0})],xI={button:[...Mr({lineColour:"#6c757d",backgroundColour:"#e9ecef",textColour:"#2c3e50",fontSize:14,textAlign:"center"})],text:[...Mr({lineWidth:1,lineColour:"#e0e0e0",backgroundColour:"transparent",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],input:[...Mr({lineColour:"#ced4da",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],textarea:[...Mr({lineColour:"#ced4da",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:14,textAlign:"left"})],container:[...Mr({lineColour:"#dee2e6",backgroundColour:"#f8f9fa",textColour:"#2c3e50",fontSize:16,textAlign:"left"})],rectangle:[...Mr({lineColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],oval:[...Mr({lineColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],rhombus:[...Mr({lineColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],triangle:[...Mr({lineColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],cylinder:[...Mr({lineColour:"#6c757d",backgroundColour:"#ffffff",textColour:"#2c3e50",fontSize:18,textAlign:"center"})],pipe:[Fa(2),Ot("lineColour","#6c757d"),Ot("backgroundColour","#ffffff"),Ot("textColour","#2c3e50"),Qa(18),Ga(),Xa(),Wa("center")],parallelogram:[Fa(2),Ot("lineColour","#6c757d"),Ot("backgroundColour","#ffffff"),Ot("textColour","#2c3e50"),Qa(18),Ga(),Xa(),Wa("center")],hexagon:[Fa(2),Ot("lineColour","#6c757d"),Ot("backgroundColour","#ffffff"),Ot("textColour","#2c3e50"),Qa(18),Ga(),Xa(),Wa("center")],card:[Fa(2),Ot("lineColour","#6c757d"),Ot("backgroundColour","#ffffff"),Ot("textColour","#2c3e50"),Qa(18),Ga(),Xa(),Wa("left")],note:[Fa(2),Ot("lineColour","#c7a744"),Ot("backgroundColour","#f7dd72"),Ot("textColour","#40320d"),Qa(14),Ga(),Wa("left"),Xa('"Comic Sans MS", "Comic Sans", cursive')],actor:[Qo("lineWidth","custom",{defaultValue:4,min:1,max:99,step:1}),Ot("lineColour","#2c3e50"),Ot("backgroundColour","transparent"),Ot("textColour","#2c3e50"),Qa(16),Ga(),Xa('"Comic Sans MS", "Comic Sans", cursive'),Wa("center")],image:[Fa(0),Ot("lineColour","#dee2e6"),Ot("backgroundColour","#ffffff")],checkbox:[nd("isChecked","custom",{defaultValue:!1}),Qo("lineWidth","custom",{defaultValue:2,min:0,max:10,step:1}),Ot("lineColour","#6c757d"),Ot("fillColour","#ffffff")],radio:[nd("isChecked","custom",{defaultValue:!1}),Qo("lineWidth","custom",{defaultValue:2,min:0,max:10,step:1}),Ot("lineColour","#6c757d"),Ot("fillColour","#ffffff")],dropdown:[Fa(2),Ot("lineColour","#ced4da"),Ot("backgroundColour","#ffffff"),Ot("textColour","#2c3e50"),Qa(14),Ga(),Wa("left"),Xa()]},_p=new Set(["posX","posY","width","height"]),fw=new Set(xm.map(e=>e.id));function _i(e){return[...yI,...xI[e]??[],...xm]}function bI(e){return _i(e).reduce((a,i)=>(i.defaultValue!==void 0&&(a[i.id]=i.defaultValue),a),{})}function vI(e,o){return{...bI(e),...o??{}}}const aa=e=>typeof e=="number"&&Number.isFinite(e),Fo=e=>typeof e=="string",eb=e=>typeof e=="boolean",wI=/^#[0-9a-fA-F]{6}$/,hw=(e,o)=>{if(!Fo(e))return o;const a=e.startsWith("#")?e:`#${e}`;return wI.test(a)?a.toLowerCase():o};function ki(e,o){const a={...vI(e.type,o)};_i(e.type).forEach(p=>{p.type==="select"&&(a[p.id]=mw(p,a[p.id]))}),typeof o?.constrainProportions=="boolean"&&a.constrainRatio===void 0&&(a.constrainRatio=!!o.constrainProportions),Object.prototype.hasOwnProperty.call(a,"constrainProportions")&&delete a.constrainProportions;const l=o;a.shadow===void 0&&typeof l?.dropShadow=="boolean"&&(a.shadow=l.dropShadow),Object.prototype.hasOwnProperty.call(a,"dropShadow")&&delete a.dropShadow,Object.prototype.hasOwnProperty.call(a,"imageSrc")&&delete a.imageSrc;const c=hw(a.shadowColour??Ko,Ko);a.shadowColour=c;const u=aa(a.shadowOpacity)?Math.min(1,Math.max(0,a.shadowOpacity)):Ii;a.shadowOpacity=u;const d=aa(a.shadowBlurRadius)?Math.max(0,a.shadowBlurRadius):jr;return a.shadowBlurRadius=d,a.id=e.id,a.type=e.type,a.posX=e.x,a.posY=e.y,a.width=e.width,a.height=e.height,a.shadow=eb(a.shadow)?a.shadow:!1,a.constrainRatio=eb(a.constrainRatio)?a.constrainRatio:!1,a.opacity=aa(a.opacity)?a.opacity:1,a}function pw(e,o){const a={};Fo(o.lineColour)&&(a.borderColor=o.lineColour);const i=Fo(o.backgroundColour)?o.backgroundColour:Fo(o.fillColour)?o.fillColour:void 0;return i&&(a.backgroundColor=i),Fo(o.textColour)&&(a.textColor=o.textColour),aa(o.fontSize)&&(a.fontSize=o.fontSize),Fo(o.fontWeight)&&(o.fontWeight==="normal"||o.fontWeight==="bold")&&(a.fontWeight=o.fontWeight),Fo(o.textAlign)&&(o.textAlign==="left"||o.textAlign==="center"||o.textAlign==="right")&&(a.textAlign=o.textAlign),Fo(o.fontFamily)?a.fontFamily=o.fontFamily:a.fontFamily=Po,(e==="checkbox"||e==="radio")&&!a.backgroundColor&&Fo(o.fillColour)&&(a.backgroundColor=o.fillColour),a}function Os(e){const o=ki(e,e.properties),a=pw(e.type,o);let i=typeof e.imageSrc=="string"?e.imageSrc:void 0;const l=typeof e.properties?.imageSrc=="string"?e.properties.imageSrc:void 0;if(!i&&l&&(i=l),typeof o.imageSrc=="string"){const u=o.imageSrc;typeof u=="string"&&u.length>0&&(i=u),delete o.imageSrc}typeof i=="string"&&i.trim().length===0&&(i=void 0);const c={...o};return{...e,imageSrc:i,properties:c,style:{...e.style,...a}}}const AI=(e,o,a)=>{if(a==="width"){const i=o.constraints?.minWidth;typeof i=="number"&&(e=Math.max(e,i))}if(a==="height"){const i=o.constraints?.minHeight;typeof i=="number"&&(e=Math.max(e,i))}return e},CI=(e,o)=>{let a=e;return typeof o.min=="number"&&(a=Math.max(a,o.min)),typeof o.max=="number"&&(a=Math.min(a,o.max)),a},mw=(e,o)=>{const a=Fo(o)?o:String(e.defaultValue??e.options[0]?.value??"");if(e.options.some(c=>c.value===a))return a;const l=e.defaultValue;return typeof l=="string"?l:String(e.options[0]?.value??"")};function Op(e,o,a){const l=_i(e.type).find(m=>m.id===o);if(!l||fw.has(l.id))return console.warn("updateElementWithProperty: missing schema or immutable",o,e.type),e;const c=ki(e,e.properties),u={...c};let d=a;if(l.type==="boolean")d=!!a;else if(l.type==="number"){const m=aa(c[o])?c[o]:typeof l.defaultValue=="number"?l.defaultValue:0;let v=typeof a=="number"?a:Number(a);Number.isFinite(v)||(v=m),v=CI(v,l),v=AI(v,e,o),d=v}else if(l.type==="color"){const m=Fo(c[o])?c[o]:typeof l.defaultValue=="string"?l.defaultValue:"#000000";d=hw(a,m)}else l.type==="select"?d=mw(l,a):l.type==="string"&&(d=Fo(a)?a:String(a??""));u[o]=d;const p={...e};o==="posX"&&aa(d)&&(p.x=d),o==="posY"&&aa(d)&&(p.y=d),o==="width"&&aa(d)&&(p.width=d),o==="height"&&aa(d)&&(p.height=d);const h=ki(p,u),g=pw(p.type,h);return{...p,properties:h,style:{...p.style,...g}}}function gw(e,o){return Object.entries(o).reduce((a,[i,l])=>l==null?Op(a,i,l??null):Op(a,i,l),e)}function SI(e){const o=ki(e,e.properties),a=_i(e.type),i={...o};a.forEach(p=>{p.group==="immutable"||_p.has(p.id)||(p.defaultValue!==void 0?i[p.id]=p.defaultValue:delete i[p.id])});const l=pI[e.type];l?.properties&&Object.entries(l.properties).forEach(([p,h])=>{if(!(_p.has(p)||fw.has(p))){if(h===void 0){delete i[p];return}i[p]=h}});const c={...e,style:l?.style?{...l.style}:void 0,properties:i},u=Os(c),d=l?.style?{...l.style,...u.style}:u.style;return{...u,style:d}}function yw(){return xm.map(e=>e.id)}function EI(){return Array.from(_p)}const MI=e=>e.type==="number",RI=e=>e.type==="select",xw=(e,o)=>{const a=typeof o.min=="number"?o.min:-1/0,i=typeof o.max=="number"?o.max:1/0;return Math.min(i,Math.max(a,e))},tb=e=>typeof e=="boolean"?e?"true":"false":typeof e=="number"?Number.isFinite(e)?e.toString():"":typeof e=="string"?e:"",kI=[{id:"startX",type:"number",group:"common",label:"startX",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"startY",type:"number",group:"common",label:"startY",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"endX",type:"number",group:"common",label:"endX",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"endY",type:"number",group:"common",label:"endY",defaultValue:0,min:-4e3,max:4e3,step:1},{id:"lineColour",type:"color",group:"custom",label:"lineColour",defaultValue:"#6c757d"},{id:"lineWidth",type:"number",group:"custom",label:"lineWidth",defaultValue:2,min:.5,max:20,step:.5},{id:"startMark",type:"select",group:"custom",label:"startMark",defaultValue:"None",options:[{value:"None",label:"None"},{value:"HollowArrow",label:"HollowArrow"}]},{id:"endMark",type:"select",group:"custom",label:"endMark",defaultValue:"None",options:[{value:"None",label:"None"},{value:"HollowArrow",label:"HollowArrow"}]},{id:"opacity",type:"number",group:"custom",label:"opacity",defaultValue:1,min:0,max:1,step:.05},{id:"shadow",type:"boolean",group:"custom",label:"shadow",defaultValue:!1},{id:"shadowColour",type:"color",group:"custom",label:"shadowColour",defaultValue:Ko},{id:"shadowOpacity",type:"number",group:"custom",label:"shadowOpacity",defaultValue:Ii,min:0,max:1,step:.05},{id:"shadowBlurRadius",type:"number",group:"custom",label:"shadowBlurRadius",defaultValue:jr,min:0,max:64,step:.5},{id:"id",type:"string",group:"immutable",label:"id",isReadOnly:!0},{id:"type",type:"string",group:"immutable",label:"type",isReadOnly:!0}],TI=e=>{if(!e)return"#000000";const o=e.trim().toLowerCase();if(/^#([0-9a-f]{6}|[0-9a-f]{3})$/i.test(o)){if(o.length===4){const a=o[1],i=o[2],l=o[3];return`#${a}${a}${i}${i}${l}${l}`}return o}return"#000000"},II=({schema:e,value:o,onNumberCommit:a})=>{const i=Me.useMemo(()=>typeof o=="number"&&Number.isFinite(o)?o:typeof e.defaultValue=="number"?e.defaultValue:0,[e.defaultValue,o]),l=e.step??1,c=typeof e.min=="number"?e.min:-1/0,u=typeof e.max=="number"?e.max:1/0,d=Me.useMemo(()=>l%1===0?0:l.toString().split(".")[1]?.length??0,[l]),p=Me.useCallback(S=>d>0?Number(S.toFixed(d)):Math.round(S),[d]),[h,g]=Me.useState(()=>String(i));Me.useEffect(()=>{g(String(i))},[i]);const m=Me.useCallback(S=>{const C=p(S),M=xw(C,e);a(e,M),g(String(M))},[p,a,e]),v=Me.useCallback(S=>{g(S.target.value)},[]),A=Me.useCallback(()=>{const S=Number(h);Number.isFinite(S)?m(S):g(String(i))},[m,h,i]),w=Me.useCallback(S=>{if(S.key==="Enter"){const C=Number(h);Number.isFinite(C)?m(C):g(String(i))}},[m,h,i]);return b.jsxs(iI,{children:[b.jsx(qx,{type:"button",onClick:()=>m(i-l),disabled:i-l<c,children:"-"}),b.jsx(sI,{type:"number",value:h,onChange:v,onBlur:A,onKeyDown:w,min:e.min,max:e.max,step:l}),b.jsx(qx,{type:"button",onClick:()=>m(i+l),disabled:i+l>u,children:"+"})]})},_I=({schema:e,value:o,isReadOnly:a,onBooleanToggle:i,onNumberCommit:l,onSelectChange:c,onTextChange:u})=>{if(a){const d=tb(o),p=e.id==="id"&&typeof d=="string"&&d.length>12?`${d.slice(0,12)}`:d;return b.jsx(Vx,{title:typeof d=="string"?d:void 0,children:p})}if(e.type==="boolean")return b.jsx("input",{type:"checkbox",checked:!!o,onChange:d=>i(e,d.target.checked)});if(MI(e))return b.jsx(II,{schema:e,value:o,onNumberCommit:l});if(e.type==="color"){const d=TI(typeof o=="string"?o:null);return b.jsx(lI,{type:"color",value:d,onChange:p=>u(e,p.target.value)})}if(RI(e)){const d=typeof o=="string"?o:String(e.options[0]?.value??""),p=e.id==="fontFamily"?120:void 0;return b.jsx(uI,{value:d,onChange:h=>c(e,h.target.value),$width:p,children:e.options.map(h=>b.jsx("option",{value:h.value,children:h.label},h.value))})}if(e.type==="string"){const d=typeof o=="string"?o:"";return b.jsx(cI,{type:"text",value:d,onChange:p=>u(e,p.target.value)})}return b.jsx(Vx,{children:tb(o)})},Dp="#6c757d",jp=2,Xl="None",Ol=(e,o,a)=>Math.min(a,Math.max(o,e)),nb={lineColour:Dp,lineWidth:jp,opacity:1,shadow:!1,shadowColour:Ko,shadowOpacity:Ii,shadowBlurRadius:jr,startMark:Xl,endMark:Xl},En={updateElement(e,o,a){return Op(e,o,a)},applyElementBatch(e,o){return gw(e,o)},initialiseElement(e){return ki(e,e.properties)},getSchemaForElement(e){return _i(e)},normaliseConnector(e){const o=e.properties?{...e.properties}:{},a=typeof o.lineWidth=="number"?o.lineWidth:typeof o.strokeWidth=="number"?o.strokeWidth:void 0,i=Number.isFinite(a)?Ol(Number(a),.5,400):jp,l=typeof o.lineColour=="string"&&o.lineColour.trim().length>0?o.lineColour.toLowerCase():typeof o.strokeColour=="string"&&o.strokeColour.trim().length>0?o.strokeColour.toLowerCase():Dp,c=typeof o.opacity=="number"&&Number.isFinite(o.opacity)?Ol(o.opacity,0,1):1,u=o.shadow===void 0?!!o.dropShadow:!!o.shadow,d=tp(o.shadowColour??Ko),p=Kx(o.shadowOpacity),h=Zx(o.shadowBlurRadius??jr),g=m=>m==="HollowArrow"?"HollowArrow":Xl;return{...e,type:"line",startPoint:{x:Math.round(e.startPoint.x),y:Math.round(e.startPoint.y)},endPoint:{x:Math.round(e.endPoint.x),y:Math.round(e.endPoint.y)},properties:{lineColour:l,lineWidth:i,opacity:c,shadow:u,shadowColour:d,shadowOpacity:p,shadowBlurRadius:h,startMark:g(o.startMark),endMark:g(o.endMark)}}},applyConnectorProperties(e,o){const a=En.normaliseConnector(e),i={...nb,...a.properties??{},...o},l={lineColour:typeof i.lineColour=="string"&&i.lineColour.trim().length>0?i.lineColour.toLowerCase():Dp,lineWidth:Number.isFinite(i.lineWidth)?Ol(Number(i.lineWidth),.5,400):jp,opacity:Number.isFinite(i.opacity)?Ol(Number(i.opacity),0,1):1,shadow:!!i.shadow,shadowColour:tp(i.shadowColour??Ko),shadowOpacity:Kx(i.shadowOpacity),shadowBlurRadius:Zx(i.shadowBlurRadius??jr),startMark:i.startMark==="HollowArrow"?"HollowArrow":Xl,endMark:i.endMark==="HollowArrow"?"HollowArrow":Xl};return{...a,properties:l}},getConnectorDefaults(){return{...nb}},buildConnectorSnapshot(e){const o=En.normaliseConnector(e);return{...o.properties,startX:o.startPoint.x,startY:o.startPoint.y,endX:o.endPoint.x,endY:o.endPoint.y,id:o.id,type:o.type}},formatValueForSchema(e,o){if(e.type==="number"){const a=typeof o=="number"&&Number.isFinite(o)?o:typeof e.defaultValue=="number"?e.defaultValue:0,i=typeof e.min=="number"?e.min:Number.MIN_SAFE_INTEGER,l=typeof e.max=="number"?e.max:Number.MAX_SAFE_INTEGER;return Ol(a,i,l)}if(e.type==="boolean")return!!o;if(e.type==="color")return typeof o=="string"?tp(o):Ko;if(e.type==="select"){const a=new Set(e.options.map(i=>i.value));return typeof o=="string"&&a.has(o)?o:e.defaultValue??e.options[0]?.value??""}return o}},ob=e=>{const o=u=>(u.label??u.id??"").toString(),a=[...e].sort((u,d)=>o(u).localeCompare(o(d),void 0,{sensitivity:"base"})),i=u=>u.group==="immutable"||u.isReadOnly,l=a.filter(u=>!i(u)),c=a.filter(u=>i(u));return[...l,...c]};function OI({element:e,connector:o,immutableKeys:a,startAnchored:i,endAnchored:l}){return y.useMemo(()=>{if(e)return ob(_i(e.type)).map(u=>{const d=e.properties?.[u.id]??null,p=u.isReadOnly||u.group==="immutable"||a.has(u.id);return{schema:u,value:d,isReadOnly:p}});if(o){const c=En.buildConnectorSnapshot(o);return ob(kI).map(d=>{const p=c[d.id]??null,h=!!(i&&(d.id==="startX"||d.id==="startY")||l&&(d.id==="endX"||d.id==="endY")),g=d.isReadOnly||d.group==="immutable"||h;return{schema:d,value:p,isReadOnly:g}})}return[]},[e,o,a,i,l])}const DI=()=>b.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"}),b.jsx("path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"})]}),jI=()=>b.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),b.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"})]}),PI=()=>b.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20","aria-hidden":"true",focusable:"false",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"}),b.jsx("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"})]});function BI({selectedElement:e,selectedConnector:o,selectionCount:a,onPropertyChange:i,onCopyProperties:l,onPasteProperties:c,onResetProperties:u,canPasteProperties:d}){const h=y.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[])?"":"Ctrl",g=a===1&&e?e:null,m=a===1&&o&&!e?o:null,v=y.useMemo(()=>new Set(yw()),[]),A=!!m?.startAttachment,w=!!m?.endAttachment,S=OI({element:g,connector:m,immutableKeys:v,startAnchored:A,endAnchored:w}),C=y.useCallback((O,j)=>{O.isReadOnly||O.group==="immutable"||i(O.id,j)},[i]),M=y.useCallback((O,j)=>{O.isReadOnly||O.group==="immutable"||i(O.id,xw(j,O))},[i]),R=y.useCallback((O,j)=>{O.isReadOnly||O.group==="immutable"||i(O.id,j)},[i]),E=y.useCallback((O,j)=>{O.isReadOnly||O.group==="immutable"||i(O.id,j)},[i]),k=a===0?"Select an item to inspect its properties.":"Select a single item to inspect its properties.",I=!!(g||m),B=!!(g||m);return b.jsxs(KT,{children:[b.jsxs(ZT,{children:[b.jsx(JT,{children:"Properties"}),b.jsxs(eI,{children:[b.jsx(Jh,{$variant:"ghost",type:"button",onClick:l,disabled:!I,title:`Copy properties (${h}+Shift+C)`,"aria-label":"Copy properties",children:b.jsx(ep,{children:b.jsx(DI,{})})}),b.jsx(Jh,{$variant:"ghost",type:"button",onClick:c,disabled:!d,title:`Paste properties (${h}+Shift+V)`,"aria-label":"Paste properties",children:b.jsx(ep,{children:b.jsx(jI,{})})}),b.jsx(Jh,{$variant:"ghost",type:"button",onClick:u,disabled:!B,title:"Reset styling","aria-label":"Reset styling",children:b.jsx(ep,{children:b.jsx(PI,{})})})]})]}),!g&&!m?b.jsx(aI,{children:k}):b.jsxs(tI,{"data-property-table":"true",children:[b.jsxs(nI,{children:[b.jsx("div",{children:"Property"}),b.jsx("div",{children:"Value"})]}),b.jsx(oI,{"data-property-table-body":"true",children:S.map(O=>b.jsxs(rI,{"data-property-id":O.schema.id,children:[b.jsx(Wx,{children:O.schema.label??O.schema.id}),b.jsx(Wx,{$align:"right",children:b.jsx(_I,{schema:O.schema,value:O.value,isReadOnly:O.isReadOnly,onBooleanToggle:C,onNumberCommit:M,onSelectChange:R,onTextChange:E})})]},O.schema.id))})]})]})}const rb=Gt("library-properties-split"),Dl=.3,np=14;function zI({isCollapsed:e,onDragStart:o,onDragMove:a,onDragEnd:i,onElementClick:l,selectedElement:c,selectedConnector:u,selectionCount:d,onPropertyChange:p,onCopyProperties:h,onPasteProperties:g,onResetProperties:m,canPasteProperties:v}){const[A,w]=y.useState(!e),S=y.useRef(null),C=y.useCallback(()=>{if(typeof window>"u")return Dl;try{const j=window.localStorage.getItem(rb);if(!j)return Dl;const U=Number.parseFloat(j);return Number.isFinite(U)?Math.min(.85,Math.max(.2,U)):Dl}catch{return Dl}},[]),[M,R]=y.useState(()=>C()),[E,k]=y.useState(!1);y.useEffect(()=>{if(e)w(!1);else{const j=setTimeout(()=>{w(!0)},300);return()=>clearTimeout(j)}},[e]),y.useEffect(()=>{if(!(typeof window>"u")&&!(M<=0)&&!_o())try{window.localStorage.setItem(rb,M.toString())}catch{}},[M]),y.useEffect(()=>{if(typeof window>"u")return;const j=()=>{R(Dl)};return window.addEventListener(ec,j),()=>{window.removeEventListener(ec,j)}},[]),y.useEffect(()=>{if(!A||!S.current)return;const j=S.current.getBoundingClientRect();if(j.height===0)return;const U=170,G=140,X=Math.min(.85,Math.max(0,(j.height-U-np)/j.height));if(X<=0){M!==0&&R(0);return}const W=Math.min(X,Math.max(0,G/j.height)),J=Math.min(X,Math.max(W,M));Math.abs(J-M)>1e-4&&R(J)},[A,M]);const I=y.useCallback(j=>{if(!S.current)return;const U=S.current.getBoundingClientRect();if(U.height===0)return;j.preventDefault(),k(!0);const G=j.clientY,X=M,W=170,J=140,oe=Y=>{const z=Math.min(.85,Math.max(0,(U.height-W-np)/U.height));if(z<=0)return 0;const L=Math.min(z,Math.max(0,J/U.height));return Math.min(z,Math.max(L,Y))},Z=Y=>{const z=Y.clientY-G,L=oe(X+z/U.height);R(L)},D=()=>{k(!1),document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",D)},[M]),B=y.useCallback(j=>{if(!S.current||j.touches.length!==1)return;const U=S.current.getBoundingClientRect();if(U.height===0)return;const G=j.touches[0];j.preventDefault();const X=G.clientY,W=M,J=170,oe=140;k(!0);const Z=z=>{const L=Math.min(.85,Math.max(0,(U.height-J-np)/U.height));if(L<=0)return 0;const T=Math.min(L,Math.max(0,oe/U.height));return Math.min(L,Math.max(T,z))},D=z=>{if(z.touches.length!==1)return;const L=z.touches[0].clientY-X,T=Z(W+L/U.height);R(T)},Y=()=>{k(!1),document.removeEventListener("touchmove",D),document.removeEventListener("touchend",Y),document.removeEventListener("touchcancel",Y)};document.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("touchend",Y),document.addEventListener("touchcancel",Y)},[M]),O=`${(M*100).toFixed(2)}%`;return b.jsx(DT,{$isCollapsed:e,children:A&&b.jsxs(jT,{ref:S,children:[b.jsx(PT,{"data-element-library-section":"true",style:{flex:`0 0 ${O}`,minHeight:"140px"},children:b.jsx(BT,{children:gm.map(j=>b.jsx(QT,{element:j,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l},j.type))})}),b.jsx(zT,{onMouseDown:I,onTouchStart:B,$isDragging:E,"aria-label":"Resize library and properties",role:"separator","data-library-resizer":"true"}),b.jsx(NT,{children:b.jsx(LT,{"data-library-properties":"true",children:b.jsx(HT,{"data-property-scroll-content":"true",children:b.jsx(BI,{selectedElement:c,selectedConnector:u,selectionCount:d,onPropertyChange:p,onCopyProperties:h,onPasteProperties:g,onResetProperties:m,canPasteProperties:v})})})})]})})}const NI=ce.div.attrs(e=>e.$isDocked?{}:{style:{top:`${e.$top}px`,left:`${e.$left}px`}})`
  position: ${e=>e.$isDocked?"static":"absolute"};
  display: flex;
  flex-direction: ${e=>e.$orientation==="vertical"?"column":"row"};
  align-items: center;
  gap: ${e=>e.$orientation==="vertical"?"6px":"4px"};
  padding: ${e=>e.$orientation==="vertical"?"6px 4px":"4px 6px"};
  background: ${e=>e.$isDocked?"rgba(255, 255, 255, 0.85)":"rgba(255, 255, 255, 0.9)"};
  border: none;
  border-radius: ${e=>e.$orientation==="vertical"?"16px":"14px"};
  box-shadow: ${e=>e.$isDocked?"none":"0 12px 30px rgba(76, 86, 103, 0.12)"};
  backdrop-filter: blur(12px);
  z-index: ${e=>e.$isDocked?1200:100};
  transition: box-shadow 0.3s ease;
  touch-action: none;
  user-select: none;
  ${e=>e.$orientation==="vertical"&&lr`
    width: 36px;
    min-width: 36px;
    max-width: 36px;
  `}

  &:hover {
    box-shadow: ${e=>e.$isDocked?"none":"0 16px 35px rgba(76, 86, 103, 0.18)"};
  }
`,LI=ce.button`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  border: none;
  border-radius: 9px;
  background: transparent;
  color: #a7b0bc;
  cursor: grab;
  transition: all 0.2s ease;
  touch-action: none;
  ${e=>e.$orientation==="vertical"?lr`
        width: 100%;
        height: 18px;
        margin: 0 auto 4px;
      `:lr`
        width: 18px;
        height: 100%;
        margin-right: 2px;
      `}

  &:hover {
    color: #6f7784;
    background: rgba(76, 86, 103, 0.12);
  }

  &:active {
    cursor: grabbing;
    background: rgba(76, 86, 103, 0.15);
  }
`,HI=ce.span`
  display: block;
  border-radius: 999px;
  background: currentColor;
  opacity: 0.85;
  ${e=>e.$orientation==="vertical"?lr`
        width: 16px;
        height: 4px;
        box-shadow: -6px 0 0 currentColor, 6px 0 0 currentColor;
      `:lr`
        width: 4px;
        height: 14px;
        box-shadow: 0 -6px 0 currentColor, 0 6px 0 currentColor;
      `}
`,ab=ce.button`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 9px;
  background: ${e=>e.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${e=>e.$isActive?"#2c3e50":"#5b6577"};
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 17px;
  box-shadow: ${e=>e.$isActive?"0 6px 16px rgba(76, 86, 103, 0.18)":"none"};

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }

  &:active {
    transform: translateY(-1px);
  }
`,op=ce.div`
  display: flex;
  align-items: center;
  gap: ${e=>e.$orientation==="vertical"?"6px":"4px"};
  ${e=>e.$orientation==="vertical"?lr`
        flex-direction: column;
        margin-left: 0;
        padding-left: 0;
        border-left: none;
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid rgba(225, 229, 233, 0.6);
      `:lr`
        flex-direction: row;
        margin-left: 16px;
        padding-left: 16px;
        border-left: 1px solid rgba(225, 229, 233, 0.6);
      `}
`,ta=ce.button`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 9px;
  background: transparent;
  color: ${e=>e.$disabled?"#c0c6d1":"#5b6577"};
  cursor: ${e=>e.$disabled?"not-allowed":"pointer"};
  transition: all 0.2s ease;
  font-size: 16px;
  opacity: ${e=>e.$disabled?.5:1};

  &:hover {
    ${e=>!e.$disabled&&`
      color: #2c3e50;
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(76, 86, 103, 0.18);
    `}
  }

  &:active {
    ${e=>!e.$disabled&&`
      transform: translateY(0);
    `}
  }
`,ib=ce.div`
  position: relative;
`,YI=ce.div`
  ${e=>e.$orientation==="vertical"?lr`
        width: 100%;
        height: 0;
        margin: 6px 0;
        border-top: 1px solid rgba(225, 229, 233, 0.6);
      `:lr`
        width: 0;
        height: 28px;
        margin: 0 12px;
        border-left: 1px solid rgba(225, 229, 233, 0.6);
      `}
`,sb=ce.button`
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 9px;
  background: ${e=>e.$isOpen?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${e=>e.$isOpen?"#2c3e50":"#5b6577"};
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 18px;
  line-height: 1;
  outline: none;

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,$I=ce.button`
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 9px;
  background: ${e=>e.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  color: ${e=>(e.$isActive,"#2c3e50")};
  font-weight: 600;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  letter-spacing: 0.5px;
  outline: none;

  &:hover {
    color: #2c3e50;
    transform: translateY(-2px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,bw=`
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translate(-50%, 8px);
  padding: 10px;
  background: rgba(255, 255, 255, 0.92);
  border: none;
  border-radius: 16px;
  box-shadow: 0 18px 36px rgba(76, 86, 103, 0.18);
  backdrop-filter: blur(16px);
  display: grid;
  grid-template-columns: repeat(3, 78px);
  gap: 10px;
  z-index: 120;
`,UI=ce.div`
  ${bw}
`,XI=ce.div`
  ${bw}
`,lb=ce.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: #4a5568;
  text-align: center;
`,vw=ce.button`
  width: 78px;
  height: 84px;
  border: none;
  border-radius: 12px;
  background: ${e=>e.$isActive?"rgba(76, 86, 103, 0.15)":"transparent"};
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  cursor: ${e=>e.$isClickableOnly?"pointer":e.$isDragging?"grabbing":"grab"};
  box-shadow: ${e=>e.$isDragging?"0 10px 24px rgba(76, 86, 103, 0.24)":"none"};
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  padding: 10px;
  outline: none;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 18px rgba(76, 86, 103, 0.18);
  }
`,ww=ce.svg`
  width: 48px;
  height: 48px;
`,FI=ce(ww)`
  transform: scale(0.9);
  transform-origin: center;
`,Aw=ce.span`
  font-size: 10px;
  color: #4a5568;
  white-space: nowrap;
`,Cw=ce.div.attrs(e=>({style:{top:`${e.$y}px`,left:`${e.$x}px`,opacity:e.$visible?1:0}}))`
  position: fixed;
  transform: translate(-50%, -50%);
  padding: 8px 12px;
  background: rgba(44, 62, 80, 0.85);
  color: white;
  border-radius: 8px;
  font-size: 12px;
  pointer-events: none;
  transition: opacity 0.1s ease;
  white-space: nowrap;
  z-index: 200;
`,QI=ce.div`
  position: fixed;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 180px;
  z-index: 1300;
  padding: 4px;
`,GI=ce.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  text-align: left;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  border-radius: 4px;
  user-select: none;

  &:hover {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,WI=ce.span`
  font-size: 11px;
  color: #6c757d;
`,qI=ce.div`
  height: 1px;
  background: #e1e5e9;
  margin: 4px 0;
`,VI=({style:e,children:o,dataAttributes:a,forwardedRef:i})=>b.jsx(QI,{ref:i,style:e,...a??{},children:o}),KI=({entry:e,onSelect:o})=>b.jsxs(GI,{type:"button",onClick:o,disabled:e.disabled,...e.dataAttributes??{},children:[b.jsx("span",{children:e.label}),e.shortcut?b.jsx(WI,{children:e.shortcut}):null]}),ZI={Container:VI,Item:KI,Separator:qI},JI=8,e_=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height});function od(){const[e,o]=y.useState(null),a=y.useCallback(c=>{const{event:u,position:d,entries:p,dataAttributes:h,metadata:g,anchorRect:m,placement:v,portalTarget:A}=c,w=m?e_(m):void 0,S=w?w.left+w.width/2:u?.clientX??0,C=w?w.bottom:u?.clientY??0,M=d?.x??S,R=d?.y??C;u?.preventDefault&&u.preventDefault(),o({isOpen:!0,x:M,y:R,entries:p,dataAttributes:h,metadata:g,anchorRect:w,placement:v??(w?"anchor":"cursor"),portalTarget:A??(typeof document<"u"?document.body:null)})},[]),i=y.useCallback(()=>{o(c=>c&&{...c,isOpen:!1})},[]),l=y.useCallback(()=>o(null),[]);return y.useMemo(()=>({state:e,openMenu:a,closeMenu:i,resetMenu:l,isOpen:!!e?.isOpen}),[e,a,i,l])}function rd({state:e,closeMenu:o,resetMenu:a,components:i=ZI}){const l=y.useRef(null),[c,u]=y.useState({x:0,y:0});if(y.useEffect(()=>{if(!e?.isOpen)return;const A=C=>{C.button===0&&(l.current?.contains(C.target)||o())},w=C=>{if(l.current){if(l.current.contains(C.target)){C.preventDefault();return}o()}},S=C=>{C.key==="Escape"&&o()};return document.addEventListener("mousedown",A),document.addEventListener("contextmenu",w),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("contextmenu",w),document.removeEventListener("keydown",S)}},[e?.isOpen,o]),y.useEffect(()=>{if(!e?.isOpen&&(u({x:0,y:0}),a)){const A=requestAnimationFrame(a);return()=>cancelAnimationFrame(A)}},[e?.isOpen,a]),y.useEffect(()=>{e?.isOpen&&u({x:e.x,y:e.y})},[e?.isOpen,e?.x,e?.y]),y.useLayoutEffect(()=>{if(!e?.isOpen||!l.current)return;const w=l.current.getBoundingClientRect();let S=c.x,C=c.y;const M=JI;if(e.placement==="anchor"&&e.anchorRect){const R=e.anchorRect,E=R.top-w.height-M,k=R.bottom+M;S=R.left+R.width/2-w.width/2,E>=M?C=E:C=k}if(typeof window<"u"){const R=window.innerWidth,E=window.innerHeight;S+w.width+M>R?S=Math.max(M,R-w.width-M):S=Math.max(M,S),C+w.height+M>E?C=Math.max(M,E-w.height-M):C=Math.max(M,C)}(S!==c.x||C!==c.y)&&u({x:S,y:C})},[e?.isOpen,e?.placement,e?.anchorRect,c.x,c.y]),!e?.isOpen)return null;const{Container:d,Item:p,Separator:h}=i,g={left:`${c.x}px`,top:`${c.y}px`},m=b.jsx(d,{forwardedRef:l,style:g,dataAttributes:e.dataAttributes,children:e.entries.map(A=>{if(A.type==="separator")return b.jsx(h,{},A.id);const w=()=>{A.disabled||(A.onSelect(),A.closeOnSelect!==!1&&o())};return b.jsx(p,{entry:A,onSelect:w},A.id)})}),v=e.portalTarget??(typeof document<"u"?document.body:null);return v?dr.createPortal(m,v):m}function t_(e){const{modKeyLabel:o,altKeyLabel:a,deleteShortcutLabel:i,hasAnySelection:l,canGroup:c,canUngroup:u,canSnapToGrid:d,onBringToFront:p,onBringForward:h,onSendBackward:g,onSendToBack:m,onGroup:v,onUngroup:A,onSnapToGrid:w,onDelete:S}=e;return[{type:"item",id:"bring-front",label:"Bring to front",shortcut:`${o}+Shift+J`,disabled:!l,onSelect:p},{type:"item",id:"bring-forward",label:"Bring forward",shortcut:`${o}+J`,disabled:!l,onSelect:h},{type:"item",id:"send-backward",label:"Send backward",shortcut:`${o}+K`,disabled:!l,onSelect:g},{type:"item",id:"send-to-back",label:"Send to back",shortcut:`${o}+Shift+K`,disabled:!l,onSelect:m},{type:"separator",id:"layering-divider"},{type:"item",id:"snap-to-grid",label:"Snap to grid",shortcut:`${o}+G`,disabled:!d,onSelect:w},{type:"separator",id:"snap-divider"},{type:"item",id:"group",label:"Group",shortcut:`${o}+${a}+G`,disabled:!c,onSelect:v},{type:"item",id:"ungroup",label:"Ungroup",shortcut:`${o}+Shift+G`,disabled:!u,onSelect:A},{type:"separator",id:"edit-divider"},{type:"item",id:"delete",label:"Delete",shortcut:i,disabled:!l,onSelect:S}]}function n_(e){const{zoomOutShortcutLabel:o,zoomInShortcutLabel:a,resetZoomShortcutLabel:i,fitShortcutLabel:l,onZoomOut:c,onZoomIn:u,onResetZoom:d,onFitToScreen:p}=e;return[{type:"item",id:"zoom-out",label:"Zoom out",shortcut:o,onSelect:c},{type:"item",id:"zoom-in",label:"Zoom in",shortcut:a,onSelect:u},{type:"item",id:"reset-zoom",label:"Reset zoom",shortcut:i,onSelect:d},{type:"item",id:"fit-to-screen",label:"Fit to screen",shortcut:l,onSelect:p}]}function o_(e){const{isDocked:o,onToggleOrientation:a,onDock:i,onUndock:l}=e,c=[];return o||c.push({type:"item",id:"toggle-orientation",label:"Toggle orientation",dataAttributes:{"data-toolbar-menu-item":"toggle-orientation"},onSelect:a}),c.push({type:"item",id:o?"undock-toolbar":"dock-toolbar",label:o?"Undock toolbar":"Dock toolbar",dataAttributes:{"data-toolbar-menu-item":o?"undock":"dock"},onSelect:o?l:i}),c}function r_(e){const{canDuplicate:o,canDelete:a,onDuplicate:i,onDelete:l}=e;return[{type:"item",id:"duplicate",label:"Duplicate",disabled:!o,dataAttributes:{"data-menu-action":"duplicate"},onSelect:i},{type:"item",id:"delete",label:"Delete",disabled:!a,dataAttributes:{"data-menu-action":"delete"},onSelect:l}]}const rp={lineColour:"#6c757d",lineWidth:2,opacity:1,shadow:!1,shadowColour:"#000000",shadowOpacity:.36,shadowBlurRadius:6},a_=[{type:"connector",label:"Line",icon:"",defaultProps:{type:"line",properties:{...rp,startMark:"None",endMark:"None"}}},{type:"connector",label:"Single Arrow",icon:"",defaultProps:{type:"line",properties:{...rp,startMark:"None",endMark:"HollowArrow"}}},{type:"connector",label:"Double Arrow",icon:"",defaultProps:{type:"line",properties:{...rp,startMark:"HollowArrow",endMark:"HollowArrow"}}}],i_=["linear-gradient(90deg, #d0d0d0 1px, transparent 1px)","linear-gradient(180deg, #d0d0d0 1px, transparent 1px)","linear-gradient(90deg, #f0f0f0 1px, transparent 1px)","linear-gradient(180deg, #f0f0f0 1px, transparent 1px)"].join(", "),s_="100px 100px, 100px 100px, 20px 20px, 20px 20px",l_="-0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px",ia=20,Sw=8e3,Ew=5e3,c_=ce.div`
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
  touch-action: none;
  cursor: ${e=>e.$isPanning?"grabbing":e.$canvasMode==="select"?"crosshair":e.$canvasMode==="draw-connector"?"cell":"grab"};

  &.panning {
    cursor: grabbing;
  }
`,u_=ce.div.attrs(e=>({style:{transform:`scale(${e.$zoom}) translate(${e.$panX}px, ${e.$panY}px)`,willChange:e.$isPinchZooming?"transform":"auto",backgroundImage:e.$showGrid?i_:"none",backgroundSize:e.$showGrid?s_:void 0,backgroundPosition:e.$showGrid?l_:void 0}}))`
  position: absolute;
  left: calc(${ia}px - 0.5px);
  top: calc(${ia}px - 0.5px);
  transform-origin: 0 0;
  width: ${Sw}px;
  height: ${Ew}px;
  touch-action: none;
  background-color: #ffffff;
  background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
  background-position: -0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px, -0.5px -0.5px;
  box-shadow: 1px 0 0 0 #e8e8e8, 0 1px 0 0 #e8e8e8;
`,er=({children:e})=>b.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e}),d_=()=>b.jsx(er,{children:b.jsxs("g",{stroke:"#4c5667",strokeWidth:"2.2",strokeLinecap:"round",children:[b.jsx("line",{x1:"6",y1:"5",x2:"10",y2:"5"}),b.jsx("line",{x1:"14",y1:"5",x2:"18",y2:"5"}),b.jsx("line",{x1:"5",y1:"6",x2:"5",y2:"10"}),b.jsx("line",{x1:"5",y1:"14",x2:"5",y2:"18"}),b.jsx("line",{x1:"6",y1:"19",x2:"10",y2:"19"}),b.jsx("line",{x1:"14",y1:"19",x2:"18",y2:"19"}),b.jsx("line",{x1:"19",y1:"6",x2:"19",y2:"10"}),b.jsx("line",{x1:"19",y1:"14",x2:"19",y2:"18"})]})}),f_=()=>b.jsxs(er,{children:[b.jsx("path",{d:"M12 4V20"}),b.jsx("path",{d:"M12 4L9.7 6.3"}),b.jsx("path",{d:"M12 4L14.3 6.3"}),b.jsx("path",{d:"M12 20L9.7 17.7"}),b.jsx("path",{d:"M12 20L14.3 17.7"}),b.jsx("path",{d:"M4 12H20"}),b.jsx("path",{d:"M4 12L6.3 9.7"}),b.jsx("path",{d:"M4 12L6.3 14.3"}),b.jsx("path",{d:"M20 12L17.7 9.7"}),b.jsx("path",{d:"M20 12L17.7 14.3"})]}),h_=()=>b.jsx(cS,{size:20,strokeWidth:1.8,"aria-hidden":"true"}),p_=()=>b.jsxs(er,{children:[b.jsx("rect",{x:"4.5",y:"4.5",width:"9",height:"9",rx:"2"}),b.jsx("circle",{cx:"16.5",cy:"16.5",r:"3.5"})]}),m_=()=>b.jsxs(er,{children:[b.jsx("circle",{cx:"6",cy:"16",r:"2.3",fill:"currentColor",stroke:"none"}),b.jsx("circle",{cx:"18",cy:"8",r:"2.3",fill:"currentColor",stroke:"none"}),b.jsx("path",{d:"M8 14.5L16 9.5"})]}),g_=()=>b.jsxs(er,{children:[b.jsx("path",{d:"M9 7L5 11L9 15"}),b.jsx("path",{d:"M5 11H14.5C17.5 11 19.5 13.4 19.5 16"})]}),y_=()=>b.jsxs(er,{children:[b.jsx("path",{d:"M15 7L19 11L15 15"}),b.jsx("path",{d:"M19 11H9.5C6.5 11 4.5 13.4 4.5 16"})]}),x_=()=>b.jsx(mS,{"aria-hidden":"true",size:16,stroke:1.8}),b_=()=>b.jsxs(er,{children:[b.jsxs("g",{stroke:"#4c5667",children:[b.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),b.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),b.jsx("line",{x1:"5",y1:"17",x2:"18",y2:"17"})]}),b.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M15.5 6.5L15.5 14.6"}),b.jsx("path",{d:"M15.5 14.6L13.3 12.4"}),b.jsx("path",{d:"M15.5 14.6L17.7 12.4"})]})]}),v_=()=>b.jsxs(er,{children:[b.jsxs("g",{stroke:"#4c5667",children:[b.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),b.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),b.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),b.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M15.5 9L15.5 15"}),b.jsx("path",{d:"M15.5 15L13.6 13.1"}),b.jsx("path",{d:"M15.5 15L17.4 13.1"})]})]}),w_=()=>b.jsxs(er,{children:[b.jsxs("g",{stroke:"#4c5667",children:[b.jsx("line",{x1:"5",y1:"7",x2:"11",y2:"7"}),b.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),b.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),b.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M15.5 15L15.5 9"}),b.jsx("path",{d:"M15.5 9L13.6 10.9"}),b.jsx("path",{d:"M15.5 9L17.4 10.9"})]})]}),cb=Gt("floating-toolbar-orientation"),A_=()=>b.jsxs(er,{children:[b.jsxs("g",{stroke:"#4c5667",children:[b.jsx("line",{x1:"5",y1:"7",x2:"18",y2:"7"}),b.jsx("line",{x1:"5",y1:"12",x2:"11",y2:"12"}),b.jsx("line",{x1:"5",y1:"17",x2:"11",y2:"17"})]}),b.jsxs("g",{stroke:"#2aa565",strokeLinecap:"round",strokeLinejoin:"round",children:[b.jsx("path",{d:"M15.5 16.5L15.5 9.2"}),b.jsx("path",{d:"M15.5 9.2L13.3 11.4"}),b.jsx("path",{d:"M15.5 9.2L17.7 11.4"})]})]}),C_=()=>b.jsxs(er,{children:[b.jsx("rect",{x:"6.2",y:"8.2",width:"9",height:"9",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"}),b.jsx("rect",{x:"9.4",y:"5",width:"9",height:"9",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"})]}),S_=()=>b.jsxs(er,{children:[b.jsx("rect",{x:"5.8",y:"9.8",width:"7.6",height:"7.6",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"}),b.jsx("rect",{x:"11.6",y:"5.2",width:"7.6",height:"7.6",rx:"2",stroke:"#4c5667",strokeWidth:"1.5",fill:"none"})]}),ad=3,E_=({item:e})=>{const o=e.defaultProps.style?.backgroundColor??"#ffffff",a=e.defaultProps.style?.borderColor??"#6c757d",i=4,l={stroke:a,strokeWidth:i,strokeLinejoin:"round",strokeLinecap:"round"},c=()=>b.jsxs(b.Fragment,{children:[b.jsx("path",{d:"M22 26 V64 A28 10 0 0 0 78 64 V26 Z",fill:o,...l}),b.jsx("ellipse",{cx:"50",cy:"26",rx:"28",ry:"10",fill:o,...l}),b.jsx("path",{d:"M22 64 A28 10 0 0 0 78 64",fill:"none",...l})]});switch(e.type){case"oval":return e.defaultProps.properties?.constrainRatio?b.jsx("circle",{cx:"50",cy:"46",r:"24",fill:o,stroke:a,strokeWidth:i}):b.jsx("ellipse",{cx:"50",cy:"46",rx:"32",ry:"24",fill:o,stroke:a,strokeWidth:i});case"rhombus":return b.jsx("polygon",{points:"50,18 86,46 50,74 14,46",fill:o,stroke:a,strokeWidth:i});case"triangle":return b.jsx("polygon",{points:"50,18 86,78 14,78",fill:o,stroke:a,strokeWidth:i});case"parallelogram":return b.jsx("polygon",{points:"22,26 78,26 64,74 8,74",fill:o,stroke:a,strokeWidth:i});case"hexagon":return b.jsx("polygon",{points:"35,22 65,22 82,50 65,78 35,78 18,50",fill:o,stroke:a,strokeWidth:i});case"cylinder":return b.jsx(c,{});case"pipe":return b.jsx("g",{transform:"rotate(90 50 50)",children:b.jsx(c,{})});case"card":return b.jsx("polygon",{points:"32,26 78,26 78,74 14,74 14,44",fill:o,stroke:a,strokeWidth:i});case"note":{const A="20,22 80,22 80,66 64,82 20,82",w="#6c757d";return b.jsxs("g",{children:[b.jsx("polygon",{points:A,fill:"none",stroke:w,strokeWidth:i}),b.jsx("line",{x1:64,y1:82,x2:80,y2:66,stroke:w,strokeWidth:i}),b.jsx("line",{x1:64,y1:66,x2:80,y2:66,stroke:w,strokeWidth:i}),b.jsx("line",{x1:64,y1:66,x2:64,y2:82,stroke:w,strokeWidth:i})]})}case"actor":{const u=i*.65,d=12,p=28,h=40,g=68,m=50,v=36,A=88,w=30,S=50;return b.jsxs("g",{fill:"none",stroke:a,strokeWidth:u,strokeLinecap:"round",children:[b.jsx("circle",{cx:S,cy:p,r:d}),b.jsx("line",{x1:S,y1:h,x2:S,y2:g}),b.jsx("line",{x1:S-v/2,y1:m,x2:S+v/2,y2:m}),b.jsx("line",{x1:S,y1:g,x2:S-w/2,y2:A}),b.jsx("line",{x1:S,y1:g,x2:S+w/2,y2:A})]})}case"rectangle":return e.defaultProps.properties?.constrainRatio?b.jsx("rect",{x:"28",y:"22",width:"44",height:"44",fill:o,stroke:a,strokeWidth:i}):b.jsx("rect",{x:"14",y:"26",width:"72",height:"40",fill:o,stroke:a,strokeWidth:i});default:return b.jsx("rect",{x:"16",y:"18",width:"68",height:"56",fill:o,stroke:a,strokeWidth:i})}},M_=({item:e,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=y.useState(!1),[d,p]=y.useState({x:0,y:0}),h=y.useCallback(m=>{if(m.button!==0)return;m.preventDefault();const v={x:m.clientX,y:m.clientY};u(!1),p(v);let A=!1;const w=C=>{const M={x:C.clientX,y:C.clientY},R=Math.abs(M.x-v.x),E=Math.abs(M.y-v.y);!A&&(R>ad||E>ad)&&(A=!0,u(!0),o(e,v)),A&&(p(M),a(M))},S=C=>{const M={x:C.clientX,y:C.clientY};A?i(M):l(e),u(!1),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)},[e,o,a,i,l]),g=y.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l(e))},[e,l]);return b.jsxs(b.Fragment,{children:[b.jsxs(vw,{type:"button","aria-label":e.label,$isDragging:c,onMouseDown:h,onKeyDown:g,children:[b.jsx(ww,{viewBox:"0 0 100 100",role:"presentation","aria-hidden":"true",children:b.jsx(E_,{item:e})}),b.jsx(Aw,{children:e.label})]}),c&&typeof document<"u"?dr.createPortal(b.jsx(Cw,{$x:d.x,$y:d.y,$visible:c,children:e.label}),document.body):null]})},R_=({item:e,isActive:o,onSelect:a})=>{const i=y.useCallback(()=>{a(e)},[e,a]),l=y.useCallback(j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),a(e))},[e,a]),c=e.defaultProps?.properties,u=c?.startMark==="HollowArrow",d=c?.endMark==="HollowArrow",p="#6c757d",h=18,g=70,m=82,v=30,A=m-h,w=v-g,S=Math.sqrt(A*A+w*w)||1,C={x:A/S,y:w/S},M={x:-C.y,y:C.x},R=16,E=7,k=R*.75,I=(j,U,G)=>{const X=j-C.x*R*G,W=U-C.y*R*G,J=X+M.x*E,oe=W+M.y*E,Z=X-M.x*E,D=W-M.y*E;return`M ${j} ${U} L ${J} ${oe} M ${j} ${U} L ${Z} ${D}`},B=u?{x:h+C.x*k,y:g+C.y*k}:{x:h,y:g},O=d?{x:m-C.x*k,y:v-C.y*k}:{x:m,y:v};return b.jsxs(vw,{type:"button","aria-label":`${e.label} connector`,$isDragging:!1,$isClickableOnly:!0,$isActive:o,onClick:i,onKeyDown:l,children:[b.jsxs(FI,{viewBox:"0 0 100 100",role:"presentation","aria-hidden":"true",children:[b.jsx("line",{x1:B.x,y1:B.y,x2:O.x,y2:O.y,stroke:p,strokeWidth:6,strokeLinecap:"round"}),u&&b.jsx("path",{d:I(h,g,-1),stroke:p,strokeWidth:6.5,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),d&&b.jsx("path",{d:I(m,v,1),stroke:p,strokeWidth:6.5,strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),b.jsx(Aw,{children:e.label})]})},k_=({item:e,onDragStart:o,onDragMove:a,onDragEnd:i,onClick:l})=>{const[c,u]=y.useState(!1),[d,p]=y.useState({x:0,y:0}),h=y.useCallback(m=>{if(m.button!==0)return;m.preventDefault();const v={x:m.clientX,y:m.clientY};u(!1),p(v);let A=!1;const w=C=>{const M={x:C.clientX,y:C.clientY},R=Math.abs(M.x-v.x),E=Math.abs(M.y-v.y);!A&&(R>ad||E>ad)&&(A=!0,u(!0),o(e,v)),A&&(p(M),a(M))},S=C=>{const M={x:C.clientX,y:C.clientY};A?i(M):l(e),u(!1),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",S)},[e,o,a,i,l]),g=y.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l(e))},[e,l]);return b.jsxs(b.Fragment,{children:[b.jsx($I,{type:"button","aria-label":"Text",title:"Insert text element","data-text-tool-button":"true",$isDragging:c,onMouseDown:h,onKeyDown:g,children:b.jsx(h_,{})}),c&&typeof document<"u"?dr.createPortal(b.jsx(Cw,{$x:d.x,$y:d.y,$visible:c,children:e.label}),document.body):null]})};function ub({canvasMode:e,isTemporarySelectMode:o,onSetMode:a,onSendToBack:i,onBringBack:l,onBringForward:c,onSendToFront:u,hasSelection:d,onUndo:p,onRedo:h,canUndo:g=!1,canRedo:m=!1,onDelete:v,onGroup:A,onUngroup:w,canGroup:S=!1,canUngroup:C=!1,onShapeDragStart:M,onShapeDragMove:R,onShapeDragEnd:E,onShapeClick:k,onConnectorToolSelect:I,activeConnectorPreset:B,position:O,onPositionChange:j,shouldAutoCenter:U,isDocked:G,onDockToolbar:X,onUndockToolbar:W,shouldCenterOnUndock:J,onCenterOnUndockHandled:oe,onDockedMouseDown:Z,onDockedTouchStart:D}){const Y=y.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[]),z=Y?"":"Ctrl",L=Y?"":"Alt",T=e==="drag"&&o?"select":e,[$,N]=y.useState(!1),H=y.useRef(null),[q,K]=y.useState(!1),ie=y.useRef(null),ue=y.useRef(null),se=y.useRef(null),ye=y.useRef(!U),[ge,Ae]=y.useState(()=>typeof window>"u"?"horizontal":window.localStorage.getItem(cb)==="vertical"?"vertical":"horizontal");y.useEffect(()=>{G&&Ae("horizontal")},[G]),y.useEffect(()=>{typeof window>"u"||G||window.localStorage.setItem(cb,ge)},[ge,G]);const{state:Se,openMenu:Pe,closeMenu:Ee,resetMenu:He}=od(),We=y.useCallback(we=>{k(we),N(!1)},[k]),_e=y.useCallback((we,Oe)=>{M(we,Oe)},[M]),gt=y.useCallback(we=>{R(we)},[R]),ot=y.useCallback(we=>{E(we),N(!1)},[E]),Ye=y.useCallback(we=>{I(we),K(!1)},[I]),et=y.useCallback((we,Oe)=>{if(G||!ue.current||!se.current)return!1;const Ne=ue.current.offsetParent?.getBoundingClientRect();if(!Ne)return!1;const xt=ue.current.getBoundingClientRect(),Fe=we-Ne.left-se.current.offsetX,$e=Oe-Ne.top-se.current.offsetY,De=8;if($e<=0)return Ae("horizontal"),X(),!0;const St=Math.max(De,Ne.width-xt.width-De),Nt=Math.max(De,Ne.height-xt.height-De),mn=Math.min(Math.max(De,Fe),St),bn=Math.min(Math.max(De,$e),Nt);return j({x:mn,y:bn}),!1},[G,X,j,Ae]);y.useLayoutEffect(()=>{if(!J||G)return;if(!ue.current){oe();return}const Oe=ue.current.offsetParent?.getBoundingClientRect();if(!Oe){oe();return}const Le=ue.current.getBoundingClientRect(),Ne=8,xt=Math.max(Ne,Oe.width-Le.width-Ne),Fe=Math.max(Ne,Oe.height-Le.height-Ne),$e=Ne+Math.max(0,(Oe.width-Le.width)/2),De=Math.min(Math.max(Ne,$e),xt),St=Math.max(Ne,ia+5),Nt=Math.min(St,Fe);j({x:De,y:Nt}),Ae("horizontal"),oe()},[G,oe,j,Ae,J]);const yt=y.useCallback(()=>{Ae(we=>we==="horizontal"?"vertical":"horizontal"),Ee()},[Ee]),ht=y.useCallback(()=>{Ae("horizontal"),Ee(),He(),X()},[Ee,X,He]),It=y.useCallback(()=>{Ee(),He(),W({shouldCenter:!0})},[Ee,W,He]),cn=y.useMemo(()=>o_({isDocked:G,onToggleOrientation:yt,onDock:ht,onUndock:It}),[ht,yt,It,G]),je=y.useCallback(we=>{we.preventDefault(),we.stopPropagation(),Pe({event:we,entries:cn,dataAttributes:{"data-toolbar-menu":"true"},portalTarget:typeof document<"u"?document.body:null})},[Pe,cn]),Te=y.useCallback(we=>{if(we.button!==0)return;if(G){Z&&Z(we);return}if(we.preventDefault(),!ue.current)return;const Le=ue.current.offsetParent?.getBoundingClientRect();if(!Le)return;se.current={offsetX:we.clientX-Le.left-O.x,offsetY:we.clientY-Le.top-O.y};const Ne=Fe=>{Fe.preventDefault(),et(Fe.clientX,Fe.clientY)&&xt()},xt=()=>{se.current=null,document.removeEventListener("mousemove",Ne),document.removeEventListener("mouseup",xt)};document.addEventListener("mousemove",Ne),document.addEventListener("mouseup",xt)},[et,G,Z,O.x,O.y]),Be=y.useCallback(we=>{if(G){D&&D(we);return}if(!ue.current)return;const Oe=we.touches[0];if(!Oe)return;we.preventDefault();const Ne=ue.current.offsetParent?.getBoundingClientRect();if(!Ne)return;se.current={offsetX:Oe.clientX-Ne.left-O.x,offsetY:Oe.clientY-Ne.top-O.y};const xt=$e=>{const De=$e.touches[0];if(!De)return;$e.preventDefault(),et(De.clientX,De.clientY)&&Fe()},Fe=()=>{se.current=null,document.removeEventListener("touchmove",xt),document.removeEventListener("touchend",Fe),document.removeEventListener("touchcancel",Fe)};document.addEventListener("touchmove",xt,{passive:!1}),document.addEventListener("touchend",Fe),document.addEventListener("touchcancel",Fe)},[et,G,D,O.x,O.y]),Xe=y.useCallback(()=>{if(G||!ue.current)return null;const Oe=ue.current.offsetParent?.getBoundingClientRect();if(!Oe)return null;const Le=ue.current.getBoundingClientRect(),Ne=8,xt=Math.max(Ne,Oe.width-Le.width-Ne),Fe=Math.max(Ne,Oe.height-Le.height-Ne),$e=Math.min(Math.max(Ne,O.x),xt),De=Math.min(Math.max(Ne,O.y),Fe);return($e!==O.x||De!==O.y)&&j({x:$e,y:De}),{clampedX:$e,clampedY:De,padding:Ne,maxX:xt,maxY:Fe}},[G,j,O.x,O.y]);return y.useLayoutEffect(()=>{const we=Xe();if(!we)return;const{padding:Oe,maxX:Le,maxY:Ne}=we;if(!U||ye.current||!ue.current)return;const Fe=ue.current.offsetParent?.getBoundingClientRect();if(!Fe)return;const $e=ue.current.getBoundingClientRect(),De=Oe+Math.max(0,(Fe.width-$e.width)/2),St=Math.min(Math.max(Oe,De),Le),Nt=Math.min(Math.max(Oe,O.y),Ne);(St!==O.x||Nt!==O.y)&&j({x:St,y:Nt}),ye.current=!0},[Xe,j,O.x,O.y,U]),y.useEffect(()=>{if(!$)return;const we=Le=>{H.current&&(H.current.parentElement?.contains(Le.target)||N(!1))},Oe=Le=>{Le.key==="Escape"&&N(!1)};return document.addEventListener("mousedown",we),document.addEventListener("keydown",Oe),()=>{document.removeEventListener("mousedown",we),document.removeEventListener("keydown",Oe)}},[$]),y.useEffect(()=>{if(!q)return;const we=Le=>{ie.current&&(ie.current.parentElement?.contains(Le.target)||K(!1))},Oe=Le=>{Le.key==="Escape"&&K(!1)};return document.addEventListener("mousedown",we),document.addEventListener("keydown",Oe),()=>{document.removeEventListener("mousedown",we),document.removeEventListener("keydown",Oe)}},[q]),b.jsxs(b.Fragment,{children:[b.jsxs(NI,{ref:ue,"data-floating-toolbar":G?void 0:"true","data-floating-toolbar-docked":G?"true":void 0,$top:O.y,$left:O.x,$orientation:ge,$isDocked:G,"data-orientation":ge,onContextMenuCapture:je,children:[b.jsx(LI,{type:"button",onMouseDown:Te,onTouchStart:Be,"aria-label":"Drag toolbar",$orientation:ge,children:b.jsx(HI,{"aria-hidden":"true",$orientation:ge})}),b.jsx(ab,{type:"button",$isActive:T==="select",onClick:()=>a("select"),title:"Select Mode (S) - Draw selection area","aria-pressed":T==="select","aria-label":"Select mode",children:b.jsx(d_,{})}),b.jsx(ab,{type:"button",$isActive:T==="drag",onClick:()=>a("drag"),title:"Drag Mode (D) - Move items and pan the canvas","aria-pressed":T==="drag","aria-label":"Drag mode",children:b.jsx(f_,{})}),b.jsx(YI,{"aria-hidden":"true",$orientation:ge}),b.jsx(k_,{item:GT,onDragStart:_e,onDragMove:gt,onDragEnd:ot,onClick:We}),b.jsxs(ib,{children:[b.jsx(sb,{ref:H,$isOpen:$,onClick:()=>N(we=>!we),title:"Shapes","aria-label":"Shapes","aria-haspopup":"true","aria-expanded":$,children:b.jsx(p_,{})}),$&&b.jsx(UI,{role:"menu","aria-label":"Shapes library",children:lw.map(we=>b.jsx(lb,{role:"presentation",children:b.jsx(M_,{item:we,onDragStart:_e,onDragMove:gt,onDragEnd:ot,onClick:We})},`${we.type}-${we.label}`))})]}),b.jsxs(ib,{children:[b.jsx(sb,{ref:ie,$isOpen:q,onClick:()=>K(we=>!we),title:"Connectors","aria-label":"Connectors","aria-haspopup":"true","aria-expanded":q,children:b.jsx(m_,{})}),q&&b.jsx(XI,{role:"menu","aria-label":"Connectors library",children:a_.map(we=>{const Oe=e==="draw-connector"&&B?.label===we.label;return b.jsx(lb,{role:"presentation",children:b.jsx(R_,{item:we,isActive:Oe,onSelect:Ye})},`${we.type}-${we.label}`)})})]}),(p||h||v)&&b.jsxs(op,{$orientation:ge,children:[p&&b.jsx(ta,{onClick:p,title:`Undo (${z}+Z)`,$disabled:!g,disabled:!g,children:b.jsx(g_,{})}),h&&b.jsx(ta,{onClick:h,title:`Redo (${z}+Shift+Z)`,$disabled:!m,disabled:!m,children:b.jsx(y_,{})}),v&&b.jsx(ta,{onClick:v,title:"Delete (Del/Backspace)",$disabled:!d,disabled:!d,children:b.jsx(x_,{})})]}),b.jsxs(op,{$orientation:ge,children:[b.jsx(ta,{onClick:u,title:`Send to front (${z}+Shift+J)`,$disabled:!d,disabled:!d,children:b.jsx(A_,{})}),b.jsx(ta,{onClick:c,title:`Bring forward (${z}+J)`,$disabled:!d,disabled:!d,children:b.jsx(w_,{})}),b.jsx(ta,{onClick:l,title:`Send backward (${z}+K)`,$disabled:!d,disabled:!d,children:b.jsx(v_,{})}),b.jsx(ta,{onClick:i,title:`Send to back (${z}+Shift+K)`,$disabled:!d,disabled:!d,children:b.jsx(b_,{})})]}),(A||w)&&b.jsxs(op,{$orientation:ge,children:[A&&b.jsx(ta,{onClick:A,title:`Group (${z}+${L}+G)`,$disabled:!S,disabled:!S,children:b.jsx(C_,{})}),w&&b.jsx(ta,{onClick:w,title:`Ungroup (${z}+Shift+G)`,$disabled:!C,disabled:!C,children:b.jsx(S_,{})})]})]}),b.jsx(rd,{state:Se,closeMenu:Ee,resetMenu:He})]})}const db="project-import-modal-title";function T_({isOpen:e,pendingImportData:o,onConfirm:a,onCancel:i}){const l=(o?.canvasState?.elements?.length??0)+(o?.canvasState?.connectors?.length??0);return b.jsxs(Ls,{isOpen:e,onClose:i,ariaLabelledBy:db,dataAttributes:{"data-project-import-modal":"true"},closeOnOverlayClick:!1,children:[b.jsxs(Bs,{id:db,children:[Dr," Project Import"]}),b.jsxs(zs,{children:[b.jsxs("p",{children:["You are about to import a ",Dr," project file containing"," ",b.jsx("strong",{children:l})," ",l===1?"item":"items","."]}),b.jsxs("p",{children:["Would you like to ",b.jsx("strong",{children:"clear the current canvas"})," before importing, or ",b.jsx("strong",{children:"append"})," the imported elements to the existing ones?"]}),b.jsx(mm,{role:"note",children:"Clearing the canvas cannot be undone."})]}),b.jsxs(Ns,{children:[b.jsx(jo,{onClick:i,children:"Cancel"}),b.jsx(jo,{$variant:"primary",onClick:()=>a(!1),title:"Keep current canvas items and append the imported ones",children:"Append to Canvas"}),b.jsx(jo,{$variant:"danger",onClick:()=>a(!0),title:"Clears the current canvas before importing",children:"Clear & Import"})]})]})}const fb="page-import-modal-title";function I_({isOpen:e,pages:o,onSelect:a,onCancel:i}){const l=y.useMemo(()=>o.slice().sort((h,g)=>h.order-g.order),[o]),[c,u]=y.useState(l[0]?.id??"");y.useEffect(()=>{const h=l[0]?.id??"";u(h)},[l,e]);const d=h=>{u(h.target.value)},p=()=>{c&&a(c)};return b.jsxs(Ls,{isOpen:e,onClose:i,ariaLabelledBy:fb,dataAttributes:{"data-page-import-modal":"true"},closeOnOverlayClick:!1,children:[b.jsx(Bs,{id:fb,children:"Select Page to Import"}),b.jsxs(zs,{children:[b.jsx("p",{children:"Please choose which page from the imported project you would like to load into the current canvas."}),b.jsxs(TT,{children:[b.jsx(IT,{htmlFor:"pagePicker-select",children:"Imported page"}),b.jsx(_T,{id:"pagePicker-select",value:c,onChange:d,children:l.map(h=>b.jsx("option",{value:h.id,children:h.name},h.id))})]})]}),b.jsxs(Ns,{children:[b.jsx(jo,{$variant:"primary",onClick:p,disabled:!c,children:"Import"}),b.jsx(jo,{onClick:i,children:"Cancel"})]})]})}function __({isOpen:e,pageCount:o,onConfirm:a,onCancel:i}){return b.jsxs(Ls,{isOpen:e,onClose:i,closeOnOverlayClick:!1,children:[b.jsx(Bs,{children:"Replace Project"}),b.jsxs(zs,{children:[b.jsx("p",{children:"This action cannot be undone automatically. Do you want to proceed?"}),b.jsx(mm,{role:"note",children:"Replacing the project cannot be undone."})]}),b.jsxs(Ns,{children:[b.jsx(jo,{onClick:i,children:"Cancel"}),b.jsx(jo,{$variant:"danger",onClick:a,children:"Replace Project"})]})]})}const $n=18,O_=100,jl=20,D_=6,j_=4,P_=60,B_=.5,z_=1.5,N_=ce.div`
  position: absolute;
  ${e=>e.$orientation==="horizontal"?`
    top: 0;
    left: ${$n}px;
    right: 0;
    height: ${$n}px;
  `:`
    top: ${$n}px;
    left: 0;
    bottom: 0;
    width: ${$n}px;
  `}
  background: #f8f9fa;
  border: 1px solid #e0e0e0;
  ${e=>e.$orientation==="horizontal"?"border-width: 0 0 1px 0;":"border-width: 0 1px 0 0;"}
  overflow: hidden;
  pointer-events: none;
  z-index: 100;
  user-select: none;
`,L_=ce.canvas`
  display: block;
`,hb=ce.div.attrs(e=>{const o=e.$thickness??1,a=e.$variant==="cursor"?B_:z_;return e.$orientation==="horizontal"?{style:{left:`${e.$position-o/2+a}px`,top:0,width:`${o}px`,height:"100%"}}:{style:{top:`${e.$position-o/2+a}px`,left:0,width:"100%",height:`${o}px`}}})`
  position: absolute;
  background: ${e=>e.$color};
  opacity: 0.6;
  pointer-events: none;
`,H_=ce.div`
  position: absolute;
  top: 0;
  left: 0;
  width: ${$n}px;
  height: ${$n}px;
  background: #f8f9fa;
  border-right: 1px solid #e0e0e0;
  border-bottom: 1px solid #e0e0e0;
  z-index: 101;
`,Y_="#3498db",$_="rgba(231, 76, 60, 0.85)",pb=({orientation:e,zoom:o,pan:a,mousePos:i,snapWorldPositions:l})=>{const c=y.useRef(null),u=y.useRef(null);y.useEffect(()=>{const h=c.current,g=u.current;if(!h||!g)return;const m=h.getContext("2d");if(!m)return;const v=g.getBoundingClientRect(),A=e==="horizontal"?v.width:v.height;e==="horizontal"?(h.width=A*window.devicePixelRatio,h.height=$n*window.devicePixelRatio,h.style.width=`${A}px`,h.style.height=`${$n}px`):(h.width=$n*window.devicePixelRatio,h.height=A*window.devicePixelRatio,h.style.width=`${$n}px`,h.style.height=`${A}px`),m.scale(window.devicePixelRatio,window.devicePixelRatio),m.clearRect(0,0,A,$n),m.fillStyle="#666",m.strokeStyle="#999",m.lineWidth=1,m.font='8px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',m.textAlign="center",m.textBaseline="middle";const w=-a,S=A/o-a,C=Math.floor(w/jl)*jl,M=Math.ceil(S/jl)*jl;let R=-1/0;for(let E=C;E<=M;E+=jl){const k=(E+a)*o;if(k<0||k>A)continue;const I=E%O_===0,B=I?D_:j_;if(m.beginPath(),e==="horizontal"?(m.moveTo(k+1.5,$n-B),m.lineTo(k+1.5,$n)):(m.moveTo($n-B,k+1.5),m.lineTo($n,k+1.5)),m.stroke(),I&&E>=0){if(Math.abs(k-R)<P_)continue;const j=E.toString();e==="horizontal"?m.fillText(j,k+1.5,$n/2-.5):(m.save(),m.translate($n/2-1.5,k+1.5),m.rotate(-Math.PI/2),m.fillText(j,0,0),m.restore()),R=k}}},[e,o,a]);const d=i!==null?i-$n:-100,p=(l??[]).map(h=>(h+a)*o);return b.jsxs(N_,{ref:u,$orientation:e,"data-ruler":e,children:[b.jsx(L_,{ref:c}),i!==null&&b.jsx(hb,{$orientation:e,$position:d,$color:Y_,$variant:"cursor",$thickness:2}),p.map((h,g)=>b.jsx(hb,{$orientation:e,$position:h,$color:$_,$variant:"snap",$thickness:2},`snap-caret-${g}`))]})},U_=()=>b.jsx(H_,{}),X_=ce.div.attrs(e=>({style:e.$styleVars}))`
  position: absolute;
  left: var(--element-left, 0px);
  top: var(--element-top, 0px);
  width: var(--element-width, 0px);
  height: var(--element-height, 0px);
  min-width: 0;
  min-height: 0;
  box-sizing: border-box;
  border-radius: var(--element-border-radius, 4px);
  cursor: ${e=>e.$interactive?"pointer":"crosshair"};
  pointer-events: ${e=>e.$interactive?"auto":"none"};
  user-select: none;
  padding: var(--element-padding, 4px);
  font-family: var(--element-font-family, ${Po});
  transform: translate(var(--element-translate-x, 0px), var(--element-translate-y, 0px));
  overflow: visible;
  transition: box-shadow 0.2s ease;
  display: var(--element-display, flex);
  align-items: var(--element-align-items, center);
  justify-content: var(--element-justify-content, center);
  white-space: var(--element-white-space, nowrap);
  text-align: var(--element-text-align, center);
  word-break: var(--element-word-break, normal);
  overflow-wrap: var(--element-overflow-wrap, normal);
  background: var(--element-background, white);
  border: var(--element-border, 1px solid #6c757d);
  color: var(--element-color, #2c3e50);
  font-size: var(--element-font-size, 14px);
  font-weight: var(--element-font-weight, normal);
  box-shadow: var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1));
  opacity: var(--element-opacity, 1);

  &::before {
    content: '';
    position: absolute;
    top: calc(var(--handle-hover-padding, 0px) * -1);
    right: calc(var(--handle-hover-padding, 0px) * -1);
    bottom: calc(var(--handle-hover-padding, 0px) * -1);
    left: calc(var(--handle-hover-padding, 0px) * -1);
    pointer-events: none;
    background: transparent;
  }

  &[data-element-selected='true']::before {
    pointer-events: ${e=>e.$interactive?"auto":"none"};
  }

  &[data-suppress-pointer-overlay='true']::before {
    pointer-events: none;
  }

  &[data-interactive='true']:hover {
    box-shadow: var(--element-hover-shadow, var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1)));

    /* Show resize handles on hover - target the ResizeHandles container specifically */
    > div[data-resize-container] {
      opacity: 1 !important;
    }
  }
  &[data-anchor-highlight-visible='true'] {
    box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.85), var(--element-shadow, 1px 1px 3px rgba(0,0,0,0.1));
  }
`,F_=ce.div.attrs(e=>({style:{left:e.$left,top:e.$top,width:e.$width,height:e.$height}}))`
  position: absolute;
  border: 2px dashed #3498db;
  background: rgba(52, 152, 219, 0.1);
  pointer-events: none;
  z-index: 1000;
  animation: marchingAnts 1s linear infinite;

  @keyframes marchingAnts {
    0% {
      border-offset: 0;
    }
    100% {
      border-offset: 8px;
    }
  }
`,Q_=ce.span`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
  width: ${e=>e.$type==="checkbox"?"20px":"16px"};
  height: ${e=>e.$type==="checkbox"?"20px":"16px"};
  z-index: 3;

  & .checkbox-mark {
    font-size: var(--element-checkmark-font-size, 18px);
    font-weight: 700;
    color: #3498db;
    line-height: 1;
    transform: translateY(var(--element-checkmark-translate-y, -1px));
  }

  & .radio-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #3498db;
  }
`,Mw=`
  position: absolute;
  border: 2px solid #3498db;
  background: white;
  border-radius: 4px;
  padding: 4px 8px;
  box-sizing: border-box;
  font-family: var(--inline-font-family, ${Po});
  transform: none;
  z-index: 1001;
  outline: none;
  box-shadow: 0 0 0 2px #3498db, 1px 1px 3px rgba(0,0,0,0.1);
  resize: none;
`,G_=ce.input`
  ${Mw}
  left: var(--inline-left, 0px);
  top: var(--inline-top, 0px);
  width: var(--inline-width, 100px);
  height: var(--inline-height, 20px);
  font-size: var(--inline-font-size, 14px);
  font-weight: var(--inline-font-weight, normal);
  color: var(--inline-color, #2c3e50);
  text-align: var(--inline-text-align, center);
  opacity: var(--inline-opacity, 1);
`,W_=ce.textarea`
  ${Mw}
  left: var(--inline-left, 0px);
  top: var(--inline-top, 0px);
  width: var(--inline-width, 100px);
  height: var(--inline-height, 20px);
  font-size: var(--inline-font-size, 14px);
  font-weight: var(--inline-font-weight, normal);
  color: var(--inline-color, #2c3e50);
  text-align: var(--inline-text-align, left);
  opacity: var(--inline-opacity, 1);
  vertical-align: top;
  white-space: pre-wrap;
`,mt=e=>Math.max(0,e),mb=e=>{if(e.length===1){const o=e+e;return parseInt(o,16)}return parseInt(e,16)},q_=(e,o=.25)=>{const a=e.trim().match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(!a)return e;const i=a[1],l=i.length===3?i.split("").map(mb):[i.slice(0,2),i.slice(2,4),i.slice(4,6)].map(mb),c=Math.max(0,Math.min(1,o));return`#${l.map(d=>{const p=Math.round(d*(1-c));return Math.max(0,Math.min(255,p)).toString(16).padStart(2,"0")}).join("")}`},V_=({type:e,fill:o,stroke:a,strokeWidth:i,width:l,height:c})=>{const u={stroke:a,strokeWidth:i,vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"},d=l>0?l:1,p=c>0?c:1,h=d/100,g=p/100,m=i/2,v=h>0?Math.min(49,mt(m/h)):0,A=g>0?Math.min(49,mt(m/g)):0,w=v,S=mt(100-v),C=A,M=mt(100-A),R=50,E=50,k={width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{overflow:"visible"}},I=mt((S-w)/2),B=mt(M-C),O=mt(Math.min(B/2,Math.max(B*.12,A))),j=mt(O),U=mt(C+O),G=mt(M-O),X=()=>b.jsxs(b.Fragment,{children:[b.jsx("path",{d:`M${w} ${U} V${G} A${I} ${j} 0 0 0 ${S} ${G} V${U} Z`,fill:o,...u}),b.jsx("ellipse",{cx:R,cy:U,rx:I,ry:j,fill:o,...u}),b.jsx("path",{d:`M${w} ${G} A${I} ${j} 0 0 0 ${S} ${G}`,fill:"none",...u})]}),W=mt((M-C)/2),J=mt(S-w),oe=mt(Math.min(J/2,Math.max(J*.12,v))),Z=mt(oe),D=mt(w+oe),Y=mt(S-oe),z=()=>b.jsxs(b.Fragment,{children:[b.jsx("path",{d:`M${D} ${C} H${Y} A${Z} ${W} 0 0 1 ${Y} ${M} H${D} Z`,fill:o,...u}),b.jsx("ellipse",{cx:D,cy:E,rx:Z,ry:W,fill:o,...u}),b.jsx("path",{d:`M${Y} ${C} A${Z} ${W} 0 0 1 ${Y} ${M}`,fill:"none",...u})]}),L=(()=>{switch(e){case"oval":return b.jsx("ellipse",{cx:R,cy:E,rx:mt(50-v),ry:mt(50-A),fill:o,...u});case"rhombus":return b.jsx("polygon",{points:`${R},${C} ${S},${E} ${R},${M} ${w},${E}`,fill:o,...u});case"triangle":return b.jsx("polygon",{points:`${R},${C} ${S},${M} ${w},${M}`,fill:o,...u});case"parallelogram":return b.jsx("polygon",{points:`${mt(25+v)},${C} ${S},${C} ${mt(75+v)},${M} ${w},${M}`,fill:o,...u});case"hexagon":{const T=Math.max(0,S-w),$=Math.max(0,M-C),N=[[.35,.22],[.65,.22],[.82,.5],[.65,.78],[.35,.78],[.18,.5]],H=1.4*1.13,q=1.15,K=N.map(([ie,ue])=>{const se=.5+(ie-.5)*H,ye=.5+(ue-.5)*H*q,ge=Math.min(Math.max(se,0),1),Ae=Math.min(Math.max(ye,0),1),Se=mt(w+T*ge),Pe=mt(C+$*Ae);return`${Se},${Pe}`}).join(" ");return b.jsx("polygon",{points:K,fill:o,...u})}case"card":{const T=mt(Math.min(S-w,M-C)*.18),$=[`${mt(w+T)},${C}`,`${S},${C}`,`${S},${M}`,`${w},${M}`,`${w},${mt(C+T)}`].join(" ");return b.jsx("polygon",{points:$,fill:o,...u})}case"note":{const T=mt(Math.min(S-w,M-C)*.22),$=w,N=C,H=S,q=M,K=mt(H-T),ie=mt(q-T),ue=q_(o,.06),se=[`${$},${N}`,`${H},${N}`,`${H},${ie}`,`${K},${q}`,`${$},${q}`].join(" "),ye=[`${K},${ie}`,`${K},${q}`,`${H},${ie}`].join(" ");return b.jsxs(b.Fragment,{children:[b.jsx("polygon",{points:se,fill:o,...u}),b.jsx("polygon",{points:ye,fill:ue,stroke:"none"}),b.jsx("line",{x1:K,y1:q,x2:H,y2:ie,...u}),b.jsx("line",{x1:K,y1:ie,x2:H,y2:ie,...u}),b.jsx("line",{x1:K,y1:ie,x2:K,y2:q,...u})]})}case"actor":{const T=mt(S-w),N=mt(M-C)*.85,H=60,q=100,K=15,ie=10,ue=cn=>mt(w+(cn-K)/H*T),se=cn=>mt(C+(cn-ie)/q*N),ye=ue(45),ge=se(25),Ae=mt(15/q*N),Se=mt(Ae*2),Pe=Ae,Ee=ue(45),He=se(40),We=se(80),_e=ue(15),gt=ue(75),ot=se(55),Ye=ue(45),et=se(80),yt=ue(15),ht=ue(75),It=se(110);return b.jsxs(b.Fragment,{children:[b.jsx("ellipse",{cx:ye,cy:ge,rx:Se,ry:Pe,fill:"none",...u}),b.jsx("line",{x1:Ee,y1:He,x2:Ee,y2:We,...u}),b.jsx("line",{x1:_e,y1:ot,x2:gt,y2:ot,...u}),b.jsx("line",{x1:Ye,y1:et,x2:yt,y2:It,...u}),b.jsx("line",{x1:Ye,y1:et,x2:ht,y2:It,...u})]})}case"cylinder":return b.jsx(X,{});case"pipe":return b.jsx(z,{});case"rectangle":default:return b.jsx("rect",{x:w,y:C,width:mt(S-w),height:mt(M-C),fill:o,...u})}})();return b.jsx("svg",{...k,children:L})},Rw=new Set(["rectangle","oval","rhombus","triangle","cylinder","pipe","parallelogram","hexagon","card","note","actor"]),bm=e=>Rw.has(e),Ka=(e,o,a)=>{const i=c=>{const u=e.properties?.[c];return typeof u=="number"&&Number.isFinite(u)?u:void 0},l=i(o);if(l!==void 0)return l;if(o==="lineWidth"){const c=i("borderWidth");if(c!==void 0)return c}if(o==="borderWidth"){const c=i("lineWidth");if(c!==void 0)return c}return a},Go=(e,o,a)=>{const i=c=>{const u=e.properties?.[c];return typeof u=="string"&&u.length>0?u:void 0},l=i(o);if(l!==void 0)return l;if(o==="lineColour"){const c=i("borderColour");if(c!==void 0)return c}if(o==="borderColour"){const c=i("lineColour");if(c!==void 0)return c}return a},vm=(e,o,a)=>{const i=e.properties?.[o];return typeof i=="boolean"?i:a},K_=e=>{switch(e){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}},kw=(...e)=>{const o=e.filter(a=>a&&a!=="none");return o.length>0?o.join(", "):"none"},Tw=(e,o,a=40)=>{const i=Math.min(e.width??0,e.height??0);if(!Number.isFinite(i)||i<=0)return o;const l=Math.min(1,Math.max(0,(i-10)/Math.max(a,1)));return Math.max(0,1+l*(o-1))},wm=e=>{if(!vm(e,"shadow",!1))return"none";const a=Go(e,"shadowColour",Ko)??Ko,i=Ka(e,"shadowOpacity",Ii),l=Ka(e,"shadowBlurRadius",jr),c=uw(a,i),u=Math.max(0,l);return`${oa}px ${ra}px ${u}px ${c}`},Z_=e=>{const o=wm(e),a=Tw(e,1.5),i=a>0?`0 0 0 ${a}px rgba(52, 152, 219, 0.85)`:"none";return kw(i,o)},J_=e=>{const o=wm(e),a=Tw(e,2),i=a>0?`0 0 0 ${a}px #74b9ff`:"none";return kw(i,o)},In=e=>Math.max(0,e),gb=e=>{if(!e)return!1;const o=e.trim().toLowerCase();if(o==="none"||o==="transparent")return!1;if(o.startsWith("rgba(")){const a=parseFloat(o.split(",")[3]?.replace(")","")??"1");return Number.isFinite(a)&&a>0}if(o.startsWith("hsla(")){const a=parseFloat(o.split(",")[3]?.replace(")","")??"1");return Number.isFinite(a)&&a>0}if(o.startsWith("#")&&o.length===9){const a=o.slice(7,9);return parseInt(a,16)>0}return!0},yb=(e,o,a,i,l)=>{const c=a>0?a:1,u=i>0?i:1,d=c/100,p=u/100,h=l/2,g=d>0?Math.min(49,In(h/d)):0,m=p>0?Math.min(49,In(h/p)):0,v=g,A=In(100-g),w=m,S=In(100-m),C=50,M=50,R=O=>O*d,E=O=>O*p,k=(O,j)=>e.moveTo(R(O),E(j)),I=(O,j)=>e.lineTo(R(O),E(j)),B=()=>{const O=In(S-w),j=In((A-v)/2),U=In(Math.min(O/2,Math.max(O*.12,m))),G=In(w+U),X=In(S-U),W=E(G),J=E(X),oe=R(j),Z=E(U),D=R(v),Y=R(A),z=R(C);e.moveTo(D,W),e.lineTo(D,J),e.ellipse(z,J,oe,Z,0,Math.PI,0,!1),e.lineTo(Y,W),e.ellipse(z,W,oe,Z,0,0,Math.PI,!1),e.closePath()};switch(e.beginPath(),o){case"oval":e.ellipse(R(C),E(M),Math.max(0,R(50-g)),Math.max(0,E(50-m)),0,0,Math.PI*2);break;case"rhombus":k(C,w),I(A,M),I(C,S),I(v,M),e.closePath();break;case"triangle":k(C,w),I(A,S),I(v,S),e.closePath();break;case"parallelogram":{const O=In(25+g),j=In(75+g);k(O,w),I(A,w),I(j,S),I(v,S),e.closePath();break}case"hexagon":{const O=A-v,j=S-w,U=[[.35,.22],[.65,.22],[.82,.5],[.65,.78],[.35,.78],[.18,.5]],G=1.4*1.13,X=1.15,W=J=>Math.min(Math.max(J,0),1);U.forEach(([J,oe],Z)=>{const D=W(.5+(J-.5)*G),Y=W(.5+(oe-.5)*G*X),z=In(v+O*D),L=In(w+j*Y);Z===0?k(z,L):I(z,L)}),e.closePath();break}case"card":{const O=In(Math.min(A-v,S-w)*.18);k(In(v+O),w),I(A,w),I(A,S),I(v,S),I(v,In(w+O)),e.closePath();break}case"note":{const O=In(Math.min(A-v,S-w)*.22),j=In(A-O),U=In(w+O);k(v,w),I(j,w),I(A,U),I(A,S),I(v,S),e.closePath();break}case"actor":e.rect(R(v),E(w),Math.max(0,R(A-v)),Math.max(0,E(S-w))),e.closePath();break;case"cylinder":B();break;case"pipe":e.save(),e.translate(a/2,i/2),e.rotate(Math.PI/2),e.translate(-i/2,-a/2),B(),e.restore();break;case"rectangle":default:e.rect(R(v),E(w),Math.max(0,R(A-v)),Math.max(0,E(S-w))),e.closePath();break}},eO=(e,o)=>{const{type:a,width:i,height:l,strokeWidth:c,fillColour:u,strokeColour:d,shadowColour:p,shadowBlur:h,shadowOffsetX:g,shadowOffsetY:m}=o,v=gb(u),A=c>0&&gb(d);if(!v&&!A)return;const w=window.devicePixelRatio||1,S=document.createElement("canvas");S.width=Math.max(1,Math.round(i*w)),S.height=Math.max(1,Math.round(l*w));const C=S.getContext("2d");if(!C)return;C.lineJoin="round",C.lineCap="round",C.scale(w,w);const M=()=>{v&&(yb(C,a,i,l,c),C.fillStyle="#000",C.fill())},R=()=>{A&&(yb(C,a,i,l,c),C.strokeStyle="#000",C.lineWidth=c,C.stroke())};M(),R();const E=h*.12,k=E*2+Math.abs(g),I=E*2+Math.abs(m),B=document.createElement("canvas");B.width=Math.max(1,Math.round(i+k*2)),B.height=Math.max(1,Math.round(l+I*2));const O=B.getContext("2d");if(!O)return;h>0&&(O.filter=`blur(${E}px)`),O.drawImage(S,k,I,i,l),O.filter="none",O.globalCompositeOperation="source-in",O.fillStyle=p,O.fillRect(0,0,B.width,B.height),O.globalCompositeOperation="source-over";const j=g-k,U=m-I;e.drawImage(B,j,U)},ir=(e,o)=>{if(e===void 0)return o;const a=Number(e);return Number.isFinite(a)?a:o},Pp=e=>Number.isFinite(e)?Math.max(0,e):0,tO=e=>{if(!e)return{top:0,right:0,bottom:0,left:0};try{const o=JSON.parse(e);return{top:Number(o.top)||0,right:Number(o.right)||0,bottom:Number(o.bottom)||0,left:Number(o.left)||0}}catch{return{top:0,right:0,bottom:0,left:0}}},nO=(e,o)=>{const a=e.dataset,i=tO(a.elementCanvasPadding),l={width:o.width,height:o.height,background:a.elementCanvasBackground??"#ffffff",lineColour:a.elementCanvasLineColour??"#6c757d",lineWidth:ir(a.elementCanvasLineWidth,0),borderRadius:ir(a.elementCanvasBorderRadius,0),padding:i},c=ir(a.elementCanvasFontSize,14),u={text:a.elementCanvasText??"",textAlign:a.elementCanvasTextAlign??"left",textColour:a.elementCanvasTextColour??"#2c3e50",fontSize:c,fontWeight:a.elementCanvasFontWeight??"normal",fontFamily:a.elementCanvasFontFamily??Po,lineHeight:ir(a.elementCanvasLineHeight,c*1.2),isTextArea:a.elementCanvasTextarea==="true"},d=a.elementCanvasCheckIndicator,p=a.elementCanvasDropdownCaret==="true",h=(()=>{const g={};return(d==="checkbox"||d==="radio")&&(g.checkIndicator={type:d,colour:a.elementCanvasCheckColour??"#3498db",fontSize:Pp(ir(a.elementCanvasCheckFontSize,Math.max(12,Math.min(o.width,o.height)*.75))),translateY:ir(a.elementCanvasCheckTranslateY,0)}),p&&(g.dropdownCaret={colour:a.elementCanvasDropdownCaretColour??u.textColour,size:Pp(ir(a.elementCanvasDropdownCaretSize,Math.max(6,Math.min(u.fontSize*.6,o.height*.6)))),offset:ir(a.elementCanvasDropdownCaretOffset,8)}),Object.keys(g).length>0?g:void 0})();return{renderOptions:l,textOptions:u,decorations:h}},oO=e=>{const o=e.dataset;return{colour:o.elementCanvasShadowColour??"rgba(0,0,0,0)",offsetX:ir(o.elementCanvasShadowOffsetX,0),offsetY:ir(o.elementCanvasShadowOffsetY,0),blur:Pp(ir(o.elementCanvasShadowBlur,0)),enabled:o.elementShadowCanvas==="true"&&(o.elementCanvasShadowColour??"")!=="rgba(0,0,0,0)"}},rO=(e,o,a,i)=>{const l=e.dataset;l.elementCanvas="true",l.elementCanvasBackground=o.renderOptions.background,l.elementCanvasLineColour=o.renderOptions.lineColour,l.elementCanvasLineWidth=String(o.renderOptions.lineWidth),l.elementCanvasBorderRadius=String(o.renderOptions.borderRadius),l.elementCanvasPadding=JSON.stringify(o.renderOptions.padding),l.elementCanvasText=o.textOptions.text,l.elementCanvasTextColour=o.textOptions.textColour,l.elementCanvasFontSize=String(o.textOptions.fontSize),l.elementCanvasFontWeight=o.textOptions.fontWeight,l.elementCanvasFontFamily=o.textOptions.fontFamily,l.elementCanvasTextAlign=o.textOptions.textAlign,l.elementCanvasLineHeight=String(o.textOptions.lineHeight),l.elementCanvasTextarea=o.textOptions.isTextArea?"true":"false",l.elementCanvasIncludeText="false";const c=o.decorations?.checkIndicator,u=i?.fallbackCheckColour,d=i?.fallbackCheckFontSize??0,p=i?.fallbackCheckTranslateY??0;c?(l.elementCanvasCheckIndicator=c.type,l.elementCanvasCheckColour=c.colour):(l.elementCanvasCheckIndicator="none",l.elementCanvasCheckColour=u),l.elementCanvasCheckFontSize=String(c?.fontSize??d),l.elementCanvasCheckTranslateY=String(c?.translateY??p);const h=o.decorations?.dropdownCaret;l.elementCanvasDropdownCaret=h?"true":"false",h?(l.elementCanvasDropdownCaretColour=h.colour,l.elementCanvasDropdownCaretSize=String(h.size),l.elementCanvasDropdownCaretOffset=String(h.offset)):(delete l.elementCanvasDropdownCaretColour,delete l.elementCanvasDropdownCaretSize,delete l.elementCanvasDropdownCaretOffset)},aO=(e,o,a)=>{const i=e.dataset;i.elementShadowCanvas="true",i.elementCanvasShadowColour=a.colour,i.elementCanvasShadowOffsetX=String(a.offsetX),i.elementCanvasShadowOffsetY=String(a.offsetY),i.elementCanvasShadowBlur=String(a.blur),i.elementCanvasBackground=o.renderOptions.background,i.elementCanvasLineColour=o.renderOptions.lineColour,i.elementCanvasLineWidth=String(o.renderOptions.lineWidth),i.elementCanvasBorderRadius=String(o.renderOptions.borderRadius),i.elementCanvasPadding=JSON.stringify(o.renderOptions.padding)},Iw=(e,o)=>{const a=e.dataset;a.elementCanvasShadowMarginTop=String(o.top),a.elementCanvasShadowMarginRight=String(o.right),a.elementCanvasShadowMarginBottom=String(o.bottom),a.elementCanvasShadowMarginLeft=String(o.left)},_w=(e,o)=>{const a={top:0,right:0,bottom:0,left:0},i=e.dataset,{width:l,height:c,strokeWidth:u,fillColour:d,strokeColour:p,shadow:h,shapeType:g}=o;if(!h.enabled||l<=0||c<=0)return e.width=0,e.height=0,e.style.width="0px",e.style.height="0px",e.style.left="0px",e.style.top="0px",i.elementShadowCanvas="false",i.elementCanvasShadowMarginTop="0",i.elementCanvasShadowMarginRight="0",i.elementCanvasShadowMarginBottom="0",i.elementCanvasShadowMarginLeft="0",i.elementCanvasShadowColour=h.colour??"rgba(0,0,0,0)",i.elementCanvasShadowOffsetX=String(h.offsetX??0),i.elementCanvasShadowOffsetY=String(h.offsetY??0),i.elementCanvasShadowBlur="0",{margins:a,applied:!1};const m=Math.max(0,h.blur),v=Math.max(0,h.spread),A=m+v,w=A+Math.max(0,-h.offsetX),S=A+Math.max(0,h.offsetX),C=A+Math.max(0,-h.offsetY),M=A+Math.max(0,h.offsetY),R=l+w+S,E=c+C+M,k=Math.max(1,Math.min(o.devicePixelRatio??window.devicePixelRatio??1,3));e.width=Math.max(1,Math.round(R*k)),e.height=Math.max(1,Math.round(E*k)),e.style.width=`${R}px`,e.style.height=`${E}px`,e.style.left=`${-w}px`,e.style.top=`${-C}px`;const I=e.getContext("2d");return I?(I.setTransform(k,0,0,k,0,0),I.clearRect(0,0,R,E),I.translate(w,C),eO(I,{type:g,width:l,height:c,strokeWidth:u,fillColour:d,strokeColour:p,shadowColour:h.colour,shadowBlur:A,shadowOffsetX:h.offsetX,shadowOffsetY:h.offsetY}),I.setTransform(1,0,0,1,0,0),i.elementShadowCanvas="true",i.elementCanvasShadowColour=h.colour,i.elementCanvasShadowOffsetX=String(h.offsetX),i.elementCanvasShadowOffsetY=String(h.offsetY),i.elementCanvasShadowBlur=String(A),i.elementCanvasShadowMarginTop=String(C),i.elementCanvasShadowMarginRight=String(S),i.elementCanvasShadowMarginBottom=String(M),i.elementCanvasShadowMarginLeft=String(w),{margins:{top:C,right:S,bottom:M,left:w},applied:!0}):{margins:a,applied:!1}},id=e=>{if(!e)return null;const o=e.trim();if(!o||o==="none")return null;const a=[];let i="",l=0;for(const v of o){if(v==="("&&(l+=1),v===")"&&(l=Math.max(0,l-1)),v===","&&l===0){a.push(i.trim()),i="";continue}i+=v}i.trim()&&a.push(i.trim());const c=a[a.length-1],u=c.match(/^(.*?)(rgba?\([^)]*\)|hsla?\([^)]*\)|#[0-9a-fA-F]{3,8}|[a-zA-Z]+)\s*$/),d=c.match(/^(rgba?\([^)]*\)|hsla?\([^)]*\)|#[0-9a-fA-F]{3,8}|[a-zA-Z]+)\s+(.*)$/);let p=null,h=null;if(u&&u[2]?(h=u[1].trim(),p=u[2]):d&&d[1]&&(p=d[1],h=d[2].trim()),!p||!h)return null;const g=h.split(/\s+/).filter(Boolean);if(g.length<3)return null;const m=v=>{const A=v.replace("px",""),w=Number(A);return Number.isFinite(w)?w:0};return{offsetX:m(g[0]),offsetY:m(g[1]),blur:m(g[2]),spread:g[3]?m(g[3]):0,color:p}},Fu=(e,o,a,i,l,c)=>{const u=Math.max(0,Math.min(c,Math.min(i,l)/2));e.beginPath(),e.moveTo(o+u,a),e.lineTo(o+i-u,a),e.quadraticCurveTo(o+i,a,o+i,a+u),e.lineTo(o+i,a+l-u),e.quadraticCurveTo(o+i,a+l,o+i-u,a+l),e.lineTo(o+u,a+l),e.quadraticCurveTo(o,a+l,o,a+l-u),e.lineTo(o,a+u),e.quadraticCurveTo(o,a,o+u,a),e.closePath()},Ow=(e,o,a,i,l,c)=>{const u=e.getContext("2d");if(!u)return;const d=Math.max(1,Math.round(o.width*l)),p=Math.max(1,Math.round(o.height*l));e.width!==d&&(e.width=d),e.height!==p&&(e.height=p),e.style.width=`${o.width}px`,e.style.height=`${o.height}px`,u.setTransform(l,0,0,l,0,0),u.clearRect(0,0,o.width,o.height);const h=o.lineWidth/2,g=Math.max(0,o.width-o.lineWidth),m=Math.max(0,o.height-o.lineWidth);if(Fu(u,h,h,g,m,Math.max(0,o.borderRadius-h)),u.fillStyle=o.background,u.fill(),o.lineWidth>0&&(u.lineWidth=o.lineWidth,u.strokeStyle=o.lineColour,u.stroke()),c?.checkIndicator){const{type:A,colour:w,fontSize:S,translateY:C}=c.checkIndicator,M=Math.max(1,Math.min(o.width,o.height)),R=o.width/2,E=o.height/2;if(u.save(),u.lineCap="round",u.lineJoin="round",u.strokeStyle=w,u.fillStyle=w,A==="checkbox"){const k=Math.max(1,S??Math.max(12,M*.75));u.font=`700 ${k}px ${Po}`,u.textAlign="center",u.textBaseline="middle";const I=C??0;u.fillText("",R,E+I)}else if(A==="radio"){const I=Math.max(1,(S??M)*.3);u.beginPath(),u.arc(R,E,I,0,Math.PI*2),u.fill()}u.restore()}if(!i&&!c?.dropdownCaret)return;let v=!1;if(i){u.save(),u.shadowColor="rgba(0,0,0,0)",u.fillStyle=a.textColour,u.textBaseline="middle",u.textAlign=a.textAlign;const A=[];a.fontWeight&&a.fontWeight!=="normal"&&A.push(a.fontWeight),A.push(`${a.fontSize}px`),A.push(a.fontFamily||"sans-serif"),u.font=A.join(" ");const w=a.text.split(/\r?\n/),S=o.width-o.padding.left-o.padding.right,C=o.height-o.padding.top-o.padding.bottom,M=w.length*a.lineHeight;a.isTextArea&&M>C&&(v=!0);let R;if(a.isTextArea)R=o.padding.top+a.lineHeight/2;else{const k=Math.max(0,(C-M)/2);R=o.padding.top+k+a.lineHeight/2}let E;switch(a.textAlign){case"center":E=o.padding.left+S/2;break;case"right":E=o.width-o.padding.right;break;default:E=o.padding.left;break}for(const k of w)u.fillText(k,E,R),R+=a.lineHeight;u.restore()}if(c?.dropdownCaret){const{colour:A,size:w,offset:S}=c.dropdownCaret,C=Math.max(2,w),M=o.height/2,R=o.width-S,E=C/2;u.save(),u.beginPath(),u.moveTo(R-C,M-E),u.lineTo(R,M-E),u.lineTo(R-C/2,M+E),u.closePath(),u.fillStyle=A,u.fill(),u.restore()}if(v){const A=o.height-o.padding.top-o.padding.bottom,w=4,C=o.width-o.padding.right-w-4/2+6,M=o.padding.top,R=w/2,E=a.text.split(/\r?\n/).length*a.lineHeight,k=Math.max(.1,A/E),I=Math.max(10,A*k),B=M;u.save(),u.fillStyle="rgba(211, 216, 222, 0.85)",Fu(u,C,M,w,A,R),u.fill(),u.fillStyle="rgba(108, 117, 125, 0.45)",Fu(u,C,B,w,I,R),u.fill(),u.restore()}},iO=e=>{if(!e.enabled)return{top:0,right:0,bottom:0,left:0};const o=Math.max(0,e.blur);return{top:Math.max(0,o-e.offsetY),right:Math.max(0,o+e.offsetX),bottom:Math.max(0,o+e.offsetY),left:Math.max(0,o-e.offsetX)}},Dw=(e,o,a,i)=>{const l=e.getContext("2d");if(!l)return{top:0,right:0,bottom:0,left:0};const c=iO(a),u=o.width+c.left+c.right,d=o.height+c.top+c.bottom,p=Math.max(1,Math.round(u*i)),h=Math.max(1,Math.round(d*i));if(e.width!==p&&(e.width=p),e.height!==h&&(e.height=h),e.style.width=`${u}px`,e.style.height=`${d}px`,l.setTransform(i,0,0,i,0,0),l.clearRect(0,0,u,d),!a.enabled)return e.dataset.elementCanvasShadowMarginTop="0",e.dataset.elementCanvasShadowMarginRight="0",e.dataset.elementCanvasShadowMarginBottom="0",e.dataset.elementCanvasShadowMarginLeft="0",c;l.save();const g=Math.max(0,a.blur*i),m=a.offsetX*i,v=a.offsetY*i;l.shadowColor=a.colour,l.shadowBlur=g,l.shadowOffsetX=m,l.shadowOffsetY=v;const A=o.lineWidth/2,w=Math.max(0,o.width-o.lineWidth),S=Math.max(0,o.height-o.lineWidth);return Fu(l,c.left+A,c.top+A,w,S,Math.max(0,o.borderRadius-A)),l.fillStyle=o.background,l.fill(),l.restore(),e.dataset.elementCanvasShadowMarginTop=String(c.top),e.dataset.elementCanvasShadowMarginRight=String(c.right),e.dataset.elementCanvasShadowMarginBottom=String(c.bottom),e.dataset.elementCanvasShadowMarginLeft=String(c.left),c},xb=20,sO=e=>Number.isFinite(e)&&e<xb?Math.min(0,e-(xb-2.5)):0,Iu={top:4,right:8,bottom:4,left:8},lO=18,cO=8,uO=5,bb="#3498db",_u=4,dO=Me.memo(({element:e,isSelected:o,dragDelta:a,onDoubleClick:i,isInteractive:l,highlightAnchors:c=!1,layerZIndex:u,layerOrder:d,handleOverlay:p,suppressHandleOverlay:h=!1})=>{const g=bm(e.type),m=e.type==="textarea",v=e.type==="text",A=e.type==="image",w=e.type==="dropdown",S=Me.useRef(0),[C,M]=Me.useState(!1),R=Me.useRef(null),E=Me.useMemo(()=>{const je=Math.max(1,Math.min(e.width,e.height)),Te=Math.max(12,Math.min(je*.75,28)),Be=e.type==="checkbox"?-Math.max(.5,Te*.06):0;return{fontSize:Te,translateY:Be}},[e.width,e.height,e.type]),{fontSize:k,translateY:I}=E,B=a.x!==0||a.y!==0,O=Me.useCallback(()=>{R.current!==null&&(window.clearTimeout(R.current),R.current=null),S.current+=1,o&&S.current===1&&!B&&M(!0)},[o,B]),j=Me.useCallback(()=>{S.current!==0&&(S.current-=1,S.current<=0&&(S.current=0,R.current!==null&&window.clearTimeout(R.current),B||(R.current=window.setTimeout(()=>{R.current=null,M(!1)},80))))},[B]),{computedStyle:U,shapeAppearance:G,visualBackground:X,lineColour:W,borderRadiusValue:J,lineWidthValue:oe,textColour:Z,fontSize:D,fontWeight:Y,fontFamily:z,textAlign:L,lineHeight:T,padding:$,effectivePadding:N,shadowMeta:H,contentDisplay:q,contentAlignItems:K,contentJustifyContent:ie,contentWhiteSpace:ue,shapeShadowFilter:se,shapeVerticalOffset:ye}=Me.useMemo(()=>{const je=Go(e,"backgroundColour")||Go(e,"fillColour")||e.style?.backgroundColor||"#ffffff",Te=Go(e,"lineColour",e.style?.borderColor||"#6c757d")||"#6c757d",Be=Math.max(0,Ka(e,"lineWidth",2)),Xe=Go(e,"textColour",e.style?.textColor)||"#2c3e50",we=Ka(e,"fontSize",e.style?.fontSize||14),Le=(Go(e,"fontWeight",e.style?.fontWeight)||"normal")==="bold"?"bold":"normal",Ne=Go(e,"fontFamily",e.style?.fontFamily||Po)||Po,xt=e.type==="textarea"?"left":"center",Fe=Go(e,"textAlign",e.style?.textAlign)||xt,$e=wm(e),De=Z_(e),St=o?De:J_(e),Nt=Math.min(1,Math.max(0,Ka(e,"opacity",1))),mn=e.type==="textarea"?"block":"flex",bn=e.type==="textarea"||v?"flex-start":"center",Lt=K_(Fe),ao=e.type==="textarea"||v?"pre-wrap":"nowrap",_n=o?a.x:0,Mn=o?a.y:0,Ue=e.type==="note",at=e.type==="actor",Ze=g?"flex":mn,On=g?at?"flex-end":Ue?"flex-start":"center":bn,vn=Lt,Et=g?"pre-wrap":ao,nn=v||g?"break-word":"normal",Kn=v||g?"anywhere":"normal",Xn=A?{top:0,right:0,bottom:0,left:0}:g?{top:_u,right:_u,bottom:_u,left:_u}:w?{...Iu,right:Iu.right+lO}:v?{top:4,right:4,bottom:4,left:4}:Iu,bo=je,fr="transparent",Dn=g?0:Ka(e,"borderRadius",4),Zt="0px solid transparent",Wt=(tt,zr)=>{const vo=Math.max(0,(zr-1)/2);return Math.max(0,Math.min(tt,vo))},gn={top:Wt(Xn.top,e.height),right:Wt(Xn.right,e.width),bottom:Wt(Xn.bottom,e.height),left:Wt(Xn.left,e.width)},jn=g?sO(e.height):0,Pn=o?Math.max(1,Math.min(uO,Math.max(0,(Math.min(e.width,e.height)-10)/2))):0,io={"--element-left":`${e.x}px`,"--element-top":`${e.y}px`,"--element-width":`${e.width}px`,"--element-height":`${e.height}px`,"--element-translate-x":`${_n}px`,"--element-translate-y":`${Mn}px`,"--element-background":fr,"--element-border":Zt,"--element-display":Ze,"--element-align-items":On,"--element-justify-content":vn,"--element-white-space":Et,"--element-word-break":nn,"--element-overflow-wrap":Kn,"--element-text-align":Fe,"--element-color":Xe,"--element-font-size":`${we}px`,"--element-font-weight":Le,"--element-font-family":Ne,"--element-checkmark-font-size":`${k}px`,"--element-checkmark-translate-y":`${I}px`,"--handle-hover-padding":`${Pn}px`,"--element-shadow":o?De:$e,"--element-hover-shadow":St,"--element-opacity":Nt,"--element-padding":g||A?"0px":`${gn.top}px ${gn.right}px ${gn.bottom}px ${gn.left}px`,"--element-border-radius":`${Dn}px`,"--shape-vertical-offset":`${jn}px`},vt=id($e),Jt=vt?vt.blur+Math.max(vt.spread,0):0,ua=Math.max(0,Jt),Bn={baseShadow:$e,hasShadow:!!vt,shadowOffsetX:vt?.offsetX??0,shadowOffsetY:vt?.offsetY??0,shadowBlur:ua,shadowColour:vt?.color??"rgba(0,0,0,0)"},so=g?{fill:je,stroke:Be>0?Te:"transparent",strokeWidth:Be}:null,Br=we*(m?1.4:1.2),$t=g&&Bn.hasShadow?`drop-shadow(${Bn.shadowOffsetX}px ${Bn.shadowOffsetY}px ${Math.max(Bn.shadowBlur,0)}px ${Bn.shadowColour})`:null;return{computedStyle:io,shapeAppearance:so,visualBackground:bo,lineColour:Te,borderRadiusValue:Dn,lineWidthValue:Be,textColour:Xe,fontSize:we,fontWeight:Le,fontFamily:Ne,textAlign:Fe,lineHeight:Br,padding:Xn,effectivePadding:gn,shadowMeta:Bn,contentDisplay:Ze,contentAlignItems:On,contentJustifyContent:vn,contentWhiteSpace:Et,shapeShadowFilter:$t,shapeVerticalOffset:jn}},[e,o,a,g,m,k,I,A,w]),ge=Me.useRef(null),Ae=Me.useRef(null),Se=Me.useRef(null),Pe=A?typeof e.imageSrc=="string"&&e.imageSrc.length>0?e.imageSrc:typeof e.properties?.imageSrc=="string"?e.properties?.imageSrc:void 0:void 0,Ee=Me.useMemo(()=>{if(!p||!o||!C)return null;const je=!!e.properties?.constrainRatio,Te=e.x+a.x,Be=e.y+a.y,Xe=e.width,we=e.height,Oe=10,Le=Oe/2,xt=[{key:"n",x:Te+Xe/2,y:Be,cursor:"n-resize",visible:!0},{key:"s",x:Te+Xe/2,y:Be+we,cursor:"s-resize",visible:!0},{key:"e",x:Te+Xe,y:Be+we/2,cursor:"e-resize",visible:!0},{key:"w",x:Te,y:Be+we/2,cursor:"w-resize",visible:!0},{key:"nw",x:Te,y:Be,cursor:"nw-resize",visible:!je},{key:"ne",x:Te+Xe,y:Be,cursor:"ne-resize",visible:!je},{key:"se",x:Te+Xe,y:Be+we,cursor:"se-resize",visible:!je},{key:"sw",x:Te,y:Be+we,cursor:"sw-resize",visible:!je}].filter(Fe=>Fe.visible).map(Fe=>b.jsx("div",{"data-resize-handle":Fe.key,"data-element-id":e.id,onMouseEnter:O,onMouseLeave:j,style:{position:"absolute",left:`${Fe.x-Le}px`,top:`${Fe.y-Le}px`,width:`${Oe}px`,height:`${Oe}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:Fe.cursor,pointerEvents:"auto"}},`${e.id}-${Fe.key}`));return!C||xt.length===0?null:dr.createPortal(xt,p)},[p,o,C,e.id,e.x,e.y,e.width,e.height,e.properties,a.x,a.y,O,j]),He=Me.useCallback(je=>{i(je,e)},[i,e]),We=Me.useCallback(je=>{if(je.buttons===0){je.stopPropagation();return}const Be=je.currentTarget.getBoundingClientRect();je.clientX>=Be.right-12&&je.stopPropagation()},[]),_e=Me.useCallback(je=>{const Te=je.currentTarget;Te.scrollHeight>Te.clientHeight&&(Te.scrollTop+=je.deltaY,je.stopPropagation(),je.preventDefault())},[]),gt=`${N.top}px ${N.right}px ${N.bottom}px ${N.left}px`,ot=e.type==="checkbox"||e.type==="radio",Ye=ot?vm(e,"isChecked",!1):!1,et=Me.useMemo(()=>{if(!(!ot||!Ye))return{type:e.type,colour:bb,fontSize:k,translateY:I}},[ot,Ye,e.type,k,I]),yt=Me.useMemo(()=>{if(!w)return;const je=Math.max(6,Math.min(D*.6,e.height*.6));return{colour:Z,size:je,offset:Math.max(cO,Iu.right)}},[w,Z,D,e.height]);Me.useLayoutEffect(()=>{if(g)return;const je=ge.current;if(!je)return;const Te=window.devicePixelRatio||1,Be={width:e.width,height:e.height,background:X,lineColour:W,lineWidth:oe,borderRadius:J,padding:$},Xe={text:e.text??"",textAlign:L,textColour:Z,fontSize:D,fontWeight:Y,fontFamily:z,lineHeight:T,isTextArea:m},we=(()=>{if(!(!et&&!yt))return{...et?{checkIndicator:et}:{},...yt?{dropdownCaret:yt}:{}}})(),Oe={renderOptions:Be,textOptions:Xe,decorations:we};if(rO(je,Oe,!1,{fallbackCheckColour:bb,fallbackCheckFontSize:k,fallbackCheckTranslateY:I}),Ow(je,Oe.renderOptions,Oe.textOptions,!1,Te,Oe.decorations),Ae.current){const Le={colour:H.shadowColour,offsetX:H.shadowOffsetX,offsetY:H.shadowOffsetY,blur:H.shadowBlur,enabled:H.hasShadow};aO(Ae.current,Oe,Le);const Ne=Dw(Ae.current,Oe.renderOptions,Le,Te);Ae.current.style.left=`${-Ne.left}px`,Ae.current.style.top=`${-Ne.top}px`,Iw(Ae.current,Ne)}Se.current&&(Se.current.style.background="transparent",Se.current.style.borderColor="rgba(0,0,0,0)")},[e.width,e.height,e.text,X,W,J,oe,Z,D,Y,z,L,T,$,H,g,m,et,k,I,yt]),Me.useLayoutEffect(()=>{if(!g)return;const je=Ae.current;if(!je||!G)return;if(_w(je,{shapeType:e.type,width:e.width,height:e.height,strokeWidth:G.strokeWidth??oe,fillColour:G.fill,strokeColour:G.stroke,shadow:{colour:H.shadowColour,offsetX:H.shadowOffsetX,offsetY:H.shadowOffsetY,blur:H.shadowBlur,spread:0,enabled:H.hasShadow},devicePixelRatio:window.devicePixelRatio||1}).applied){const Be=je.dataset;if(Be.elementCanvasBackground=X,Be.elementCanvasLineColour=W,Be.elementCanvasLineWidth=String(oe),Be.elementCanvasBorderRadius=String(J),Be.elementCanvasPadding=JSON.stringify($),ye!==0){const Xe=Number(Be.elementCanvasShadowMarginTop??"0"),we=Number(Be.elementCanvasShadowMarginBottom??"0"),Oe=Xe-ye,Le=Math.max(0,we+ye);je.style.top=`${-Oe}px`,Be.elementCanvasShadowMarginTop=String(Oe),Be.elementCanvasShadowMarginBottom=String(Le)}}},[g,e.width,e.height,e.type,oe,H,G,X,W,J,$,ye]);const ht=Me.useCallback(()=>!G||!g?null:b.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none",zIndex:0,filter:se??void 0,transform:ye!==0?`translateY(${ye}px)`:void 0},children:b.jsx(V_,{type:e.type,fill:G.fill,stroke:G.stroke,strokeWidth:G.strokeWidth,width:e.width,height:e.height})}),[G,g,e,se,ye]);g&&(U["--element-shadow"]&&(U["--element-shadow"]=o?"0 0 0 1.5px rgba(52, 152, 219, 0.85)":"none"),U["--element-hover-shadow"]&&(U["--element-hover-shadow"]="0 0 0 2px #74b9ff")),Me.useEffect(()=>{o?S.current>0&&(R.current!==null&&(window.clearTimeout(R.current),R.current=null),M(!0)):(S.current=0,R.current!==null&&(window.clearTimeout(R.current),R.current=null),M(!1))},[o]),Me.useEffect(()=>()=>{R.current!==null&&window.clearTimeout(R.current)},[]);const It=Me.useCallback(()=>{O()},[O]),cn=Me.useCallback(()=>{j()},[j]);return b.jsxs(b.Fragment,{children:[b.jsxs(X_,{ref:Se,$styleVars:U,"data-element-id":e.id,"data-element-container":"true","data-element-type":e.type,"data-element-selected":o?"true":"false","data-element-left":e.x,"data-element-top":e.y,"data-element-width":e.width,"data-element-height":e.height,"data-element-z-index":u,"data-element-order":d,"data-element-base-shadow":H.baseShadow,"data-element-text-colour":Z,"data-element-background":X,"data-element-line-colour":W,"data-element-stroke-width":g?G?.strokeWidth??0:void 0,"data-element-image-src":A&&Pe?Pe:void 0,onDoubleClick:He,onMouseEnter:It,onMouseLeave:cn,$interactive:l,"data-shape":g?e.type:void 0,"data-anchor-eligible":"true","data-anchor-highlight-visible":c?"true":"false","data-interactive":l?"true":"false","data-suppress-pointer-overlay":h?"true":void 0,children:[H.hasShadow&&!g&&b.jsx("canvas",{ref:Ae,"data-element-shadow-canvas":"true",style:{position:"absolute",left:0,top:0,pointerEvents:"none",zIndex:0,display:"block"}}),!g&&b.jsx("canvas",{ref:ge,"data-element-canvas":"true",style:{position:"absolute",left:0,top:0,pointerEvents:"none",zIndex:1,display:"block"}}),g&&ht(),A&&b.jsx("div",{"data-element-image-layer":"true",style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",zIndex:2},children:Pe?b.jsx("img",{src:Pe,alt:e.text??"Image",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",width:"100%",height:"100%",pointerEvents:"none"}}):b.jsx("span",{style:{fontSize:12,color:"#6c757d",pointerEvents:"none",display:"block",width:"100%",padding:"0 4px",textAlign:"center",whiteSpace:"normal",wordBreak:"break-word",lineHeight:1.3},children:"Double-click to add image"})}),ot&&Ye&&b.jsx(Q_,{"data-indicator":e.type,$type:e.type,children:e.type==="checkbox"?b.jsx("span",{className:"checkbox-mark",children:""}):b.jsx("span",{className:"radio-dot"})}),!A&&b.jsx("div",{"data-element-text-layer":"true",style:{position:"relative",zIndex:2,width:"100%",height:"100%",display:m?"flex":q,alignItems:m?"stretch":K,justifyContent:m?"stretch":ie,pointerEvents:"none",whiteSpace:ue,textAlign:L,color:Z,padding:g?gt:void 0,transform:g&&ye!==0?`translateY(${ye}px)`:void 0},children:m?b.jsx("div",{"data-textarea-content":"true",style:{width:"100%",height:"100%",display:"flex",flex:"1 1 100%",boxSizing:"border-box",alignItems:K,justifyContent:"stretch",pointerEvents:"auto",overflow:"none"},onPointerDown:We,onWheel:_e,children:b.jsx("div",{style:{flex:"1 1 100%",boxSizing:"border-box",minWidth:0,height:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowY:"auto",overflowX:"hidden",width:"calc(100% + 4px)",marginRight:"-6px",marginLeft:"-2px",paddingRight:"4px",scrollbarWidth:"thin"},children:e.text})}):e.text})]}),Ee]})},(e,o)=>e.element===o.element&&e.isSelected===o.isSelected&&e.dragDelta===o.dragDelta&&e.isInteractive===o.isInteractive&&e.highlightAnchors===o.highlightAnchors&&e.layerZIndex===o.layerZIndex&&e.layerOrder===o.layerOrder&&e.handleOverlay===o.handleOverlay&&e.suppressHandleOverlay===o.suppressHandleOverlay),fO=({element:e,editingText:o,onTextChange:a,onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u})=>{const d=e.type==="textarea",p=bm(e.type),h=d||p,g=Ka(e,"fontSize",e.style?.fontSize||14),v=(Go(e,"fontWeight",e.style?.fontWeight)||"normal")==="bold"?"bold":"normal",A=Go(e,"textColour",e.style?.textColor)||"#2c3e50",w=Go(e,"textAlign",e.style?.textAlign)||(d?"left":"center"),S=Go(e,"fontFamily",e.style?.fontFamily||Po)||Po,C=Math.min(1,Math.max(0,Ka(e,"opacity",1))),M={"--inline-left":`${e.x}px`,"--inline-top":`${e.y}px`,"--inline-width":`${e.width}px`,"--inline-height":`${e.height}px`,"--inline-font-size":`${g}px`,"--inline-font-weight":v,"--inline-color":A,"--inline-text-align":w,"--inline-font-family":S,"--inline-opacity":C},R=Me.useRef(null);return Me.useEffect(()=>{const E=R.current;if(!E)return;const k=E.value.length;try{E.setSelectionRange(k,k)}catch{}},[e.id]),h?b.jsx(W_,{style:M,value:o,ref:R,onChange:E=>a(E.target.value),onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u,autoFocus:!0,"data-inline-editor":"true",placeholder:d?"Enter to save, Shift+Enter for new line, Esc to cancel":void 0}):b.jsx(G_,{style:M,value:o,ref:R,onChange:E=>a(E.target.value),onKeyDown:i,onBlur:l,onMouseDown:c,onClick:u,autoFocus:!0,"data-inline-editor":"true"})},hO=12,pO=10,Am=e=>{const o=Math.max(0,e),a=Math.max(o*4,hO),i=Math.max(o*2.5,pO);return{arrowLength:a,arrowWidth:i,halfArrowWidth:i/2}},mO=e=>{const o=e.hoverPadding,{arrowLength:a,arrowWidth:i,halfArrowWidth:l}=Am(e.lineWidth),c=o*2,u=Math.max(e.lineWidth+c,e.lineWidth+o),d=e.shadow??{enabled:!1},p=d.blur??jr,h=d.offsetX??oa,g=d.offsetY??ra,m=d.enabled?p+Math.max(Math.abs(h),Math.abs(g)):0,v=Math.max(e.hasStartArrow?Math.max(a,l):0,e.hasEndArrow?Math.max(a,l):0),A=Math.max(e.lineWidth,u/2,m,v,o);return{arrowLength:a,arrowWidth:i,halfArrowWidth:l,hitThickness:u,dropShadowPadding:m,arrowPadding:v,containerPadding:A}};function gO(e){const o=Math.min(e.startPoint.x,e.endPoint.x),a=Math.min(e.startPoint.y,e.endPoint.y),i=Math.max(e.startPoint.x,e.endPoint.x),l=Math.max(e.startPoint.y,e.endPoint.y);let c=0;const u=e.properties;if(u&&(u.startMark==="HollowArrow"||u.endMark==="HollowArrow")){const d=typeof u.lineWidth=="number"?u.lineWidth:typeof u.strokeWidth=="number"?u.strokeWidth:2,p=Math.max(1,d),{arrowLength:h}=Am(p);c=h+p/2}return{x:o-c,y:a-c,width:i-o+c*2,height:l-a+c*2}}function yO(e,o){const a=Math.min(o.startX,o.endX),i=Math.max(o.startX,o.endX),l=Math.min(o.startY,o.endY),c=Math.max(o.startY,o.endY),u=e.startPoint.x>=a&&e.startPoint.x<=i&&e.startPoint.y>=l&&e.startPoint.y<=c,d=e.endPoint.x>=a&&e.endPoint.x<=i&&e.endPoint.y>=l&&e.endPoint.y<=c;return u&&d}const jw=({x:e,y:o,size:a=16,colour:i="#2ecc71",endpoint:l})=>b.jsx("div",{"data-connector-magnet":"true","data-connector-magnet-endpoint":l??void 0,style:{position:"absolute",left:e,top:o,width:a,height:a,pointerEvents:"none",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsx("svg",{width:a,height:a,viewBox:"0 0 16 16","aria-hidden":"true",children:b.jsx("circle",{cx:8,cy:8,r:8,fill:i})})}),xO=3,Bp=(e,o,a,i,l)=>{const c=e.getContext("2d");if(!c)return;const u=Math.max(1,Math.min(window.devicePixelRatio||1,xO)),d=Math.max(1,Math.round(o*u)),p=Math.max(1,Math.round(a*u));e.width!==d&&(e.width=d),e.height!==p&&(e.height=p),e.style.width=`${o}px`,e.style.height=`${a}px`,c.setTransform(u,0,0,u,0,0),c.clearRect(0,0,o,a);const h=i.endX-i.startX,g=i.endY-i.startY,m=Math.sqrt(h*h+g*g);if(m<=0||i.lineWidth<=0||i.opacity<=0)return;const v=h/m,A=g/m,w=-A,S=v,C=i.hasStartArrow?Math.min(i.lineWidth,m/2):0,M=i.hasEndArrow?Math.min(i.lineWidth,m/2):0,R=i.lineWidth/2,E=.5,k=i.hasStartArrow?0:Math.min(R+E,Math.max(0,m/2-C)),I=i.hasEndArrow?0:Math.min(R+E,Math.max(0,m/2-M)),B=C+k,O=M+I;if(m<=B+O)return;const j=i.startX+v*B,U=i.startY+A*B,G=i.endX-v*O,X=i.endY-A*O;if(c.globalAlpha=i.opacity,c.lineCap="round",c.lineJoin="round",c.lineWidth=i.lineWidth,c.strokeStyle=i.colour,i.enableShadow){const J=Math.max(0,i.shadowBlur*u),oe=i.shadowOffsetX*u,Z=i.shadowOffsetY*u;c.shadowColor=i.shadowColour,c.shadowBlur=J,c.shadowOffsetX=oe,c.shadowOffsetY=Z}else c.shadowColor="rgba(0,0,0,0)",c.shadowBlur=0,c.shadowOffsetX=0,c.shadowOffsetY=0;c.beginPath(),c.moveTo(j,U),c.lineTo(G,X);const W=i.arrowWidth/2;if(i.hasStartArrow){const J=i.startX,oe=i.startY,Z=J+v*i.arrowLength,D=oe+A*i.arrowLength;c.moveTo(J,oe),c.lineTo(Z+w*W,D+S*W),c.moveTo(J,oe),c.lineTo(Z-w*W,D-S*W)}if(i.hasEndArrow){const J=i.endX,oe=i.endY,Z=J-v*i.arrowLength,D=oe-A*i.arrowLength;c.moveTo(J,oe),c.lineTo(Z+w*W,D+S*W),c.moveTo(J,oe),c.lineTo(Z-w*W,D-S*W)}c.stroke()},bO=5,Pl=10,vO=({connector:e,isSelected:o,dragDelta:a,hasAnchorPreview:i=!1,anchorPreviewPoint:l,anchorPreviewEndpoint:c,layerZIndex:u,layerOrder:d,handleOverlay:p})=>{const[h,g]=Me.useState(!1),m=Me.useRef(0),[v,A]=Me.useState(!1),w=Me.useRef(null),S=Me.useCallback(()=>{A(De=>De||!0)},[]),C=Me.useCallback(()=>{A(De=>De&&!1)},[]),M=Me.useCallback(()=>{w.current!==null&&(window.clearTimeout(w.current),w.current=null),m.current+=1,o&&m.current===1&&S()},[o,S]),R=Me.useCallback(()=>{m.current!==0&&(m.current-=1,m.current<=0&&(m.current=0,w.current!==null&&window.clearTimeout(w.current),w.current=window.setTimeout(()=>{w.current=null,C()},80)))},[C]),E=Me.useCallback(()=>{g(De=>De||!0),M()},[M]),k=Me.useCallback(()=>{g(De=>De&&!1),R()},[R]),I=e.properties,B=I?.lineColour||I?.strokeColour||"#6c757d",O=I?.startMark==="HollowArrow"?"HollowArrow":"None",j=I?.endMark==="HollowArrow"?"HollowArrow":"None",U=De=>{if(typeof De=="number"&&Number.isFinite(De))return De;if(typeof De=="string"){const St=Number(De);if(Number.isFinite(St))return St}return null},G=U(I?.lineWidth)??U(I?.strokeWidth)??2,X=Math.max(.5,G),W=X,J=U(I?.opacity),oe=J!==null?Math.min(1,Math.max(0,J)):1,Z=I?.shadow===void 0?!!I?.dropShadow:!!I?.shadow,D=typeof I?.shadowColour=="string"?I.shadowColour:Ko,Y=typeof I?.shadowOpacity=="number"?I.shadowOpacity:Ii,z=Math.min(1,Math.max(0,Y)),L=typeof I?.shadowBlurRadius=="number"?I.shadowBlurRadius:jr,T=Math.max(0,L),$=uw(D,z),N=mO({lineWidth:W,hasStartArrow:O==="HollowArrow",hasEndArrow:j==="HollowArrow",hoverPadding:bO,shadow:{enabled:Z,blur:T,offsetX:oa,offsetY:ra}}),H=gO(e),q=X/2,{arrowLength:K,arrowWidth:ie,halfArrowWidth:ue,containerPadding:se,hitThickness:ye}=N,ge=H.x-se,Ae=H.y-se,Se=Math.max(H.width,0)+se*2,Pe=Math.max(H.height,0)+se*2,Ee=e.endPoint.x-e.startPoint.x,He=e.endPoint.y-e.startPoint.y,We=Math.sqrt(Ee*Ee+He*He)||0,_e=Math.atan2(He,Ee),gt=e.startPoint.x-ge,ot=e.startPoint.y-Ae-q,Ye=e.startPoint.x-ge,et=e.startPoint.y-Ae,yt=e.endPoint.x-ge,ht=e.endPoint.y-Ae,It=W,cn=B,je=a?.x??0,Te=a?.y??0,Be="grab",we=Math.max(3/2,0),Oe=i||o||h,Le=i?"rgba(46, 204, 113, 0.7)":o?"rgba(52, 152, 219, 0.65)":"rgba(116, 185, 255, 0.5)",Ne=i&&l?{x:l.x-ge,y:l.y-Ae}:null,xt=Me.useRef(null),Fe=Me.useRef(null),$e=Me.useMemo(()=>{if(!p||!o||!v)return null;const De=a?.x??0,St=a?.y??0,Nt={x:e.startPoint.x+De,y:e.startPoint.y+St},mn={x:e.endPoint.x+De,y:e.endPoint.y+St},bn=Pl/2;return dr.createPortal([b.jsx("div",{"data-connector-handle":"start","data-connector-id":e.id,"data-anchor-x":Nt.x,"data-anchor-y":Nt.y,onMouseEnter:M,onMouseLeave:R,style:{position:"absolute",left:`${Nt.x-bn}px`,top:`${Nt.y-bn}px`,width:`${Pl}px`,height:`${Pl}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:"move",pointerEvents:"auto"}},`${e.id}-start`),b.jsx("div",{"data-connector-handle":"end","data-connector-id":e.id,"data-anchor-x":mn.x,"data-anchor-y":mn.y,onMouseEnter:M,onMouseLeave:R,style:{position:"absolute",left:`${mn.x-bn}px`,top:`${mn.y-bn}px`,width:`${Pl}px`,height:`${Pl}px`,background:"#3498db",border:"2px solid white",borderRadius:"50%",boxShadow:"0 0 3px rgba(0, 0, 0, 0.3)",cursor:"move",pointerEvents:"auto"}},`${e.id}-end`)],p)},[e.endPoint.x,e.endPoint.y,e.id,e.startPoint.x,e.startPoint.y,R,a?.x,a?.y,p,v,M,o]);return Me.useEffect(()=>{o?(w.current!==null&&(window.clearTimeout(w.current),w.current=null),A(!0)):(m.current=0,w.current!==null&&(window.clearTimeout(w.current),w.current=null),C(),A(!1))},[C,o]),Me.useEffect(()=>()=>{w.current!==null&&window.clearTimeout(w.current)},[]),Me.useLayoutEffect(()=>{[{ref:xt,enableShadow:Z},{ref:Fe,enableShadow:!1}].forEach(({ref:St,enableShadow:Nt})=>{const mn=St.current;mn&&Bp(mn,Se,Pe,{startX:Ye,startY:et,endX:yt,endY:ht,lineWidth:It,colour:cn,opacity:oe,hasStartArrow:O==="HollowArrow",hasEndArrow:j==="HollowArrow",arrowLength:K,arrowWidth:ie,enableShadow:Nt&&Z,shadowOffsetX:oa,shadowOffsetY:ra,shadowBlur:T,shadowColour:$})})},[Se,Pe,Ee,He,j,yt,ht,We,oe,cn,It,O,Ye,et,Z,W,T,$,K,ie,ue]),b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{position:"absolute",left:`${ge}px`,top:`${Ae}px`,width:`${Se}px`,height:`${Pe}px`,pointerEvents:"none",overflow:"visible",transform:`translate(${je}px, ${Te}px)`},"data-connector-id":e.id,"data-connector-container":"true","data-connector-selected":o?"true":"false","data-connector-left":ge,"data-connector-top":Ae,"data-connector-width":Se,"data-connector-height":Pe,"data-connector-start-x":Ye,"data-connector-start-y":et,"data-connector-end-x":yt,"data-connector-end-y":ht,"data-connector-opacity":oe,"data-connector-base-shadow":Z?`${oa}px ${ra}px ${T}px ${$}`:"none","data-connector-z-index":u,"data-connector-order":d,children:[b.jsx("div",{"data-connector-id":e.id,"data-connector-hit-area":"true",style:{position:"absolute",left:`${gt}px`,top:`${e.startPoint.y-Ae-ye/2}px`,width:`${Math.max(We,0)}px`,height:`${ye}px`,borderRadius:`${ye/2}px`,transformOrigin:"0 50%",transform:`rotate(${_e}rad)`,pointerEvents:"auto",cursor:Be,backgroundColor:"transparent"},onMouseEnter:E,onMouseLeave:k}),Oe&&b.jsx("div",{"data-connector-id":e.id,"data-connector-halo":"true",style:{position:"absolute",left:`${gt}px`,top:`${ot}px`,width:`${Math.max(We,0)}px`,height:`${It}px`,borderRadius:`${It/2}px`,transformOrigin:"0 50%",transform:`rotate(${_e}rad)`,pointerEvents:"none",boxShadow:`0 0 0 ${we}px ${Le}`,opacity:oe,transition:"box-shadow 0.15s ease"}}),b.jsx("div",{"data-connector-id":e.id,"data-connector-line":"true","data-connector-base-line-width":W,"data-connector-base-colour":B,style:{position:"absolute",left:`${gt}px`,top:`${ot}px`,width:`${Math.max(We,0)}px`,height:`${It}px`,borderRadius:`${It/2}px`,transformOrigin:"0 50%",transform:`rotate(${_e}rad)`,pointerEvents:"auto",cursor:Be,backgroundColor:"transparent"},onMouseEnter:E,onMouseLeave:k}),Z&&b.jsx("canvas",{ref:xt,"data-connector-id":e.id,"data-connector-shadow":"true","data-connector-base-line-width":W,"data-connector-base-colour":B,"data-connector-base-shadow":`${oa}px ${ra}px ${T}px ${$}`,"data-connector-shadow-offset-x":oa,"data-connector-shadow-offset-y":ra,"data-connector-shadow-blur":T,"data-connector-shadow-colour":$,style:{position:"absolute",left:0,top:0,width:`${Se}px`,height:`${Pe}px`,pointerEvents:"none"}}),b.jsx("canvas",{ref:Fe,"data-connector-id":e.id,"data-connector-visual":"true","data-connector-base-line-width":W,"data-connector-base-colour":B,"data-connector-base-shadow":Z?`${oa}px ${ra}px ${T}px ${$}`:"none","data-connector-shadow-offset-x":oa,"data-connector-shadow-offset-y":ra,"data-connector-shadow-blur":T,"data-connector-shadow-colour":$,style:{position:"absolute",left:0,top:0,width:`${Se}px`,height:`${Pe}px`,pointerEvents:"none"}}),O==="HollowArrow"&&b.jsx("div",{"data-connector-arrow":"true","data-connector-arrow-endpoint":"start",style:{display:"none"}}),j==="HollowArrow"&&b.jsx("div",{"data-connector-arrow":"true","data-connector-arrow-endpoint":"end",style:{display:"none"}}),Ne&&b.jsx(jw,{x:Ne.x,y:Ne.y,endpoint:c??void 0})]}),$e]})},vb=(e,o)=>{const{rect:a,zoom:i,panX:l,panY:c}=e;return!a||i===0?null:{x:(o.x-a.left-ia)/i-l,y:(o.y-a.top-ia)/i-c}},wO=(e,o)=>{e.rect=o},wb=(e,o,a,i)=>{e.zoom=o,e.panX=a,e.panY=i},AO=e=>({rect:e.rect??null,zoom:e.zoom,panX:e.panX,panY:e.panY}),ap="__rafFlushers",Pw=e=>{const o=y.useRef(()=>{}),a=y.useRef(null),i=y.useRef(()=>{});y.useEffect(()=>{o.current=e},[e]);const l=y.useCallback(()=>{a.current!==null&&(cancelAnimationFrame(a.current),a.current=null)},[]),c=y.useCallback(()=>{a.current===null&&(a.current=requestAnimationFrame(()=>{a.current=null,o.current()}))},[]),u=y.useCallback(()=>{a.current!==null&&(cancelAnimationFrame(a.current),a.current=null),o.current()},[]);return y.useEffect(()=>{i.current=u},[u]),y.useEffect(()=>{if(typeof window>"u")return;const d=window,p=d.__wiremeshTestHooks??{};d.__wiremeshTestHooks||(d.__wiremeshTestHooks=p);const h=p[ap]??new Set;p[ap]||(p[ap]=h);const g=()=>i.current();return h.add(g),()=>{h.delete(g)}},[]),{schedule:c,cancel:l,flush:u}},bs={x:0,y:0},Bw=({zoom:e,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:c,applyUpdates:u,onTransactionStart:d,onTransactionEnd:p,dragDescription:h="Move selection"})=>{const[g,m]=y.useState(!1),v=y.useRef(!1),[A,w]=y.useState(null),S=y.useRef(null),C=y.useRef(null),[M,R]=y.useState(bs),E=y.useRef(e);y.useEffect(()=>{E.current=e},[e]);const k=y.useRef({x:o,y:a});y.useEffect(()=>{k.current={x:o,y:a}},[o,a]),y.useEffect(()=>{S.current=A},[A]);const I=y.useRef(AO({rect:null,zoom:e,panX:o,panY:a})),B=y.useRef(null),O=y.useRef(new Map),j=y.useRef(bs);y.useEffect(()=>{wb(I.current,E.current,k.current.x,k.current.y)},[]),y.useEffect(()=>{wb(I.current,e,o,a)},[e,o,a]);const U=y.useCallback(()=>{if(!v.current)return;const D=B.current,Y=C.current;if(!D||!Y)return;const z=vb(I.current,Y);if(!z)return;const L={x:z.x-D.x,y:z.y-D.y};j.current=L;const T=[];O.current.forEach(($,N)=>{const H=c(N,$,L);H&&T.push(H)}),T.length>0&&(u(T),R(bs))},[u,c]),{schedule:G,cancel:X,flush:W}=Pw(U),J=y.useCallback(({id:D,startPoint:Y,canvasRect:z,selectedIdsOverride:L})=>{wO(I.current,z);const T=vb(I.current,Y);if(!T)return;B.current=T;const $=L&&L.length>0?L:i(),N=$.length>0?$:[D],H=new Map;if(N.forEach(q=>{const K=l(q);K&&H.set(q,K)}),!H.size){const q=l(D);if(!q)return;H.set(D,q)}O.current=H,m(!0),v.current=!0,w(D),S.current=D,C.current={x:Y.x,y:Y.y},R(bs),X(),d?.(h)},[X,h,i,l,d]),oe=y.useCallback(D=>{C.current={x:D.x,y:D.y},G()},[G]),Z=y.useCallback(()=>{v.current&&(W(),p?.(),m(!1),v.current=!1,w(null),S.current=null,C.current=null,B.current=null,O.current=new Map,R(bs))},[W,p]);return y.useEffect(()=>()=>X(),[X]),{isDragging:g,activeDragId:A,dragVisualDelta:M,startDragging:J,updateDragPosition:oe,endDragging:Z,cancelPendingFrame:X,getLastDelta:()=>j.current}},Ab=bs,CO=({zoom:e,panX:o,panY:a,getSelectedElementIds:i,getElementInitialPosition:l,onElementsMoveTo:c,onTransactionStart:u,onTransactionEnd:d})=>{const{isDragging:p,activeDragId:h,dragVisualDelta:g,startDragging:m,updateDragPosition:v,endDragging:A,cancelPendingFrame:w,getLastDelta:S}=Bw({zoom:e,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:(C,M,R)=>({id:C,x:Math.round(M.x+R.x),y:Math.round(M.y+R.y)}),applyUpdates:c,onTransactionStart:u,onTransactionEnd:d,dragDescription:"Move selection"});return{isDragging:p,dragElementId:h,dragVisualDelta:g,startDragging:(C,M,R,E)=>m({id:C,startPoint:M,canvasRect:R,selectedIdsOverride:E}),updateDragPosition:v,endDragging:A,cancelDragAnimationFrame:w,getLastDelta:S}},SO=({zoom:e,panX:o,panY:a,getSelectedConnectorIds:i,getConnectorInitialEndpoints:l,getElementInitialPosition:c,onConnectorsMoveTo:u,onElementsMoveTo:d,onTransactionStart:p,onTransactionEnd:h,selectedElementsAtDragStartRef:g})=>{const m=y.useRef([]),v=g||m,A=y.useCallback(I=>{if(u(I),!d||!c||I.length===0)return;const B=v.current;if(B.length===0)return;let O=0,j=0,U=!1;for(const X of I){const W=l(X.id);if(!W)continue;const J=X.startPoint.x-W.startPoint.x,oe=X.startPoint.y-W.startPoint.y;if(!U&&(J!==0||oe!==0)){O=J,j=oe,U=!0;break}}if(!U)return;const G=B.map(X=>{const W=c(X);return W?{id:X,x:W.x+O,y:W.y+j}:null}).filter(X=>X!==null);G.length>0&&d(G)},[d,c,l,u]),{isDragging:w,activeDragId:S,dragVisualDelta:C,startDragging:M,updateDragPosition:R,endDragging:E,cancelPendingFrame:k}=Bw({zoom:e,panX:o,panY:a,getSelectedIds:i,getSnapshotForId:l,buildUpdateFromSnapshot:(I,B,O)=>({id:I,startPoint:{x:Math.round(B.startPoint.x+O.x),y:Math.round(B.startPoint.y+O.y)},endPoint:{x:Math.round(B.endPoint.x+O.x),y:Math.round(B.endPoint.y+O.y)}}),applyUpdates:A,onTransactionStart:p,onTransactionEnd:h,dragDescription:"Move selection"});return{isDraggingConnector:w,dragConnectorId:S,dragConnectorVisualDelta:C,startDraggingConnector:(I,B,O,j)=>{M({id:I,startPoint:B,canvasRect:O,selectedIdsOverride:j})},updateConnectorDragPosition:R,endDraggingConnector:E,cancelConnectorDragAnimationFrame:k}},EO=({zoom:e,panX:o,panY:a,onPanChange:i,onTransactionStart:l,onTransactionEnd:c})=>{const[u,d]=y.useState(!1),p=y.useRef(null),h=y.useRef(null),g=y.useCallback(()=>{if(!u)return;const M=p.current,R=h.current;if(!M||!R)return;const E=(M.x-R.x)/e,k=(M.y-R.y)/e;i(R.panX+E,R.panY+k)},[u,e,i]),{schedule:m,cancel:v,flush:A}=Pw(g),w=y.useCallback(M=>{d(!0),h.current={x:M.x,y:M.y,panX:o,panY:a},p.current=M,l?.("Pan canvas")},[o,a,l]),S=y.useCallback(M=>{p.current=M,m()},[m]),C=y.useCallback(()=>{if(u){if(A(),p.current&&h.current){const M=(p.current.x-h.current.x)/e,R=(p.current.y-h.current.y)/e;i(h.current.panX+M,h.current.panY+R)}c?.(),d(!1),p.current=null,h.current=null}},[u,e,i,c,A]);return{isPanning:u,startPanning:w,updatePanPosition:S,endPanning:C,cancelPanAnimationFrame:v}},Cb=(e,o)=>Math.hypot(e.clientX-o.clientX,e.clientY-o.clientY),MO=({zoom:e,panX:o,panY:a,onZoomChange:i,onZoomAtPoint:l,canvasRef:c,rulerSize:u})=>{const d=y.useRef(e),p=y.useRef(1),h=y.useRef(!1),g=y.useRef(null),m=y.useRef(null),v=y.useRef(null),A=y.useRef(null),w=y.useRef(0),S=y.useRef(null);y.useEffect(()=>{d.current=e,h.current||(p.current=e)},[e]);const C=y.useCallback(k=>{if(k.touches.length===2){k.preventDefault();const I=Cb(k.touches[0],k.touches[1]),B=(k.touches[0].clientX+k.touches[1].clientX)/2,O=(k.touches[0].clientY+k.touches[1].clientY)/2;g.current={initialDistance:I,initialZoom:d.current||1,initialMidpoint:{x:B,y:O}}}},[]),M=y.useCallback(k=>{const I=g.current;if(!I)return;if(k.touches.length<2){g.current=null,v.current=null,A.current=null,w.current=0,S.current=null,m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),h.current=!1;return}k.preventDefault();const B=Cb(k.touches[0],k.touches[1]);if(B<=0)return;const O=B/I.initialDistance,j=I.initialZoom*O,U=j-(d.current||1),G=Date.now(),X=S.current?(G-S.current)/1e3:0;S.current=G;let W=0;X>0&&(W=U/X);const J=.4;w.current=J*W+(1-J)*w.current;const oe=1+Math.abs(w.current)*.5,Y=(Math.min(Math.max(j,.1),3)-(d.current||1))*oe,z=Math.min(Math.max((d.current||1)+Y,.1),3),L=(k.touches[0].clientX+k.touches[1].clientX)/2,T=(k.touches[0].clientY+k.touches[1].clientY)/2;if(c.current){const $=c.current.querySelector('[data-canvas-content="true"]');if($)if(h.current=!0,l&&c.current){const N=c.current.getBoundingClientRect(),H=d.current||1,q=L-N.left-u,K=T-N.top-u,ie=q*(1/z-1/H)+o,ue=K*(1/z-1/H)+a;$.style.transform=`scale(${z}) translate(${ie}px, ${ue}px)`,$.style.willChange="transform",m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{l(z,L,T,N)})}else $.style.transform=`scale(${z}) translate(${o}px, ${a}px)`,$.style.willChange="transform",m.current!==null&&cancelAnimationFrame(m.current),m.current=requestAnimationFrame(()=>{i(z)})}},[i,l,o,a,c,u]),R=y.useCallback(k=>{if(k.touches.length<2&&(g.current=null,h.current=!1,v.current=null,A.current=null,w.current=0,S.current=null,m.current!==null&&(cancelAnimationFrame(m.current),m.current=null),c.current)){const I=c.current.querySelector('[data-canvas-content="true"]');I&&(I.style.willChange="auto")}},[c]),E=y.useCallback(k=>{if(!k.ctrlKey)return;k.preventDefault();const I=d.current||1,B=Math.exp(-k.deltaY/400),O=Math.min(Math.max(I*B,.1),3);if(l&&c.current){const j=c.current.getBoundingClientRect();l(O,k.clientX,k.clientY,j)}else i(O)},[i,l,c]);return{handleTouchStart:C,handleTouchMove:M,handleTouchEnd:R,handleWheelNative:E,isZoomingRef:h}},RO=({isSelecting:e,selectionArea:o,onSelectionStart:a,onSelectionChange:i,onSelectionComplete:l})=>({startSelection:(p,h)=>{a(!0),i({startX:p,startY:h,endX:p,endY:h})},updateSelection:(p,h)=>{e&&o&&i({...o,endX:p,endY:h})},completeSelection:()=>{e&&o&&l(o)}}),kO=({canvasMode:e,onElementTextEdit:o,onElementPropertyChange:a,onElementImageChange:i})=>{const[l,c]=y.useState(null),[u,d]=y.useState(""),p=y.useRef({elementId:null,originalText:"",lastText:""}),h=y.useCallback(()=>{p.current={elementId:null,originalText:"",lastText:""},c(null),d("")},[]),g=y.useCallback(()=>{const{elementId:E,lastText:k,originalText:I}=p.current;E&&(k!==I&&o(E,k),h())},[o,h]),m=y.useCallback(()=>{if(!p.current.elementId){h();return}h()},[h]),v=y.useCallback(E=>{const k=E.text??"";p.current={elementId:E.id,originalText:k,lastText:k},c(E.id),d(k)},[]),A=y.useCallback(E=>{const k=typeof E=="function"?E(p.current.lastText):E;p.current.lastText=k,d(k)},[]),w=y.useCallback((E,k)=>{if(e!=="drag")return;if(k.type==="checkbox"||k.type==="radio"){const j=vm(k,"isChecked",!1);a?.(k.id,"isChecked",!j),E.preventDefault(),E.stopPropagation();return}if(k.type==="image"){const j=document.createElement("input");j.type="file",j.accept="image/*",j.onchange=()=>{const U=j.files?.[0];if(!U)return;const G=new FileReader;G.onload=()=>{const X=G.result;typeof X=="string"&&i?.(k.id,X)},G.readAsDataURL(U)},j.click(),E.preventDefault(),E.stopPropagation();return}if(!["text","button","input","textarea","dropdown",...Array.from(Rw)].includes(k.type))return;const O=p.current.elementId;if(O&&O!==k.id&&g(),p.current.elementId===k.id){E.preventDefault(),E.stopPropagation();return}v(k),E.preventDefault(),E.stopPropagation()},[e,g,i,a,v]),S=y.useCallback((E,k)=>{if(E.key==="Enter"){const I=p.current.elementId,B=I?k.find(j=>j.id===I):null;if((B?B.type==="textarea"||bm(B.type):!1)&&E.shiftKey)return;g(),E.preventDefault()}else E.key==="Escape"&&(m(),E.preventDefault())},[m,g]),C=y.useCallback(()=>{queueMicrotask(()=>{g()})},[g]),M=y.useCallback(E=>{E.stopPropagation()},[]),R=y.useCallback(E=>{E.stopPropagation()},[]);return y.useEffect(()=>{if(l){const E=I=>{const B=I.target;!B.closest("input")&&!B.closest("textarea")&&g()},k=setTimeout(()=>{document.addEventListener("mousedown",E)},100);return()=>{clearTimeout(k),document.removeEventListener("mousedown",E)}}},[g,l]),{editingElementId:l,editingText:u,setEditingText:A,handleElementDoubleClick:w,handleTextInputKeyDown:S,handleTextInputBlur:C,handleInputMouseDown:M,handleInputClick:R}},TO=({canvasMode:e,isDragging:o,onTemporarySelectModeChange:a})=>{const[i,l]=y.useState(!1),c=y.useRef(a),u=y.useRef(e),d=y.useRef(o);return y.useEffect(()=>{c.current=a},[a]),y.useEffect(()=>{u.current=e},[e]),y.useEffect(()=>{d.current=o},[o]),y.useEffect(()=>{const p=m=>{m.key==="Shift"&&u.current==="drag"&&!d.current&&l(v=>v||(c.current?.(!0),!0))},h=m=>{m.key==="Shift"&&l(v=>v&&(c.current?.(!1),!1))},g=()=>{l(m=>m&&(c.current?.(!1),!1))};return document.addEventListener("keydown",p),document.addEventListener("keyup",h),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",h),window.removeEventListener("blur",g)}},[]),y.useEffect(()=>{e!=="drag"&&i&&(l(!1),c.current?.(!1))},[e,i]),{temporarySelectMode:i}},IO=({canvasMode:e,onConnectorCreate:o,onFinishDrawing:a})=>{const[i,l]=y.useState({isDrawing:!1,startPoint:null,currentPoint:null}),c=y.useCallback(h=>{l({isDrawing:!0,startPoint:h,currentPoint:h})},[]),u=y.useCallback(h=>{l(g=>!g.isDrawing||!g.startPoint?g:{...g,currentPoint:h})},[]),d=y.useCallback((h,g)=>{i.startPoint&&o(i.startPoint,h,g),l({isDrawing:!1,startPoint:null,currentPoint:null}),a?.()},[i.startPoint,o,a]),p=y.useCallback(()=>{l({isDrawing:!1,startPoint:null,currentPoint:null})},[]);return y.useEffect(()=>{e!=="draw-connector"&&l(h=>!h.isDrawing&&!h.startPoint&&!h.currentPoint?h:{isDrawing:!1,startPoint:null,currentPoint:null})},[e]),y.useEffect(()=>{if(e!=="draw-connector")return;const h=g=>{g.key==="Escape"&&p()};return document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)}},[e,p]),{isDrawing:i.isDrawing,startPoint:i.startPoint,currentPoint:i.currentPoint,startDrawing:c,updateDrawing:u,finishDrawing:d,cancelDrawing:p}},Sd=10,_O=.2,Wo=1e-6,Sb=12/100,Eb=e=>Math.round(e),Re=e=>({x:Eb(e.x),y:Eb(e.y)}),uo=e=>Math.min(1,Math.max(0,e)),kr=(e,o)=>Math.hypot(e.x-o.x,e.y-o.y),sd=(e,o,a)=>Math.max(o,Math.min(a,e)),zw=(e,o)=>{const a=Math.max(e.width,0),i=Math.max(e.height,0);if(o==="cylinder"){const g=Math.max(a/2,Wo),m=Math.min(i/2,Math.max(i*Sb,Wo)),v=Math.max(m,Wo),A=e.x+g,w=e.y+m,S=e.y+i-m;return{shapeType:o,orientation:"vertical",centerX:A,rx:g,ry:v,topCenterY:w,bottomCenterY:S,leftX:e.x,rightX:e.x+a,bodyTop:w,bodyBottom:S}}const l=Math.max(i/2,Wo),c=Math.min(a/2,Math.max(a*Sb,Wo)),u=Math.max(c,Wo),d=e.y+l,p=e.x+c,h=e.x+a-c;return{shapeType:o,orientation:"horizontal",centerY:d,rx:u,ry:l,leftCenterX:p,rightCenterX:h,topY:e.y,bottomY:e.y+i,bodyLeft:Math.min(p,h),bodyRight:Math.max(p,h)}},Yl=(e,o,a,i)=>{const l=e.x-o.x,c=e.y-o.y;if(Math.abs(l)<Wo&&Math.abs(c)<Wo)return{x:o.x,y:o.y-i};const u=Math.sqrt(l*l/(a*a)+c*c/(i*i));if(!Number.isFinite(u)||u===0)return{x:o.x,y:o.y};const d=1/u;return Re({x:o.x+l*d,y:o.y+c*d})},$l=(e,o,a,i)=>{const l=(e.x-o.x)/a,c=(e.y-o.y)/i;return Math.atan2(c,l)},Cm=e=>{const{type:o,x:a,y:i,width:l,height:c}=e,u=a,d=i,p=a+l,h=i+c,g=v=>u+l*v,m=v=>d+c*v;switch(o){case"rectangle":return[Re({x:u,y:d}),Re({x:p,y:d}),Re({x:p,y:h}),Re({x:u,y:h})];case"triangle":return[Re({x:g(.5),y:d}),Re({x:p,y:h}),Re({x:u,y:h})];case"rhombus":return[Re({x:g(.5),y:d}),Re({x:p,y:m(.5)}),Re({x:g(.5),y:h}),Re({x:u,y:m(.5)})];case"parallelogram":return[Re({x:g(.25),y:d}),Re({x:p,y:d}),Re({x:g(.75),y:h}),Re({x:u,y:h})];case"hexagon":return[Re({x:g(.25),y:d}),Re({x:g(.75),y:d}),Re({x:p,y:m(.5)}),Re({x:g(.75),y:h}),Re({x:g(.25),y:h}),Re({x:u,y:m(.5)})];case"card":{const v=Math.min(l,c)*.18;return[Re({x:u+v,y:d}),Re({x:p,y:d}),Re({x:p,y:h}),Re({x:u,y:h}),Re({x:u,y:d+v})]}case"note":{const v=Math.min(l,c)*.22,A=Math.max(u,p-v),w=Math.max(d,h-v);return[Re({x:u,y:d}),Re({x:p,y:d}),Re({x:p,y:w}),Re({x:A,y:h}),Re({x:u,y:h})]}case"actor":return null;default:return null}},vs=(e,o,a)=>{const i=a.x-o.x,l=a.y-o.y,c=i*i+l*l;if(c===0)return{closestPoint:o,t:0};const u=e.x-o.x,d=e.y-o.y,p=sd((u*i+d*l)/c,0,1);return{closestPoint:{x:o.x+i*p,y:o.y+l*p},t:p}},Nw=(e,o)=>{const a=e.x,i=e.y,l=e.width,c=e.height;switch(o.edge){case"left":return Re({x:a,y:i+uo(o.ratio)*c});case"right":return Re({x:a+l,y:i+uo(o.ratio)*c});case"top":return Re({x:a+uo(o.ratio)*l,y:i});case"bottom":default:return Re({x:a+uo(o.ratio)*l,y:i+c})}},Lw=(e,o)=>{const a=e.x+e.width/2,i=e.y+e.height/2,l=e.width/2,c=e.height/2;return Re({x:a+l*Math.cos(o),y:i+c*Math.sin(o)})},OO=(e,o)=>{const a=e.height*.85,i=60,l=100,c=15,u=10,d=O=>e.x+(O-c)/i*e.width,p=O=>e.y+(O-u)/l*a,h=15/l*a,g=h,m=h,v=d(45),A=p(25),w=d(45),S=p(40),C=p(80),M=d(15),R=d(75),E=p(55),k=d(15),I=d(75),B=p(110);switch(o.segment){case"head":{const O=o.angle??0;return Re({x:v+g*Math.cos(O),y:A+m*Math.sin(O)})}case"body":{const O=uo(o.ratio??.5);return Re({x:w,y:S+(C-S)*O})}case"leftArm":{const O=uo(o.ratio??.5);return Re({x:w+(M-w)*O,y:E})}case"rightArm":{const O=uo(o.ratio??.5);return Re({x:w+(R-w)*O,y:E})}case"leftLeg":{const O=uo(o.ratio??.5);return Re({x:w+(k-w)*O,y:C+(B-C)*O})}case"rightLeg":{const O=uo(o.ratio??.5);return Re({x:w+(I-w)*O,y:C+(B-C)*O})}}},DO=(e,o)=>{const a=zw(e,o.shapeType);if(a.orientation==="vertical"){const d=Math.max(a.bodyBottom-a.bodyTop,0),p=Math.max(d,Wo),h=uo(o.ratio??.5),g=a.bodyTop+p*h;switch(o.segment){case"left":return Re({x:a.leftX,y:g});case"right":return Re({x:a.rightX,y:g});case"bottom":{const m=o.angle??Math.PI/2,v={x:a.centerX,y:a.bottomCenterY};return Re({x:v.x+a.rx*Math.cos(m),y:v.y+a.ry*Math.sin(m)})}case"top":default:{const m=o.angle??-Math.PI/2,v={x:a.centerX,y:a.topCenterY};return Re({x:v.x+a.rx*Math.cos(m),y:v.y+a.ry*Math.sin(m)})}}}const i=Math.max(a.bodyRight-a.bodyLeft,0),l=Math.max(i,Wo),c=uo(o.ratio??.5),u=a.bodyLeft+l*c;switch(o.segment){case"top":return Re({x:u,y:a.topY});case"bottom":return Re({x:u,y:a.bottomY});case"right":{const d=o.angle??0,p={x:a.rightCenterX,y:a.centerY};return Re({x:p.x+a.rx*Math.cos(d),y:p.y+a.ry*Math.sin(d)})}case"left":default:{const d=o.angle??Math.PI,p={x:a.leftCenterX,y:a.centerY};return Re({x:p.x+a.rx*Math.cos(d),y:p.y+a.ry*Math.sin(d)})}}},Mb=(e,o)=>{const{anchor:a}=o;if(a.kind==="rect")return Nw(e,a);if(a.kind==="capsule")return DO(e,a);if(a.kind==="actor")return OO(e,a);if(a.kind==="polygon"){const i=Cm(e);if(!i||i.length<2)return{x:e.x,y:e.y};const l=a.segmentIndex%i.length,c=i[l],u=i[(l+1)%i.length],d=sd(a.t,0,1);return Re({x:c.x+(u.x-c.x)*d,y:c.y+(u.y-c.y)*d})}return Lw(e,a.angle)},ln=(e,o)=>{if(e.length===0)return e;const a=new Map(o.map(c=>[c.id,c]));let i=!1;const l=e.map(c=>{let u=Re(c.startPoint),d=Re(c.endPoint),p=c.startAttachment??null,h=c.endAttachment??null;if(p){const g=a.get(p.elementId);if(g){const m=Mb(g,p);(m.x!==u.x||m.y!==u.y)&&(u=Re(m),i=!0)}else p=null,i=!0}if(h){const g=a.get(h.elementId);if(g){const m=Mb(g,h);(m.x!==d.x||m.y!==d.y)&&(d=Re(m),i=!0)}else h=null,i=!0}return u===c.startPoint&&d===c.endPoint&&p===c.startAttachment&&h===c.endAttachment?c:{...c,startPoint:u,endPoint:d,startAttachment:p,endAttachment:h}});return i?l:e},jO=(e,o,a)=>{const i=e.x,l=e.y,c=e.width,u=e.height;if(c<=0||u<=0)return null;const d=i+c,p=l+u,h=o.x>=i-a&&o.x<=d+a,g=o.y>=l-a&&o.y<=p+a;if(!h||!g)return null;const v=[{edge:"left",value:Math.abs(o.x-i),ratio:uo((o.y-l)/u)},{edge:"right",value:Math.abs(o.x-d),ratio:uo((o.y-l)/u)},{edge:"top",value:Math.abs(o.y-l),ratio:uo((o.x-i)/c)},{edge:"bottom",value:Math.abs(o.y-p),ratio:uo((o.x-i)/c)}].reduce((w,S)=>S.value<w.value?S:w);if(v.value>a)return null;const A=Nw(e,{edge:v.edge,ratio:v.ratio});return{attachment:{elementId:e.id,anchor:{kind:"rect",edge:v.edge,ratio:v.ratio}},position:A,distance:kr(A,o)}},PO=(e,o,a)=>{const i=e.x+e.width/2,l=e.y+e.height/2,c=e.width/2,u=e.height/2;if(c===0||u===0)return null;const d=o.x-i,p=o.y-l,h=d*d/(c*c)+p*p/(u*u);if(Math.abs(h-1)>_O&&h<1)return null;const g=Math.atan2(p/u,d/c),m=Lw(e,g),v=kr(m,o);return v>a?null:{attachment:{elementId:e.id,anchor:{kind:"oval",angle:g}},position:m,distance:v}},BO=(e,o,a)=>{const i=Cm(e);if(!i||i.length<2)return null;let l=Number.POSITIVE_INFINITY,c=null,u=-1,d=0;for(let h=0;h<i.length;h+=1){const g=i[h],m=i[(h+1)%i.length],{closestPoint:v,t:A}=vs(o,g,m),w=kr(v,o);w<l&&(l=w,c=v,u=h,d=A)}if(!c||l>a)return null;const p={kind:"polygon",shapeType:e.type,segmentIndex:u,t:d};return{attachment:{elementId:e.id,anchor:p},position:c,distance:l}},Rb=(e,o,a,i)=>{if(e.width<=0||e.height<=0)return null;const l=zw(e,i),c=[],u=(d,p)=>{const h=kr(o,p);h<=a&&c.push({attachment:{elementId:e.id,anchor:d},position:p,distance:h})};if(l.orientation==="vertical"){const d=Math.max(l.bodyBottom-l.bodyTop,0);if(d>=0){const w=Math.max(d,Wo),S=sd(o.y,l.bodyTop,l.bodyBottom),C=(S-l.bodyTop)/w;u({kind:"capsule",shapeType:i,segment:"left",ratio:C},{x:l.leftX,y:S}),u({kind:"capsule",shapeType:i,segment:"right",ratio:C},{x:l.rightX,y:S})}const p={x:l.centerX,y:l.topCenterY},h=Yl(o,p,l.rx,l.ry),g=$l(h,p,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"top",angle:g},h);const m={x:l.centerX,y:l.bottomCenterY},v=Yl(o,m,l.rx,l.ry),A=$l(v,m,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"bottom",angle:A},v)}else{const d=Math.max(l.bodyRight-l.bodyLeft,0);if(d>=0){const w=Math.max(d,Wo),S=sd(o.x,l.bodyLeft,l.bodyRight),C=(S-l.bodyLeft)/w;u({kind:"capsule",shapeType:i,segment:"top",ratio:C},{x:S,y:l.topY}),u({kind:"capsule",shapeType:i,segment:"bottom",ratio:C},{x:S,y:l.bottomY})}const p={x:l.leftCenterX,y:l.centerY},h=Yl(o,p,l.rx,l.ry),g=$l(h,p,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"left",angle:g},h);const m={x:l.rightCenterX,y:l.centerY},v=Yl(o,m,l.rx,l.ry),A=$l(v,m,l.rx,l.ry);u({kind:"capsule",shapeType:i,segment:"right",angle:A},v)}return c.length===0?null:c.reduce((d,p)=>p.distance<d.distance?p:d)},zO=(e,o,a)=>{if(e.width<=0||e.height<=0)return null;const i=e.height*.85,l=60,c=100,u=15,d=10,p=H=>e.x+(H-u)/l*e.width,h=H=>e.y+(H-d)/c*i,g=15/c*i,m=g,v=g,A=p(45),w=h(25),S=p(45),C=h(40),M=h(80),R=p(15),E=p(75),k=h(55),I=p(15),B=p(75),O=h(110),j=[],U={x:A,y:w},G=Yl(o,U,m,v),X=$l(G,U,m,v),W=kr(o,G);W<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"head",angle:X}},position:G,distance:W});const J=vs(o,{x:S,y:C},{x:S,y:M}),oe=kr(o,J.closestPoint);oe<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"body",ratio:J.t}},position:J.closestPoint,distance:oe});const Z=vs(o,{x:S,y:k},{x:R,y:k}),D=kr(o,Z.closestPoint);D<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"leftArm",ratio:Z.t}},position:Z.closestPoint,distance:D});const Y=vs(o,{x:S,y:k},{x:E,y:k}),z=kr(o,Y.closestPoint);z<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"rightArm",ratio:Y.t}},position:Y.closestPoint,distance:z});const L=vs(o,{x:S,y:M},{x:I,y:O}),T=kr(o,L.closestPoint);T<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"leftLeg",ratio:L.t}},position:L.closestPoint,distance:T});const $=vs(o,{x:S,y:M},{x:B,y:O}),N=kr(o,$.closestPoint);return N<=a&&j.push({attachment:{elementId:e.id,anchor:{kind:"actor",segment:"rightLeg",ratio:$.t}},position:$.closestPoint,distance:N}),j.length===0?null:j.reduce((H,q)=>q.distance<H.distance?q:H)},Ed=(e,o,a=Sd)=>{let i=null;for(let l=e.length-1;l>=0;l-=1){const c=e[l];let u=null;c.type==="actor"?u=zO(c,o,a):c.type==="cylinder"?u=Rb(c,o,a,"cylinder"):c.type==="pipe"?u=Rb(c,o,a,"pipe"):c.type==="oval"?u=PO(c,o,a):Cm(c)?u=BO(c,o,a):u=jO(c,o,a),u&&(!i||u.distance<i.distance)&&(i={...u,elementId:c.id})}return i};if(typeof window<"u"){const e=window[Jl]=window[Jl]??{};e.probeAnchor||(e.probeAnchor=(o,a,i)=>Ed([o],a,i??Sd))}const NO=({elements:e,isDrawingConnector:o,shouldPersistAnchors:a=!1})=>{const i=y.useRef(null),[l,c]=y.useState(null),u=y.useRef({point:null,endpoint:null}),[d,p]=y.useState({point:null,endpoint:null}),h=y.useRef(null);y.useEffect(()=>{i.current=l},[l]);const g=y.useCallback(w=>{if(i.current!==w&&(i.current=w,c(w),w===null&&!a)){const S=u.current;if(S.point||S.endpoint){const C={point:null,endpoint:null};u.current=C,p(C)}}},[a]),m=y.useCallback((w,S)=>{if(!S)return;const C=u.current;if(C.endpoint===w&&C.point&&C.point.x===S.x&&C.point.y===S.y)return;const M={point:S,endpoint:w};u.current=M,p(M)},[]),v=y.useCallback(()=>{const w=u.current;!w.point&&!w.endpoint||(u.current={point:null,endpoint:null},p({point:null,endpoint:null}))},[]),A=y.useCallback(w=>{const S=Ed(e,w);if(S){const M={point:S.position,attachment:S.attachment,elementId:S.elementId};return h.current=M,M}if(!a)return h.current=null,{point:w,attachment:null,elementId:null};const C=h.current;if(C){const M=w.x-C.point.x,R=w.y-C.point.y;if(Math.hypot(M,R)<=Sd*.5)return C}return h.current=null,{point:w,attachment:null,elementId:null}},[e,a]);return y.useEffect(()=>{o||(h.current=null,u.current={point:null,endpoint:null},p({point:null,endpoint:null}))},[o]),y.useEffect(()=>{a||(h.current=null)},[a]),{highlightElementId:l,drawingAnchorPreview:d,updateHighlightElement:g,applyDrawingPreview:m,clearDrawingPreview:v,computeAnchoredPoint:A}},LO=(e,o,a,i,l)=>e?{canvasRect:e,zoom:o,panX:a,panY:i,rulerSize:l}:null,HO=(e,o)=>{const{canvasRect:a,zoom:i,panX:l,panY:c,rulerSize:u}=e;return{x:(o.clientX-a.left-u)/i-l,y:(o.clientY-a.top-u)/i-c}},YO=(e,o)=>{const{canvasRect:a}=e;return{x:o.clientX-a.left,y:o.clientY-a.top}},zp=.5,Ou=e=>Math.abs(e)<=zp,$O=(e,o)=>{const a=Math.hypot(o.x-e.startPoint.x,o.y-e.startPoint.y),i=Math.hypot(o.x-e.endPoint.x,o.y-e.endPoint.y);return a<=i?"start":"end"},UO=e=>{const{canvasRef:o,elements:a,connectors:i,zoom:l,panX:c,panY:u,canvasMode:d,selectedElements:p,selectedConnectors:h,onPanChange:g,onElementSelect:m,onConnectorSelect:v,onElementsMoveTo:A,onConnectorsMoveTo:w,onElementTextEdit:S,onElementPropertyChange:C,onElementImageChange:M,onZoomChange:R,onZoomAtPoint:E,selectionArea:k,isSelecting:I,onSelectionStart:B,onSelectionChange:O,onSelectionComplete:j,onResizeStart:U,onConnectorResizeStart:G,isResizing:X,isConnectorResizing:W,resizingConnectorId:J,resizeHasAnchorPreview:oe,resizeElementId:Z,resizeHandle:D,resizeAnchorPreview:Y,connectorResizeSnapPreview:z,onTransactionStart:L,onTransactionEnd:T,onTemporarySelectModeChange:$,onConnectorCreate:N,onModeChange:H,onSelectionClear:q,isShiftPressed:K}=e,ie=y.useMemo(()=>new Set(p),[p]),ue=y.useRef([]),se=y.useMemo(()=>new Set(h),[h]),ye=y.useMemo(()=>{const le=new Map;return a.forEach(pe=>{le.set(pe.id,{x:pe.x,y:pe.y})}),le},[a]),ge=y.useMemo(()=>{const le=new Map;return i.forEach(pe=>{le.set(pe.id,{startPoint:{x:pe.startPoint.x,y:pe.startPoint.y},endPoint:{x:pe.endPoint.x,y:pe.endPoint.y}})}),le},[i]),Ae=y.useCallback(()=>p.slice(),[p]),Se=y.useCallback(le=>ye.get(le)??null,[ye]),Pe=y.useCallback((le,pe)=>{const be=a.find(Ce=>Ce.id===le);if(!be)return p.slice();const Ie=be.groupId?a.filter(Ce=>Ce.groupId===be.groupId).map(Ce=>Ce.id):[le];return pe?Ie.some(pt=>ie.has(pt))?p.filter(pt=>!Ie.includes(pt)):Array.from(new Set([...p,...Ie])):Ie},[a,p,ie]),Ee=y.useCallback(()=>h.slice(),[h]),He=y.useCallback(le=>ge.get(le)??null,[ge]),We=y.useCallback((le,pe)=>{const be=i.find(Ce=>Ce.id===le);if(!be)return h.slice();const Ie=be.groupId?i.filter(Ce=>Ce.groupId===be.groupId).map(Ce=>Ce.id):[le];return pe?Ie.some(pt=>se.has(pt))?h.filter(pt=>!Ie.includes(pt)):Array.from(new Set([...h,...Ie])):Ie},[i,h,se]),_e=y.useCallback((le={})=>{if(p.length===0&&h.length===0)return null;const pe=le.deltaOverride?.x??0,be=le.deltaOverride?.y??0;let Ie=Number.POSITIVE_INFINITY,Ce=Number.POSITIVE_INFINITY;const pt=p.map(Ke=>a.find(Xt=>Xt.id===Ke)).filter(Ke=>!!Ke);pt.forEach(Ke=>{const Xt=Ke.x+pe,Jn=Ke.y+be;Ie=Math.min(Ie,Xt),Ce=Math.min(Ce,Jn)});const Fn=h.map(Ke=>i.find(Xt=>Xt.id===Ke)).filter(Ke=>!!Ke);if(Fn.forEach(Ke=>{const Xt=Ke.startPoint.x+pe,Jn=Ke.endPoint.x+pe,nr=Ke.startPoint.y+be,un=Ke.endPoint.y+be;Ie=Math.min(Ie,Xt,Jn),Ce=Math.min(Ce,nr,un)}),!Number.isFinite(Ie)||!Number.isFinite(Ce))return null;const wt=Math.round(Ie/Vn)*Vn,Zn=Math.round(Ce/Vn)*Vn,Ht=wt-Ie,rn=Zn-Ce,Je=Math.abs(Ht)>=.01||Math.abs(rn)>=.01,ct={x:wt,y:Zn,deltaX:Ht,deltaY:rn};if(le.previewOnly)return ct;if(!Je)return null;const Rt=pt.map(Ke=>({id:Ke.id,x:Math.round(Ke.x+Ht),y:Math.round(Ke.y+rn)})),Ut=Fn.map(Ke=>({id:Ke.id,startPoint:{x:Math.round(Ke.startPoint.x+Ht),y:Math.round(Ke.startPoint.y+rn)},endPoint:{x:Math.round(Ke.endPoint.x+Ht),y:Math.round(Ke.endPoint.y+rn)}}));return Rt.length>0&&A(Rt),Ut.length>0&&w(Ut),ct},[i,a,w,A,h,p]),[gt,ot]=y.useState([]),Ye=y.useCallback((le,pe)=>{ot(be=>{const Ie=be.filter(wt=>wt.source===le),Ce=be.filter(wt=>wt.source!==le);if(!pe||pe.length===0)return Ie.length===0?be:Ce;const pt=pe.map(wt=>({...wt,source:le}));return Ie.length===pt.length&&Ie.every((wt,Zn)=>{const Ht=pt[Zn];return Ht!==void 0&&Ht.x===wt.x&&Ht.y===wt.y&&Ht.showHorizontal===wt.showHorizontal&&Ht.showVertical===wt.showVertical})&&Ce.length===be.length-Ie.length?be:[...Ce,...pt]})},[]),et=y.useCallback(le=>{if(!le.length)return;let pe=0,be=0,Ie=!1;for(const rn of le){const Je=ye.get(rn.id);if(!Je)continue;const ct=rn.x-Je.x,Rt=rn.y-Je.y;!Ie&&(ct!==0||Rt!==0)&&(pe=ct,be=Rt,Ie=!0)}A(le);const Ce=_e({deltaOverride:Ie?{x:pe,y:be}:void 0,previewOnly:!0}),pt=Ce?Ou(Ce.deltaX):!1,Fn=Ce?Ou(Ce.deltaY):!1,wt=Ce?K||Fn:!1,Zn=Ce?K||pt:!1;if(Ce&&(wt||Zn)?Ye("drag",[{x:Ce.x,y:Ce.y,showHorizontal:wt,showVertical:Zn}]):Ye("drag",null),!Ie||h.length===0)return;const Ht=h.map(rn=>{const Je=ge.get(rn);return Je?{id:rn,startPoint:{x:Je.startPoint.x+pe,y:Je.startPoint.y+be},endPoint:{x:Je.endPoint.x+pe,y:Je.endPoint.y+be}}:null}).filter(rn=>rn!==null);Ht.length>0&&w(Ht)},[ge,ye,K,w,A,h,_e,Ye]),{isDragging:yt,dragElementId:ht,dragVisualDelta:It,startDragging:cn,updateDragPosition:je,endDragging:Te,cancelDragAnimationFrame:Be}=CO({zoom:l,panX:c,panY:u,getSelectedElementIds:Ae,getElementInitialPosition:Se,onElementsMoveTo:et,onTransactionStart:L,onTransactionEnd:T}),{isDraggingConnector:Xe,dragConnectorId:we,dragConnectorVisualDelta:Oe,startDraggingConnector:Le,updateConnectorDragPosition:Ne,endDraggingConnector:xt,cancelConnectorDragAnimationFrame:Fe}=SO({zoom:l,panX:c,panY:u,getSelectedConnectorIds:Ee,getConnectorInitialEndpoints:He,getElementInitialPosition:Se,onConnectorsMoveTo:w,onElementsMoveTo:A,onTransactionStart:L,onTransactionEnd:T,selectedElementsAtDragStartRef:ue}),$e=y.useMemo(()=>new Set,[]),De=y.useMemo(()=>{if(!Xe&&!W&&se.size===0||i.length===0)return $e;const le=new Set;return i.forEach(pe=>{if(!(se.has(pe.id)||Xe&&we===pe.id||W&&J===pe.id))return;const Ie=pe.startAttachment?.elementId,Ce=pe.endAttachment?.elementId;Ie&&le.add(Ie),Ce&&le.add(Ce)}),le},[i,se,Xe,we,W,J,$e]),{isPanning:St,startPanning:Nt,updatePanPosition:mn,endPanning:bn,cancelPanAnimationFrame:Lt}=EO({zoom:l,panX:c,panY:u,onPanChange:g,onTransactionStart:L,onTransactionEnd:T}),{handleTouchStart:ao,handleTouchMove:_n,handleTouchEnd:Mn,handleWheelNative:Ue,isZoomingRef:at}=MO({zoom:l,panX:c,panY:u,onZoomChange:R,onZoomAtPoint:E,canvasRef:o,rulerSize:ia});y.useEffect(()=>{K||ot([])},[K]),y.useEffect(()=>{if(!X)return;if(!Z||!D||Vn<=0){Ye("element-resize",null);return}const le=a.find(wo=>wo.id===Z);if(!le){Ye("element-resize",null);return}const pe=D.includes("e")||D.includes("w"),be=D.includes("n")||D.includes("s"),Ie=D.length===2,Ce=!!le.properties?.constrainRatio,pt=pe||Ie||Ce,Fn=be||Ie||Ce,wt=Math.round(le.x),Zn=Math.round(le.x+le.width),Ht=Math.round(le.y),rn=Math.round(le.y+le.height),Je=D.includes("w")&&!D.includes("e"),ct=D.includes("n")&&!D.includes("s"),Rt=Je?wt:Zn,Ut=ct?Ht:rn,Ke=pt?Math.round(Rt/Vn)*Vn:Math.round(Rt),Xt=Fn?Math.round(Ut/Vn)*Vn:Math.round(Ut),Jn=Ke-Rt,nr=Xt-Ut,un=Math.abs(Jn)<=zp,Ft=Math.abs(nr)<=zp,Lr=pt&&(K||un),yr=Fn&&(K||Ft);yr||Lr?Ye("element-resize",[{x:Ke,y:Xt,showHorizontal:yr,showVertical:Lr}]):Ye("element-resize",null)},[a,X,K,Z,D,Ye]),y.useEffect(()=>{X||Ye("element-resize",null)},[X,Ye]),y.useEffect(()=>{if(!Xe){Ye("connector-drag",null);return}const pe=_e({deltaOverride:Oe??{x:0,y:0},previewOnly:!0}),be=pe?Ou(pe.deltaX):!1,Ie=pe?Ou(pe.deltaY):!1,Ce=pe?K||Ie:!1,pt=pe?K||be:!1;if(!pe||!Ce&&!pt){Ye("connector-drag",null);return}Ye("connector-drag",[{x:pe.x,y:pe.y,showHorizontal:Ce,showVertical:pt}])},[Oe,Xe,K,_e,Ye]),y.useEffect(()=>{if(!W){Ye("connector-resize",null);return}if(!z){Ye("connector-resize",null);return}Ye("connector-resize",[{x:z.point.x,y:z.point.y,showHorizontal:z.showHorizontal,showVertical:z.showVertical}])},[z,W,Ye]);const{startSelection:Ze,updateSelection:On,completeSelection:vn}=RO({isSelecting:I,selectionArea:k,onSelectionStart:B,onSelectionChange:O,onSelectionComplete:j}),{editingElementId:Et,editingText:nn,setEditingText:Kn,handleElementDoubleClick:Xn,handleTextInputKeyDown:bo,handleTextInputBlur:fr,handleInputMouseDown:Dn,handleInputClick:Zt}=kO({canvasMode:d,onElementTextEdit:S,onElementPropertyChange:C,onElementImageChange:M}),{temporarySelectMode:Wt}=TO({canvasMode:d,isDragging:yt,onTemporarySelectModeChange:$}),gn=y.useCallback(()=>o.current?.getBoundingClientRect()??null,[o]),jn=y.useCallback(()=>{const le=gn();return le?LO(le,l,c,u,ia):null},[gn,c,u,l]),Pn=y.useCallback((le,pe)=>{const be=jn();return be?HO(be,{clientX:le,clientY:pe}):null},[jn]),io=y.useCallback((le,pe)=>{const be=jn();return be?YO(be,{clientX:le,clientY:pe}):null},[jn]),vt=y.useCallback((le,pe,be)=>{N?.(le,pe,be)},[N]),{isDrawing:Jt,startPoint:ua,currentPoint:Bn,startDrawing:so,updateDrawing:Br,finishDrawing:$t}=IO({canvasMode:d,onConnectorCreate:vt,onFinishDrawing:()=>H?.("drag")}),[tt,zr]=y.useState(null),vo=y.useRef(null),Bo=y.useRef(null),zn=y.useRef(null),tr=y.useRef(!1),Nr=y.useRef(null),{highlightElementId:hr,drawingAnchorPreview:pr,updateHighlightElement:on,applyDrawingPreview:mr,clearDrawingPreview:Nn,computeAnchoredPoint:qt}=NO({elements:a,isDrawingConnector:Jt,shouldPersistAnchors:Jt||W});y.useEffect(()=>{Jt||(Nr.current=null)},[Jt]);const ho=.05,oi=y.useRef(null),po=y.useRef(null),gr=y.useRef(null);y.useLayoutEffect(()=>{const le=()=>{if(zn.current=null,!tr.current)return;tr.current=!1;const pe=Bo.current,be=vo.current;if(pe&&be){if(Math.abs(be.x-pe.x)<=ho&&Math.abs(be.y-pe.y)<=ho)return}else if(!pe&&!be)return;vo.current=pe?{x:pe.x,y:pe.y}:null,zr(pe?{x:pe.x,y:pe.y}:null)};oi.current=()=>{zn.current===null&&(zn.current=requestAnimationFrame(le))}},[yt,St,X,W,I,Jt]),y.useLayoutEffect(()=>{po.current=le=>{const pe=io(le.clientX,le.clientY);if(!pe||!Number.isFinite(pe.x)||!Number.isFinite(pe.y))return;const be=Bo.current;be&&Math.abs(be.x-pe.x)<=ho&&Math.abs(be.y-pe.y)<=ho||(Bo.current={x:pe.x,y:pe.y},tr.current=!0,oi.current?.())}},[io]),y.useLayoutEffect(()=>{gr.current=()=>{Bo.current=null,tr.current=!0,oi.current?.(),on(null),Nn()}},[on,Nn]);const da=y.useCallback(le=>{if(!Jt&&d==="draw-connector"){const pe=Pn(le.clientX,le.clientY);if(!pe)return;const be=qt(pe);on(be.elementId??null),be.elementId&&be.point?mr("start",be.point):pr.endpoint==="start"&&Nn()}},[Jt,d,qt,on,mr,Nn,Pn]),zo=y.useCallback(()=>{gr.current?.()},[]),Vt=y.useCallback(le=>{if(le.button!==0)return;const pe=gn();if(!pe||!jn())return;const Ie=le.target,Ce=Ie.nodeType===Node.ELEMENT_NODE?Ie:Ie.parentElement??null,pt=Ce?.getAttribute?.("data-connector-handle")??null,Fn=Ce?.closest?.('[data-connector-container="true"]')??null,wt=Ce?.getAttribute?.("data-connector-id")||Ce?.parentElement?.getAttribute?.("data-connector-id")||Fn?.getAttribute("data-connector-id"),Ht=(Ce?.closest?.('[data-element-container="true"]')??null)?.getAttribute("data-element-id"),rn=Ce?.getAttribute?.("data-resize-handle")??null;if(pt&&wt){le.stopPropagation();const Je=pt,ct=Ce?.getAttribute?.("data-anchor-x")??Ce?.parentElement?.getAttribute?.("data-anchor-x"),Rt=Ce?.getAttribute?.("data-anchor-y")??Ce?.parentElement?.getAttribute?.("data-anchor-y");let Ut={x:le.clientX,y:le.clientY};if(ct&&Rt){const Ke=Number(ct),Xt=Number(Rt);!Number.isNaN(Ke)&&!Number.isNaN(Xt)&&(Ut={x:pe.left+ia+(Ke+c)*l,y:pe.top+ia+(Xt+u)*l})}G(wt,Je,Ut);return}if(rn&&Ce){le.stopPropagation();const ct=Ce.closest('[data-element-container="true"]')?.getAttribute("data-element-id")||Ce.getAttribute("data-element-id");if(ct){const Rt=a.find(Ke=>Ke.id===ct);if(!Rt)return;const Ut={x:Rt.x,y:Rt.y,width:Rt.width,height:Rt.height};U(ct,rn,{x:le.clientX,y:le.clientY},Ut);return}}if(wt&&d==="drag"&&!X&&!W){le.stopPropagation();const Je=i.find(Xt=>Xt.id===wt);if(!Je)return;const ct=le.ctrlKey||le.metaKey,Rt=se.has(wt);let Ut;ct||!Rt?(Ut=We(wt,ct),v(wt,ct)):Ut=h.slice(),ue.current=p.slice();const Ke=!!(Je.startAttachment||Je.endAttachment);if(Ke&&!pt){le.preventDefault();const Xt=Pn(le.clientX,le.clientY);if(!Xt)return;const Jn=$O(Je,Xt),nr=Jn==="start"?Je.startPoint:Je.endPoint,un=Jn==="start"?Je.startAttachment?.elementId??null:Je.endAttachment?.elementId??null,Ft={x:Xt.x-nr.x,y:Xt.y-nr.y};G(wt,Jn,{x:le.clientX,y:le.clientY},{pointerOffset:Ft}),on(un);return}if(!Ke&&!pt){Le(wt,{x:le.clientX,y:le.clientY},pe,Ut);return}}if(Ht&&d==="drag"&&!X){const Je=le.ctrlKey||le.metaKey,ct=ie.has(Ht);let Rt;(Je||!ct)&&(Rt=Pe(Ht,Je),m(Ht,Je)),cn(Ht,{x:le.clientX,y:le.clientY},pe,Rt);return}if(!Ht&&!wt&&d==="drag"&&!Wt&&!X&&!W){Nt({x:le.clientX,y:le.clientY}),!le.ctrlKey&&!le.metaKey&&q?.();return}if(d==="select"||Wt){const Je=Pn(le.clientX,le.clientY);if(!Je)return;!le.ctrlKey&&!le.metaKey&&!Wt&&q?.(),Ze(Je.x,Je.y);return}if(d==="draw-connector"){const Je=Pn(le.clientX,le.clientY);if(!Je)return;const ct=qt(Je);if(!Jt)Nr.current=ct.attachment,so(ct.point);else{const Rt={start:Nr.current,end:ct.attachment};$t(ct.point,Rt),Nr.current=null}return}},[o,l,c,u,i,d,X,W,a,Pe,We,se,v,ie,m,cn,Le,Nt,Wt,q,Ze,qt,Jt,so,$t,G,on,gn,jn,Pn]),Mt=y.useCallback(le=>{const pe=Pn(le.clientX,le.clientY);if(!pe)return;let be=!1;if(!Jt&&d==="draw-connector"){const Ce=qt(pe);on(Ce.elementId??null),Ce.elementId&&Ce.point?(mr("start",Ce.point),be=!0):pr.endpoint==="start"&&Nn()}if(Jt){const Ce=qt(pe);Br(Ce.point),on(Ce.elementId??null),Ce.elementId&&Ce.point?(mr("end",Ce.point),be=!0):pr.endpoint==="end"&&Nn()}if(W){const Ce=qt(pe);on(Ce.elementId??null),Ce.elementId&&(be=!0)}be||(on(null),Nn());const Ie={x:le.clientX,y:le.clientY};yt&&ht?je(Ie):Xe&&we?(ue.current.length===0&&p.length>0&&(ue.current=p.slice()),Ne(Ie)):St?mn(Ie):I&&k&&On(pe.x,pe.y)},[o,l,c,u,Jt,d,qt,on,mr,Nn,W,yt,ht,je,Xe,we,Ne,St,mn,I,k,On,Pn]),ri=y.useCallback(()=>{I&&k&&vn();const le=K;let pe=!1;yt?(Te(),pe=le):Xe?(xt(),pe=le):St?(bn(),Be(),Fe()):(Be(),Fe(),Lt()),Nn(),on(null),pe?requestAnimationFrame(()=>{_e(),ot([])}):ot([])},[I,k,vn,yt,Te,Xe,xt,St,bn,Be,Fe,Lt,Nn,on,K,_e]);return y.useEffect(()=>()=>{Bo.current=null,tr.current=!1,zn.current!==null&&(cancelAnimationFrame(zn.current),zn.current=null)},[]),y.useEffect(()=>{d!=="draw-connector"&&Nn()},[d,Nn]),y.useEffect(()=>{!Jt&&!W&&d!=="draw-connector"&&on(null)},[Jt,W,d,on]),y.useEffect(()=>{W&&oe&&Y.elementId&&on(Y.elementId)},[W,oe,Y,on]),y.useEffect(()=>{const le=o.current;if(!le)return;const pe={passive:!1},be=Ce=>po.current?.(Ce),Ie=()=>gr.current?.();return le.addEventListener("wheel",Ue,pe),le.addEventListener("touchstart",ao,pe),le.addEventListener("touchmove",_n,pe),le.addEventListener("touchend",Mn,pe),le.addEventListener("touchcancel",Mn,pe),le.addEventListener("mousemove",be,pe),le.addEventListener("mouseleave",Ie,pe),()=>{le.removeEventListener("wheel",Ue),le.removeEventListener("touchstart",ao),le.removeEventListener("touchmove",_n),le.removeEventListener("touchend",Mn),le.removeEventListener("touchcancel",Mn),le.removeEventListener("mousemove",be),le.removeEventListener("mouseleave",Ie)}},[o,Ue,ao,_n,Mn]),y.useEffect(()=>{const le=pe=>{pe.preventDefault()};return document.addEventListener("gesturestart",le,{passive:!1}),document.addEventListener("gesturechange",le,{passive:!1}),document.addEventListener("gestureend",le,{passive:!1}),()=>{document.removeEventListener("gesturestart",le),document.removeEventListener("gesturechange",le),document.removeEventListener("gestureend",le)}},[]),y.useLayoutEffect(()=>{if(St||yt||Xe||I||Jt||W){const le=be=>Mt(be),pe=()=>ri();return document.addEventListener("mousemove",le),document.addEventListener("mouseup",pe),document.addEventListener("pointerup",pe),document.addEventListener("pointercancel",pe),()=>{document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",pe),document.removeEventListener("pointerup",pe),document.removeEventListener("pointercancel",pe)}}},[St,yt,Xe,I,Jt,W,Mt,ri]),{isDragging:yt,dragVisualDelta:It,isDraggingConnector:Xe,dragConnectorId:we,dragConnectorVisualDelta:Oe,isPanning:St,isDrawingConnector:Jt,connectorStartPoint:ua,connectorCurrentPoint:Bn,highlightElementId:hr,drawingAnchorPreview:pr,shiftSnapPreview:gt,connectorHandleSuppressedElements:De,mousePosition:tt,editingElementId:Et,editingText:nn,setEditingText:Kn,handleElementDoubleClick:Xn,handleTextInputKeyDown:bo,handleTextInputBlur:fr,handleInputMouseDown:Dn,handleInputClick:Zt,temporarySelectMode:Wt,events:{onMouseDown:Vt,onMouseMove:da,onMouseLeave:zo},isZoomingRef:at}},XO=e=>{const{elements:o,connectors:a,zoom:i,panX:l,panY:c,showGrid:u,showRulers:d,onPanChange:p,onElementSelect:h,onConnectorSelect:g,onElementsMoveTo:m,onConnectorsMoveTo:v,onElementTextEdit:A,onElementPropertyChange:w,onElementImageChange:S,onZoomChange:C,onZoomAtPoint:M,selectedElements:R,selectedConnectors:E,canvasMode:k,selectionArea:I,isSelecting:B,onSelectionStart:O,onSelectionChange:j,onSelectionComplete:U,onResizeStart:G,onConnectorResizeStart:X,isResizing:W,isConnectorResizing:J,resizingConnectorId:oe,resizeHasAnchorPreview:Z,resizeElementId:D,resizeHandle:Y,resizeEndpoint:z,resizeAnchorPreview:L,connectorResizeSnapPreview:T,isShiftPressed:$,onTransactionStart:N,onTransactionEnd:H,onTemporarySelectModeChange:q,onConnectorCreate:K,onModeChange:ie,onSelectionClear:ue,onItemContextMenu:se,onCanvasContextMenu:ye}=e,ge=y.useRef(null),Ae=y.useRef(null),Se=y.useMemo(()=>new Set(R),[R]),Pe=y.useMemo(()=>new Set(E),[E]),Ee=y.useMemo(()=>new Set(o.map(Ue=>Ue.id)),[o]),He=UO({canvasRef:ge,elements:o,connectors:a,zoom:i,panX:l,panY:c,canvasMode:k,selectedElements:R,selectedConnectors:E,onPanChange:p,onElementSelect:h,onConnectorSelect:g,onElementsMoveTo:m,onConnectorsMoveTo:v,onElementTextEdit:A,onElementPropertyChange:w,onElementImageChange:S,onZoomChange:C,onZoomAtPoint:M,selectionArea:I,isSelecting:B,onSelectionStart:O,onSelectionChange:j,onSelectionComplete:U,onResizeStart:G,onConnectorResizeStart:X,isResizing:W,isConnectorResizing:J,resizingConnectorId:oe,resizeHasAnchorPreview:Z,resizeElementId:D,resizeHandle:Y,resizeAnchorPreview:L,connectorResizeSnapPreview:T,isShiftPressed:$,onTransactionStart:N,onTransactionEnd:H,onTemporarySelectModeChange:q,onConnectorCreate:K,onModeChange:ie,onSelectionClear:ue}),{isDragging:We,dragVisualDelta:_e,isDraggingConnector:gt,dragConnectorId:ot,dragConnectorVisualDelta:Ye,isPanning:et,isDrawingConnector:yt,connectorStartPoint:ht,connectorCurrentPoint:It,highlightElementId:cn,drawingAnchorPreview:je,shiftSnapPreview:Te,connectorHandleSuppressedElements:Be,mousePosition:Xe,editingElementId:we,editingText:Oe,setEditingText:Le,handleElementDoubleClick:Ne,handleTextInputKeyDown:xt,handleTextInputBlur:Fe,handleInputMouseDown:$e,handleInputClick:De,temporarySelectMode:St,events:Nt,isZoomingRef:mn}=He,bn=y.useMemo(()=>[...o.map((at,Ze)=>({kind:"element",zIndex:at.zIndex??Ze,orderIndex:Ze,element:at})),...a.map((at,Ze)=>({kind:"connector",zIndex:at.zIndex??o.length+Ze,orderIndex:o.length+Ze,connector:at}))].sort((at,Ze)=>at.zIndex===Ze.zIndex?at.orderIndex-Ze.orderIndex:at.zIndex-Ze.zIndex),[o,a]),Lt=St?"select":k,ao=y.useMemo(()=>{if(!Te.length)return[];const Ue=Te.filter(Ze=>Ze.showVertical).map(Ze=>Ze.x).filter(Ze=>Number.isFinite(Ze)),at=new Map;return Ue.forEach(Ze=>{at.set(Math.round(Ze*1e3)/1e3,Ze)}),Array.from(at.values())},[Te]),_n=y.useMemo(()=>{if(!Te.length)return[];const Ue=Te.filter(Ze=>Ze.showHorizontal).map(Ze=>Ze.y).filter(Ze=>Number.isFinite(Ze)),at=new Map;return Ue.forEach(Ze=>{at.set(Math.round(Ze*1e3)/1e3,Ze)}),Array.from(at.values())},[Te]),Mn=y.useCallback(Ue=>{const at=Ue.target,Ze=at.nodeType===Node.ELEMENT_NODE?at:at.parentElement??null,On=Ze?.getAttribute?.("data-connector-id")||Ze?.parentElement?.getAttribute?.("data-connector-id")||Ze?.closest?.('[data-connector-container="true"]')?.getAttribute("data-connector-id")||null,Et=Ze?.closest?.('[data-element-container="true"]')?.getAttribute("data-element-id")??null;if(On){Ue.preventDefault(),Ue.stopPropagation(),Pe.has(On)||g(On,!1),se?.({x:Ue.clientX,y:Ue.clientY,targetType:"connector",targetId:On});return}if(Et){Ue.preventDefault(),Ue.stopPropagation(),Se.has(Et)||h(Et,!1),se?.({x:Ue.clientX,y:Ue.clientY,targetType:"element",targetId:Et});return}Ue.preventDefault(),Ue.stopPropagation(),se?.(null),ye?.({x:Ue.clientX,y:Ue.clientY})},[g,Pe,se,h,Se,ye]);return b.jsxs(c_,{ref:ge,$canvasMode:Lt,$isPanning:et,className:et?"panning":"",onMouseDown:Nt.onMouseDown,onMouseMove:Nt.onMouseMove,onMouseLeave:Nt.onMouseLeave,onContextMenu:Mn,"data-canvas":"true","data-canvas-wrapper":"true",children:[b.jsxs(u_,{$zoom:i,$panX:l,$panY:c,$isPinchZooming:mn.current,$showGrid:u,"data-canvas-content":"true","data-grid-visible":u?"true":"false",children:[bn.map(Ue=>{if(Ue.kind==="element"){const Zt=Ue.element,Wt=Se.has(Zt.id),gn=We&&Wt?_e:Ab;return b.jsx(dO,{element:Zt,isSelected:Wt,dragDelta:gn,onDoubleClick:Ne,isInteractive:Lt==="drag",highlightAnchors:cn===Zt.id,layerZIndex:Ue.zIndex,layerOrder:Ue.orderIndex,handleOverlay:Ae.current,suppressHandleOverlay:Be.has(Zt.id)},`element:${Zt.id}`)}const at=Ue.connector,Ze=Pe.has(at.id),On=gt&&at.id===ot,vn=On?Ye:Ab,Et=at.startAttachment?.elementId??null,nn=at.endAttachment?.elementId??null,Kn=J&&oe===at.id,Xn=Kn&&Z,bo=!On&&!Kn&&!!(Et&&Ee.has(Et)||nn&&Ee.has(nn)),fr=Xn?L.point:null,Dn=Xn?z:null;return b.jsx(vO,{connector:at,isSelected:Ze,dragDelta:vn,isAnchored:bo,hasAnchorPreview:Xn,anchorPreviewPoint:fr,anchorPreviewEndpoint:Dn,layerZIndex:Ue.zIndex,layerOrder:Ue.orderIndex,handleOverlay:Ae.current},`connector:${at.id}`)}),je.point&&je.endpoint&&b.jsx(jw,{x:je.point.x,y:je.point.y,endpoint:je.endpoint}),I&&b.jsx(F_,{$left:Math.min(I.startX,I.endX),$top:Math.min(I.startY,I.endY),$width:Math.abs(I.endX-I.startX),$height:Math.abs(I.endY-I.startY),"data-selection-rectangle":"true"}),yt&&ht&&It&&b.jsxs("svg",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",overflow:"visible",pointerEvents:"none"},children:[b.jsx("line",{x1:ht.x,y1:ht.y,x2:It.x,y2:It.y,stroke:"#3498db",strokeWidth:2,strokeDasharray:"5,5",vectorEffect:"non-scaling-stroke",strokeLinecap:"round"}),b.jsx("circle",{cx:ht.x,cy:ht.y,r:4,fill:"#3498db",stroke:"white",strokeWidth:2})]}),Te.map((Ue,at)=>b.jsxs("div",{"data-shift-snap-preview":"true",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1e3},children:[Ue.showHorizontal&&b.jsx("div",{"data-shift-snap-preview-line":"horizontal",style:{position:"absolute",left:0,top:Ue.y-.5,width:"100%",height:1,background:"rgba(231, 76, 60, 0.85)"}}),Ue.showVertical&&b.jsx("div",{"data-shift-snap-preview-line":"vertical",style:{position:"absolute",left:Ue.x-.5,top:0,width:1,height:"100%",background:"rgba(231, 76, 60, 0.85)"}})]},`shift-snap-${at}`)),we&&o.find(Ue=>Ue.id===we)&&b.jsx(fO,{element:o.find(Ue=>Ue.id===we),editingText:Oe,onTextChange:Le,onKeyDown:Ue=>xt(Ue,o),onBlur:Fe,onMouseDown:$e,onClick:De}),b.jsx("div",{ref:Ae,"data-handle-overlay":"true",style:{position:"absolute",top:0,left:0,width:`${Sw}px`,height:`${Ew}px`,pointerEvents:"none",zIndex:2e5}})]}),d&&b.jsxs(b.Fragment,{children:[b.jsx(U_,{}),b.jsx(pb,{orientation:"horizontal",zoom:i,pan:l,mousePos:Xe?.x??null,snapWorldPositions:ao}),b.jsx(pb,{orientation:"vertical",zoom:i,pan:c,mousePos:Xe?.y??null,snapWorldPositions:_n})]})]})},FO=36,QO=88,GO=24,kb=140,WO=2,qO=12;function Tb(e){const o=FO+QO+GO,a=Math.max(0,e-o),i=Math.floor((a+kb*.2)/kb);return Math.max(WO,Math.min(i,qO))}function VO(e,o,a){if(e.length<=a)return e;const i=e.findIndex(d=>d.id===o);if(i===-1)return e.slice(0,a);const l=new Set;l.add(e[i]);let c=i-1,u=i+1;for(;l.size<a&&(c>=0||u<e.length);)u<e.length&&l.size<a&&l.add(e[u++]),c>=0&&l.size<a&&l.add(e[c--]);return e.filter(d=>l.has(d))}function KO(e,o,a){const[i,l]=y.useState(()=>Tb(a));y.useEffect(()=>{const p=setTimeout(()=>{l(Tb(a))},250);return()=>clearTimeout(p)},[a]);const c=y.useMemo(()=>VO(e,o,i),[e,o,i]),u=y.useMemo(()=>e.filter(p=>!c.some(h=>h.id===p.id)),[e,c]),d=u.length>0;return{visibleTabs:c,overflowTabs:u,hasOverflow:d,tabCapacity:i}}function ZO(e){const[o,a]=y.useState(0);return y.useEffect(()=>{const i=e.current;if(!i)return;const l=new ResizeObserver(c=>{for(const u of c)a(u.contentRect.width)});return l.observe(i),a(i.getBoundingClientRect().width),()=>l.disconnect()},[e]),o}function JO(e,o){const[a,i]=y.useState(null),[l,c]=y.useState(null),u=y.useRef(null),d=y.useRef(null),p=y.useRef(e);y.useEffect(()=>{p.current=e},[e]);const h=y.useCallback(()=>{u.current=null,d.current=null,i(null),c(null)},[]),g=y.useCallback(S=>{d.current=S,c(S)},[]),m=y.useCallback((S,C)=>{S.dataTransfer.effectAllowed="move",S.dataTransfer.setData("text/plain",C),u.current=C,i(C)},[]),v=y.useCallback(S=>{S.preventDefault(),h()},[h]),A=y.useCallback((S,C,M)=>{if(!u.current)return;S.preventDefault(),S.dataTransfer.dropEffect="move";const R=S.currentTarget.getBoundingClientRect(),E=R.left+R.width/2,k=S.clientX<=E?"before":"after";g({zone:M,targetId:C,position:k})},[g]),w=y.useCallback(S=>{S.preventDefault(),S.stopPropagation();const C=u.current,M=d.current,R=p.current;if(!C||!M){h();return}const E=R.map(O=>O.id),k=E.indexOf(C),I=E.indexOf(M.targetId);if(k===-1||I===-1){h();return}let B=M.position==="before"?I:I+1;k<B&&(B-=1),B=Math.max(0,Math.min(E.length-1,B)),B!==k&&o(C,B),h()},[o,h]);return{draggingPageId:a,dropState:l,handleDragStart:m,handleDragEnd:v,handleDragOver:A,handleDrop:w}}const eD=ce.div.attrs(e=>({style:{left:`${e.$libraryWidth}px`}}))`
  position: fixed;
  bottom: 0;
  right: 0;
  height: 34px;
  background: white;
  border-top: 1px solid #e1e5e9;
  z-index: 150;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 10px;
  box-shadow: 0 -1px 3px rgba(0, 0, 0, 0.08);
  transition: left 0.15s ease-out;
`,tD=ce.div`
  display: flex;
  align-items: center;
  gap: 2px;
  flex: 1;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
`,Hw=ce.div`
  position: relative;
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 8px 0 12px;
  min-height: 28px;
  border-radius: 6px;
  cursor: pointer;
  user-select: none;
  font-size: 12px;
  color: #2c3e50;
  background: transparent;
  border: 1px solid transparent;
  transition: background 0.2s, border-color 0.2s;
  flex-shrink: 0;

  &[data-active='true'] {
    font-weight: 600;
  }

  &[data-dragging='true'] {
    opacity: 0.5;
  }

  &:hover:not([data-dragging='true']) {
    background: #f5f5f5;
  }

  &[data-drop-target='true'] {
    background: rgba(33, 150, 243, 0.12);
    border-color: rgba(33, 150, 243, 0.4);
  }
`,nD=ce.button`
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 11px;
  color: #666;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  flex-shrink: 0;
  opacity: 0;
  pointer-events: none;
  margin-left: 8px;

  ${Hw}:hover & {
    opacity: 1;
    pointer-events: auto;
  }

  &:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #333;
  }
`,oD=ce.input`
  border: 1px solid #2196f3;
  background: white;
  padding: 4px 8px;
  height: 28px;
  font-size: 12px;
  border-radius: 3px;
  outline: none;
  min-width: 90px;
  max-width: 200px;
`,rD=ce.span`
  flex: 1 1 auto;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`,aD=ce.button`
  padding: 4px 10px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  user-select: none;

  &:hover {
    background: rgba(0, 0, 0, 0.08);
  }

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4);
  }

  &[data-open='true'] {
    background: rgba(0, 0, 0, 0.1);
  }
`,Yw=ce.button`
  width: 28px;
  min-width: 28px;
  height: 28px;
  padding: 0;
  border: none;
  background: rgba(0, 0, 0, 0.04);
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  user-select: none;

  &:hover:not(:disabled) {
    background: rgba(0, 0, 0, 0.08);
  }

  &:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4);
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,iD=ce(Yw)`
  width: 28px;
  min-width: 28px;
  padding: 0;
  font-size: 14px;
`,sD=ce.div`
  position: absolute;
  bottom: 100%;
  right: 10px;
  margin-bottom: 4px;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px -4px 12px rgba(0, 0, 0, 0.15);
  min-width: 200px;
  max-height: 300px;
  z-index: 1200;
  animation: slideUp 0.15s ease-out;

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
`,lD=ce.div`
  padding: 8px 12px;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: space-between;

  &[data-active='true'] {
    font-weight: 600;
  }

  &[data-dragging='true'] {
    opacity: 0.5;
  }

  &:hover:not([data-dragging='true']) {
    background: #f5f5f5;
  }

  &[data-drop-target='true'] {
    background: rgba(33, 150, 243, 0.12);
  }
`,cD=ce.div`
  height: 1px;
  background: #e1e5e9;
  margin: 4px 0;
`,Ib=ce.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  font-size: 12px;
  color: #2c3e50;
  cursor: pointer;
  border-radius: 0;

  &:hover:not(:disabled) {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`,Np=ce.div`
  pointer-events: none;
  background: #1d6ff2;
  box-shadow: 0 0 6px rgba(29, 111, 242, 0.4);
  border-radius: 999px;

  ${e=>e.$variant==="strip"?`
      width: 6px;
      height: 22px;
      margin: 0 4px;
    `:`
      width: calc(100% - 24px);
      height: 4px;
      margin: 4px 12px;
    `}
`,uD=ce.div`
  position: fixed;
  background: white;
  border: 1px solid #e1e5e9;
  border-radius: 6px;
  box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.15);
  min-width: 150px;
  z-index: 1300;
  padding: 4px;
`,dD=ce.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: none;
  text-align: left;
  cursor: pointer;
  font-size: 12px;
  color: #2c3e50;
  border-radius: 4px;
  user-select: none;

  &:hover {
    background: #f5f5f5;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
`;let ip=null;const fD=(e,o)=>{if(typeof document>"u")return e.length*7;ip||(ip=document.createElement("canvas"));const a=ip.getContext("2d");return a?(a.font=`${o} 12px -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`,a.measureText(e).width):e.length*7};function hD({page:e,isActive:o,isDragging:a,isDropTarget:i,canDelete:l,onSelect:c,onClose:u,onRename:d,onContextMenu:p,onDragStart:h,onDragEnd:g,onDragOver:m,onDrop:v}){const[A,w]=y.useState(!1),[S,C]=y.useState(e.name),M=y.useRef(null),R=y.useRef(!1);y.useEffect(()=>{A&&M.current&&(M.current.focus(),M.current.select())},[A]);const E=X=>{X.stopPropagation(),C(e.name),w(!0)},k=()=>{if(R.current)return;R.current=!0,d(e.id,S)?w(!1):C(e.name),setTimeout(()=>{R.current=!1},100)},I=()=>{setTimeout(()=>{!R.current&&A&&k()},50)},B=X=>{X.key==="Enter"?(X.preventDefault(),M.current?.blur(),k()):X.key==="Escape"&&(X.preventDefault(),C(e.name),w(!1))},O=X=>{if(X.button===1){X.preventDefault(),u(e.id);return}X.button===0&&(A||c(e.id))},j=X=>{X.stopPropagation(),l&&u(e.id)},U=X=>{X.preventDefault(),X.stopPropagation();const W=X.currentTarget.getBoundingClientRect();p(X,e.id,W)},G=y.useMemo(()=>{const X=o?"600":"500",W=fD(e.name,X),J=12,oe=8,Z=l?8:0,D=l?18:0,Y=8,z=90,L=260,T=W+J+oe+Z+D+Y;return Math.min(L,Math.max(z,Math.ceil(T)))},[e.name,o,l]);return A?b.jsx(oD,{ref:M,value:S,onChange:X=>C(X.target.value),onBlur:I,onKeyDown:B,style:{width:`${G}px`},"data-page-tab-input":"true"}):b.jsxs(Hw,{"data-active":o,"data-dragging":a,"data-drop-target":i,"data-page-tab-id":e.id,"data-page-button":"true",draggable:!0,onMouseDown:O,onDoubleClick:E,onContextMenu:U,onDragStart:X=>h(X,e.id),onDragEnd:g,onDragOver:X=>m(X,e.id),onDrop:v,style:{width:`${G}px`},children:[b.jsx(rD,{title:e.name,children:e.name}),l&&b.jsx(nD,{onClick:j,"data-page-close-button":"true",children:""})]})}const pD=y.memo(hD,(e,o)=>e.page.id===o.page.id&&e.page.name===o.page.name&&e.isActive===o.isActive&&e.isDragging===o.isDragging&&e.isDropTarget===o.isDropTarget&&e.canDelete===o.canDelete);function mD({pages:e,activePageId:o,draggingPageId:a,dropState:i,onSelect:l,onContextMenu:c,onDragStart:u,onDragEnd:d,onDragOver:p,onDrop:h,onClose:g,onDuplicateActive:m,onDeleteActive:v,canDuplicateActive:A,canDeleteActive:w}){const S=y.useRef(null);y.useEffect(()=>{const R=k=>{S.current&&!S.current.contains(k.target)&&g()},E=setTimeout(()=>{document.addEventListener("mousedown",R)},100);return()=>{clearTimeout(E),document.removeEventListener("mousedown",R)}},[g]);const C=R=>{l(R),g()},M=(R,E)=>{R.preventDefault(),R.stopPropagation();const k=R.currentTarget.getBoundingClientRect();c(R,E,k)};return b.jsxs(sD,{ref:S,onDrop:h,onDragOver:R=>{a&&R.preventDefault()},children:[e.map(R=>{const E=R.id===o,k=R.id===a,I=i?.zone==="overflow"&&i.targetId===R.id,B=I&&i?.position==="before",O=I&&i?.position==="after";return b.jsxs(Me.Fragment,{children:[B&&b.jsx(Np,{$variant:"overflow"}),b.jsxs(lD,{"data-dropup-page-item":"true","data-page-id":R.id,"data-active":E,"data-dragging":k,"data-drop-target":I,draggable:!0,onClick:()=>C(R.id),onContextMenu:j=>M(j,R.id),onDragStart:j=>u(j,R.id),onDragEnd:d,onDragOver:j=>p(j,R.id,"overflow"),onDrop:h,children:[b.jsx("span",{children:R.name}),E&&b.jsx("span",{children:""})]}),O&&b.jsx(Np,{$variant:"overflow"})]},R.id)}),b.jsx(cD,{}),b.jsx(Ib,{type:"button",onClick:()=>{A&&(m(),g())},disabled:!A,"data-dropup-action":"duplicate",children:"Duplicate"}),b.jsx(Ib,{type:"button",onClick:()=>{w&&(v(),g())},disabled:!w,"data-dropup-action":"delete",children:"Delete"})]})}const gD=ce.div`
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding-left: 8px;
`,_b=ce.button`
  width: 26px;
  height: 26px;
  border: none;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  color: #2c3e50;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;

  &:hover {
    background: rgba(0, 0, 0, 0.1);
  }

  &:active {
    background: rgba(0, 0, 0, 0.15);
  }
`,yD=ce.div`
  position: relative;
`,xD=ce.button`
  min-width: 50px;
  height: 26px;
  padding: 0 10px;
  border: none;
  background: rgba(0, 0, 0, 0.05);
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  color: #2c3e50;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s ease;

  &:hover {
    background: rgba(0, 0, 0, 0.1);
  }
`,bD=ce.div`
  position: absolute;
  bottom: 110%;
  right: -26px;
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.08);
  border-radius: 6px;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
  padding: 4px 0;
  display: ${e=>e.$visible?"block":"none"};
  min-width: 148px;
  z-index: 1000;
`,Ob=ce.button`
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: #2c3e50;
  font-size: 12px;
  text-align: left;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;

  &:hover {
    background: rgba(0, 0, 0, 0.05);
  }
`,Db=ce.span`
  font-size: 11px;
  color: #6c757d;
`,jb=ce.span`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  svg {
    width: 18px;
    height: 18px;
  }
`,vD=({zoom:e,onZoomIn:o,onZoomOut:a,onReset:i,onFitToScreen:l})=>{const[c,u]=y.useState(!1),d=y.useRef(null),h=y.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[])?"":"Ctrl",g=`${h}+'`,m=`${h}+\\`;y.useEffect(()=>{if(!c)return;const S=M=>{d.current&&!d.current.contains(M.target)&&u(!1)},C=M=>{M.key==="Escape"&&u(!1)};return document.addEventListener("mousedown",S),document.addEventListener("keydown",C),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("keydown",C)}},[c]);const v=()=>u(S=>!S),A=()=>{i?.(),u(!1)},w=()=>{l?.(),u(!1)};return b.jsxs(gD,{"data-zoom-inline":"true",children:[b.jsx(_b,{onClick:a,title:"Zoom Out (Ctrl/Cmd+[)",children:b.jsx(jb,{children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),b.jsx("path",{d:"M7 10h6"}),b.jsx("path",{d:"M21 21l-6 -6"})]})})}),b.jsxs(yD,{ref:d,children:[b.jsxs(xD,{onClick:v,children:[Math.round(e*100),"%"]}),b.jsxs(bD,{$visible:c,"data-zoom-menu":"true",children:[b.jsxs(Ob,{onClick:A,children:[b.jsx("span",{children:"Reset"}),b.jsx(Db,{children:g})]}),b.jsxs(Ob,{onClick:w,children:[b.jsx("span",{children:"Fit to screen"}),b.jsx(Db,{children:m})]})]})]}),b.jsx(_b,{onClick:o,title:"Zoom In (Ctrl/Cmd+])",children:b.jsx(jb,{children:b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[b.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),b.jsx("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),b.jsx("path",{d:"M10 7v6"}),b.jsx("path",{d:"M7 10h6"}),b.jsx("path",{d:"M21 21l-6 -6"})]})})})]})};function wD({isOpen:e,pageName:o,itemCount:a,onConfirm:i,onCancel:l}){return b.jsxs(Ls,{isOpen:e,onClose:l,ariaLabelledBy:"delete-page-title",closeOnOverlayClick:!1,children:[b.jsx(Bs,{id:"delete-page-title",children:"Delete page"}),b.jsxs(zs,{children:[b.jsxs("p",{children:["Are you sure you want to delete the page ",b.jsx("strong",{children:o}),"?"]}),a>0?b.jsxs("p",{children:["This page contains ",a," item",a===1?"":"s",". Deleting it cannot be undone."]}):b.jsx("p",{children:"This page is currently empty. Deleting it cannot be undone."})]}),b.jsxs(Ns,{children:[b.jsx(jo,{onClick:l,children:"Cancel"}),b.jsx(jo,{$variant:"danger",onClick:i,children:"Delete page"})]})]})}const AD=()=>null,CD=({style:e,children:o,dataAttributes:a,forwardedRef:i})=>b.jsx(uD,{ref:i,style:e,...a??{},children:o}),SD=({entry:e,onSelect:o})=>b.jsx(dD,{onClick:o,disabled:e.disabled,...e.dataAttributes??{},children:e.label}),ED={Container:CD,Item:({entry:e,onSelect:o})=>b.jsx(SD,{entry:e,onSelect:o}),Separator:AD},$w=y.forwardRef(function({pages:o,activePageId:a,canAddPage:i,libraryWidth:l,isLibraryCollapsed:c,onAddPage:u,onToggleLibrary:d,onDeletePage:p,onRenamePage:h,onDuplicatePage:g,onReorderPages:m,onSwitchToPage:v,zoom:A,onZoomIn:w,onZoomOut:S,onResetZoom:C,onFitToScreen:M},R){const[E,k]=y.useState(!1),[I,B]=y.useState(null),{state:O,openMenu:j,closeMenu:U,resetMenu:G}=od(),X=y.useRef(null),W=ZO(X),{visibleTabs:J,overflowTabs:oe,hasOverflow:Z}=KO(o,a,W),{draggingPageId:D,dropState:Y,handleDragStart:z,handleDragEnd:L,handleDragOver:T,handleDrop:$}=JO(o,m),N=o.length>1,H=i,q=y.useCallback(Ee=>{if(U(),G(),o.length<=1)return;const He=o.find(ot=>ot.id===Ee);if(!He)return;const We=He.canvasState.elements.length,_e=He.canvasState.connectors.length;if(We+_e===0){p(Ee);return}B(Ee)},[U,p,o,G]),K=y.useCallback((Ee,He,We)=>{k(!1);const _e={left:We.left,top:We.top,right:We.right,bottom:We.bottom,width:We.width,height:We.height};j({anchorRect:_e,placement:"anchor",dataAttributes:{"data-page-tab-context-menu":"true"},metadata:{pageId:He},entries:r_({canDuplicate:i,canDelete:N,onDuplicate:()=>g(He),onDelete:()=>q(He)})})},[i,N,g,j,q]),ie=Me.useMemo(()=>I?o.find(Ee=>Ee.id===I)??null:null,[I,o]),ue=y.useCallback(()=>{I&&(p(I),B(null))},[I,p]),se=y.useCallback(()=>{B(null)},[]),ye=y.useCallback(()=>{H&&g(a)},[H,g,a]),ge=y.useCallback(()=>{N&&q(a)},[N,q,a]);y.useImperativeHandle(R,()=>({requestDeletePage:Ee=>q(Ee)}),[q]);const Ae=[...oe],Se=(Ee,He,We)=>Y&&Y.zone===We&&Y.targetId===Ee&&Y.position===He?b.jsx(Np,{$variant:We}):null,Pe=c?oS:tS;return b.jsxs(eD,{ref:X,$libraryWidth:l,onDrop:$,onDragOver:Ee=>{D&&Ee.preventDefault()},children:[b.jsx(iD,{onClick:d,title:c?"Expand library":"Collapse library","aria-label":c?"Expand sidebar":"Collapse sidebar",children:b.jsx(Pe,{"aria-hidden":"true",size:18,stroke:1.5})}),b.jsx(Yw,{onClick:()=>u(),disabled:!i,title:i?"Add new page":"Maximum 100 pages reached","aria-label":i?"Add new page":"Maximum 100 pages reached","data-add-page-button":"true",children:b.jsx(dS,{"aria-hidden":"true",size:18,stroke:1.5})}),b.jsx(tD,{onDrop:$,onDragOver:Ee=>{D&&Ee.preventDefault()},children:J.map(Ee=>b.jsxs(Me.Fragment,{children:[Se(Ee.id,"before","strip"),b.jsx(pD,{page:Ee,isActive:Ee.id===a,isDragging:Ee.id===D,isDropTarget:Y?.zone==="strip"&&Y.targetId===Ee.id,canDelete:o.length>1,onSelect:v,onClose:q,onRename:h,onContextMenu:K,onDragStart:z,onDragEnd:L,onDragOver:(He,We)=>T(He,We,"strip"),onDrop:$}),Se(Ee.id,"after","strip")]},Ee.id))}),Z&&b.jsxs(aD,{"data-open":E,onClick:()=>k(!E),children:["More (",oe.length,")"]}),E&&Z&&b.jsx(mD,{pages:Ae,activePageId:a,draggingPageId:D,dropState:Y,onSelect:v,onContextMenu:K,onDragStart:z,onDragEnd:L,onDragOver:T,onDrop:$,onClose:()=>k(!1),onDuplicateActive:ye,onDeleteActive:ge,canDuplicateActive:H,canDeleteActive:N}),b.jsx(rd,{state:O,closeMenu:U,resetMenu:G,components:ED}),b.jsx(vD,{zoom:A,onZoomIn:w,onZoomOut:S,onReset:C,onFitToScreen:M}),b.jsx(wD,{isOpen:!!ie,pageName:ie?.name??"",itemCount:(()=>{if(!ie)return 0;const{canvasState:Ee}=ie,He=Ee.elements?.length??0,We=Ee.connectors?.length??0;return He+We})(),onConfirm:ue,onCancel:se})]})});$w.displayName="PageStrip";const MD=(e,o)=>{const a=[...e.map((p,h)=>({kind:"element",data:p,zIndex:typeof p.zIndex=="number"&&Number.isFinite(p.zIndex)?Math.round(p.zIndex):void 0,order:h})),...o.map((p,h)=>({kind:"connector",data:p,zIndex:typeof p.zIndex=="number"&&Number.isFinite(p.zIndex)?Math.round(p.zIndex):void 0,order:e.length+h}))],i=new Set;let l=-1;a.forEach(p=>{p.zIndex!==void 0&&(i.has(p.zIndex)||(i.add(p.zIndex),p.zIndex>l&&(l=p.zIndex)))});let c=l+1;i.clear(),a.sort((p,h)=>{const g=p.zIndex??1/0,m=h.zIndex??1/0;return g===m?p.order-h.order:g-m}).forEach(p=>{let h=p.zIndex;(h===void 0||i.has(h))&&(h=c++),i.add(h),p.data={...p.data,zIndex:h}});const u=a.filter(p=>p.kind==="element").sort((p,h)=>p.order-h.order).map(p=>p.data),d=a.filter(p=>p.kind==="connector").sort((p,h)=>p.order-h.order).map(p=>p.data);return{elements:u,connectors:d}},co=e=>{const o=["posX","posY","width","height"],a=e.elements.some(g=>{const m=g.properties;return m?o.some(v=>!(v in m)):!0}),i=!e.connectors||!e.selectedConnectors,l=!e.selectedItemIds;if(!a&&!i&&!l){const g=e.connectors.map(En.normaliseConnector),m=ln(g,e.elements);return{...e,connectors:m}}const c=e.selectedItemIds?e.selectedItemIds:[...e.selectedElements??[],...e.selectedConnectors??[]],u=e.elements.map(Os),d=ln((e.connectors||[]).map(En.normaliseConnector),e.elements),{elements:p,connectors:h}=MD(u,d);return{...e,elements:p,connectors:h,selectedConnectors:e.selectedConnectors||[],selectedItemIds:Array.from(new Set(c))}},La=e=>{if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const o=Number(e);if(Number.isFinite(o))return o}return null},Pb=e=>e==="HollowArrow"?"HollowArrow":"None",RD=(e,o,a,i)=>{if(!e.selectedConnectors.includes(o))return{changed:!1,nextConnectors:e.connectors};const l=e.connectors.findIndex(E=>E.id===o);if(l===-1)return{changed:!1,nextConnectors:e.connectors};const c=e.connectors[l],u=En.normaliseConnector(c),d=En.getConnectorDefaults(),p={},h={...u.startPoint},g={...u.endPoint};let m=!1;switch(a){case"lineWidth":{const E=La(i);E!==null&&(p.lineWidth=E);break}case"lineColour":{typeof i=="string"&&i.trim().length>0&&(p.lineColour=i);break}case"opacity":{const E=La(i);E!==null&&(p.opacity=E);break}case"shadow":case"dropShadow":{p.shadow=!!i;break}case"shadowColour":{typeof i=="string"&&i.trim().length>0&&(p.shadowColour=i);break}case"shadowOpacity":{const E=La(i);E!==null&&(p.shadowOpacity=E);break}case"shadowBlurRadius":{const E=La(i);E!==null&&(p.shadowBlurRadius=E);break}case"startMark":{p.startMark=Pb(i);break}case"endMark":{p.endMark=Pb(i);break}case"startX":{const E=La(i);if(E!==null){const k=Math.round(E);k!==h.x&&(h.x=k,m=!0)}break}case"startY":{const E=La(i);if(E!==null){const k=Math.round(E);k!==h.y&&(h.y=k,m=!0)}break}case"endX":{const E=La(i);if(E!==null){const k=Math.round(E);k!==g.x&&(g.x=k,m=!0)}break}case"endY":{const E=La(i);if(E!==null){const k=Math.round(E);k!==g.y&&(g.y=k,m=!0)}break}}if(!(Object.keys(p).length>0)&&!m)return{changed:!1,nextConnectors:e.connectors};const A=En.applyConnectorProperties({...c,startPoint:h,endPoint:g},p),w={...d,...En.normaliseConnector(c).properties??{}},S={...d,...En.normaliseConnector(A).properties??{}};if(!Object.keys({...w,...S}).some(E=>w[E]!==S[E])&&!m)return{changed:!1,nextConnectors:e.connectors};const M=[...e.connectors];return M[l]=A,{changed:!0,nextConnectors:ln(M,e.elements)}},hn=e=>Math.round(e),kD=.01,TD=(e,o)=>En.applyElementBatch(e,o),Uw=(e,o,a)=>{if(o===0&&a===0||e.selectedElements.length===0&&e.selectedConnectors.length===0)return e;const i=e.selectedElements.length?new Set(e.selectedElements):null,l=e.selectedConnectors.length?new Set(e.selectedConnectors):null;if(!i&&!l)return e;let c=!1;const u=i?e.elements.map(g=>{if(!i.has(g.id))return g;const m=hn(g.x+o),v=hn(g.y+a);return m===g.x&&v===g.y?g:(c=!0,{...g,x:m,y:v,properties:{...g.properties,posX:m,posY:v}})}):e.elements;let d=!1;const p=l?e.connectors.map(g=>{if(!l.has(g.id))return g;const m={x:hn(g.startPoint.x+o),y:hn(g.startPoint.y+a)},v={x:hn(g.endPoint.x+o),y:hn(g.endPoint.y+a)};return m.x===g.startPoint.x&&m.y===g.startPoint.y&&v.x===g.endPoint.x&&v.y===g.endPoint.y?g:(d=!0,{...g,startPoint:m,endPoint:v})}):e.connectors;if(!c&&!d)return e;const h=ln(p,u);return{...e,elements:u,connectors:h}},ID=(e,o,a,i)=>{if(a===0&&i===0)return e;if(e.selectedElements.includes(o))return Uw(e,a,i);let l=!1;const c=e.elements.map(u=>{if(u.id!==o)return u;const d=hn(u.x+a),p=hn(u.y+i);return d===u.x&&p===u.y?u:(l=!0,{...u,x:d,y:p,properties:{...u.properties,posX:d,posY:p}})});return l?{...e,elements:c,connectors:ln(e.connectors,c)}:e},_D=(e,o,a,i)=>{if(a===0&&i===0)return e;if(e.selectedConnectors.includes(o))return Uw(e,a,i);let l=!1;const c=e.connectors.map(u=>{if(u.id!==o)return u;const d={x:hn(u.startPoint.x+a),y:hn(u.startPoint.y+i)},p={x:hn(u.endPoint.x+a),y:hn(u.endPoint.y+i)};return d.x===u.startPoint.x&&d.y===u.startPoint.y&&p.x===u.endPoint.x&&p.y===u.endPoint.y?u:(l=!0,{...u,startPoint:d,endPoint:p})});return l?{...e,connectors:ln(c,e.elements)}:e},OD=(e,o)=>{if(o.length===0)return e;const a=new Map;o.forEach(c=>{a.set(c.id,{x:hn(c.x),y:hn(c.y)})});let i=!1;const l=e.elements.map(c=>{const u=a.get(c.id);return!u||c.x===u.x&&c.y===u.y?c:(i=!0,{...c,x:u.x,y:u.y,properties:{...c.properties,posX:u.x,posY:u.y}})});return i?{...e,elements:l,connectors:ln(e.connectors,l)}:e},DD=(e,o)=>{if(o.length===0)return e;const a=new Map;o.forEach(c=>{a.set(c.id,c)});let i=!1;const l=e.connectors.map(c=>{const u=a.get(c.id);if(!u)return c;const d=u.startPoint??c.startPoint,p=u.endPoint??c.endPoint,h={x:hn(d.x),y:hn(d.y)},g={x:hn(p.x),y:hn(p.y)};return c.startPoint.x===h.x&&c.startPoint.y===h.y&&c.endPoint.x===g.x&&c.endPoint.y===g.y?c:(i=!0,{...c,startPoint:h,endPoint:g})});return i?{...e,connectors:ln(l,e.elements)}:e},jD=(e,o,a)=>{if(o===0&&a===0||e.selectedElements.length===0&&e.selectedConnectors.length===0)return e;const i=new Set(e.selectedElements);let l=!1;const c=e.elements.map(h=>{if(!i.has(h.id))return h;const g=En.applyElementBatch(h,{posX:h.x+o,posY:h.y+a});return g!==h&&(l=!0),g});let u=!1;const d=e.connectors.map(h=>e.selectedConnectors.includes(h.id)?(u=!0,{...h,startPoint:{x:h.startPoint.x+o,y:h.startPoint.y+a},endPoint:{x:h.endPoint.x+o,y:h.endPoint.y+a}}):h);if(!l&&!u)return e;const p=ln(d,c);return{...e,elements:c,connectors:p}},Ha=(e,o)=>Math.round(e/o)*o,Ya=(e,o)=>Math.abs(e-o)>kD,Xw=(e,o)=>{if(e.selectedElements.length===0&&e.selectedConnectors.length===0)return{elementUpdates:[],connectorUpdates:[]};const a=new Set(e.selectedElements),i=new Set(e.selectedConnectors),l=[],c=[];return e.elements.forEach(u=>{if(!a.has(u.id))return;const d=Ha(u.x,o),p=Ha(u.y,o),h=Math.max(1,Ha(u.width,o)),g=Math.max(1,Ha(u.height,o));!Ya(u.x,d)&&!Ya(u.y,p)&&!Ya(u.width,h)&&!Ya(u.height,g)||l.push({id:u.id,posX:d,posY:p,width:h,height:g})}),e.connectors.forEach(u=>{if(!i.has(u.id))return;const d={id:u.id};if(!u.startAttachment){const p=Ha(u.startPoint.x,o),h=Ha(u.startPoint.y,o);(Ya(u.startPoint.x,p)||Ya(u.startPoint.y,h))&&(d.startPoint={x:p,y:h})}if(!u.endAttachment){const p=Ha(u.endPoint.x,o),h=Ha(u.endPoint.y,o);(Ya(u.endPoint.x,p)||Ya(u.endPoint.y,h))&&(d.endPoint={x:p,y:h})}(d.startPoint||d.endPoint)&&c.push(d)}),{elementUpdates:l,connectorUpdates:c}},PD=(e,o,a)=>{const i=Xw(e,o),{elementUpdates:l,connectorUpdates:c}=i;if(l.length===0&&c.length===0)return{changed:!1,state:e};const u=new Map(l.map(A=>[A.id,A]));let d=!1;const p=e.elements.map(A=>{const w=u.get(A.id);if(!w)return A;const S=TD(A,{posX:w.posX,posY:w.posY,width:w.width,height:w.height});return S!==A&&(d=!0),S}),h=new Map(c.map(A=>[A.id,A]));let g=!1;const m=e.connectors.map(A=>{const w=h.get(A.id);if(!w)return A;const S=w.startPoint?{x:hn(w.startPoint.x),y:hn(w.startPoint.y)}:A.startPoint,C=w.endPoint?{x:hn(w.endPoint.x),y:hn(w.endPoint.y)}:A.endPoint;return A.startPoint.x===S.x&&A.startPoint.y===S.y&&A.endPoint.x===C.x&&A.endPoint.y===C.y?A:(g=!0,{...A,startPoint:S,endPoint:C})});if(!d&&!g)return{changed:!1,state:e};const v=ln(m,p);return{changed:!0,state:{...e,elements:p,connectors:v}}},sp=(e,o)=>{const{elementUpdates:a,connectorUpdates:i}=Xw(e,o);return a.length>0||i.length>0},sa=(e,o)=>Array.from(new Set([...e,...o])),ld=e=>[...e.elements,...e.connectors].reduce((i,l)=>{const c=typeof l.zIndex=="number"&&Number.isFinite(l.zIndex)?Math.round(l.zIndex):i;return c>i?c:i},-1)+1,Fw=e=>Array.from(new Set(e)),BD=(e,o,a)=>{const i=e.elements.find(u=>u.id===o);if(i||console.log("selectElementById: element not found",o,e.elements.map(u=>u.id)),!i)return e;const l=i.groupId?e.elements.filter(u=>u.groupId===i.groupId).map(u=>u.id):[o];if(a){if(l.some(p=>e.selectedElements.includes(p))){const p=e.selectedElements.filter(h=>!l.includes(h));return{...e,selectedElements:p,selectedConnectors:e.selectedConnectors,selectedItemIds:sa(p,e.selectedConnectors)}}const d=Fw([...e.selectedElements,...l]);return{...e,selectedElements:d,selectedConnectors:e.selectedConnectors,selectedItemIds:sa(d,e.selectedConnectors)}}const c=l;return{...e,selectedElements:c,selectedConnectors:[],selectedItemIds:sa(c,[])}},zD=(e,o,a)=>{const i=e.connectors.find(u=>u.id===o);if(!i)return e;const l=i.groupId?e.connectors.filter(u=>u.groupId===i.groupId).map(u=>u.id):[o];if(a){if(l.some(p=>e.selectedConnectors.includes(p))){const p=e.selectedConnectors.filter(h=>!l.includes(h));return{...e,selectedElements:e.selectedElements,selectedConnectors:p,selectedItemIds:sa(e.selectedElements,p)}}const d=Fw([...e.selectedConnectors,...l]);return{...e,selectedElements:e.selectedElements,selectedConnectors:d,selectedItemIds:sa(e.selectedElements,d)}}const c=l;return{...e,selectedElements:[],selectedConnectors:c,selectedItemIds:sa([],c)}},ND=e=>{const o=e.elements.map(i=>i.id),a=e.connectors.map(i=>i.id);return{...e,selectedElements:o,selectedConnectors:a,selectedItemIds:sa(o,a)}},LD=e=>e.selectedElements.length===0&&e.selectedConnectors.length===0?e:{...e,selectedElements:[],selectedConnectors:[],selectedItemIds:[]};let Bb=0;function HD(e){return{...e,selectedElements:[],selectedConnectors:[],selectedItemIds:[]}}function Du(e,o){return Bb+=1,{state:HD(e),description:o||"Canvas updated",timestamp:Date.now(),id:`history-${Bb}`}}function YD({initialState:e,onStateChange:o,maxHistorySize:a=50}){const[i,l]=y.useState(()=>({past:[],present:Du(e,"Initial state"),future:[]})),c=y.useRef(!1),u=y.useRef({selectedElements:e.selectedElements,selectedConnectors:e.selectedConnectors,selectedItemIds:e.selectedItemIds});y.useEffect(()=>{l({past:[],present:Du(e,"Initial state"),future:[]})},[]);const d=y.useCallback((C,M)=>{u.current={selectedElements:C.selectedElements,selectedConnectors:C.selectedConnectors,selectedItemIds:C.selectedItemIds},l(R=>{const E=R.present.state;let k=!1;E.elements.length===C.elements.length&&(k=E.elements.every((U,G)=>U===C.elements[G]));let I=!1;E.connectors.length===C.connectors.length&&(I=E.connectors.every((U,G)=>U===C.connectors[G]));const B=E.zoom===C.zoom&&E.panX===C.panX&&E.panY===C.panY;if(k&&I&&B)return R;const O=Du(C,M),j=[...R.past,R.present];return j.length>a&&j.shift(),{past:j,present:O,future:[]}})},[a]),p=y.useCallback(()=>{l(C=>{if(C.past.length===0)return C;const M=C.past[C.past.length-1],R=C.past.slice(0,C.past.length-1);return c.current=!0,o({...M.state,selectedElements:u.current.selectedElements,selectedConnectors:u.current.selectedConnectors,selectedItemIds:u.current.selectedItemIds}),{past:R,present:M,future:[C.present,...C.future]}})},[o]),h=y.useCallback(()=>{l(C=>{if(C.future.length===0)return C;const M=C.future[0],R=C.future.slice(1);return c.current=!0,o({...M.state,selectedElements:u.current.selectedElements,selectedConnectors:u.current.selectedConnectors,selectedItemIds:u.current.selectedItemIds}),{past:[...C.past,C.present],present:M,future:R}})},[o]),g=y.useCallback((C,M)=>{c.current=!1,u.current={selectedElements:C.selectedElements,selectedConnectors:C.selectedConnectors,selectedItemIds:C.selectedItemIds},l({past:[],present:Du(C,M||"Initial state"),future:[]})},[]),m=y.useCallback(()=>i,[i]),v=y.useCallback(C=>{c.current=!1,u.current={selectedElements:C.present.state.selectedElements,selectedConnectors:C.present.state.selectedConnectors,selectedItemIds:C.present.state.selectedItemIds},l({past:C.past.map(M=>({...M})),present:{...C.present},future:C.future.map(M=>({...M}))}),o(C.present.state)},[o]),A=[...i.past.map(C=>({id:C.id,description:C.description,timestamp:C.timestamp,position:"past"})),{id:i.present.id,description:i.present.description,timestamp:i.present.timestamp,position:"present"},...i.future.map(C=>({id:C.id,description:C.description,timestamp:C.timestamp,position:"future"}))],w=i.past.length,S=y.useCallback(C=>{l(M=>{if(M.present.id===C)return M;const R=M.past.findIndex(k=>k.id===C);if(R>=0){const k=M.past[R],I=M.past.slice(0,R),O=[...M.past.slice(R+1),M.present,...M.future];return c.current=!0,o({...k.state,selectedElements:u.current.selectedElements,selectedConnectors:u.current.selectedConnectors,selectedItemIds:u.current.selectedItemIds}),{past:I,present:k,future:O}}const E=M.future.findIndex(k=>k.id===C);if(E>=0){const k=M.future[E],I=M.future.slice(0,E),B=M.future.slice(E+1),O=[...M.past,M.present,...I];return c.current=!0,o({...k.state,selectedElements:u.current.selectedElements,selectedConnectors:u.current.selectedConnectors,selectedItemIds:u.current.selectedItemIds}),{past:O,present:k,future:B}}return M})},[o]);return{undo:p,redo:h,canUndo:i.past.length>0,canRedo:i.future.length>0,recordState:d,resetHistory:g,historyEntries:A,historyIndex:w,jumpToHistoryEntry:S,getHistoryState:m,setHistoryState:v}}const $D=50;function UD(e){const{canvasState:o,setCanvasStateInternal:a}=e,i=y.useRef(o);y.useEffect(()=>{i.current=o},[o]);const l=y.useRef(!1),c=y.useRef(null),u=y.useRef(!1),d=y.useCallback(()=>{const I=c.current;I&&(a(()=>I,{persist:!0}),c.current=null)},[a]);y.useEffect(()=>()=>{d()},[d]);const p=y.useCallback(I=>{const B=!l.current,O=u.current?i.current:co(i.current),j=typeof I=="function"?I(O):I,U=u.current?j:co(j);return B?c.current=null:c.current=U,i.current=U,a(U,{persist:B}),U},[a]),h=YD({initialState:o,onStateChange:p,maxHistorySize:$D}),g=y.useRef(o),m=y.useRef(null),v=y.useRef("Edit elements"),A=y.useRef(null);y.useEffect(()=>{const I=JSON.stringify({elements:g.current.elements,connectors:g.current.connectors}),B=JSON.stringify({elements:o.elements,connectors:o.connectors});I!==B&&!u.current&&(g.current=o)},[o]);const w=y.useCallback((I="Edit elements")=>{u.current=!0,m.current=i.current,v.current=I,l.current=!0,c.current=null},[]),S=y.useCallback(()=>{const I=c.current??i.current,B=m.current,O=v.current;c.current=null,l.current=!1,u.current=!1,m.current=null,v.current="Edit elements";const j={...I,elements:I.elements.map(G=>({...G,properties:{...G.properties,posX:G.x,posY:G.y,width:G.width,height:G.height}}))},U=co(j);if(B){const G=JSON.stringify({elements:B.elements,connectors:B.connectors}),X=JSON.stringify({elements:U.elements,connectors:U.connectors});G!==X&&(h.recordState(U,O),g.current=U)}a(U,{persist:!0}),i.current=U},[h,a]),C=y.useCallback(I=>{A.current=I,l.current||d()},[d]),M=y.useCallback(I=>{p(B=>{const O=typeof I=="function"?I(B):I,j=u.current?O:co(O);if(!u.current){const U=JSON.stringify({elements:g.current.elements,connectors:g.current.connectors}),G=JSON.stringify({elements:j.elements,connectors:j.connectors});if(U!==G){const X=A.current;X?(h.recordState(j,X),g.current=j):(h.recordState(j),g.current=j),A.current=null}}return j})},[h,p]),R=y.useCallback((I,B={})=>{const O=u.current?I:co(I);p(O);const j=co(O);u.current||(g.current=j,A.current=null),m.current=null,B.resetHistory&&(h.resetHistory(j,B.description),g.current=j)},[h,p]),E=y.useCallback(()=>{const I=h.getHistoryState(),B=co(i.current);return{past:I.past.map(O=>({...O,state:co(O.state)})),present:{...I.present,state:B},future:I.future.map(O=>({...O,state:co(O.state)}))}},[h]),k=y.useCallback(I=>{const B={past:I.past.map(j=>({...j,state:co(j.state)})),present:{...I.present,state:co(I.present.state)},future:I.future.map(j=>({...j,state:co(j.state)}))};h.setHistoryState(B);const O=co(B.present.state);p(O),g.current=O,m.current=null,u.current=!1,A.current=null},[h,p]);return{canvasStateRef:i,setCanvasState:M,replaceCanvasState:R,queueHistoryEntry:C,flushPendingPersistence:d,startTransaction:w,endTransaction:S,exportHistoryState:E,importHistoryState:k,undoRedo:h}}const lp=new Map,zb=(e,o)=>{const a=lp.get(e);a&&a.persistTimeout!==null&&clearTimeout(a.persistTimeout);const i=window.setTimeout(()=>{if(!_o())try{window.localStorage.setItem(e,JSON.stringify(o))}catch(l){console.warn(`Error persisting localStorage key "${e}":`,l)}},0);a?lp.set(e,{...a,persistTimeout:i}):lp.set(e,{value:o,persistTimeout:i})};function XD(e,o){const[a,i]=y.useState(()=>{try{const d=window.localStorage.getItem(e);return d?JSON.parse(d):o}catch(d){return console.warn(`Error reading localStorage key "${e}":`,d),o}}),l=y.useRef(null),c=y.useRef(null);y.useEffect(()=>()=>{l.current!==null&&clearTimeout(l.current)},[]);const u=y.useCallback((d,p={})=>{const h=p.persist!==!1;try{d instanceof Function?i(g=>{const m=d(g);return h&&zb(e,m),m}):(c.current=d,l.current!==null&&clearTimeout(l.current),l.current=window.setTimeout(()=>{i(g=>c.current??g),l.current=null},0),h&&zb(e,d))}catch(g){console.warn(`Error setting localStorage key "${e}":`,g)}},[e]);return[a,u]}function FD(e){const o={elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0},[a,i]=XD(Gt("current-project"),e||o),l=y.useRef(null);y.useEffect(()=>{if(!e)return;const N=JSON.stringify({elements:e.elements,connectors:e.connectors});if(l.current===N)return;if(JSON.stringify({elements:a.elements,connectors:a.connectors})===N){l.current=N;return}i(e,{persist:!0}),l.current=N},[e,a.elements,a.connectors,i]),y.useEffect(()=>{a.elements.some(H=>!H.properties)&&i(H=>co(H),{persist:!0})},[a,i]);const c=y.useMemo(()=>co(a),[a]),{canvasStateRef:u,setCanvasState:d,replaceCanvasState:p,queueHistoryEntry:h,flushPendingPersistence:g,startTransaction:m,endTransaction:v,exportHistoryState:A,importHistoryState:w,undoRedo:S}=UD({canvasState:c,setCanvasStateInternal:i}),C=y.useCallback((N,H=!1)=>{d(q=>{const K=BD(q,N,H);return K===q?console.log("selectElement no change",N,q.selectedElements):console.log("selectElement updated",N,K.selectedElements),K})},[d]),M=y.useCallback((N,H,q)=>{H===0&&q===0||d(K=>ID(K,N,H,q))},[d]),R=y.useCallback((N,H=!1)=>{d(q=>zD(q,N,H))},[d]),E=y.useCallback((N,H,q)=>{H===0&&q===0||d(K=>_D(K,N,H,q))},[d]),k=y.useCallback(N=>{N.length&&d(H=>OD(H,N))},[d]),I=y.useCallback(N=>{N.length&&d(H=>DD(H,N))},[d]),B=y.useCallback((N,H,q)=>{d(K=>{const{changed:ie,nextConnectors:ue}=RD(K,N,H,q);return ie?(h("Edit connector properties"),{...K,connectors:ue}):K})},[h,d]),O=y.useCallback((N,H)=>{h("Edit text"),d(q=>({...q,elements:q.elements.map(K=>K.id===N?{...K,text:H}:K)}))},[d,h]),j=y.useCallback((N,H)=>{const K=u.current.elements.find(ye=>ye.id===N);if(!K)return;const ie=typeof H=="string"&&H.trim().length>0?H:void 0,ue=typeof K.imageSrc=="string"&&K.imageSrc.trim().length>0?K.imageSrc:typeof K.properties?.imageSrc=="string"?K.properties.imageSrc:void 0,se=!!(K.properties&&Object.prototype.hasOwnProperty.call(K.properties,"imageSrc"));ue===ie&&!se||(h("Update image"),d(ye=>{const ge=ye.elements.map(Se=>{if(Se.id!==N)return Se;let Pe;if(Se.properties){const Ee=Object.entries(Se.properties).filter(([He])=>He!=="imageSrc");Ee.length>0&&(Pe=Ee.reduce((He,[We,_e])=>(He[We]=_e,He),{}))}return{...Se,imageSrc:ie,properties:Pe}}),Ae=ln(ye.connectors,ge);return{...ye,elements:ge,connectors:Ae}}))},[h,d]),U=y.useCallback((N,H,q)=>{h("Edit properties"),d(K=>{if(!K.selectedElements.includes(N)||!K.elements.some(se=>se.id===N))return K;const ue=K.elements.map(se=>se.id===N?En.updateElement(se,H,q):se);return{...K,elements:ue,connectors:ln(K.connectors,ue)}})},[h,d]),G=y.useCallback(N=>{h("Reset properties"),d(H=>{const q=H.elements.map(K=>K.id===N?SI(K):K);return{...H,elements:q,connectors:ln(H.connectors,q)}})},[h,d]),X=y.useCallback((N,H)=>{N.length!==0&&(h("Paste properties"),d(q=>{const K=q.elements.map(ie=>N.includes(ie.id)?En.applyElementBatch(ie,H):ie);return{...q,elements:K,connectors:ln(q.connectors,K)}}))},[h,d]),W=y.useCallback((N,H)=>{N.length!==0&&(h("Paste properties"),d(q=>{const K=new Set(N);let ie=!1;const ue=q.connectors.map(se=>{if(!K.has(se.id))return se;const ye=En.applyConnectorProperties(se,H),ge=se.startAttachment??null,Ae=se.endAttachment??null,Se={...ye,startAttachment:ge?{elementId:ge.elementId,anchor:{...ge.anchor}}:null,endAttachment:Ae?{elementId:Ae.elementId,anchor:{...Ae.anchor}}:null,startPoint:ge?se.startPoint:ye.startPoint,endPoint:Ae?se.endPoint:ye.endPoint};return(Se.startAttachment!==se.startAttachment||Se.endAttachment!==se.endAttachment||Se.startPoint!==se.startPoint||Se.endPoint!==se.endPoint||Se.properties!==se.properties)&&(ie=!0),Se});return ie?{...q,connectors:ue}:q}))},[h,d]),J=y.useCallback(N=>{N.length!==0&&(h("Reset properties"),d(H=>{const q=new Set(N),K=En.getConnectorDefaults(),ie=H.connectors.map(ue=>q.has(ue.id)?En.applyConnectorProperties(ue,K):ue);return{...H,connectors:ln(ie,H.elements)}}))},[h,d]),oe=y.useCallback(()=>{d(N=>{const H=N.selectedElements.length>0,q=N.selectedConnectors.length>0;if(!H&&!q)return N;const K=new Set(N.selectedElements),ie=new Set(N.selectedConnectors);h("Delete selection");const ue=H?N.elements.filter(Ae=>!K.has(Ae.id)):N.elements,se=q?N.connectors.filter(Ae=>!ie.has(Ae.id)):N.connectors,ye=K.size>0?se.map(Ae=>{let Se=Ae.startAttachment??null,Pe=Ae.endAttachment??null,Ee=!1;return Se&&K.has(Se.elementId)&&(Se=null,Ee=!0),Pe&&K.has(Pe.elementId)&&(Pe=null,Ee=!0),Ee?{...Ae,startAttachment:Se,endAttachment:Pe}:Ae}):se,ge=ln(ye,ue);return{...N,elements:ue,connectors:ge,selectedElements:[],selectedConnectors:[],selectedItemIds:[]}})},[d,h]),Z=y.useCallback((N,H)=>{d(q=>{const K=jD(q,N,H);return K===q?q:(h("Move selection"),K)})},[d,h]),D=y.useCallback(N=>{N.length<2||d(H=>{h("Group elements");const q=crypto.randomUUID(),K=new Set;return N.forEach(ie=>{const ue=H.elements.find(se=>se.id===ie);ue?.groupId&&K.add(ue.groupId)}),{...H,elements:H.elements.map(ie=>N.includes(ie.id)||ie.groupId&&K.has(ie.groupId)?{...ie,groupId:q}:ie)}})},[d,h]),Y=y.useCallback(N=>{N&&d(H=>(h("Ungroup elements"),{...H,elements:H.elements.map(q=>q.groupId===N?{...q,groupId:void 0}:q)}))},[d,h]),z=y.useCallback(()=>{d(N=>ND(N))},[d]),L=y.useCallback(()=>{d(N=>LD(N))},[d]),T=y.useCallback(()=>{p({elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0},{resetHistory:!0,description:"Cleared canvas"})},[p]),$=y.useCallback(()=>u.current,[]);return{canvasState:c,actions:{getCanvasStateSnapshot:$,setCanvasState:d,replaceCanvasState:p,queueHistoryEntry:h,flushPendingPersistence:g,selectElement:C,selectConnector:R,moveElement:M,moveConnector:E,moveElementsTo:k,moveConnectorsTo:I,updateElementText:O,updateElementImage:j,updateElementProperty:U,updateConnectorProperty:B,resetElementStyling:G,applyPropertiesToElements:X,applyPropertiesToConnectors:W,resetConnectorProperties:J,deleteSelectedElements:oe,moveSelectedElements:Z,selectAll:z,clearSelection:L,clearCanvas:T,groupElements:D,ungroupElements:Y,undo:S.undo,redo:S.redo,startTransaction:m,endTransaction:v,jumpToHistoryEntry:S.jumpToHistoryEntry,exportHistoryState:A,importHistoryState:w},canUndo:S.canUndo,canRedo:S.canRedo,historyEntries:S.historyEntries,historyIndex:S.historyIndex}}const xs=20;function QD({canvasState:e,setCanvasState:o}){const[a,i]=y.useState("drag"),[l,c]=y.useState(null),[u,d]=y.useState(!1),p=.1,h=y.useCallback(()=>{o(k=>{const I=Math.min(k.zoom+p,3);return{...k,zoom:Number(I.toFixed(4))}})},[o]),g=y.useCallback(()=>{o(k=>{const I=Math.max(k.zoom-p,.1);return{...k,zoom:Number(I.toFixed(4))}})},[o]),m=y.useCallback(k=>{const I=Math.min(Math.max(k,.1),3);o(B=>({...B,zoom:I}))},[o]),v=y.useCallback((k,I,B,O)=>{const j=Math.min(Math.max(k,.1),3);o(U=>{const G=U.zoom,X=I-O.left-xs,W=B-O.top-xs,J=X*(1/j-1/G)+U.panX,oe=W*(1/j-1/G)+U.panY;return{...U,zoom:j,panX:J,panY:oe}})},[o]),A=y.useCallback((k,I)=>{o(B=>({...B,panX:k,panY:I}))},[o]),w=y.useCallback(k=>{i(k),k==="select"&&(c(null),d(!1))},[]),S=y.useCallback(()=>{d(!0)},[]),C=y.useCallback(k=>{c(k)},[]),M=y.useCallback(()=>{o(k=>({...k,zoom:1,panX:0,panY:0}))},[o]),R=y.useCallback(()=>{o(k=>{const I=k.elements;if(I.length===0)return{...k,zoom:1,panX:0,panY:0};let B=1/0,O=1/0,j=-1/0,U=-1/0;I.forEach(N=>{B=Math.min(B,N.x),O=Math.min(O,N.y),j=Math.max(j,N.x+N.width),U=Math.max(U,N.y+N.height)});const G=j-B,X=U-O,J=document.querySelector('[data-canvas-wrapper="true"]')?.getBoundingClientRect(),oe=J?J.width-xs:window.innerWidth-xs-280,Z=J?J.height-xs:window.innerHeight-xs-60,D=.9,Y=oe/G*D,z=Z/X*D,L=Math.min(Math.max(Math.min(Y,z),.1),3),T=oe/2/L-(B+j)/2,$=Z/2/L-(O+U)/2;return{...k,zoom:L,panX:T,panY:$}})},[o]),E=y.useCallback((k,I)=>{const B=[],O=[],j=Math.min(k.startX,k.endX),U=Math.max(k.startX,k.endX),G=Math.min(k.startY,k.endY),X=Math.max(k.startY,k.endY),W=U-j,J=X-G;return(W>5||J>5)&&(I.elements.forEach(Z=>{const D=Z.x,Y=Z.x+Z.width,z=Z.y,L=Z.y+Z.height;D>=j&&Y<=U&&z>=G&&L<=X&&B.push(Z.id)}),I.connectors.forEach(Z=>{yO(Z,k)&&O.push(Z.id)}),(B.length>0||O.length>0)&&i("drag")),c(null),d(!1),{elementIds:B,connectorIds:O}},[i]);return{zoom:e.zoom,panX:e.panX,panY:e.panY,canvasMode:a,selectionArea:l,isSelecting:u,actions:{zoomIn:h,zoomOut:g,setZoom:m,setZoomAtPoint:v,resetZoom:M,fitToScreen:R,updatePan:A,setMode:w,startSelection:S,updateSelectionArea:C,completeSelection:E}}}function GD({canvasState:e,setCanvasState:o,queueHistoryEntry:a}){const i=e.selectedElements.length>0||e.selectedConnectors.length>0,l=y.useCallback(m=>[...m.elements.map((A,w)=>({kind:"element",id:A.id,zIndex:typeof A.zIndex=="number"?A.zIndex:w,orderIndex:w})),...m.connectors.map((A,w)=>({kind:"connector",id:A.id,zIndex:typeof A.zIndex=="number"?A.zIndex:m.elements.length+w,orderIndex:m.elements.length+w}))].sort((A,w)=>A.zIndex===w.zIndex?A.orderIndex-w.orderIndex:A.zIndex-w.zIndex),[]),c=y.useCallback((m,v)=>{const A=new Map;v.forEach((C,M)=>{A.set(`${C.kind}:${C.id}`,M)});const w=m.elements.map(C=>{const M=`element:${C.id}`,R=A.get(M);return R===void 0?C:{...C,zIndex:R}}),S=m.connectors.map(C=>{const M=`connector:${C.id}`,R=A.get(M);return R===void 0?C:{...C,zIndex:R}});return{...m,elements:w,connectors:S}},[]),u=y.useCallback(()=>{const m=new Set;return e.selectedElements.forEach(v=>m.add(`element:${v}`)),e.selectedConnectors.forEach(v=>m.add(`connector:${v}`)),m},[e.selectedElements,e.selectedConnectors]),d=y.useCallback(()=>{i&&(a("Send items to back"),o(m=>{const v=l(m),A=u(),w=v.filter(M=>A.has(`${M.kind}:${M.id}`));if(w.length===0)return m;const S=v.filter(M=>!A.has(`${M.kind}:${M.id}`)),C=[...w,...S].map((M,R)=>({...M,zIndex:R}));return c(m,C)}))},[i,a,o,l,u,c]),p=y.useCallback(()=>{i&&(a("Bring items to front"),o(m=>{const v=l(m),A=u(),w=v.filter(M=>A.has(`${M.kind}:${M.id}`));if(w.length===0)return m;const C=[...v.filter(M=>!A.has(`${M.kind}:${M.id}`)),...w].map((M,R)=>({...M,zIndex:R}));return c(m,C)}))},[i,a,o,l,u,c]),h=y.useCallback(()=>{i&&(a("Bring items forward"),o(m=>{const v=l(m),A=u(),w=C=>`${C.kind}:${C.id}`;for(let C=v.length-2;C>=0;C--){const M=v[C],R=v[C+1],E=A.has(w(M)),k=A.has(w(R));E&&!k&&([v[C],v[C+1]]=[R,M])}const S=v.map((C,M)=>({...C,zIndex:M}));return c(m,S)}))},[i,a,o,l,u,c]),g=y.useCallback(()=>{i&&(a("Send items backward"),o(m=>{const v=l(m),A=u(),w=C=>`${C.kind}:${C.id}`;for(let C=1;C<v.length;C++){const M=v[C],R=v[C-1],E=A.has(w(M)),k=A.has(w(R));E&&!k&&([v[C-1],v[C]]=[M,R])}const S=v.map((C,M)=>({...C,zIndex:M}));return c(m,S)}))},[i,a,o,l,u,c]);return{sendToBack:d,sendToFront:p,bringForward:h,bringBack:g}}const Nb=50,Lb=30;function WD({setCanvasState:e,zoom:o,onTransactionStart:a,onTransactionEnd:i,isShiftPressed:l=!1,snapGridSize:c=10}){const[u,d]=y.useState(!1),[p,h]=y.useState(null),[g,m]=y.useState(null),[v,A]=y.useState(null),[w,S]=y.useState(null),C=y.useRef(null),M=y.useCallback((k,I,B,O)=>{a?.("Resize element"),d(!0),h(k),m(I),A(B),S({width:O.width,height:O.height,x:O.x,y:O.y})},[a]),R=y.useCallback(k=>{!u||!p||!g||!v||!w||(C.current!==null&&cancelAnimationFrame(C.current),C.current=requestAnimationFrame(()=>{const I=(k.x-v.x)/o,B=(k.y-v.y)/o;e(O=>{const j=O.elements.find(K=>K.id===p);if(!j)return O;const U=j.constraints??Ip[j.type],G=U?.minWidth??Nb,X=U?.minHeight??Lb;let W=w.width,J=w.height;switch(g){case"nw":W=w.width-I,J=w.height-B;break;case"ne":W=w.width+I,J=w.height-B;break;case"sw":W=w.width-I,J=w.height+B;break;case"se":W=w.width+I,J=w.height+B;break;case"n":J=w.height-B;break;case"s":J=w.height+B;break;case"w":W=w.width-I;break;case"e":W=w.width+I;break}const oe=!!j.properties?.constrainRatio,Z=w.height!==0?w.width/w.height:null;let D=Math.max(W,G),Y=Math.max(J,X);if(oe&&Z&&Number.isFinite(Z)&&Z>0){const K=g.includes("w")||g.includes("e"),ie=g.includes("n")||g.includes("s"),ue=ye=>{let ge=Math.max(ye,G),Ae=ge/Z;return Ae<X&&(Ae=X,ge=Ae*Z),{width:ge,height:Ae}},se=ye=>{let ge=Math.max(ye,X),Ae=ge*Z;return Ae<G&&(Ae=G,ge=Ae/Z),{width:Ae,height:ge}};if(K&&!ie){const ye=ue(W);D=ye.width,Y=ye.height}else if(!K&&ie){const ye=se(J);D=ye.width,Y=ye.height}else if(K&&ie){const ye=ue(W),ge=se(J),Ae=Math.abs(ye.width-w.width),Se=Math.abs(ge.height-w.height);Ae>=Se?(D=ye.width,Y=ye.height):(D=ge.width,Y=ge.height)}else{const ye=ue(W);D=ye.width,Y=ye.height}}D=Math.round(D),Y=Math.round(Y);const z=w.x,L=w.y,T=w.x+w.width,$=w.y+w.height;let N=j.x,H=j.y;if(oe){const K=g.includes("w")&&!g.includes("e"),ie=g.includes("n")&&!g.includes("s");N=K?T-D:z,H=ie?$-Y:L}else g.includes("w")?N=T-D:g.includes("e")&&(N=z),g.includes("n")?H=$-Y:g.includes("s")&&(H=L);const q=O.elements.map(K=>K.id===p?{...K,x:N,y:H,width:D,height:Y,properties:{...K.properties,posX:N,posY:H,width:D,height:Y}}:K);return{...O,elements:q,connectors:ln(O.connectors,q)}})}))},[u,p,g,v,w,o,e]),E=y.useCallback(()=>{p&&e(k=>{const I=k.elements.map(B=>{if(B.id!==p)return B;const O=B.constraints??Ip[B.type],j=O?.minWidth??Nb,U=O?.minHeight??Lb,G=B.x,X=B.x+B.width,W=B.y,J=B.y+B.height;let oe=Math.round(G),Z=Math.round(W),D=Math.max(Math.round(B.width),j),Y=Math.max(Math.round(B.height),U);if(l&&c>0){const L=g??"",T=L.length===2,$=!!B.properties?.constrainRatio,N=L.includes("e")||L.includes("w"),H=L.includes("n")||L.includes("s"),q=N||T||$,K=H||T||$,ie=L.includes("w")&&!L.includes("e"),ue=L.includes("n")&&!L.includes("s");if(q)if(ie){let se=Math.round(G/c)*c;const ye=Math.round((X-j)/c)*c;se>ye&&(se=ye),oe=se,D=Math.max(Math.round(X-oe),j)}else{const se=Math.round(X/c)*c,ye=oe+j,ge=Math.max(se,Math.ceil(ye/c)*c);D=Math.max(ge-oe,j)}if(K)if(ue){let se=Math.round(W/c)*c;const ye=Math.round((J-U)/c)*c;se>ye&&(se=ye),Z=se,Y=Math.max(Math.round(J-Z),U)}else{const se=Math.round(J/c)*c,ye=Z+U,ge=Math.max(se,Math.ceil(ye/c)*c);Y=Math.max(ge-Z,U)}D=Math.round(D),Y=Math.round(Y)}return gw(B,{width:D,height:Y,posX:oe,posY:Z})});return{...k,elements:I,connectors:ln(k.connectors,I)}}),i?.(),d(!1),h(null),m(null),A(null),S(null)},[l,i,p,g,e,c]);return y.useEffect(()=>{if(!u)return;const k=B=>{R({x:B.clientX,y:B.clientY})},I=()=>{E()};return document.addEventListener("mousemove",k),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",I),C.current!==null&&(cancelAnimationFrame(C.current),C.current=null)}},[u,R,E]),{isResizing:u,resizeElementId:p,resizeHandle:g,resizeStartPos:v,resizeStartSize:w,actions:{handleResizeStart:M,handleResizeMove:R,handleResizeEnd:E}}}const qD=1,Hb=.5;function VD({setCanvasState:e,zoom:o,onTransactionStart:a,onTransactionEnd:i,isShiftPressed:l=!1,snapGridSize:c=10}){const[u,d]=y.useState(!1),[p,h]=y.useState(null),[g,m]=y.useState(null),[v,A]=y.useState(null),[w,S]=y.useState(null),[C,M]=y.useState(!1),[R,E]=y.useState({elementId:null,point:null}),[k,I]=y.useState({x:0,y:0}),[B,O]=y.useState(null),j=y.useRef(null),U=y.useRef(null),G=y.useRef(null),X=y.useRef(!1),W=y.useRef(!1),J=y.useRef(null),oe=y.useCallback((L,T,$,N)=>{a?.("Resize connector"),d(!0),h(L),m(T),A($),M(!1),E({elementId:null,point:null}),I(N?.pointerOffset??{x:0,y:0}),O(null),e(H=>{const q=H.connectors.findIndex(se=>se.id===L);if(q===-1)return H;const K=H.connectors[q],ie=T==="start"?K.startPoint:K.endPoint;S(ie);const ue=T==="start"?K.startAttachment??null:K.endAttachment??null;return G.current={connectorId:L,endpoint:T,originalAttachment:ue,originalPoint:ie},ue||(X.current=!0),H})},[a,e]),Z=y.useCallback(()=>{if(W.current=!1,!J.current)return;const L=J.current;E(T=>T&&T.elementId===L.anchorPreview.elementId&&T.point===L.anchorPreview.point?T:L.anchorPreview),M(T=>T===L.hasAnchorPreview?T:L.hasAnchorPreview),L.shouldClearSnapPreview?O(null):O(T=>{const $=L.snapPreview;return $===null?T===null?T:null:T&&T.point.x===$.point.x&&T.point.y===$.point.y&&T.showHorizontal===$.showHorizontal&&T.showVertical===$.showVertical?T:$})},[]),D=y.useCallback(()=>{if(W.current)return;W.current=!0;const L=()=>Z();typeof queueMicrotask=="function"?queueMicrotask(L):Promise.resolve().then(L)},[Z]),Y=y.useCallback(L=>{!u||!p||!g||!v||!w||(U.current!==null&&cancelAnimationFrame(U.current),U.current=requestAnimationFrame(()=>{const T=(L.x-v.x)/o,$=(L.y-v.y)/o,N=T+k.x,H=$+k.y,q=Math.hypot(T,$),K=w.x+N,ie=w.y+H;let ue={elementId:null,point:null},se=null;const ye=G.current;let ge=!1;if(!X.current&&ye){const He=ye.originalAttachment?.elementId??null;q<qD?(ue=He?{elementId:He,point:Re(ye.originalPoint)}:{elementId:null,point:null},O(null),j.current=null,ge=!0):(X.current=!0,G.current=null,e(We=>{const _e=We.connectors.map(gt=>gt.id!==ye.connectorId?gt:ye.endpoint==="start"?{...gt,startAttachment:null}:{...gt,endAttachment:null});return{...We,connectors:_e}}),ue={elementId:null,point:null})}let Ae=null,Se=!1;ge||e(He=>{const We=He.connectors.map(_e=>{if(_e.id!==p)return _e;const gt=!l,ot=gt?Ed(He.elements,{x:K,y:ie}):null,Ye=ot?ot.position:{x:K,y:ie},et=Re(Ye);if(Se=!!(ot&&gt),!l&&c>0){const It={x:Math.round(Ye.x/c)*c,y:Math.round(Ye.y/c)*c},cn=Math.abs(It.x-et.x),je=Math.abs(It.y-et.y),Te=cn<=Hb,Be=je<=Hb;Te||Be?Ae={point:Re({x:Te?It.x:et.x,y:Be?It.y:et.y}),showHorizontal:Be,showVertical:Te}:Ae=null}const yt=l&&c>0?{x:Math.round(Ye.x/c)*c,y:Math.round(Ye.y/c)*c}:null;yt?se=Re(yt):se=null;const ht=ot?ot.attachment:null;return ue=ot&&gt?{elementId:ot.elementId??null,point:et}:{elementId:null,point:null},g==="start"?{..._e,startPoint:et,startAttachment:ht,endAttachment:_e.endAttachment??null}:{..._e,endPoint:et,endAttachment:ht,startAttachment:_e.startAttachment??null}});return{...He,connectors:ln(We,He.elements)}}),ge?j.current=null:l&&se?j.current=se:j.current=null;let Pe=null,Ee=!1;ge?Ee=!0:l&&se?Pe={point:se,showHorizontal:!0,showVertical:!0}:Pe=l?null:Ae,J.current={anchorPreview:ue,hasAnchorPreview:Se,snapPreview:Pe,shouldClearSnapPreview:Ee},D()}))},[u,p,g,v,w,k,e,o,l,c,D]),z=y.useCallback(()=>{if(G.current=null,X.current=!1,U.current!==null&&(cancelAnimationFrame(U.current),U.current=null),l&&j.current&&p&&g){const L=j.current;e(T=>{const $=T.connectors.map(N=>N.id!==p?N:g==="start"?{...N,startPoint:Re(L),startAttachment:null}:{...N,endPoint:Re(L),endAttachment:null});return{...T,connectors:ln($,T.elements)}})}d(!1),h(null),m(null),A(null),S(null),M(!1),E({elementId:null,point:null}),I({x:0,y:0}),O(null),j.current=null,i?.()},[l,i,p,g,e]);return y.useEffect(()=>{if(!u)return;const L=$=>{Y({x:$.clientX,y:$.clientY})},T=()=>{z()};return document.addEventListener("mousemove",L),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",T)}},[u,Y,z]),y.useEffect(()=>{l||(j.current=null,O(L=>L&&null))},[l]),y.useEffect(()=>()=>{U.current!==null&&cancelAnimationFrame(U.current)},[]),{isResizing:u,resizeConnectorId:p,resizeEndpoint:g,resizeStartPos:v,resizeOriginalPoint:w,resizeHasAnchorPreview:C,resizeAnchorPreview:R,pointerOffset:k,resizeSnapPreview:B,actions:{handleResizeStart:oe,handleResizeMove:Y,handleResizeEnd:z}}}const KD={elements:[],connectors:[]};function ZD({getCanvasStateSnapshot:e,setCanvasState:o,queueHistoryEntry:a}){const[i,l]=y.useState(KD),[c,u]=y.useState(0),d=y.useCallback(m=>{l(m),u(0)},[]),p=y.useCallback(()=>{const m=e(),v=m.elements.filter(w=>m.selectedElements.includes(w.id)),A=m.connectors.filter(w=>m.selectedConnectors.includes(w.id));v.length===0&&A.length===0||(l({elements:v,connectors:A}),u(0),console.log(`Copied ${v.length} element(s) and ${A.length} connector(s) to clipboard`))},[e]),h=y.useCallback(()=>{const m=e(),v=m.elements.filter(w=>m.selectedElements.includes(w.id)),A=m.connectors.filter(w=>m.selectedConnectors.includes(w.id));v.length===0&&A.length===0||(l({elements:v,connectors:A}),u(0),a("Cut items"),o(w=>({...w,...(()=>{const S=new Set(w.selectedElements),C=new Set(w.selectedConnectors),M=S.size?w.elements.filter(I=>!S.has(I.id)):w.elements,R=C.size?w.connectors.filter(I=>!C.has(I.id)):w.connectors,E=S.size?R.map(I=>{let B=I.startAttachment??null,O=I.endAttachment??null,j=!1;return B&&S.has(B.elementId)&&(B=null,j=!0),O&&S.has(O.elementId)&&(O=null,j=!0),j?{...I,startAttachment:B,endAttachment:O}:I}):R,k=ln(E,M);return{elements:M,connectors:k,selectedElements:[],selectedConnectors:[],selectedItemIds:[]}})()})),console.log(`Cut ${v.length} element(s) and ${A.length} connector(s) to clipboard`))},[e,a,o]),g=y.useCallback(()=>{if(i.elements.length===0&&i.connectors.length===0)return;const m=c+1,v=20*m,A=20*m,w=new Map;i.elements.forEach(M=>{M.groupId&&!w.has(M.groupId)&&w.set(M.groupId,crypto.randomUUID())});const S=new Map,C=i.elements.map(M=>{const R=xo();return S.set(M.id,R),Os({...M,id:R,x:M.x+v,y:M.y+A,groupId:M.groupId?w.get(M.groupId):void 0})});a("Paste items"),o(M=>{let R=ld(M);const E=C.map(U=>({...U,zIndex:R++})),k=[...M.elements,...E],I=i.connectors.map(U=>{const G=xo(),X=Z=>{if(!Z)return null;const D=S.get(Z.elementId);return D?{...Z,elementId:D}:Z},W=X(U.startAttachment??null),J=X(U.endAttachment??null);return{...U,id:G,startPoint:Re({x:U.startPoint.x+v,y:U.startPoint.y+A}),endPoint:Re({x:U.endPoint.x+v,y:U.endPoint.y+A}),startAttachment:W,endAttachment:J,zIndex:R++}}),B=ln([...M.connectors,...I],k),O=I.map(U=>U.id),j=E.map(U=>U.id);return{...M,elements:k,connectors:B,selectedElements:j,selectedConnectors:O,selectedItemIds:sa(j,O)}}),u(M=>M+1),console.log(`Pasted ${C.length} element(s) and ${i.connectors.length} connector(s) from clipboard (paste #${m})`)},[i,c,a,o]);return{clipboard:i,actions:{copy:p,cut:h,paste:g},testHooks:{setSnapshot:d}}}const cd="#ffffff",qa=10,cp=253,JD=[{description:"PNG images",accept:{"image/png":[".png"]}}],ej=8e3,tj=5e3,Yb=(e,o)=>{if(!e)return o;const a=parseFloat(e);return Number.isFinite(a)&&a>0?a:o};function nj(e){const o=e.style.width,a=e.style.height,i=Yb(o,ej),l=Yb(a,tj),c=document.createElement("div");c.style.position="fixed",c.style.left="0",c.style.top="0",c.style.pointerEvents="none",c.style.opacity="0",c.style.zIndex="-1000",c.style.width=`${i}px`,c.style.height=`${l}px`,c.style.background=cd,c.style.overflow="visible";const u=e.cloneNode(!0);u.style.transform="none",u.style.transformOrigin="0 0",u.style.width=`${i}px`,u.style.height=`${l}px`,u.style.background=cd,u.style.overflow="visible",c.appendChild(u),document.body.appendChild(c);const d=()=>{c.remove()},p=Array.from(u.querySelectorAll('[data-element-container="true"]')),h=Array.from(u.querySelectorAll('[data-connector-container="true"]'));return{exportContainer:c,clonedContent:u,elementContainers:p,connectorContainers:h,cleanup:d,effectiveWidth:i,effectiveHeight:l}}const oj=(e,o)=>{if(!o)return e;const a=o.blur+Math.max(o.spread,0),i=Math.max(0,a-o.offsetX),l=Math.max(0,a+o.offsetX),c=Math.max(0,a-o.offsetY),u=Math.max(0,a+o.offsetY);return{left:e.left-i,top:e.top-c,width:e.width+i+l,height:e.height+c+u}},rj=e=>{const o=e.getContext("2d");if(!o)throw new Error("Failed to get canvas context");const{width:a,height:i}=e,{data:l}=o.getImageData(0,0,a,i);let c=a,u=i,d=-1,p=-1;for(let h=0;h<i;h+=1)for(let g=0;g<a;g+=1){const m=(h*a+g)*4,v=l[m],A=l[m+1],w=l[m+2],S=l[m+3];S>0&&(v<cp||A<cp||w<cp||S<255)&&(g<c&&(c=g),h<u&&(u=h),g>d&&(d=g),h>p&&(p=h))}return d===-1||p===-1?null:{minX:c,minY:u,maxX:d,maxY:p}},aj=(e,o,a,i,l)=>{const c=Math.max(0,i-o),u=Math.max(0,l-a);if(c<=0||u<=0)throw new Error("Invalid crop dimensions for exported image");const d=document.createElement("canvas");d.width=c,d.height=u;const p=d.getContext("2d");if(!p)throw new Error("Failed to create cropped canvas context");return p.drawImage(e,o,a,c,u,0,0,c,u),d},ij=(e,o)=>{const a=rj(e),i=e.getBoundingClientRect(),l=o?.rootWidth??i.width??e.width,c=o?.rootHeight??i.height??e.height,u=l>0?e.width/l:1,d=c>0?e.height/c:1,p=qa*u,h=qa*d;let g=null,m=null,v=null,A=null;if(a?(g=a.minX,m=a.minY,v=a.maxX,A=a.maxY):o&&(g=o.contentLeft*u,m=o.contentTop*d,v=(o.contentLeft+o.contentWidth)*u,A=(o.contentTop+o.contentHeight)*d),g===null||m===null||v===null||A===null||v<g||A<m)throw new Error("Failed to detect content in exported image");const w=Math.max(0,Math.floor(g-p)),S=Math.max(0,Math.floor(m-h)),C=Math.min(e.width,Math.ceil(v+p)),M=Math.min(e.height,Math.ceil(A+h));return aj(e,w,S,C,M)},sj=(e,o)=>{const a=o?.rootWidth??e.width;if(a<=0)return 1;const i=e.width/a;return Number.isFinite(i)&&i>0?i:1};function nt(e,o=0){if(e==null)return o;const a=Number(e);return Number.isFinite(a)?a:o}const $b=(e,o=!0)=>{const a=e.querySelector('[data-element-canvas="true"]');if(!a)return;const i=Math.max(1,Math.min(window.devicePixelRatio||1,3)),l=Math.max(1,Math.round(a.width/i)),c=Math.max(1,Math.round(a.height/i)),u=nt(e.getAttribute("data-element-width"),l),d=nt(e.getAttribute("data-element-height"),c),p=nO(a,{width:u,height:d});Ow(a,p.renderOptions,p.textOptions,o,i,p.decorations);const h=e.querySelector('[data-element-shadow-canvas="true"]');if(h){const A=oO(h),w=Dw(h,p.renderOptions,A,i);h.style.left=`${-w.left}px`,h.style.top=`${-w.top}px`,Iw(h,w)}const g=e.getAttribute("data-element-text-colour"),m=e.getAttribute("data-element-background"),v=e.getAttribute("data-element-line-colour");g&&(e.setAttribute("data-element-text-colour-original",g),e.style.color="transparent"),m&&e.style.setProperty("--element-background","transparent"),v&&e.style.setProperty("--element-border","0px solid transparent")},ju=e=>{if(e===null)return null;const o=Number(e);return Number.isFinite(o)?o:null};function Qw(e,o,a,i,l){const c=ju(e.getAttribute(o)),u=ju(e.getAttribute(a)),d=ju(e.getAttribute(i)),p=ju(e.getAttribute(l));return c!==null&&u!==null&&d!==null&&p!==null?{left:c,top:u,width:d,height:p}:null}function lj(e){const o=new Map;return e.forEach(a=>{if(a.style.display==="none")return;const i=Qw(a,"data-element-left","data-element-top","data-element-width","data-element-height");if(!i)return;const l=a.getAttribute("data-element-base-shadow"),c=id(l);o.set(a,{actual:i,extended:oj(i,c)});const u=a.getAttribute("data-element-base-border"),d=a.getAttribute("data-element-base-shadow");a.getAttribute("data-element-selected")==="true"&&u&&(a.style.border=u),d?a.style.boxShadow=d:a.style.boxShadow="none";const h=window.getComputedStyle(a);if(!!!a.getAttribute("data-shape"))$b(a,!0);else{const C=a.querySelector('[data-element-shadow-canvas="true"]'),M=a.getAttribute("data-element-type");if(C&&M){const R=nt(a.getAttribute("data-element-width"),0),E=nt(a.getAttribute("data-element-height"),0),k=nt(a.getAttribute("data-element-stroke-width"),0),I=a.getAttribute("data-element-background")??"#ffffff",B=a.getAttribute("data-element-line-colour")??"#6c757d",O=id(d);_w(C,{shapeType:M,width:R,height:E,strokeWidth:k,fillColour:I,strokeColour:B,shadow:{colour:O?.color??"rgba(0,0,0,0)",offsetX:O?.offsetX??0,offsetY:O?.offsetY??0,blur:O?.blur??0,spread:O?.spread??0,enabled:!!O}})}}const m=h.display,v=h.alignItems;if(m==="flex"&&v==="center"){const C=a.getAttribute("data-element-height"),M=parseFloat(h.paddingLeft||"0"),R=parseFloat(h.paddingRight||"0"),E=parseFloat(h.fontSize||"14");if(C){const k=parseFloat(C);a.style.display="block",a.style.alignItems="initial";const I=E*1,B=(k-I)/2,O=E*.21;a.style.paddingTop=`${B-O}px`,a.style.paddingBottom=`${B+O}px`,a.style.paddingLeft=`${M}px`,a.style.paddingRight=`${R}px`,a.style.lineHeight=`${I}px`}}$b(a);const A=a.querySelector('[data-element-text-layer="true"]');A&&(A.style.visibility="hidden");const w=a.querySelector('[data-element-canvas="true"]');w&&(w.style.visibility="hidden",w.style.display="none");const S=a.querySelector('[data-element-shadow-canvas="true"]');S&&(S.style.visibility="hidden",S.style.display="none"),a.style.opacity="0"}),{basePositions:o}}function cj(e){const o=new Map;return e.forEach(a=>{if(a.style.display==="none")return;const i=a.querySelector('[data-connector-line="true"]'),l=a.querySelector('[data-connector-visual="true"]'),c=a.querySelector('[data-connector-shadow="true"]'),u=l??i,d=u?nt(u.getAttribute("data-connector-base-line-width"),2):2,p=u?.getAttribute("data-connector-base-colour")??"#6c757d";if(i&&(i.style.height=`${d}px`,i.style.borderRadius=`${d/2}px`,i.style.backgroundColor=p),l){const g=nt(a.getAttribute("data-connector-width"),l.width||0),m=nt(a.getAttribute("data-connector-height"),l.height||0),v=nt(a.getAttribute("data-connector-start-x")),A=nt(a.getAttribute("data-connector-start-y")),w=nt(a.getAttribute("data-connector-end-x")),S=nt(a.getAttribute("data-connector-end-y")),C=nt(a.getAttribute("data-connector-opacity"),1),M=!!a.querySelector('[data-connector-arrow-endpoint="start"]'),R=!!a.querySelector('[data-connector-arrow-endpoint="end"]'),{arrowLength:E,arrowWidth:k}=Am(d),I=nt(l.getAttribute("data-connector-shadow-offset-x"),0),B=nt(l.getAttribute("data-connector-shadow-offset-y"),2),O=nt(l.getAttribute("data-connector-shadow-blur"),4),j=l.getAttribute("data-connector-shadow-colour")??"rgba(0,0,0,0.25)";Bp(l,g,m,{startX:v,startY:A,endX:w,endY:S,lineWidth:d,colour:p,opacity:C,hasStartArrow:M,hasEndArrow:R,arrowLength:E,arrowWidth:k,enableShadow:!1,shadowOffsetX:I,shadowOffsetY:B,shadowBlur:O,shadowColour:j}),c&&Bp(c,g,m,{startX:v,startY:A,endX:w,endY:S,lineWidth:d,colour:p,opacity:C,hasStartArrow:M,hasEndArrow:R,arrowLength:E,arrowWidth:k,enableShadow:!0,shadowOffsetX:I,shadowOffsetY:B,shadowBlur:O,shadowColour:j})}const h=Qw(a,"data-connector-left","data-connector-top","data-connector-width","data-connector-height");h&&o.set(a,h)}),o}function Sm(e={}){const o=e.elementIds??[],a=e.connectorIds??[],i=document.querySelector('[data-canvas="true"]');if(!i)throw new Error("Canvas element not found");const l=i.querySelector('[data-canvas-content="true"]')??i.firstElementChild;if(!l)throw new Error("Canvas content not found");const{exportContainer:c,clonedContent:u,elementContainers:d,connectorContainers:p,cleanup:h,effectiveWidth:g,effectiveHeight:m}=nj(l),{basePositions:v}=lj(d),A=cj(p),w=o.length>0||a.length>0;let S=null;if(!d.length&&!p.length)throw h(),new Error("No items to export");const C=j=>{u.querySelectorAll(j).forEach(U=>{U.style.cssText="display: none !important;"})};C("[data-resize-container]"),C("[data-connector-handle]"),C('[data-selection-rectangle="true"]'),C("input, textarea"),C("[data-zoom-controls],[data-floating-toolbar]"),C('[data-connector-halo="true"]'),C('[data-connector-hit-area="true"]');const M=o.length>0,R=a.length>0;let E=d.length,k=0;if(M){const j=new Set(o);E=0,d.forEach(U=>{const G=U.getAttribute("data-element-id")??"";j.has(G)?(U.setAttribute("data-element-selected","false"),E+=1):U.style.display="none"})}else d.forEach(j=>{R&&(j.style.display="none"),j.setAttribute("data-element-selected","false")}),R&&(E=0);if(R){const j=new Set(a);k=0,p.forEach(U=>{const G=U.getAttribute("data-connector-id")??"";j.has(G)?k+=1:U.style.display="none"})}else p.forEach(j=>{j.setAttribute("data-connector-selected","false"),M&&(j.style.display="none")});if((M||R)&&E+k===0)throw h(),new Error("Selected items not found in DOM");const I=d.filter(j=>j.style.display!=="none").map(j=>{const U=v.get(j);return U?{element:j,bounds:U}:null}).filter(j=>!!j),B=p.filter(j=>j.style.display!=="none").map(j=>{const U=A.get(j);return U?{connector:j,bounds:U}:null}).filter(j=>!!j),O=[...I.map(j=>j.bounds.extended),...B.map(j=>j.bounds)];if(O.length>0){const j=Math.min(...O.map(z=>z.left)),U=Math.min(...O.map(z=>z.top)),G=Math.max(...O.map(z=>z.left+z.width)),X=Math.max(...O.map(z=>z.top+z.height)),W=qa-j,J=qa-U;I.forEach(({element:z,bounds:L})=>{const T=L.actual.left+W,$=L.actual.top+J;z.style.setProperty("--element-left",`${T}px`),z.style.setProperty("--element-top",`${$}px`),z.setAttribute("data-element-left",`${T}`),z.setAttribute("data-element-top",`${$}`);const N=z.querySelector('[data-element-snapshot="true"]');N&&(N.style.left="0",N.style.top="0",N.style.width=`${L.actual.width}px`,N.style.height=`${L.actual.height}px`)}),B.forEach(({connector:z,bounds:L})=>{const T=L.left+W,$=L.top+J;z.style.left=`${T}px`,z.style.top=`${$}px`,z.setAttribute("data-connector-left",`${T}`),z.setAttribute("data-connector-top",`${$}`)});const oe=Math.max(1,G-j+qa*2),Z=Math.max(1,X-U+qa*2),D=w?oe:Math.max(oe,g),Y=w?Z:Math.max(Z,m);u.style.left="0px",u.style.top="0px",u.style.width=`${D}px`,u.style.height=`${Y}px`,c.style.width=`${D}px`,c.style.height=`${Y}px`,S={rootWidth:D,rootHeight:Y,contentLeft:qa,contentTop:qa,contentWidth:Math.max(0,G-j),contentHeight:Math.max(0,X-U)}}return typeof window<"u"&&window[Jl]?.onPrepareExportSnapshot?.({root:u,selectedElementIds:o,selectedConnectorIds:a}),{root:u,cleanup:h,metrics:S}}function Pu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var up={exports:{}};/*!

pica
https://github.com/nodeca/pica

*/var Ub;function uj(){return Ub||(Ub=1,(function(e,o){(function(a){e.exports=a()})(function(){return(function(){function a(i,l,c){function u(h,g){if(!l[h]){if(!i[h]){var m=typeof Pu=="function"&&Pu;if(!g&&m)return m(h,!0);if(d)return d(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var A=l[h]={exports:{}};i[h][0].call(A.exports,function(w){var S=i[h][1][w];return u(S||w)},A,A.exports,a,i,l,c)}return l[h].exports}for(var d=typeof Pu=="function"&&Pu,p=0;p<c.length;p++)u(c[p]);return u}return a})()({1:[function(a,i,l){var c=a("multimath"),u=a("./mm_unsharp_mask"),d=a("./mm_resize");function p(h){var g=h||[],m={js:g.indexOf("js")>=0,wasm:g.indexOf("wasm")>=0};c.call(this,m),this.features={js:m.js,wasm:m.wasm&&this.has_wasm()},this.use(u),this.use(d)}p.prototype=Object.create(c.prototype),p.prototype.constructor=p,p.prototype.resizeAndUnsharp=function(g,m){var v=this.resize(g,m);return g.unsharpAmount&&this.unsharp_mask(v,g.toWidth,g.toHeight,g.unsharpAmount,g.unsharpRadius,g.unsharpThreshold),v},i.exports=p},{"./mm_resize":4,"./mm_unsharp_mask":9,multimath:19}],2:[function(a,i,l){function c(m){return m<0?0:m>255?255:m}function u(m){return m>=0?m:0}function d(m,v,A,w,S,C){var M,R,E,k,I,B,O,j,U,G,X,W=0,J=0;for(U=0;U<w;U++){for(I=0,G=0;G<S;G++){for(B=C[I++],O=C[I++],j=W+B*4|0,M=R=E=k=0;O>0;O--)X=C[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,R=R+X*m[j+1]|0,M=M+X*m[j]|0,j=j+4|0;v[J+3]=u(k>>7),v[J+2]=u(E>>7),v[J+1]=u(R>>7),v[J]=u(M>>7),J=J+w*4|0}J=(U+1)*4|0,W=(U+1)*A*4|0}}function p(m,v,A,w,S,C){var M,R,E,k,I,B,O,j,U,G,X,W=0,J=0;for(U=0;U<w;U++){for(I=0,G=0;G<S;G++){for(B=C[I++],O=C[I++],j=W+B*4|0,M=R=E=k=0;O>0;O--)X=C[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,R=R+X*m[j+1]|0,M=M+X*m[j]|0,j=j+4|0;M>>=7,R>>=7,E>>=7,k>>=7,v[J+3]=c(k+8192>>14),v[J+2]=c(E+8192>>14),v[J+1]=c(R+8192>>14),v[J]=c(M+8192>>14),J=J+w*4|0}J=(U+1)*4|0,W=(U+1)*A*4|0}}function h(m,v,A,w,S,C){var M,R,E,k,I,B,O,j,U,G,X,W,J=0,oe=0;for(G=0;G<w;G++){for(B=0,X=0;X<S;X++){for(O=C[B++],j=C[B++],U=J+O*4|0,M=R=E=k=0;j>0;j--)W=C[B++],I=m[U+3],k=k+W*I|0,E=E+W*m[U+2]*I|0,R=R+W*m[U+1]*I|0,M=M+W*m[U]*I|0,U=U+4|0;E=E/255|0,R=R/255|0,M=M/255|0,v[oe+3]=u(k>>7),v[oe+2]=u(E>>7),v[oe+1]=u(R>>7),v[oe]=u(M>>7),oe=oe+w*4|0}oe=(G+1)*4|0,J=(G+1)*A*4|0}}function g(m,v,A,w,S,C){var M,R,E,k,I,B,O,j,U,G,X,W=0,J=0;for(U=0;U<w;U++){for(I=0,G=0;G<S;G++){for(B=C[I++],O=C[I++],j=W+B*4|0,M=R=E=k=0;O>0;O--)X=C[I++],k=k+X*m[j+3]|0,E=E+X*m[j+2]|0,R=R+X*m[j+1]|0,M=M+X*m[j]|0,j=j+4|0;M>>=7,R>>=7,E>>=7,k>>=7,k=c(k+8192>>14),k>0&&(M=M*255/k|0,R=R*255/k|0,E=E*255/k|0),v[J+3]=k,v[J+2]=c(E+8192>>14),v[J+1]=c(R+8192>>14),v[J]=c(M+8192>>14),J=J+w*4|0}J=(U+1)*4|0,W=(U+1)*A*4|0}}i.exports={convolveHor:d,convolveVert:p,convolveHorWithPre:h,convolveVertWithPre:g}},{}],3:[function(a,i,l){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEYA2AGf39/f39/AGAAAGAIf39/f39/f38AAg8BA2VudgZtZW1vcnkCAAADBwYBAAAAAAIGBgF/AEEACweUAQgRX193YXNtX2NhbGxfY3RvcnMAAAtjb252b2x2ZUhvcgABDGNvbnZvbHZlVmVydAACEmNvbnZvbHZlSG9yV2l0aFByZQADE2NvbnZvbHZlVmVydFdpdGhQcmUABApjb252b2x2ZUhWAAUMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAKyA4GAwABC4wDARB/AkAgA0UNACAERQ0AIANBAnQhFQNAQQAhE0EAIQsDQCALQQJqIQcCfyALQQF0IAVqIgYuAQIiC0UEQEEAIQhBACEGQQAhCUEAIQogBwwBCyASIAYuAQBqIQhBACEJQQAhCiALIRRBACEOIAchBkEAIQ8DQCAFIAZBAXRqLgEAIhAgACAIQQJ0aigCACIRQRh2bCAPaiEPIBFB/wFxIBBsIAlqIQkgEUEQdkH/AXEgEGwgDmohDiARQQh2Qf8BcSAQbCAKaiEKIAhBAWohCCAGQQFqIQYgFEEBayIUDQALIAlBB3UhCCAKQQd1IQYgDkEHdSEJIA9BB3UhCiAHIAtqCyELIAEgDEEBdCIHaiAIQQAgCEEAShs7AQAgASAHQQJyaiAGQQAgBkEAShs7AQAgASAHQQRyaiAJQQAgCUEAShs7AQAgASAHQQZyaiAKQQAgCkEAShs7AQAgDCAVaiEMIBNBAWoiEyAERw0ACyANQQFqIg0gAmwhEiANQQJ0IQwgAyANRw0ACwsL2gMBD38CQCADRQ0AIARFDQAgAkECdCEUA0AgCyEMQQAhE0EAIQIDQCACQQJqIQYCfyACQQF0IAVqIgcuAQIiAkUEQEEAIQhBACEHQQAhCkEAIQkgBgwBCyAHLgEAQQJ0IBJqIQhBACEJIAIhCkEAIQ0gBiEHQQAhDkEAIQ8DQCAFIAdBAXRqLgEAIhAgACAIQQF0IhFqLwEAbCAJaiEJIAAgEUEGcmovAQAgEGwgDmohDiAAIBFBBHJqLwEAIBBsIA9qIQ8gACARQQJyai8BACAQbCANaiENIAhBBGohCCAHQQFqIQcgCkEBayIKDQALIAlBB3UhCCANQQd1IQcgDkEHdSEKIA9BB3UhCSACIAZqCyECIAEgDEECdGogB0GAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQQh0QYD+A3EgCUGAQGtBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobQRB0QYCA/AdxIApBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBgEBrQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG3I2AgAgAyAMaiEMIBNBAWoiEyAERw0ACyAUIAtBAWoiC2whEiADIAtHDQALCwuSAwEQfwJAIANFDQAgBEUNACADQQJ0IRUDQEEAIRNBACEGA0AgBkECaiEIAn8gBkEBdCAFaiIGLgECIgdFBEBBACEJQQAhDEEAIQ1BACEOIAgMAQsgEiAGLgEAaiEJQQAhDkEAIQ1BACEMIAchFEEAIQ8gCCEGA0AgBSAGQQF0ai4BACAAIAlBAnRqKAIAIhBBGHZsIhEgD2ohDyARIBBBEHZB/wFxbCAMaiEMIBEgEEEIdkH/AXFsIA1qIQ0gESAQQf8BcWwgDmohDiAJQQFqIQkgBkEBaiEGIBRBAWsiFA0ACyAPQQd1IQkgByAIagshBiABIApBAXQiCGogDkH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEECcmogDUH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEEcmogDEH/AW1BB3UiB0EAIAdBAEobOwEAIAEgCEEGcmogCUEAIAlBAEobOwEAIAogFWohCiATQQFqIhMgBEcNAAsgC0EBaiILIAJsIRIgC0ECdCEKIAMgC0cNAAsLC4IEAQ9/AkAgA0UNACAERQ0AIAJBAnQhFANAIAshDEEAIRJBACEHA0AgB0ECaiEKAn8gB0EBdCAFaiICLgECIhNFBEBBACEIQQAhCUEAIQYgCiEHQQAMAQsgAi4BAEECdCARaiEJQQAhByATIQJBACENIAohBkEAIQ5BACEPA0AgBSAGQQF0ai4BACIIIAAgCUEBdCIQai8BAGwgB2ohByAAIBBBBnJqLwEAIAhsIA5qIQ4gACAQQQRyai8BACAIbCAPaiEPIAAgEEECcmovAQAgCGwgDWohDSAJQQRqIQkgBkEBaiEGIAJBAWsiAg0ACyAHQQd1IQggDUEHdSEJIA9BB3UhBiAKIBNqIQcgDkEHdQtBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKGyIKQf8BcQRAIAlB/wFsIAJtIQkgCEH/AWwgAm0hCCAGQf8BbCACbSEGCyABIAxBAnRqIAlBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EIdEGA/gNxIAZBgEBrQQ51IgJB/wEgAkH/AUgbIgJBACACQQBKG0EQdEGAgPwHcSAKQRh0ciAIQYBAa0EOdSICQf8BIAJB/wFIGyICQQAgAkEAShtycjYCACADIAxqIQwgEkEBaiISIARHDQALIBQgC0EBaiILbCERIAMgC0cNAAsLC0AAIAcEQEEAIAIgAyAEIAUgABADIAJBACAEIAUgBiABEAQPC0EAIAIgAyAEIAUgABABIAJBACAEIAUgBiABEAIL"},{}],4:[function(a,i,l){i.exports={name:"resize",fn:a("./resize"),wasm_fn:a("./resize_wasm"),wasm_src:a("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(a,i,l){var c=a("./resize_filter_gen"),u=a("./convolve"),d=u.convolveHor,p=u.convolveVert,h=u.convolveHorWithPre,g=u.convolveVertWithPre;function m(A,w,S){for(var C=3,M=w*S*4|0;C<M;){if(A[C]!==255)return!0;C=C+4|0}return!1}function v(A,w,S){for(var C=3,M=w*S*4|0;C<M;)A[C]=255,C=C+4|0}i.exports=function(w){var S=w.src,C=w.width,M=w.height,R=w.toWidth,E=w.toHeight,k=w.scaleX||w.toWidth/w.width,I=w.scaleY||w.toHeight/w.height,B=w.offsetX||0,O=w.offsetY||0,j=w.dest||new Uint8Array(R*E*4),U=typeof w.filter>"u"?"mks2013":w.filter,G=c(U,C,R,k,B),X=c(U,M,E,I,O),W=new Uint16Array(R*M*4);return m(S,C,M)?(h(S,W,C,M,R,G),g(W,j,M,R,E,X)):(d(S,W,C,M,R,G),p(W,j,M,R,E,X),v(j,R,E)),j}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(a,i,l){var c=a("./resize_filter_info"),u=14;function d(p){return Math.round(p*((1<<u)-1))}i.exports=function(h,g,m,v,A){var w=c.filter[h].fn,S=1/v,C=Math.min(1,v),M=c.filter[h].win/C,R,E,k,I,B,O,j,U,G,X,W,J,oe,Z,D,Y,z,L=Math.floor((M+1)*2),T=new Int16Array((L+2)*m),$=0,N=!T.subarray||!T.set;for(R=0;R<m;R++){for(E=(R+.5)*S+A,k=Math.max(0,Math.floor(E-M)),I=Math.min(g-1,Math.ceil(E+M)),B=I-k+1,O=new Float32Array(B),j=new Int16Array(B),U=0,G=k,X=0;G<=I;G++,X++)W=w((G+.5-E)*C),U+=W,O[X]=W;for(J=0,X=0;X<O.length;X++)oe=O[X]/U,J+=oe,j[X]=d(oe);for(j[m>>1]+=d(1-J),Z=0;Z<j.length&&j[Z]===0;)Z++;if(Z<j.length){for(D=j.length-1;D>0&&j[D]===0;)D--;if(Y=k+Z,z=D-Z+1,T[$++]=Y,T[$++]=z,!N)T.set(j.subarray(Z,D+1),$),$+=z;else for(X=Z;X<=D;X++)T[$++]=j[X]}else T[$++]=0,T[$++]=0}return T}},{"./resize_filter_info":7}],7:[function(a,i,l){var c={box:{win:.5,fn:function(d){return d<0&&(d=-d),d<.5?1:0}},hamming:{win:1,fn:function(d){if(d<0&&(d=-d),d>=1)return 0;if(d<11920929e-14)return 1;var p=d*Math.PI;return Math.sin(p)/p*(.54+.46*Math.cos(p/1))}},lanczos2:{win:2,fn:function(d){if(d<0&&(d=-d),d>=2)return 0;if(d<11920929e-14)return 1;var p=d*Math.PI;return Math.sin(p)/p*Math.sin(p/2)/(p/2)}},lanczos3:{win:3,fn:function(d){if(d<0&&(d=-d),d>=3)return 0;if(d<11920929e-14)return 1;var p=d*Math.PI;return Math.sin(p)/p*Math.sin(p/3)/(p/3)}},mks2013:{win:2.5,fn:function(d){return d<0&&(d=-d),d>=2.5?0:d>=1.5?-.125*(d-2.5)*(d-2.5):d>=.5?.25*(4*d*d-11*d+7):1.0625-1.75*d*d}}};i.exports={filter:c,f2q:{box:0,hamming:1,lanczos2:2,lanczos3:3},q2f:["box","hamming","lanczos2","lanczos3"]}},{}],8:[function(a,i,l){var c=a("./resize_filter_gen");function u(m,v,A){for(var w=3,S=v*A*4|0;w<S;){if(m[w]!==255)return!0;w=w+4|0}return!1}function d(m,v,A){for(var w=3,S=v*A*4|0;w<S;)m[w]=255,w=w+4|0}function p(m){return new Uint8Array(m.buffer,0,m.byteLength)}var h=!0;try{h=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1}catch{}function g(m,v,A){if(h){v.set(p(m),A);return}for(var w=A,S=0;S<m.length;S++){var C=m[S];v[w++]=C&255,v[w++]=C>>8&255}}i.exports=function(v){var A=v.src,w=v.width,S=v.height,C=v.toWidth,M=v.toHeight,R=v.scaleX||v.toWidth/v.width,E=v.scaleY||v.toHeight/v.height,k=v.offsetX||0,I=v.offsetY||0,B=v.dest||new Uint8Array(C*M*4),O=typeof v.filter>"u"?"mks2013":v.filter,j=c(O,w,C,R,k),U=c(O,S,M,E,I),G=0,X=Math.max(A.byteLength,B.byteLength),W=this.__align(G+X),J=S*C*4*2,oe=this.__align(W+J),Z=this.__align(oe+j.byteLength),D=Z+U.byteLength,Y=this.__instance("resize",D),z=new Uint8Array(this.__memory.buffer),L=new Uint32Array(this.__memory.buffer),T=new Uint32Array(A.buffer);L.set(T),g(j,z,oe),g(U,z,Z);var $=Y.exports.convolveHV||Y.exports._convolveHV;u(A,w,S)?$(oe,Z,W,w,S,C,M,1):($(oe,Z,W,w,S,C,M,0),d(B,C,M));var N=new Uint32Array(B.buffer);return N.set(new Uint32Array(this.__memory.buffer,0,M*C)),B}},{"./resize_filter_gen":6}],9:[function(a,i,l){i.exports={name:"unsharp_mask",fn:a("./unsharp_mask"),wasm_fn:a("./unsharp_mask_wasm"),wasm_src:a("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(a,i,l){var c=a("glur/mono16");function u(d,p,h){for(var g=p*h,m=new Uint16Array(g),v,A,w,S,C=0;C<g;C++)v=d[4*C],A=d[4*C+1],w=d[4*C+2],S=v>=A&&v>=w?v:A>=w&&A>=v?A:w,m[C]=S<<8;return m}i.exports=function(p,h,g,m,v,A){var w,S,C,M,R;if(!(m===0||v<.5)){v>2&&(v=2);var E=u(p,h,g),k=new Uint16Array(E);c(k,h,g,v);for(var I=m/100*4096+.5|0,B=A<<8,O=h*g,j=0;j<O;j++)w=E[j],M=w-k[j],Math.abs(M)>=B&&(S=w+(I*M+2048>>12),S=S>65280?65280:S,S=S<0?0:S,w=w!==0?w:1,C=(S<<12)/w|0,R=j*4,p[R]=p[R]*C+2048>>12,p[R+1]=p[R+1]*C+2048>>12,p[R+2]=p[R+2]*C+2048>>12)}}},{"glur/mono16":18}],11:[function(a,i,l){i.exports=function(u,d,p,h,g,m){if(!(h===0||g<.5)){g>2&&(g=2);var v=d*p,A=v*4,w=v*2,S=v*2,C=Math.max(d,p)*4,M=32,R=0,E=A,k=E+w,I=k+S,B=I+S,O=B+C,j=this.__instance("unsharp_mask",A+w+S*2+C+M,{exp:Math.exp}),U=new Uint32Array(u.buffer),G=new Uint32Array(this.__memory.buffer);G.set(U);var X=j.exports.hsv_v16||j.exports._hsv_v16;X(R,E,d,p),X=j.exports.blurMono16||j.exports._blurMono16,X(E,k,I,B,O,d,p,g),X=j.exports.unsharp||j.exports._unsharp,X(R,R,E,k,d,p,h,m),U.set(new Uint32Array(this.__memory.buffer,0,v))}}},{}],12:[function(a,i,l){i.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(a,i,l){var c=100;function u(d,p){this.create=d,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=p||2e3}u.prototype.acquire=function(){var d=this,p;return this.available.length!==0?p=this.available.pop():(p=this.create(),p.id=this.lastId++,p.release=function(){return d.release(p)}),this.acquired[p.id]=p,p},u.prototype.release=function(d){var p=this;delete this.acquired[d.id],d.lastUsed=Date.now(),this.available.push(d),this.timeoutId===0&&(this.timeoutId=setTimeout(function(){return p.gc()},c))},u.prototype.gc=function(){var d=this,p=Date.now();this.available=this.available.filter(function(h){return p-h.lastUsed>d.idle?(h.destroy(),!1):!0}),this.available.length!==0?this.timeoutId=setTimeout(function(){return d.gc()},c):this.timeoutId=0},i.exports=u},{}],14:[function(a,i,l){var c=2;i.exports=function(d,p,h,g,m,v){var A=h/d,w=g/p,S=(2*v+c+1)/m;if(S>.5)return[[h,g]];var C=Math.ceil(Math.log(Math.min(A,w))/Math.log(S));if(C<=1)return[[h,g]];for(var M=[],R=0;R<C;R++){var E=Math.round(Math.pow(Math.pow(d,C-R-1)*Math.pow(h,R+1),1/C)),k=Math.round(Math.pow(Math.pow(p,C-R-1)*Math.pow(g,R+1),1/C));M.push([E,k])}return M}},{}],15:[function(a,i,l){var c=1e-5;function u(p){var h=Math.round(p);return Math.abs(p-h)<c?h:Math.floor(p)}function d(p){var h=Math.round(p);return Math.abs(p-h)<c?h:Math.ceil(p)}i.exports=function(h){var g=h.toWidth/h.width,m=h.toHeight/h.height,v=u(h.srcTileSize*g)-2*h.destTileBorder,A=u(h.srcTileSize*m)-2*h.destTileBorder;if(v<1||A<1)throw new Error("Internal error in pica: target tile width/height is too small.");var w,S,C,M,R,E,k=[],I;for(M=0;M<h.toHeight;M+=A)for(C=0;C<h.toWidth;C+=v)w=C-h.destTileBorder,w<0&&(w=0),R=C+v+h.destTileBorder-w,w+R>=h.toWidth&&(R=h.toWidth-w),S=M-h.destTileBorder,S<0&&(S=0),E=M+A+h.destTileBorder-S,S+E>=h.toHeight&&(E=h.toHeight-S),I={toX:w,toY:S,toWidth:R,toHeight:E,toInnerX:C,toInnerY:M,toInnerWidth:v,toInnerHeight:A,offsetX:w/g-u(w/g),offsetY:S/m-u(S/m),scaleX:g,scaleY:m,x:u(w/g),y:u(S/m),width:d(R/g),height:d(E/m)},k.push(I);return k}},{}],16:[function(a,i,l){function c(u){return Object.prototype.toString.call(u)}i.exports.isCanvas=function(d){var p=c(d);return p==="[object HTMLCanvasElement]"||p==="[object OffscreenCanvas]"||p==="[object Canvas]"},i.exports.isImage=function(d){return c(d)==="[object HTMLImageElement]"},i.exports.isImageBitmap=function(d){return c(d)==="[object ImageBitmap]"},i.exports.limiter=function(d){var p=0,h=[];function g(){p<d&&h.length&&(p++,h.shift()())}return function(v){return new Promise(function(A,w){h.push(function(){v().then(function(S){A(S),p--,g()},function(S){w(S),p--,g()})}),g()})}},i.exports.cib_quality_name=function(d){switch(d){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},i.exports.cib_support=function(d){return Promise.resolve().then(function(){if(typeof createImageBitmap>"u")return!1;var p=d(100,100);return createImageBitmap(p,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(h){var g=h.width===10;return h.close(),p=null,g})}).catch(function(){return!1})},i.exports.worker_offscreen_canvas_support=function(){return new Promise(function(d,p){if(typeof OffscreenCanvas>"u"){d(!1);return}function h(v){if(typeof createImageBitmap>"u"){v.postMessage(!1);return}Promise.resolve().then(function(){var A=new OffscreenCanvas(10,10),w=A.getContext("2d");return w.rect(0,0,1,1),createImageBitmap(A,0,0,1,1)}).then(function(){return v.postMessage(!0)},function(){return v.postMessage(!1)})}var g=btoa("(".concat(h.toString(),")(self);")),m=new Worker("data:text/javascript;base64,".concat(g));m.onmessage=function(v){return d(v.data)},m.onerror=p}).then(function(d){return d},function(){return!1})},i.exports.can_use_canvas=function(d){var p=!1;try{var h=d(2,1),g=h.getContext("2d"),m=g.createImageData(2,1);m.data[0]=12,m.data[1]=23,m.data[2]=34,m.data[3]=255,m.data[4]=45,m.data[5]=56,m.data[6]=67,m.data[7]=255,g.putImageData(m,0,0),m=null,m=g.getImageData(0,0,2,1),m.data[0]===12&&m.data[1]===23&&m.data[2]===34&&m.data[3]===255&&m.data[4]===45&&m.data[5]===56&&m.data[6]===67&&m.data[7]===255&&(p=!0)}catch{}return p},i.exports.cib_can_use_region=function(){return new Promise(function(d){if(typeof Image>"u"||typeof createImageBitmap>"u"){d(!1);return}var p=new Image;p.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",p.onload=function(){createImageBitmap(p,0,0,p.width,p.height).then(function(h){h.width===p.width&&h.height===p.height?d(!0):d(!1)},function(){return d(!1)})},p.onerror=function(){return d(!1)}})}},{}],17:[function(a,i,l){i.exports=function(){var c=a("./mathlib"),u;onmessage=function(p){var h=p.data.opts;if(!h.src&&h.srcBitmap){var g=new OffscreenCanvas(h.width,h.height),m=g.getContext("2d");m.drawImage(h.srcBitmap,0,0),h.src=m.getImageData(0,0,h.width,h.height).data,g.width=g.height=0,g=null,h.srcBitmap.close(),h.srcBitmap=null}u||(u=new c(p.data.features));var v=u.resizeAndUnsharp(h);postMessage({data:v},[v.buffer])}}},{"./mathlib":1}],18:[function(a,i,l){var c,u,d,p,h,g,m,v;function A(C){C<.5&&(C=.5);var M=Math.exp(.726*.726)/C,R=Math.exp(-M),E=Math.exp(-2*M),k=(1-R)*(1-R)/(1+2*M*R-E);return c=k,u=k*(M-1)*R,d=k*(M+1)*R,p=-k*E,h=2*R,g=-E,m=(c+u)/(1-h-g),v=(d+p)/(1-h-g),new Float32Array([c,u,d,p,h,g,m,v])}function w(C,M,R,E,k,I){var B,O,j,U,G,X,W,J,oe,Z,D,Y,z,L;for(oe=0;oe<I;oe++){for(X=oe*k,W=oe,J=0,B=C[X],G=B*E[6],U=G,D=E[0],Y=E[1],z=E[4],L=E[5],Z=0;Z<k;Z++)O=C[X],j=O*D+B*Y+U*z+G*L,G=U,U=j,B=O,R[J]=U,J++,X++;for(X--,J--,W+=I*(k-1),B=C[X],G=B*E[7],U=G,O=B,D=E[2],Y=E[3],Z=k-1;Z>=0;Z--)j=O*D+B*Y+U*z+G*L,G=U,U=j,B=O,O=C[X],M[W]=R[J]+U,X--,J--,W-=I}}function S(C,M,R,E){if(E){var k=new Uint16Array(C.length),I=new Float32Array(Math.max(M,R)),B=A(E);w(C,k,I,B,M,R),w(k,C,I,B,R,M)}}i.exports=S},{}],19:[function(a,i,l){var c=a("object-assign"),u=a("./lib/base64decode"),d=a("./lib/wa_detect"),p={js:!0,wasm:!0};function h(g){if(!(this instanceof h))return new h(g);var m=c({},p,g||{});if(this.options=m,this.__cache={},this.__init_promise=null,this.__modules=m.modules||{},this.__memory=null,this.__wasm={},this.__isLE=new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]===1,!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}h.prototype.has_wasm=d,h.prototype.use=function(g){return this.__modules[g.name]=g,this.options.wasm&&this.has_wasm()&&g.wasm_fn?this[g.name]=g.wasm_fn:this[g.name]=g.fn,this},h.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error(`mathlib: only "wasm" was enabled, but it's not supported`));var g=this;return this.__init_promise=Promise.all(Object.keys(g.__modules).map(function(m){var v=g.__modules[m];return!g.options.wasm||!g.has_wasm()||!v.wasm_fn||g.__wasm[m]?null:WebAssembly.compile(g.__base64decode(v.wasm_src)).then(function(A){g.__wasm[m]=A})})).then(function(){return g}),this.__init_promise},h.prototype.__base64decode=u,h.prototype.__reallocate=function(m){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(m/(64*1024))}),this.__memory;var v=this.__memory.buffer.byteLength;return v<m&&this.__memory.grow(Math.ceil((m-v)/(64*1024))),this.__memory},h.prototype.__instance=function(m,v,A){if(v&&this.__reallocate(v),!this.__wasm[m]){var w=this.__modules[m];this.__wasm[m]=new WebAssembly.Module(this.__base64decode(w.wasm_src))}if(!this.__cache[m]){var S={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[m]=new WebAssembly.Instance(this.__wasm[m],{env:c(S,A||{})})}return this.__cache[m]},h.prototype.__align=function(m,v){v=v||8;var A=m%v;return m+(A?v-A:0)},i.exports=h},{"./lib/base64decode":20,"./lib/wa_detect":21,"object-assign":22}],20:[function(a,i,l){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";i.exports=function(d){for(var p=d.replace(/[\r\n=]/g,""),h=p.length,g=new Uint8Array(h*3>>2),m=0,v=0,A=0;A<h;A++)A%4===0&&A&&(g[v++]=m>>16&255,g[v++]=m>>8&255,g[v++]=m&255),m=m<<6|c.indexOf(p.charAt(A));var w=h%4*6;return w===0?(g[v++]=m>>16&255,g[v++]=m>>8&255,g[v++]=m&255):w===18?(g[v++]=m>>10&255,g[v++]=m>>2&255):w===12&&(g[v++]=m>>4&255),g}},{}],21:[function(a,i,l){var c;i.exports=function(){if(typeof c<"u"||(c=!1,typeof WebAssembly>"u"))return c;try{var d=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),p=new WebAssembly.Module(d),h=new WebAssembly.Instance(p,{});return h.exports.test(4)!==0&&(c=!0),c}catch{}return c}},{}],22:[function(a,i,l){var c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable;function p(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}function h(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de",Object.getOwnPropertyNames(g)[0]==="5")return!1;for(var m={},v=0;v<10;v++)m["_"+String.fromCharCode(v)]=v;var A=Object.getOwnPropertyNames(m).map(function(S){return m[S]});if(A.join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(S){w[S]=S}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}i.exports=h()?Object.assign:function(g,m){for(var v,A=p(g),w,S=1;S<arguments.length;S++){v=Object(arguments[S]);for(var C in v)u.call(v,C)&&(A[C]=v[C]);if(c){w=c(v);for(var M=0;M<w.length;M++)d.call(v,w[M])&&(A[w[M]]=v[w[M]])}}return A}},{}],23:[function(a,i,l){var c=arguments[3],u=arguments[4],d=arguments[5],p=JSON.stringify;i.exports=function(h,g){for(var m,v=Object.keys(d),A=0,w=v.length;A<w;A++){var S=v[A],C=d[S].exports;if(C===h||C&&C.default===h){m=S;break}}if(!m){m=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var M={},A=0,w=v.length;A<w;A++){var S=v[A];M[S]=S}u[m]=["function(require,module,exports){"+h+"(self); }",M]}var R=Math.floor(Math.pow(16,8)*Math.random()).toString(16),E={};E[m]=m,u[R]=["function(require,module,exports){var f = require("+p(m)+");(f.default ? f.default : f)(self);}",E];var k={};I(R);function I(X){k[X]=!0;for(var W in u[X][1]){var J=u[X][1][W];k[J]||I(J)}}var B="("+c+")({"+Object.keys(k).map(function(X){return p(X)+":["+u[X][0]+","+p(u[X][1])+"]"}).join(",")+"},{},["+p(R)+"])",O=window.URL||window.webkitURL||window.mozURL||window.msURL,j=new Blob([B],{type:"text/javascript"});if(g&&g.bare)return j;var U=O.createObjectURL(j),G=new Worker(U);return G.objectURL=U,G}},{}],"/index.js":[function(a,i,l){function c(D,Y){return g(D)||h(D,Y)||d(D,Y)||u()}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(D,Y){if(D){if(typeof D=="string")return p(D,Y);var z=Object.prototype.toString.call(D).slice(8,-1);if(z==="Object"&&D.constructor&&(z=D.constructor.name),z==="Map"||z==="Set")return Array.from(D);if(z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return p(D,Y)}}function p(D,Y){(Y==null||Y>D.length)&&(Y=D.length);for(var z=0,L=new Array(Y);z<Y;z++)L[z]=D[z];return L}function h(D,Y){var z=D==null?null:typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(z!=null){var L=[],T=!0,$=!1,N,H;try{for(z=z.call(D);!(T=(N=z.next()).done)&&(L.push(N.value),!(Y&&L.length===Y));T=!0);}catch(q){$=!0,H=q}finally{try{!T&&z.return!=null&&z.return()}finally{if($)throw H}}return L}}function g(D){if(Array.isArray(D))return D}var m=a("object-assign"),v=a("webworkify"),A=a("./lib/mathlib"),w=a("./lib/pool"),S=a("./lib/utils"),C=a("./lib/worker"),M=a("./lib/stepper"),R=a("./lib/tiler"),E=a("./lib/mm_resize/resize_filter_info"),k={},I=!1;try{typeof navigator<"u"&&navigator.userAgent&&(I=navigator.userAgent.indexOf("Safari")>=0)}catch{}var B=1;typeof navigator<"u"&&(B=Math.min(navigator.hardwareConcurrency||1,4));var O={tile:1024,concurrency:B,features:["js","wasm","ww"],idle:2e3,createCanvas:function(Y,z){var L=document.createElement("canvas");return L.width=Y,L.height=z,L}},j={filter:"mks2013",unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},U=!1,G=!1,X=!1,W=!1,J=!1;function oe(){return{value:v(C),destroy:function(){if(this.value.terminate(),typeof window<"u"){var Y=window.URL||window.webkitURL||window.mozURL||window.msURL;Y&&Y.revokeObjectURL&&this.value.objectURL&&Y.revokeObjectURL(this.value.objectURL)}}}}function Z(D){if(!(this instanceof Z))return new Z(D);this.options=m({},O,D||{});var Y="lk_".concat(this.options.concurrency);this.__limit=k[Y]||S.limiter(this.options.concurrency),k[Y]||(k[Y]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}Z.prototype.init=function(){var D=this;if(this.__initPromise)return this.__initPromise;if(typeof ImageData<"u"&&typeof Uint8ClampedArray<"u")try{new ImageData(new Uint8ClampedArray(400),10,10),U=!0}catch{}typeof ImageBitmap<"u"&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?G=!0:this.debug("ImageBitmap does not support .close(), disabled"));var Y=this.options.features.slice();if(Y.indexOf("all")>=0&&(Y=["cib","wasm","js","ww"]),this.__requested_features=Y,this.__mathlib=new A(Y),Y.indexOf("ww")>=0&&typeof window<"u"&&"Worker"in window)try{var z=a("webworkify")(function(){});z.terminate(),this.features.ww=!0;var L="wp_".concat(JSON.stringify(this.options));k[L]?this.__workersPool=k[L]:(this.__workersPool=new w(oe,this.options.idle),k[L]=this.__workersPool)}catch{}var T=this.__mathlib.init().then(function(q){m(D.features,q.features)}),$;G?$=S.cib_support(this.options.createCanvas).then(function(q){if(D.features.cib&&Y.indexOf("cib")<0){D.debug("createImageBitmap() resize supported, but disabled by config");return}Y.indexOf("cib")>=0&&(D.features.cib=q)}):$=Promise.resolve(!1),X=S.can_use_canvas(this.options.createCanvas);var N;G&&U&&Y.indexOf("ww")!==-1?N=S.worker_offscreen_canvas_support():N=Promise.resolve(!1),N=N.then(function(q){W=q});var H=S.cib_can_use_region().then(function(q){J=q});return this.__initPromise=Promise.all([T,$,N,H]).then(function(){return D}),this.__initPromise},Z.prototype.__invokeResize=function(D,Y){var z=this;return Y.__mathCache=Y.__mathCache||{},Promise.resolve().then(function(){return z.features.ww?new Promise(function(L,T){var $=z.__workersPool.acquire();Y.cancelToken&&Y.cancelToken.catch(function(H){return T(H)}),$.value.onmessage=function(H){$.release(),H.data.err?T(H.data.err):L(H.data)};var N=[];D.src&&N.push(D.src.buffer),D.srcBitmap&&N.push(D.srcBitmap),$.value.postMessage({opts:D,features:z.__requested_features,preload:{wasm_nodule:z.__mathlib.__}},N)}):{data:z.__mathlib.resizeAndUnsharp(D,Y.__mathCache)}})},Z.prototype.__extractTileData=function(D,Y,z,L,T){if(this.features.ww&&W&&(S.isCanvas(Y)||J))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(L.srcImageBitmap||Y,D.x,D.y,D.width,D.height).then(function(H){return T.srcBitmap=H,T});if(S.isCanvas(Y))return L.srcCtx||(L.srcCtx=Y.getContext("2d")),this.debug("Get tile pixel data"),T.src=L.srcCtx.getImageData(D.x,D.y,D.width,D.height).data,T;this.debug("Draw tile imageBitmap/image to temporary canvas");var $=this.options.createCanvas(D.width,D.height),N=$.getContext("2d");return N.globalCompositeOperation="copy",N.drawImage(L.srcImageBitmap||Y,D.x,D.y,D.width,D.height,0,0,D.width,D.height),this.debug("Get tile pixel data"),T.src=N.getImageData(0,0,D.width,D.height).data,$.width=$.height=0,T},Z.prototype.__landTileData=function(D,Y,z){var L;if(this.debug("Convert raw rgba tile result to ImageData"),Y.bitmap)return z.toCtx.drawImage(Y.bitmap,D.toX,D.toY),null;if(U)L=new ImageData(new Uint8ClampedArray(Y.data),D.toWidth,D.toHeight);else if(L=z.toCtx.createImageData(D.toWidth,D.toHeight),L.data.set)L.data.set(Y.data);else for(var T=L.data.length-1;T>=0;T--)L.data[T]=Y.data[T];return this.debug("Draw tile"),I?z.toCtx.putImageData(L,D.toX,D.toY,D.toInnerX-D.toX,D.toInnerY-D.toY,D.toInnerWidth+1e-5,D.toInnerHeight+1e-5):z.toCtx.putImageData(L,D.toX,D.toY,D.toInnerX-D.toX,D.toInnerY-D.toY,D.toInnerWidth,D.toInnerHeight),null},Z.prototype.__tileAndResize=function(D,Y,z){var L=this,T={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null},$=function(H){return L.__limit(function(){if(z.canceled)return z.cancelToken;var q={width:H.width,height:H.height,toWidth:H.toWidth,toHeight:H.toHeight,scaleX:H.scaleX,scaleY:H.scaleY,offsetX:H.offsetX,offsetY:H.offsetY,filter:z.filter,unsharpAmount:z.unsharpAmount,unsharpRadius:z.unsharpRadius,unsharpThreshold:z.unsharpThreshold};return L.debug("Invoke resize math"),Promise.resolve(q).then(function(K){return L.__extractTileData(H,D,z,T,K)}).then(function(K){return L.debug("Invoke resize math"),L.__invokeResize(K,z)}).then(function(K){return z.canceled?z.cancelToken:(T.srcImageData=null,L.__landTileData(H,K,T))})})};return Promise.resolve().then(function(){if(T.toCtx=Y.getContext("2d"),S.isCanvas(D))return null;if(S.isImageBitmap(D))return T.srcImageBitmap=D,T.isImageBitmapReused=!0,null;if(S.isImage(D))return G?(L.debug("Decode image via createImageBitmap"),createImageBitmap(D).then(function(N){T.srcImageBitmap=N}).catch(function(N){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(z.canceled)return z.cancelToken;L.debug("Calculate tiles");var N=R({width:z.width,height:z.height,srcTileSize:L.options.tile,toWidth:z.toWidth,toHeight:z.toHeight,destTileBorder:z.__destTileBorder}),H=N.map(function(K){return $(K)});function q(K){K.srcImageBitmap&&(K.isImageBitmapReused||K.srcImageBitmap.close(),K.srcImageBitmap=null)}return L.debug("Process tiles"),Promise.all(H).then(function(){return L.debug("Finished!"),q(T),Y},function(K){throw q(T),K})})},Z.prototype.__processStages=function(D,Y,z,L){var T=this;if(L.canceled)return L.cancelToken;var $=D.shift(),N=c($,2),H=N[0],q=N[1],K=D.length===0,ie;K||E.q2f.indexOf(L.filter)<0?ie=L.filter:L.filter==="box"?ie="box":ie="hamming",L=m({},L,{toWidth:H,toHeight:q,filter:ie});var ue;return K||(ue=this.options.createCanvas(H,q)),this.__tileAndResize(Y,K?z:ue,L).then(function(){return K?z:(L.width=H,L.height=q,T.__processStages(D,ue,z,L))}).then(function(se){return ue&&(ue.width=ue.height=0),se})},Z.prototype.__resizeViaCreateImageBitmap=function(D,Y,z){var L=this,T=Y.getContext("2d");return this.debug("Resize via createImageBitmap()"),createImageBitmap(D,{resizeWidth:z.toWidth,resizeHeight:z.toHeight,resizeQuality:S.cib_quality_name(E.f2q[z.filter])}).then(function($){if(z.canceled)return z.cancelToken;if(!z.unsharpAmount)return T.drawImage($,0,0),$.close(),T=null,L.debug("Finished!"),Y;L.debug("Unsharp result");var N=L.options.createCanvas(z.toWidth,z.toHeight),H=N.getContext("2d");H.drawImage($,0,0),$.close();var q=H.getImageData(0,0,z.toWidth,z.toHeight);return L.__mathlib.unsharp_mask(q.data,z.toWidth,z.toHeight,z.unsharpAmount,z.unsharpRadius,z.unsharpThreshold),T.putImageData(q,0,0),N.width=N.height=0,q=H=N=T=null,L.debug("Finished!"),Y})},Z.prototype.resize=function(D,Y,z){var L=this;this.debug("Start resize...");var T=m({},j);if(isNaN(z)?z&&(T=m(T,z)):T=m(T,{quality:z}),T.toWidth=Y.width,T.toHeight=Y.height,T.width=D.naturalWidth||D.width,T.height=D.naturalHeight||D.height,Object.prototype.hasOwnProperty.call(T,"quality")){if(T.quality<0||T.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(T.quality));T.filter=E.q2f[T.quality]}if(Y.width===0||Y.height===0)return Promise.reject(new Error("Invalid output size: ".concat(Y.width,"x").concat(Y.height)));T.unsharpRadius>2&&(T.unsharpRadius=2),T.canceled=!1,T.cancelToken&&(T.cancelToken=T.cancelToken.then(function(N){throw T.canceled=!0,N},function(N){throw T.canceled=!0,N}));var $=3;return T.__destTileBorder=Math.ceil(Math.max($,2.5*T.unsharpRadius|0)),this.init().then(function(){if(T.canceled)return T.cancelToken;if(L.features.cib){if(E.q2f.indexOf(T.filter)>=0)return L.__resizeViaCreateImageBitmap(D,Y,T);L.debug("cib is enabled, but not supports provided filter, fallback to manual math")}if(!X){var N=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw N.code="ERR_GET_IMAGE_DATA",N}var H=M(T.width,T.height,T.toWidth,T.toHeight,L.options.tile,T.__destTileBorder);return L.__processStages(H,D,Y,T)})},Z.prototype.resizeBuffer=function(D){var Y=this,z=m({},j,D);if(Object.prototype.hasOwnProperty.call(z,"quality")){if(z.quality<0||z.quality>3)throw new Error("Pica: .quality should be [0..3], got ".concat(z.quality));z.filter=E.q2f[z.quality]}return this.init().then(function(){return Y.__mathlib.resizeAndUnsharp(z)})},Z.prototype.toBlob=function(D,Y,z){return Y=Y||"image/png",new Promise(function(L){if(D.toBlob){D.toBlob(function(q){return L(q)},Y,z);return}if(D.convertToBlob){L(D.convertToBlob({type:Y,quality:z}));return}for(var T=atob(D.toDataURL(Y,z).split(",")[1]),$=T.length,N=new Uint8Array($),H=0;H<$;H++)N[H]=T.charCodeAt(H);L(new Blob([N],{type:Y}))})},Z.prototype.debug=function(){},i.exports=Z},{"./lib/mathlib":1,"./lib/mm_resize/resize_filter_info":7,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":22,webworkify:23}]},{},[])("/index.js")})})(up)),up.exports}var dj=uj();const fj=ud(dj),Xb=typeof window<"u"?fj():null,hj=e=>{const o=document.createElement("canvas");o.width=e.width,o.height=e.height;const a=o.getContext("2d");return a?(a.fillStyle=cd,a.fillRect(0,0,o.width,o.height),a.drawImage(e,0,0),o):e},pj=async(e,o)=>{if(!Xb||o<=1.0001)return e;const a=Math.max(1,Math.round(e.width/o)),i=Math.max(1,Math.round(e.height/o)),l=document.createElement("canvas");return l.width=a,l.height=i,await Xb.resize(e,l,{unsharpAmount:80,unsharpRadius:.6,unsharpThreshold:1}),l};async function mj(e,o,a,i){if(o.style.display==="none")return;const l=nt(o.getAttribute("data-connector-left"),0),c=nt(o.getAttribute("data-connector-top"),0),u=o.querySelector('[data-connector-visual="true"]'),d=o.querySelector('[data-connector-shadow="true"]');d&&d.width>0&&d.height>0&&e.drawImage(d,l*a,c*i),u&&u.width>0&&u.height>0&&e.drawImage(u,l*a,c*i)}const Gw=e=>new Promise((o,a)=>{const i=new Image;i.onload=()=>o(i),i.onerror=a,i.src=e}),gj=(e,o)=>{const a=[e,...Array.from(e.querySelectorAll("*"))],i=[o,...Array.from(o.querySelectorAll("*"))],l=[];for(let c=0;c<i.length;c++){const u=i[c],d=a[c];if(!d||!u)continue;const p=window.getComputedStyle(d);l.push({node:u,fill:p.fill,stroke:p.stroke,strokeWidth:p.strokeWidth,strokeLinecap:p.strokeLinecap,strokeLinejoin:p.strokeLinejoin})}for(const{node:c,fill:u,stroke:d,strokeWidth:p,strokeLinecap:h,strokeLinejoin:g}of l)u&&u!=="none"&&c.setAttribute("fill",u),d&&d!=="none"&&c.setAttribute("stroke",d),p&&c.setAttribute("stroke-width",p),h&&c.setAttribute("stroke-linecap",h),g&&c.setAttribute("stroke-linejoin",g)},yj=(e,o,a,i,l,c,u,d)=>{u&&(e.save(),e.shadowColor=u.color,e.shadowBlur=(u.blur+Math.max(u.spread,0))*d,e.shadowOffsetX=u.offsetX*d,e.shadowOffsetY=u.offsetY*d,e.drawImage(o,a,i,l,c),e.restore()),e.drawImage(o,a,i,l,c)},Ww=(e,o,a,i)=>{const l=a.split(/\s+/),c=[];let u="";const d=h=>e.measureText(h).width/o,p=()=>{u.trim().length>0&&(c.push(u.trim()),u="")};for(const h of l){if(!h)continue;const g=u?`${u} ${h}`:h;if(d(g)<=i){u=g;continue}if(d(h)>i){let m="";for(const v of h){const A=m+v;if(d(A)>i&&m){const w=u?`${u} ${m}`.trim():m;w&&c.push(w),m=v,u=""}else m=A}if(m)if(u){const v=`${u} ${m}`.trim();d(v)<=i?u=v:(c.push(u.trim()),u=m)}else u=m;continue}p(),u=h}return p(),c.length?c:[a]};async function xj(e,o,a,i,l,c,u,d,p){const h=nt(p?.dataset.elementCanvasShadowMarginTop,0),g=nt(p?.dataset.elementCanvasShadowMarginRight,0),m=nt(p?.dataset.elementCanvasShadowMarginBottom,0),v=nt(p?.dataset.elementCanvasShadowMarginLeft,0);if(p&&p.width>0&&p.height>0){const k=(l+v+g)*a,I=(c+h+m)*i;e.drawImage(p,(u-v)*a,(d-h)*i,k,I)}const A=o.querySelector("svg");if(!A)return!1;const w=o.getAttribute("data-element-base-shadow"),S=id(w),C=A.cloneNode(!0);C.setAttribute("width",`${l}`),C.setAttribute("height",`${c}`),gj(A,C);const M=new XMLSerializer().serializeToString(C),E=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(M)}`;try{const k=await Gw(E),I=l*a,B=c*i,O=(a+i)/2,j=p&&p.width>0?null:S;yj(e,k,u*a,d*i,I,B,j,O)}catch(k){console.warn("Failed to rasterize shape element",k)}return!0}function bj(e,o,a,i,l,c,u,d){const p=o.querySelector('[data-element-text-layer="true"]');if(!p)return;const h=p.textContent?.trim()??"";if(!h)return;const g=window.getComputedStyle(p),m=parseFloat(g.fontSize||"14")||14,v=g.fontFamily||Po,A=g.fontWeight||"normal",w=g.color||"#2c3e50",S=g.textAlign||"center",C=parseFloat(g.lineHeight||"0"),M=Number.isFinite(C)&&C>0?C:m*1.2,R=4;let E=R,k=R,I=R,B=R;const O=g.alignItems||"center";e.save(),e.fillStyle=w,e.font=`${A} ${m*i}px ${v}`,e.textBaseline="middle";let j="center";(S==="left"||S==="right")&&(j=S),e.textAlign=j;const U=l-B-k,G=Math.max(1,U),X=h.split(`
`),W=[];for(const z of X)z.trim()?W.push(...Ww(e,a,z,G)):W.push("");const J=W.length*M,oe=c-E-I;let Z;O==="flex-start"?Z=d+E+M/2:O==="flex-end"?Z=d+c-I-J+M/2:Z=d+E+Math.max(0,(oe-J)/2)+M/2;let D;j==="center"?D=(u+l/2)*a:j==="right"?D=(u+l-k)*a:D=(u+B)*a;let Y=Z;for(const z of W)e.fillText(z,D,Y*i),Y+=M;e.restore()}function vj(e,o,a,i,l,c,u,d){const p=o.querySelector("span"),h=p?.textContent?.trim()??o.textContent?.trim()??"";if(!h)return;const g=window.getComputedStyle(p??o),m=parseFloat(g.fontSize||"12")||12,v=g.fontFamily||Po,A=g.fontWeight&&g.fontWeight!=="normal"?g.fontWeight:"600",w=parseFloat(g.lineHeight||"0"),S=Number.isFinite(w)&&w>0?w:m*1.3,C=g.color||"#6c757d",M=Math.max(1,l-8);e.save(),e.fillStyle=C,e.textAlign="center",e.textBaseline="middle",e.font=`${A} ${m*i}px ${v}`;const R=Ww(e,a,h,M),E=R.length*S;let k=d+(c-E)/2+S/2;const I=u+l/2;for(const B of R)e.fillText(B,I*a,k*i),k+=S;e.restore()}async function wj(e,o,a,i){if(o.style.display==="none")return!0;const l=nt(o.getAttribute("data-element-left"),0),c=nt(o.getAttribute("data-element-top"),0),u=nt(o.getAttribute("data-element-width"),0),d=nt(o.getAttribute("data-element-height"),0),p=o.querySelector('[data-element-canvas="true"]'),h=o.querySelector('[data-element-shadow-canvas="true"]');if(o.getAttribute("data-shape"))return await xj(e,o,a,i,u,d,l,c,h)?(bj(e,o,a,i,u,d,l,c),!0):!1;if(h&&h.width>0&&h.height>0){const v=nt(h.dataset.elementCanvasShadowMarginTop,0),A=nt(h.dataset.elementCanvasShadowMarginRight,0),w=nt(h.dataset.elementCanvasShadowMarginBottom,0),S=nt(h.dataset.elementCanvasShadowMarginLeft,0),C=(u+S+A)*a,M=(d+v+w)*i;e.drawImage(h,(l-S)*a,(c-v)*i,C,M)}p&&p.width>0&&p.height>0&&e.drawImage(p,l*a,c*i);const m=o.querySelector('[data-element-image-layer="true"]');if(m){const v=o.getAttribute("data-element-image-src")||"";if(v.trim().length>0){const A=m.querySelector("img"),w=A&&(A.complete||A.naturalWidth>0)?A:await Gw(v),S=w.naturalWidth||w.width||u,C=w.naturalHeight||w.height||d;if(S>0&&C>0){const M=u/Math.max(d,1),R=S/C;let E=u,k=d;R>M?(E=u,k=Math.max(1,u/R)):(k=d,E=Math.max(1,d*R));const I=l+(u-E)/2,B=c+(d-k)/2;e.drawImage(w,I*a,B*i,E*a,k*i)}}else vj(e,m,a,i,u,d,l,c)}return!0}async function Aj(e,o,a){const i=e.getContext("2d");if(!i)return;const l=a?.rootWidth??e.width,c=a?.rootHeight??e.height,u=l>0?e.width/l:1,d=c>0?e.height/c:1,p=Array.from(o.querySelectorAll('[data-element-container="true"]'));p.sort((m,v)=>{const A=nt(m.getAttribute("data-element-z-index"),0),w=nt(v.getAttribute("data-element-z-index"),0);if(A===w){const S=nt(m.getAttribute("data-element-order"),0),C=nt(v.getAttribute("data-element-order"),0);return S-C}return A-w});const h=Array.from(o.querySelectorAll('[data-connector-container="true"]'));h.sort((m,v)=>{const A=nt(m.getAttribute("data-connector-z-index"),0),w=nt(v.getAttribute("data-connector-z-index"),0);if(A===w){const S=nt(m.getAttribute("data-connector-order"),0),C=nt(v.getAttribute("data-connector-order"),0);return S-C}return A-w});const g=[...p.map(m=>({kind:"element",node:m})),...h.map(m=>({kind:"connector",node:m}))];g.sort((m,v)=>{const A=nt(m.node.getAttribute(m.kind==="element"?"data-element-z-index":"data-connector-z-index"),0),w=nt(v.node.getAttribute(v.kind==="element"?"data-element-z-index":"data-connector-z-index"),0);if(A===w){const S=nt(m.node.getAttribute(m.kind==="element"?"data-element-order":"data-connector-order"),0),C=nt(v.node.getAttribute(v.kind==="element"?"data-element-order":"data-connector-order"),0);return S-C}return A-w});for(const m of g){if(m.kind==="connector"){await mj(i,m.node,u,d);continue}if(!await wj(i,m.node,u,d))return}}async function Em(e,o={}){const{root:a,metrics:i}=e;let l,c;if(i)l=i.rootWidth,c=i.rootHeight;else{const v=a.getBoundingClientRect();l=v.width??1,c=v.height??1}const u=Math.min(window.devicePixelRatio||1,3),d=document.createElement("canvas");d.width=Math.max(1,Math.round(l*u)),d.height=Math.max(1,Math.round(c*u));const p=d.getContext("2d");p&&(p.fillStyle=o.backgroundColor??cd,p.fillRect(0,0,d.width,d.height)),await Aj(d,a,i);const h=ij(d,i),g=sj(d,i),m=await pj(h,g);return hj(m)}const Bl=(e,o,a)=>{if(typeof window>"u")return;const i=window[Jl]?.onSaveFile;if(typeof i=="function")try{i({content:e,filename:o,mimeType:a})}catch(l){console.warn("onSaveFile hook threw an error",l)}},Cj=(e,o)=>{for(const i of e)for(const l of Object.values(i.accept))if(l.length>0)return l[0];const a=o.split(".");return a.length>1?`.${a.pop()}`:""},Sj=(e,o)=>!o||e.toLowerCase().endsWith(o.toLowerCase())?e:`${e}${o}`,qw=()=>"showSaveFilePicker"in window,Ej=async e=>{if(!qw())throw new Error("File System Access API not supported");try{return await window.showSaveFilePicker({suggestedName:e.suggestedName,types:e.types})}catch(o){if(o.name==="AbortError")return null;throw o}},Mj=async(e,o)=>{const a=await e.createWritable();await a.write(o),await a.close()},Rj=async(e,o)=>{const a=await e.createWritable();await a.write(o),await a.close()},dp=(e,o,a)=>{let i;typeof e=="string"?i=new Blob([e],{type:a}):i=e;const l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=o,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},Fb=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Qb=e=>{const o=new FileReader;o.onloadend=()=>{const a=typeof o.result=="string"?o.result:void 0;if(!a)return;window.open(a,"_blank")||(window.location.href=a)},o.readAsDataURL(e)},kj=e=>new Promise(o=>{const a=document.createElement("input");a.type="file",a.accept=e.join(","),a.style.display="none",a.value="",a.onchange=i=>{const l=i.target.files?.[0];a.parentElement&&a.parentElement.removeChild(a),o(l||null)},a.oncancel=()=>{a.parentElement&&a.parentElement.removeChild(a),o(null)},document.body.appendChild(a),a.click()}),Tj=async()=>{if(typeof window<"u"&&window.location.search.includes("playwright"))return;const e=window.location.hash;window.location.hash="#file-cache-clear",await new Promise(o=>setTimeout(o,0)),e?window.location.hash=e:window.history.replaceState({},"",window.location.pathname+window.location.search),await new Promise(o=>setTimeout(o,0))},Gb=e=>new Promise((o,a)=>{const i=new FileReader;i.onload=()=>{if(i.result instanceof ArrayBuffer){const l=new TextDecoder("utf-8");o(l.decode(i.result))}else a(new Error("FileReader did not return an ArrayBuffer"))},i.onerror=()=>a(i.error),i.readAsArrayBuffer(e)}),Ij=async e=>{const o=typeof window.showOpenFilePicker=="function",a=typeof window.__rewiredImportPayload=="string",i=window.location.search.includes("playwright")||a;if(o&&i)try{const[d]=await window.showOpenFilePicker({types:e,multiple:!1});if(d){const p=await d.getFile();return{content:await Gb(p),filename:p.name}}return null}catch(d){if(d.name==="AbortError")return null;throw d}await Tj();const c=e.flatMap(d=>Object.values(d.accept).flat()),u=await kj(c);return u?{content:await Gb(u),filename:u.name}:null},Mm=async(e,o,a,i,l)=>{if(qw())try{const c=await Ej({suggestedName:o,types:a});if(c){typeof e=="string"?await Mj(c,e):await Rj(c,e);const u=c.name??o;return Bl(e,u,i),l?.({filename:u}),!0}return!1}catch(c){return console.warn("File System Access API failed, falling back to download:",c),Bl(e,o,i),l?.({filename:o}),dp(e,o,i),!0}else{const c=Cj(a,o);Bl(e,o,i);const u=window.prompt("Save file as",o);if(u===null)return!1;const d=Sj(u.trim()||o,c);return typeof e=="string"?(Bl(e,d,i),Fb()?Qb(new Blob([e],{type:i})):dp(e,d,i)):(Bl(e,d,i),Fb()?Qb(e):dp(e,d,i)),l?.({filename:d}),!0}};function _j(e){const[o,a]=e.split(","),i=o.match(/data:(.*?);base64/),l=i?i[1]:"image/png",c=atob(a),u=new Uint8Array(c.length);for(let d=0;d<c.length;d+=1)u[d]=c.charCodeAt(d);return new Blob([u],{type:l})}async function Vw(e,o){const a=await new Promise(l=>e.toBlob(c=>l(c),"image/png"));if(!a)throw new Error("Failed to convert canvas to PNG");const i=o??`${bT}.png`;return await Mm(a,i,JD,"image/png")}async function Kw(e){const o=Sm(),{cleanup:a}=o;try{const i=await Em(o);return await Vw(i,e??"wireframe.png")}catch(i){throw console.error("Export canvas failed:",i),i}finally{a()}}async function Zw(){const e=Sm(),{cleanup:o}=e;try{const i=(await Em(e)).toDataURL("image/png",1);return _j(i)}catch(a){throw console.error("Export canvas failed:",a),a}finally{o()}}async function Jw(e,o){const{elementIds:a,connectorIds:i}=e;if(!a.length&&!i.length)throw new Error("No elements were selected for export");const l=Sm({elementIds:a,connectorIds:i}),{cleanup:c}=l;try{const u=await Em(l);return await Vw(u,o??"wireframe-selection.png")}catch(u){throw console.error("Export selection failed:",u),u}finally{c()}}function Oj(){const e=Jl,o=window[e]=window[e]??{};o.exportSelectedElementsToPNG||(o.exportSelectedElementsToPNG=(a,i)=>Jw(a,i)),o.exportCanvasToPNG||(o.exportCanvasToPNG=a=>Kw(a)),o.exportCanvasToPNGBlob||(o.exportCanvasToPNGBlob=()=>Zw())}typeof window<"u"&&Oj();const eA=new Set(["posX","posY","width","height","id","type","imageSrc"]),Zo=e=>typeof e=="object"&&e!==null,tA=e=>{const o={};for(const[a,i]of e)i!==void 0&&(o[a]=i);return Object.keys(o).length>0?o:void 0},Dj=e=>{if(!e)return;const o=Object.entries(e).filter(([a])=>!eA.has(a)&&a!=="imageSrc");if(o.length!==0)return tA(o)},jj=e=>{const o=e.style;if(!o)return;const a={};return typeof o.backgroundColor=="string"&&o.backgroundColor.length>0&&(a.backgroundColour=o.backgroundColor),typeof o.borderColor=="string"&&o.borderColor.length>0&&(a.lineColour=o.borderColor),typeof o.textColor=="string"&&o.textColor.length>0&&(a.textColour=o.textColor),typeof o.fontSize=="number"&&Number.isFinite(o.fontSize)&&(a.fontSize=o.fontSize),typeof o.fontWeight=="string"&&o.fontWeight.length>0&&(a.fontWeight=o.fontWeight),typeof o.textAlign=="string"&&o.textAlign.length>0&&(a.textAlign=o.textAlign),typeof o.fontFamily=="string"&&o.fontFamily.length>0&&(a.fontFamily=o.fontFamily),Object.keys(a).length>0?a:void 0},Pj=e=>{const{id:o,type:a,x:i,y:l,width:c,height:u,zIndex:d,text:p,imageSrc:h,groupId:g,properties:m}=e,v={id:o,type:a,x:i,y:l,width:c,height:u};typeof d=="number"&&(v.zIndex=d),typeof p=="string"&&p.length>0&&(v.text=p),g&&(v.groupId=g);const A=typeof h=="string"&&h.trim().length>0?h:typeof m?.imageSrc=="string"&&m.imageSrc.trim().length>0?m.imageSrc:void 0;A&&(v.imageSrc=A);const w=jj(e),S=(()=>{if(!(!w&&!m))return w?{...w,...m??{}}:m?{...m}:void 0})(),C=S?ki(e,S):void 0,M=Dj(C);return M&&Object.keys(M).length>0&&(v.properties=M),v},Bj=e=>{const o=(e.type==="line","line"),a={id:e.id,type:o,startPoint:{...e.startPoint},endPoint:{...e.endPoint}};return typeof e.zIndex=="number"&&(a.zIndex=e.zIndex),e.groupId&&(a.groupId=e.groupId),e.properties&&(a.properties={...e.properties},"connectorType"in a.properties&&delete a.properties.connectorType),e.startAttachment&&(a.startAttachment={elementId:e.startAttachment.elementId}),e.endAttachment&&(a.endAttachment={elementId:e.endAttachment.elementId}),a},zj=e=>({elements:e.elements.map(Pj),connectors:e.connectors.map(Bj),zoom:e.zoom,panX:e.panX,panY:e.panY,selectedItems:e.selectedItemIds.length?[...e.selectedItemIds]:void 0}),Nj=e=>{const o=zj(e.canvasState);return{id:e.id,name:e.name,order:e.order,...o}},nA=(e,o)=>({version:pm,exportDate:new Date().toISOString(),pages:e.map(Nj),activePageId:o}),Lj=(e,o)=>nA([e],o??e.id),oA=(e,o)=>{const a=JSON.stringify(e,null,2),i=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=o||`wireframe-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},rA=()=>{const e=new Date,o=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${o}-${a}-${i}`},aA=[{description:"Wireframe JSON files",accept:{"application/json":[".json"]}}],Hj=async(e,o,a)=>{const i=Lj(e,o),l=JSON.stringify(i,null,2),u=`wireframe-${e.name.replace(/\s+/g,"-").toLowerCase()||"page"}-${rA()}.json`;try{return await Mm(l,u,aA,"application/json")}catch(d){return console.error("Failed to save JSON file:",d),oA(i,u),!0}},Yj=async(e,o,a)=>{const i=nA(e,o),l=JSON.stringify(i,null,2),u=(()=>{if(typeof window>"u")return{exportInfo:null,importInfo:null};const g=m=>{if(!m)return null;try{const v=JSON.parse(m);if(v&&typeof v.name=="string")return{name:v.name,at:Number(v.at)||0}}catch(v){console.warn("Failed to parse project filename metadata",v)}return null};return{exportInfo:g(window.localStorage.getItem(Fx)),importInfo:g(window.localStorage.getItem(sw))}})(),p=[u.exportInfo,u.importInfo].filter(g=>!!g).sort((g,m)=>m.at-g.at)[0]?.name||`wireframe-project-${rA()}.json`,h=g=>{if(!(typeof window>"u"))try{const m=JSON.stringify({name:g,at:Date.now()});window.localStorage.setItem(Fx,m)}catch(m){console.warn("Failed to persist last project export metadata:",m)}};try{return await Mm(l,p,aA,"application/json",g=>{h(g.filename)})}catch(g){return console.error("Failed to save JSON file:",g),h(p),oA(i,p),!0}},qo=(e,o=0)=>{const a=typeof e=="number"?e:Number(e);return Number.isFinite(a)?a:o},$j=e=>{if(!Zo(e))return;const o=Object.entries(e).filter(([a])=>!eA.has(a));return tA(o)},Wb=e=>({x:qo(e?.x,0),y:qo(e?.y,0)}),qb=e=>!e||typeof e!="object"||!e.elementId?null:{elementId:String(e.elementId),anchor:e.anchor},Uj=e=>{if(!Zo(e))throw new Error("Invalid element payload");const o=typeof e.id=="string"&&e.id.trim().length>0?e.id:xo(),a=typeof e.type=="string"?e.type:void 0,i=a==="heading",c=i?"text":a??"button",u=qo(e.x,0),d=qo(e.y,0),p=Math.max(1,qo(e.width,120)),h=Math.max(1,qo(e.height,40)),g={id:o,type:c,x:u,y:d,width:p,height:h};e.zIndex!==void 0&&(g.zIndex=qo(e.zIndex,0)),typeof e.text=="string"&&(g.text=e.text),typeof e.groupId=="string"&&e.groupId.length>0&&(g.groupId=e.groupId);const m=e.properties??e.props??e.elementProperties;let v;typeof e.imageSrc=="string"&&e.imageSrc.trim().length>0&&(v=e.imageSrc),!v&&Zo(m)&&typeof m.imageSrc=="string"&&m.imageSrc.trim().length>0&&(v=m.imageSrc);let A=$j(m);return i&&(A={...{fontSize:24,fontWeight:"bold",textAlign:"left"},...A??{}}),A&&(typeof A.imageSrc=="string"&&A.imageSrc.trim().length>0&&(v=v??A.imageSrc,delete A.imageSrc),Object.keys(A).length===0&&(A=void 0)),A&&(g.properties=A),v&&(g.imageSrc=v),g},Xj=e=>{if(!Zo(e))throw new Error("Invalid connector payload");const o=typeof e.id=="string"&&e.id.trim().length>0?e.id:xo(),a=(e.type==="line","line"),i={id:o,type:a,startPoint:Wb(e.startPoint??e.start??{}),endPoint:Wb(e.endPoint??e.end??{})};if(e.zIndex!==void 0&&(i.zIndex=qo(e.zIndex,0)),e.groupId&&(i.groupId=String(e.groupId)),Zo(e.properties)){const u={...e.properties};delete u.connectorType,i.properties=u}const l=qb(e.startAttachment);l&&(i.startAttachment=l);const c=qb(e.endAttachment);return c&&(i.endAttachment=c),i},iA=e=>{const o=Array.isArray(e?.elements)?e.elements:[],a=Array.isArray(e?.connectors)?e.connectors:[],i=Array.isArray(e?.selectedItems)?e.selectedItems:Array.isArray(e?.selectedItemIds)?e.selectedItemIds:[...Array.isArray(e?.selectedElements)?e.selectedElements:[],...Array.isArray(e?.selectedConnectors)?e.selectedConnectors:[]];return{elements:o.map(Uj),connectors:a.map(Xj),zoom:qo(e?.zoom,1)||1,panX:qo(e?.panX,0),panY:qo(e?.panY,0),selectedItems:i.length?i.map(l=>String(l)):void 0}},Fj=e=>{if(!Zo(e))return;const o=e,a=Zo(o.canvasState)?o.canvasState:void 0,i=Zo(o.canvas)?o.canvas:void 0,l=[o.name,o.pageName,o.title,a?.name,a?.pageName,i?.name,i?.pageName];for(const c of l)if(typeof c=="string"){const u=c.trim();if(u.length>0)return u}},Qj=(e,o=0)=>{if(!Zo(e))throw new Error("Invalid page payload");const a=typeof e.id=="string"&&e.id.trim().length>0?e.id:xo(),i=Fj(e)??`Imported Page ${o+1}`,l=qo(e.order,o),c=e.canvasState??e.canvas??e,u=iA(c);return{id:a,name:i,order:l,...u}},Gj=e=>{const o=typeof e?.version=="string"?e.version:"1.0.0",a=typeof e?.exportDate=="string"?e.exportDate:new Date().toISOString();if(Array.isArray(e?.pages)&&e.pages.length>0){const d=e.pages.map((g,m)=>Qj(g,m)),p=typeof e.activePageId=="string"?e.activePageId:void 0,h=d.slice().sort((g,m)=>g.order-m.order).map((g,m)=>({id:g.id,name:g.name,order:m,elements:[...g.elements],connectors:[...g.connectors],zoom:g.zoom,panX:g.panX,panY:g.panY,selectedItems:g.selectedItems?[...g.selectedItems]:void 0}));return{version:o,exportDate:a,pages:h,activePageId:p}}const i=iA(e?.canvasState??e),c=(typeof e?.ownerPageId=="string"?e.ownerPageId:typeof e?.canvasState?.ownerPageId=="string"?e.canvasState.ownerPageId:void 0)??xo(),u=typeof e?.pageName=="string"&&e.pageName.trim().length>0?e.pageName:"Imported Page";return{version:o,exportDate:a,pages:[{id:c,name:u,order:0,...i}],activePageId:c}},Wj=e=>{if(!Zo(e))return!1;if(Array.isArray(e.pages)&&e.pages.length>0)return e.pages.every(a=>{const i=a?.canvasState??a?.canvas??a;return!Zo(i)||!Array.isArray(i.elements)?!1:i.elements.every(l=>l&&typeof l.id=="string"&&typeof l.type=="string")});const o=e.canvasState??e.canvas??e;return!Zo(o)||!Array.isArray(o.elements)?!1:o.elements.every(a=>a&&typeof a.id=="string"&&typeof a.type=="string")},sA=e=>{const o=new Set,a=[];for(const i of e)o.has(i)||(o.add(i),a.push(i));return a},qj=(e,o,a)=>{if(!e?.length)return[];const i=e.map(l=>o&&o[l]?o[l]:a&&a[l]?a[l]:l);return sA(i)},Lp=(e,o,a)=>{if(!a?.length)return{selectedElements:[],selectedConnectors:[],selectedItemIds:[]};const i=new Set(e.map(p=>p.id)),l=new Set(o.map(p=>p.id)),c=sA(a.filter(p=>i.has(p)||l.has(p))),u=c.filter(p=>i.has(p)),d=c.filter(p=>l.has(p));return{selectedElements:u,selectedConnectors:d,selectedItemIds:c}},lA=e=>{const o={id:e.id,type:e.type,x:e.x,y:e.y,width:e.width,height:e.height,text:e.text,zIndex:e.zIndex,groupId:e.groupId,imageSrc:e.imageSrc,properties:e.properties?{...e.properties}:void 0};return Os(o)},cA=e=>{const o=(e.type==="line","line"),a=e.properties?{...e.properties}:void 0;return a&&"connectorType"in a&&delete a.connectorType,{id:e.id,type:o,startPoint:{...e.startPoint},endPoint:{...e.endPoint},zIndex:e.zIndex,properties:a,groupId:e.groupId,startAttachment:e.startAttachment?.anchor?{elementId:e.startAttachment.elementId,anchor:e.startAttachment.anchor}:null,endAttachment:e.endAttachment?.anchor?{elementId:e.endAttachment.elementId,anchor:e.endAttachment.anchor}:null}},uA=(e,o,a)=>{if(!a.size)return e;if(!o.length)return e.map(u=>({...u,startAttachment:null,endAttachment:null}));const i=new Map(o.map(u=>[u.id,u]));let l=!1;const c=e.map(u=>{const d=a.get(u.id);if(!d)return u;let p=u.startAttachment??null,h=u.endAttachment??null;const g=(m,v)=>{if(!m)return null;const A=i.get(m);if(!A)return null;const w=Ed([A],v,Sd);return!w||w.attachment.elementId!==m?null:w.attachment};if(!p&&d.startElementId){const m=g(d.startElementId,u.startPoint);m&&(p=m)}if(!h&&d.endElementId){const m=g(d.endElementId,u.endPoint);m&&(h=m)}return p===u.startAttachment&&h===u.endAttachment?u:(l=!0,{...u,startAttachment:p,endAttachment:h})});return l?ln(c,o):e},Vj=e=>{const o={};return{elements:e.map(i=>{const l=xo();return o[i.id]=l,{...i,id:l}}),idMap:o}},Kj=e=>{const o={};return{connectors:e.map(i=>{const l=xo();return o[i.id]=l,{...i,id:l}}),idMap:o}},Zj=(e,o)=>{const a=i=>{if(!i)return i??null;const l=o[i.elementId];return l?{...i,elementId:l}:i};return{...e,startAttachment:a(e.startAttachment)??null,endAttachment:a(e.endAttachment)??null}},Jj=(e,o)=>{const a=e.elements.map(lA),i=e.connectors.map(d=>({connector:cA(d),hints:{startElementId:d.startAttachment?.elementId??null,endElementId:d.endAttachment?.elementId??null}})),l=new Map(i.map(d=>[d.connector.id,d.hints])),c=uA(i.map(d=>d.connector),a,l),u=Lp(a,c,e.selectedItems);return{elements:a,connectors:c,selectedElements:u.selectedElements,selectedConnectors:u.selectedConnectors,selectedItemIds:u.selectedItemIds,zoom:e.zoom||1,panX:e.panX||0,panY:e.panY||0,ownerPageId:o}},eP=(e,o,a)=>{const i=o.elements.map(lA),l=o.connectors.map(w=>({connector:cA(w),hints:{startElementId:w.startAttachment?.elementId??null,endElementId:w.endAttachment?.elementId??null}})),c=new Map(l.map(w=>[w.connector.id,w.hints])),u=uA(l.map(w=>w.connector),i,c);if(a){const w=Lp(i,u,o.selectedItems);return{elements:i,connectors:u,selectedElements:w.selectedElements,selectedConnectors:w.selectedConnectors,selectedItemIds:w.selectedItemIds,zoom:o.zoom||1,panX:o.panX||0,panY:o.panY||0,ownerPageId:e.ownerPageId}}const{elements:d,idMap:p}=Vj(i),{connectors:h,idMap:g}=Kj(u),m=h.map(w=>Zj(w,p)),v=qj(o.selectedItems,p,g),A=Lp([...e.elements,...d],[...e.connectors,...m],v);return{...e,elements:[...e.elements,...d],connectors:[...e.connectors,...m],selectedElements:A.selectedElements,selectedConnectors:A.selectedConnectors,selectedItemIds:A.selectedItemIds}},tP=e=>e.pages.map(o=>({id:o.id,name:o.name,order:o.order,canvasState:Jj(o,o.id)})),Vb=async()=>{const e=[{description:"Wireframe JSON files",accept:{"application/json":[".json"]}}];try{const o=await Ij(e);if(!o)return null;const{content:a,filename:i}=o;let l;try{l=JSON.parse(a)}catch{throw new Error("Invalid JSON file. Please select a valid wireframe export file.")}if(!Wj(l))throw new Error("Invalid wireframe file format. Please select a valid wireframe export file.");const c=Gj(l);return c.sourceFilename=i,c}catch(o){throw console.error("Import failed:",o),o}},nP=(e,o,a)=>eP(e,o,a.clearCanvas),oP=e=>tP(e),Va=e=>{try{return{elements:e.elements?e.elements.map(rP):[],connectors:e.connectors?e.connectors.map(aP):[],selectedElements:e.selectedElements?[...e.selectedElements]:[],selectedConnectors:e.selectedConnectors?[...e.selectedConnectors]:[],selectedItemIds:e.selectedItemIds?[...e.selectedItemIds]:[],zoom:e.zoom,panX:e.panX,panY:e.panY,ownerPageId:e.ownerPageId}}catch(o){return console.error("Failed to clone canvas state, returning original reference. Some operations may mutate shared state.",o),e}},rP=e=>({...e,properties:e.properties?{...e.properties}:void 0,style:e.style?{...e.style}:void 0,text:e.text,imageSrc:e.imageSrc,x:e.x,y:e.y,width:e.width,height:e.height,zIndex:e.zIndex,id:e.id,type:e.type}),aP=e=>{const o=En.normaliseConnector(e);return{...o,startPoint:{...o.startPoint},endPoint:{...o.endPoint},startAttachment:o.startAttachment?{...o.startAttachment}:null,endAttachment:o.endAttachment?{...o.endAttachment}:null,properties:o.properties?{...o.properties}:void 0}};function iP({canvasState:e,setCanvasState:o,replaceCanvasState:a,queueHistoryEntry:i,onSaveTimestampUpdate:l,activePageId:c,activePage:u,pages:d,commitCanvasSnapshot:p,onImportApplied:h,replaceProject:g,startTransaction:m,endTransaction:v}){const[A,w]=y.useState(null),[S,C]=y.useState(()=>({project:null})),[M,R]=y.useState(()=>({project:null})),E=y.useCallback(T=>{if(!(!T||typeof window>"u"))try{window.localStorage.setItem(sw,JSON.stringify({name:T,at:Date.now()}))}catch($){console.warn("Failed to persist last project import metadata:",$)}},[]),k=y.useCallback(async()=>{try{await Kw()}catch(T){console.error("Failed to export PNG:",T),alert("Failed to export PNG: "+T.message)}},[]),I=y.useCallback(async()=>{try{return await Zw()}catch(T){throw console.error("Failed to export PNG blob:",T),T}},[]),B=y.useCallback(async()=>{const{selectedElements:T,selectedConnectors:$}=e;if(T.length===0&&$.length===0){alert("Please select items to export");return}try{await Jw({elementIds:T,connectorIds:$})}catch(N){console.error("Failed to export selection as PNG:",N),alert("Failed to export selection: "+N.message)}},[e]),O=y.useCallback(async()=>{try{await Hj(u,c)}catch(T){console.error("Failed to export page JSON:",T),alert("Failed to export JSON: "+T.message)}},[u,c]),j=y.useCallback(T=>{const $=oP(T);if($.length===0){console.warn("Imported project contains no pages.");return}const N=ue=>({...Va(ue),selectedElements:[],selectedConnectors:[],selectedItemIds:[]}),H=$.map(ue=>({...ue,canvasState:N(ue.canvasState)}));m?.("Import project (replace)");const q=H[0].id,K=H[0],ie={...Va(K.canvasState),selectedElements:[],selectedConnectors:[],selectedItemIds:[],ownerPageId:K.id};try{g(H,q),a(ie,{resetHistory:!0,description:"Imported project (replace)"}),h(ie,q),l(),E(T.sourceFilename)}finally{v?.()}},[v,h,l,E,a,g,m]),U=y.useCallback(async()=>{const T=d.map($=>$.id===c?{...$,canvasState:{...Va(e),ownerPageId:c}}:{...$,canvasState:Va($.canvasState)});try{await Yj(T,c)}catch($){console.error("Failed to export project JSON:",$),alert("Failed to export project JSON: "+$.message)}},[e,d,c]),G=y.useCallback((T,$)=>{const H={...nP(e,T.canvasState,{clearCanvas:$}),ownerPageId:c};$?a(H,{resetHistory:!0,description:"Imported canvas (replace)"}):(i("Import items (append)"),o(Va(H))),p(c,H),h(H,c),l()},[e,c,a,i,o,p,h,l]),X=y.useCallback((T,$)=>{const N=T.pages.find(K=>K.id===$)??T.pages[0];if(!N){alert("No pages found in the imported file.");return}const H={pageId:N.id,pageName:N.name,canvasState:{elements:N.elements,connectors:N.connectors,zoom:N.zoom,panX:N.panX,panY:N.panY,selectedItems:N.selectedItems},sourceFilename:T.sourceFilename};if(!((e.elements?.length??0)>0||(e.connectors?.length??0)>0)){C({project:null}),G(H,!0);return}w(H),C({project:null})},[e,G]),W=y.useCallback(async()=>{try{const T=await Vb();if(!T)return;if(T.pages.length===0){alert("The imported file does not contain any pages.");return}if(T.pages.length===1){X(T,T.pages[0].id);return}C({project:T})}catch(T){console.error("Import failed:",T),alert("Import failed: "+T.message)}},[X]),J=y.useCallback(async()=>{try{const T=await Vb();if(!T)return;if(T.pages.length===0){alert("The imported file does not contain any pages.");return}if(!d.some(N=>(N.canvasState.elements?.length??0)>0||(N.canvasState.connectors?.length??0)>0)){R({project:null}),j(T);return}R({project:T})}catch(T){console.error("Import failed:",T),alert("Import failed: "+T.message)}},[d,j]),oe=y.useCallback(T=>{if(!A)return;if(!((e.elements?.length??0)>0||(e.connectors?.length??0)>0)){G(A,!0),w(null);return}G(A,T),w(null)},[A,e,G]),Z=y.useCallback(()=>{w(null)},[]),D=y.useCallback(T=>{const $=S.project;$&&X($,T)},[S.project,X]),Y=y.useCallback(()=>{C({project:null})},[]),z=y.useCallback(()=>{const T=M.project;T&&(j(T),R({project:null}))},[M.project,j]),L=y.useCallback(()=>{R({project:null})},[]);return{importModal:{isOpen:!!A,pendingImportData:A,onConfirm:oe,onCancel:Z},pagePickerModal:{isOpen:!!(S.project&&S.project.pages.length>1),pages:S.project?.pages.map(T=>({id:T.id,name:T.name,order:T.order}))??[],onSelect:D,onCancel:Y},projectImportModal:{isOpen:!!M.project,pageCount:M.project?.pages.length??0,onConfirm:z,onCancel:L},actions:{exportPNG:k,exportPNGToBlob:I,exportSelectedPNG:B,exportPageJSON:O,exportProjectJSON:U,importPageJSON:W,importProjectJSON:J},testHooks:{openImportModal:T=>w(T),closeImportModal:()=>w(null)}}}const Kb=20,Bu=(e,o)=>{const{constraints:a}=e,i=o==="width"?a?.minWidth:a?.minHeight,l=typeof i=="number"?i:o==="width"?100:40,c=e.defaultProps[o]??l;return typeof i=="number"?Math.max(c,i):c};function sP({setCanvasState:e,queueHistoryEntry:o}){const a=y.useRef(null),i=y.useCallback(d=>{a.current=d},[]),l=y.useCallback(()=>{},[]),c=y.useCallback(d=>{const p=a.current;if(!p)return;const h=document.querySelector('[data-canvas="true"]');if(h){const g=h.getBoundingClientRect();d.x>=g.left&&d.x<=g.right&&d.y>=g.top&&d.y<=g.bottom&&(o("Add element from library"),e(v=>{const A=ld(v),w=(d.x-g.left-Kb-v.panX*v.zoom)/v.zoom,S=(d.y-g.top-Kb-v.panY*v.zoom)/v.zoom,C=Bu(p,"width"),M=Bu(p,"height"),R={id:xo(),type:p.type,x:Math.max(0,w-C/2),y:Math.max(0,S-M/2),width:C,height:M,text:p.defaultProps.text??"",imageSrc:typeof p.defaultProps.imageSrc=="string"?p.defaultProps.imageSrc:void 0,style:p.defaultProps.style,constraints:p.constraints,properties:p.defaultProps.properties?{...p.defaultProps.properties}:void 0,zIndex:A},E=Os(R);return{...v,elements:[...v.elements,E],selectedElements:[E.id],selectedConnectors:[],selectedItemIds:[E.id]}}))}a.current=null},[o,e]),u=y.useCallback(d=>{const p=Bu(d,"width"),h=Bu(d,"height");o("Add element from library"),e(g=>{const m=ld(g),v={id:xo(),type:d.type,x:100+Math.random()*200,y:100+Math.random()*200,width:p,height:h,text:d.defaultProps.text??"",imageSrc:typeof d.defaultProps.imageSrc=="string"?d.defaultProps.imageSrc:void 0,style:d.defaultProps.style,constraints:d.constraints,properties:d.defaultProps.properties?{...d.defaultProps.properties}:void 0,zIndex:m},A=Os(v);return{...g,elements:[...g.elements,A],selectedElements:[A.id],selectedConnectors:[],selectedItemIds:[A.id]}})},[o,e]);return{handleDragStart:i,handleDragMove:l,handleDragEnd:c,handleElementClick:u}}function lP({handlers:e,hasSelection:o}){const a=y.useRef(e),i=y.useRef(o);y.useEffect(()=>{a.current=e},[e]),y.useEffect(()=>{i.current=o},[o]),y.useEffect(()=>{const l=c=>{const u=a.current,d=i.current,p=document.activeElement,h=p?.tagName==="INPUT"||p?.tagName==="TEXTAREA"||p?.hasAttribute("data-inline-editor"),g=typeof c.key=="string"?c.key.toLowerCase():"";if(c.key==="Escape"&&!h&&d&&u.onClearSelection){c.preventDefault(),u.onClearSelection();return}if(g==="a"&&(c.ctrlKey||c.metaKey)&&!h){c.preventDefault(),u.onSelectAll();return}if(c.ctrlKey||c.metaKey){if(g==="z"&&!c.shiftKey&&u.onUndo){c.preventDefault(),u.onUndo();return}if(g==="z"&&c.shiftKey&&u.onRedo){c.preventDefault(),u.onRedo();return}if(g==="h"&&u.onToggleHistory){c.preventDefault(),u.onToggleHistory();return}if(g==="s"&&u.onExportProjectJSON){c.preventDefault(),u.onExportProjectJSON();return}if(g==="o"&&c.shiftKey&&u.onImportProjectJSON){c.preventDefault(),u.onImportProjectJSON();return}}if(!h&&(c.ctrlKey||c.metaKey)){if(c.shiftKey){if(g==="c"&&u.onCopyProperties){c.preventDefault(),u.onCopyProperties();return}if(g==="v"&&u.onPasteProperties){c.preventDefault(),u.onPasteProperties();return}}if(!c.shiftKey){if(g==="c"){c.preventDefault(),u.onCopy();return}if(g==="x"){c.preventDefault(),u.onCut();return}if(g==="v"){c.preventDefault(),u.onPaste();return}}}if(!h&&!c.ctrlKey&&!c.metaKey){if(g==="s"){c.preventDefault(),u.onSetMode("select");return}if(g==="d"){c.preventDefault(),u.onSetMode("drag");return}}if((c.key==="Delete"||c.key==="Backspace")&&d&&(h||(c.preventDefault(),u.onDelete())),!h&&d&&u.onMoveSelection){if(c.key==="ArrowUp"){c.preventDefault(),u.onMoveSelection(0,-1);return}if(c.key==="ArrowDown"){c.preventDefault(),u.onMoveSelection(0,1);return}if(c.key==="ArrowLeft"){c.preventDefault(),u.onMoveSelection(-1,0);return}if(c.key==="ArrowRight"){c.preventDefault(),u.onMoveSelection(1,0);return}}if(!h&&d&&(c.ctrlKey||c.metaKey)){if(g==="j"){const m=c.shiftKey?u.onSendToFront:u.onBringForward;if(m){c.preventDefault(),m();return}}if(g==="k"){const m=c.shiftKey?u.onSendToBack:u.onBringBack;if(m){c.preventDefault(),m();return}}if(g==="g"){if(c.shiftKey&&u.onUngroup){c.preventDefault(),u.onUngroup();return}if(!c.shiftKey&&c.altKey&&u.onGroup){c.preventDefault(),u.onGroup();return}if(!c.shiftKey&&!c.altKey&&u.onSnapToGrid){c.preventDefault(),u.onSnapToGrid();return}}}if(!h&&(c.ctrlKey||c.metaKey)){if(c.key==="["&&u.onZoomOut){c.preventDefault(),u.onZoomOut();return}if(c.key==="]"&&u.onZoomIn){c.preventDefault(),u.onZoomIn();return}if((c.key==="'"||c.key==='"'||c.code==="Quote")&&u.onResetZoom){c.preventDefault(),u.onResetZoom();return}if((c.key==="\\"||c.key==="|")&&u.onFitToScreen){c.preventDefault(),u.onFitToScreen();return}}};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[]),y.useEffect(()=>(document.body.style.userSelect="none",()=>{document.body.style.userSelect=""}),[])}const dA=Gt("project-v2"),zl=100,Fl=e=>({elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0,ownerPageId:e}),Ql=()=>{const e=xo();return{pages:[{id:e,name:"Page 1",order:0}],canvases:{[e]:Fl(e)},activePageId:e}},ws=(e,o)=>{if(!e)return Fl(o);const a=Va(e);return a.ownerPageId=o,a},cP=()=>{try{const e=window.localStorage.getItem(dA);if(!e)return Ql();const o=JSON.parse(e);if(!o.pages?.length||!o.canvases)return Ql();const a={};o.pages.forEach(l=>{a[l.id]=ws(o.canvases[l.id],l.id)});const i=a[o.activePageId]?o.activePageId:o.pages[0].id;return{pages:o.pages.slice().sort((l,c)=>l.order-c.order).map((l,c)=>({...l,order:c})),canvases:a,activePageId:i}}catch(e){return console.error("Failed to load project metadata",e),Ql()}},uP=()=>{const[e,o]=y.useState(()=>typeof window>"u"?Ql():cP()),a=y.useCallback(S=>{if(!(typeof window>"u"||_o()))try{window.localStorage.setItem(dA,JSON.stringify(S))}catch(C){console.error("Failed to persist project",C)}},[]);y.useEffect(()=>{_o()||a(e)},[a,e]);const i=y.useCallback(S=>{o(C=>{if(_o())return C;const M=S(C);return M===C?C:(a(M),M)})},[a]),l=y.useCallback((S,C)=>{i(M=>{const R=ws(C,S);return{...M,canvases:{...M.canvases,[S]:R}}})},[i]),c=y.useCallback(S=>{i(C=>{if(C.activePageId===S)return C;const M=C.canvases[S]?C.canvases:{...C.canvases,[S]:Fl(S)};return{...C,canvases:M,activePageId:S}})},[i]),u=y.useCallback(()=>{i(S=>{if(S.pages.length>=zl)return console.warn(`Cannot add page. Maximum ${zl} pages reached.`),S;const C=xo(),M=new Set(S.pages.map(B=>B.name));let R=S.pages.length+1,E=`Page ${R}`;for(;M.has(E);)R+=1,E=`Page ${R}`;const k=[...S.pages,{id:C,name:E,order:S.pages.length}],I={...S.canvases,[C]:Fl(C)};return{pages:k,canvases:I,activePageId:C}})},[i]),d=y.useCallback(S=>{i(C=>{if(C.pages.length<=1)return console.warn("Cannot delete the last page"),C;const M=C.pages.filter(I=>I.id!==S).map((I,B)=>({...I,order:B})),{[S]:R,...E}=C.canvases,k=C.activePageId===S?M[0].id:C.activePageId;return{pages:M,canvases:E,activePageId:k}})},[i]),p=y.useCallback((S,C)=>{const M=C.trim();if(!M)return!1;let R=!0;return i(E=>{if(E.pages.some(I=>I.id!==S&&I.name===M))return console.warn("Page name already in use"),R=!1,E;const k=E.pages.map(I=>I.id===S?{...I,name:M}:I);return{...E,pages:k}}),R},[i]),h=y.useCallback(S=>{i(C=>{if(C.pages.length>=zl)return console.warn(`Cannot duplicate page. Maximum ${zl} pages reached.`),C;const M=C.pages.find(j=>j.id===S);if(!M)return C;const R=C.canvases[S]??Fl(S);let E=`${M.name} (Copy)`,k=1;for(;C.pages.some(j=>j.name===E);)E=`${M.name} (Copy ${k++})`;const I=xo(),B=[...C.pages,{id:I,name:E,order:C.pages.length}],O={...C.canvases,[I]:ws(R,I)};return{pages:B,canvases:O,activePageId:I}})},[i]),g=y.useCallback((S,C)=>{i(M=>{const R=[...M.pages],E=R.findIndex(B=>B.id===S);if(E===-1)return M;const[k]=R.splice(E,1);R.splice(C,0,k);const I=R.map((B,O)=>({...B,order:O}));return{...M,pages:I}})},[i]),m=y.useCallback(()=>{const S=Ql();_o()||a(S),o(S)},[a]),v=y.useCallback((S,C)=>{if(!S.length){console.warn("Cannot replace project with zero pages.");return}i(()=>{const M=S.slice().sort((I,B)=>I.order-B.order).map((I,B)=>({...I,order:B})),R={};M.forEach(I=>{R[I.id]=ws(I.canvasState,I.id)});const E=M.map(I=>({id:I.id,name:I.name,order:I.order})),k=C&&R[C]?C:M[0].id;return{pages:E,canvases:R,activePageId:k}})},[i]),A=y.useMemo(()=>e.pages.map(S=>({...S,canvasState:ws(e.canvases[S.id],S.id)})),[e]),w=y.useMemo(()=>ws(e.canvases[e.activePageId],e.activePageId),[e]);return{pages:A,activePageId:e.activePageId,activeCanvas:w,canAddPage:e.pages.length<zl,setActivePage:c,commitCanvasSnapshot:l,addPage:u,deletePage:d,renamePage:p,duplicatePage:h,reorderPages:g,resetProject:m,replaceProject:v}},dP=ce.div.attrs(e=>({style:{top:`${e.$top}px`,left:`${e.$left}px`}}))`
  position: fixed;
  width: 240px;
  min-height: 160px;
  max-height: 70vh;
  resize: vertical;
  background: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  box-shadow: 0 18px 36px rgba(15, 23, 42, 0.14);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1100;
  backdrop-filter: blur(12px);
`,fP=ce.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 14px;
  background: #f8fafc;
  border-bottom: 1px solid #e2e8f0;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`,hP=ce.h3`
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
`,pP=ce.button`
  border: none;
  background: transparent;
  color: #64748b;
  font-size: 16px;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;

  &:hover {
    background: rgba(226, 232, 240, 0.45);
    color: #0f172a;
  }
`,mP=ce.ul`
  list-style: none;
  margin: 0;
  padding: 0;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
`,gP=ce.li`
  padding: 10px 16px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: ${e=>e.$isCurrent?"#eef2ff":"transparent"};
  border-bottom: 1px solid #e5e7eb;

  &:last-child {
    border-bottom: none;
  }
`,yP=ce.span`
  font-size: 14px;
  color: #1f2937;
  font-weight: 500;
`,xP=ce.button`
  border: none;
  background: none;
  padding: 0;
  margin: 0;
  font-size: 14px;
  font-weight: 500;
  text-align: left;
  color: ${e=>e.$position==="past"?"#1d4ed8":"#047857"};
  cursor: pointer;

  &:hover {
    text-decoration: underline;
  }
`,bP=ce.span`
  font-size: 12px;
  color: #6b7280;
`,vP=ce.div`
  padding: 24px 16px;
  text-align: center;
  color: #6b7280;
  font-size: 13px;
`;function wP(e){const o=new Date(e);return`${o.toLocaleDateString()} ${o.toLocaleTimeString()}`}function AP({entries:e,currentIndex:o,onClose:a,onSelectEntry:i,position:l,onPositionChange:c}){const u=y.useRef(null),d=y.useRef(null),p=y.useCallback(m=>{if(!u.current)return;const v=m.clientX-u.current.x,A=m.clientY-u.current.y;c({x:Math.max(12,v),y:Math.max(12,A)})},[c]),h=y.useCallback(()=>{u.current=null,document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h)},[p]),g=y.useCallback(m=>{m.preventDefault(),u.current={x:m.clientX-l.x,y:m.clientY-l.y},document.addEventListener("mousemove",p),document.addEventListener("mouseup",h)},[p,h,l.x,l.y]);return y.useEffect(()=>()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h)},[p,h]),y.useEffect(()=>{d.current&&(d.current.scrollTop=d.current.scrollHeight)},[e.length]),b.jsxs(dP,{"data-history-panel":!0,$top:l.y,$left:l.x,children:[b.jsxs(fP,{"data-history-header":!0,onMouseDown:g,children:[b.jsx(hP,{children:"History"}),b.jsx(pP,{type:"button",onClick:a,children:""})]}),e.length===0?b.jsx(vP,{children:"No history recorded yet."}):b.jsx(mP,{ref:d,children:e.map((m,v)=>{const A=m.position==="present"?"Current":m.position==="past"?"Undo":"Redo",w=m.position!=="present";return b.jsxs(gP,{$isCurrent:v===o,"data-history-entry":!0,"data-entry-position":m.position,children:[w?b.jsx(xP,{type:"button",$position:m.position==="past"?"past":"future",onClick:()=>i(m.id),"data-history-action":m.position==="past"?"undo":"redo","data-entry-id":m.id,children:m.description}):b.jsx(yP,{children:m.description}),b.jsxs(bP,{children:[A,"  ",wP(m.timestamp)]})]},m.id)})})]})}const Rm=["lineColour","lineWidth","opacity","shadow","shadowColour","shadowOpacity","shadowBlurRadius"],CP=["startMark","endMark"],SP=new Set(yw()),EP=new Set(EI()),MP=e=>{const o={};return Rm.forEach(a=>{const i=e[a];i!==void 0&&(o[a]=i)}),o},RP=e=>{const o={};return Rm.forEach(a=>{const i=e[a];i!==void 0&&(o[a]=i)}),o},kP=e=>{const o=En.getConnectorDefaults(),a=En.normaliseConnector(e),i={...o,...a.properties??{}},l={};return[...Rm,...CP].forEach(c=>{const u=i[c];u!==void 0&&(l[c]=u)}),l},TP=e=>{const o=_i(e.type),a=ki(e,e.properties);return o.reduce((i,l)=>{if(SP.has(l.id)||EP.has(l.id))return i;const c=a[l.id];return c!==void 0&&(i[l.id]=c),i},{})},IP=e=>{const o=TP(e);return{source:"element",element:o,connector:MP(o)}},_P=e=>{const o=kP(e);return{source:"connector",element:RP(o),connector:o}},Zb=e=>Object.keys(e.element).length>0,Jb=e=>Object.keys(e.connector).length>0,OP=({isOpen:e,onClose:o,onRefresh:a})=>b.jsxs(Ls,{isOpen:e,onClose:o,role:"alertdialog",ariaLabelledBy:"reset-notice-title",dataAttributes:{"data-reset-notice":"true"},closeOnOverlayClick:!1,children:[b.jsxs(Bs,{id:"reset-notice-title",children:[Dr," Reset Complete"]}),b.jsx(zs,{children:b.jsxs("p",{children:["Your local ",Dr," data has been cleared. To finish applying the reset, refresh this browser tab."]})}),b.jsxs(Ns,{children:[b.jsx(jo,{onClick:o,children:"Close"}),b.jsx(jo,{$variant:"primary",onClick:a,children:"Refresh Now"})]})]}),Ai={lineColour:"#6c757d",lineWidth:2,opacity:1,shadow:!1,shadowColour:"#000000",shadowOpacity:.36,shadowBlurRadius:6,startMark:"None",endMark:"None"},Ci="Untitled project",Nl=Gt("project-name"),DP=()=>{if(typeof navigator>"u")return"Unknown";const e=navigator.userAgent||"",o=[{name:"Microsoft Edge",regex:/Edg\/([\d.]+)/},{name:"Chrome",regex:/Chrome\/([\d.]+)/,skipIf:/Edg\//},{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/,skipIf:/Chrome\//}];for(const a of o){if(a.skipIf&&a.skipIf.test(e))continue;const i=e.match(a.regex);if(i&&i[1])return`${a.name} ${i[1]}`}return e},jP=()=>{const{pages:e,activePageId:o,activeCanvas:a,canAddPage:i,setActivePage:l,commitCanvasSnapshot:c,addPage:u,deletePage:d,renamePage:p,duplicatePage:h,reorderPages:g,resetProject:m,replaceProject:v}=uP(),A=y.useRef(null),[w,S]=y.useState(!1),[C,M]=y.useState(()=>{if(typeof window>"u")return Ci;const F=window.localStorage.getItem(Nl);if(typeof F=="string"){const fe=F.trim();if(fe.length>0)return fe}return Ci}),{canvasState:R,actions:E,canUndo:k,canRedo:I,historyEntries:B,historyIndex:O}=FD(a),j=y.useRef(R);j.current=R;const U=E.exportHistoryState,G=E.importHistoryState,X=E.replaceCanvasState,[W,J]=y.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Gt("history-panel-open"))==="true"),[oe,Z]=y.useState({x:24,y:80}),[D,Y]=y.useState(null),z=y.useRef({}),L=y.useRef(null),T=y.useRef(0),$=y.useRef(!1),N=y.useRef(null),H=y.useRef(null),q=y.useRef(null),K=y.useRef(null),ie=y.useRef(!1),ue=y.useCallback(F=>JSON.parse(JSON.stringify(F)),[]),se=y.useCallback(()=>{typeof window<"u"&&(N.current!==null&&(window.cancelAnimationFrame(N.current),N.current=null),H.current!==null&&(window.cancelAnimationFrame(H.current),H.current=null)),q.current&&(q.current(),q.current=null)},[]),ye=y.useCallback(()=>{if($.current=!0,typeof window>"u"){T.current===0&&($.current=!1,Zt.current());return}se();const F=window,fe=F.__wiremeshTestHooks??{};F.__wiremeshTestHooks||(F.__wiremeshTestHooks=fe);const xe=fe.__rafFlushers??new Set;fe.__rafFlushers||(fe.__rafFlushers=xe);const ve=()=>{typeof window<"u"&&(N.current!==null&&(window.cancelAnimationFrame(N.current),N.current=null),H.current!==null&&(window.cancelAnimationFrame(H.current),H.current=null));const qe=q.current;if(q.current=null,qe?.(),T.current>0){$.current=!0;return}$.current=!1,Zt.current()};xe.add(ve),q.current=()=>{xe.delete(ve)},N.current=window.requestAnimationFrame(()=>{N.current=null,H.current=window.requestAnimationFrame(()=>{if(H.current=null,T.current>0){$.current=!0;return}$.current=!1;const qe=q.current;q.current=null,qe?.(),Zt.current()})})},[se]),ge=y.useCallback(F=>{$.current=!0,F?.forceTimestamp&&(ie.current=!0),T.current===0&&ye()},[ye]),Ae=y.useRef(!1),[Se,Pe]=y.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Gt("library-collapsed"))==="true"),[Ee,He]=y.useState(()=>{if(typeof window>"u")return!0;const F=window.localStorage.getItem(Gt("rulers-visible"));return F===null?!0:F==="true"}),[We,_e]=y.useState(()=>{if(typeof window>"u")return!0;const F=window.localStorage.getItem(Gt("grid-visible"));return F===null?!0:F==="true"}),[gt,ot]=y.useState(()=>{if(typeof window<"u"){const F=window.localStorage.getItem(Gt("floating-toolbar-position"));if(F)try{const xe=JSON.parse(F);if(typeof xe.x=="number"&&typeof xe.y=="number"&&Number.isFinite(xe.x)&&Number.isFinite(xe.y))return Ae.current=!0,{x:xe.x,y:xe.y}}catch(xe){console.warn("Failed to parse stored toolbar position",xe)}return{x:Math.max(0,Math.round(window.innerWidth/2-160)),y:24}}return{x:0,y:26}}),[Ye,et]=y.useState(()=>{if(typeof window>"u")return!0;const F=window.localStorage.getItem(Gt("floating-toolbar-docked"));return F===null?!0:F==="true"}),[yt,ht]=y.useState(!1),[It,cn]=y.useState(!1),[je,Te]=y.useState(!1),Be=y.useRef(!0),Xe=y.useRef(null),we=y.useRef(null),Oe=4,[Le,Ne]=y.useState(null),{state:xt,openMenu:Fe,closeMenu:$e,resetMenu:De}=od(),St=y.useCallback(F=>{Promise.resolve().then(()=>{Be.current&&cn(F)})},[]),Nt=y.useCallback(()=>{_e(F=>!F)},[]);y.useEffect(()=>{const F=ve=>{ve.key==="Shift"&&Te(!0)},fe=ve=>{ve.key==="Shift"&&Te(!1)},xe=()=>{Te(!1)};return window.addEventListener("keydown",F),window.addEventListener("keyup",fe),window.addEventListener("blur",xe),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",fe),window.removeEventListener("blur",xe)}},[]),y.useEffect(()=>(Be.current=!0,()=>{Be.current=!1}),[]);const{state:mn,openMenu:bn,closeMenu:Lt,resetMenu:ao}=od(),_n=y.useMemo(()=>typeof navigator<"u"&&navigator.platform.toUpperCase().includes("MAC"),[]),Mn=_n?"":"Ctrl",Ue=_n?"":"Alt",at=_n?" Delete":"Delete",Ze=`${Mn}+[`,On=`${Mn}+]`,vn=`${Mn}+'`,Et=`${Mn}+\\`,[nn,Kn]=y.useState(!1),[Xn,bo]=y.useState(!1),fr=y.useMemo(()=>DP(),[]),Dn=y.useCallback(F=>{const fe=ve=>({id:ve.id,type:ve.type,x:ve.x,y:ve.y,width:ve.width,height:ve.height,text:ve.text,groupId:ve.groupId,zIndex:ve.zIndex}),xe=ve=>({id:ve.id,type:ve.type,startPoint:ve.startPoint,endPoint:ve.endPoint,startAttachment:ve.startAttachment,endAttachment:ve.endAttachment,zIndex:ve.zIndex});return JSON.stringify({elements:F.elements.map(fe),connectors:F.connectors.map(xe),zoom:F.zoom,panX:F.panX,panY:F.panY})},[]),Zt=y.useRef(()=>{}),Wt=y.useRef(null),gn=y.useCallback(()=>{Kn(!1)},[]),jn=y.useCallback(()=>{window.location.reload()},[]),Pn=y.useCallback(()=>{if(typeof window>"u")return;const F=new URLSearchParams({version:pm,browser:fr});window.open(`/assets/bug-report/index.html?${F.toString()}`,"_blank","noopener")},[fr]),io=y.useCallback(()=>e.some(F=>(F.canvasState.elements?.length??0)>0||(F.canvasState.connectors?.length??0)>0),[e]),vt=y.useCallback(()=>{m(),M(Ci),typeof window<"u"&&window.localStorage.removeItem(Nl)},[m,M]),Jt=y.useCallback(()=>{bo(!1),vt()},[vt]),ua=y.useCallback(()=>{bo(!1)},[]),Bn=y.useCallback((F,fe)=>{z.current={},z.current[fe]=ue(U()),Wt.current=Dn(F),L.current=fe},[ue,U,Dn]);y.useEffect(()=>{Zt.current=()=>{if(T.current>0){$.current=!0;return}const fe=E.exportHistoryState().present?.state??R,xe={...Va(fe),ownerPageId:o},ve=Wt.current,qe=Dn(xe);c(o,xe),z.current[o]=ue(U()),Wt.current=qe,(ve!==qe||ie.current)&&Y(new Date),$.current=!1,K.current=null,ie.current=!1}},[o,E,R,c,ue,U,Y,Dn]),y.useEffect(()=>()=>{Zt.current()},[]),y.useEffect(()=>()=>{se()},[se]),y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("history-panel-open"),String(W))},[W]),y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("rulers-visible"),String(Ee))},[Ee]),y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("grid-visible"),String(We))},[We]),y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("library-collapsed"),String(Se))},[Se]),y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("floating-toolbar-docked"),String(Ye))},[Ye]),y.useEffect(()=>{if(typeof window>"u"||_o())return;const F=C.trim();F.length===0||F===Ci?window.localStorage.removeItem(Nl):window.localStorage.setItem(Nl,F)},[C]),y.useEffect(()=>{if(typeof document>"u")return;const F=C.trim(),fe=F.length>0?F:Ci;document.title=`${Dr} - ${fe}`},[C]),y.useEffect(()=>{const F=e.find(Ct=>Ct.id===o);if(!F)return;const fe={...Va(F.canvasState),ownerPageId:o},xe=Dn(fe),ve=Wt.current===xe,qe=L.current===o;if(ve&&qe){L.current=o;return}const bt=z.current[o];bt?G(ue(bt)):(X(fe,{resetHistory:!0}),z.current[o]=ue(U())),Wt.current=xe,L.current=o},[o,e,ue,U,G,X,Dn]),y.useEffect(()=>{const F=()=>{Zt.current()};return window.addEventListener("beforeunload",F),()=>{window.removeEventListener("beforeunload",F)}},[]);const so=y.useCallback(F=>{T.current+=1,$.current=!0,se(),E.startTransaction(F)},[se,E]),Br=y.useCallback(()=>{E.endTransaction(),T.current>0&&(T.current-=1),T.current===0?ye():$.current=!0},[E,ye]);y.useEffect(()=>{const F=Dn(R);F!==K.current&&(K.current=F,F!==Wt.current&&ge())},[R,ge,Dn]);const $t=QD({canvasState:R,setCanvasState:E.setCanvasState}),tt=$t.actions,zr=e.length>1,vo=i&&!!o,Bo=y.useCallback(()=>{!vo||!o||(h(o),ge({forceTimestamp:!0}))},[vo,o,h,ge]),zn=y.useCallback(()=>{!zr||!o||A.current?.requestDeletePage(o)},[zr,o]),tr=y.useCallback(F=>{d(F),ge({forceTimestamp:!0})},[d,ge]),Nr=y.useCallback(F=>{h(F),ge({forceTimestamp:!0})},[h,ge]),hr=y.useCallback((F,fe)=>{const xe=p(F,fe);return xe&&ge({forceTimestamp:!0}),xe},[ge,p]),pr=y.useCallback((F,fe)=>{g(F,fe),ge({forceTimestamp:!0})},[ge,g]),on=y.useCallback(F=>{const fe=F.trim();M(fe.length>0?fe:Ci),ge({forceTimestamp:!0})},[ge]),mr=y.useCallback(()=>{const F={elements:[],connectors:[],selectedElements:[],selectedConnectors:[],selectedItemIds:[],zoom:1,panX:0,panY:0,ownerPageId:o};m(),E.replaceCanvasState(F,{resetHistory:!0}),E.clearSelection(),tt.resetZoom(),tt.updatePan(0,0),tt.setMode("drag"),tt.updateSelectionArea(null),J(!1),Z({x:24,y:80}),Ne(null),ho(null),po({...Ai}),Pe(!1),Y(null),M(Ci),typeof window<"u"&&window.localStorage.removeItem(Nl),Ae.current=!1;const fe=typeof window<"u"?{x:Math.max(0,Math.round(window.innerWidth/2-160)),y:24}:{x:0,y:26};ot(fe),z.current={},L.current=null,Wt.current=null},[o,E,tt,m]);y.useEffect(()=>{if(typeof window>"u")return;const F=()=>{try{window.sessionStorage.getItem(Tp)==="true"&&(window.sessionStorage.removeItem(Tp),mr(),Kn(!0))}catch(xe){console.error("Failed to read reset notice flag:",xe)}},fe=()=>{F()};return F(),window.addEventListener(ec,fe),()=>{window.removeEventListener(ec,fe)}},[mr]);const Nn=$t.canvasMode,[qt,ho]=y.useState(null),[oi,po]=y.useState({...Ai}),gr=y.useCallback(F=>{tt.setMode(F),F!=="draw-connector"&&(ho(null),po({...Ai}))},[tt]),da=y.useCallback(F=>{const fe=F.label;if((qt?.label??null)===fe&&Nn==="draw-connector"){ho(null),po({...Ai}),tt.setMode("drag");return}const ve=F.defaultProps?.properties;ho(F),po({...Ai,...ve??{}}),tt.setMode("draw-connector")},[qt,Nn,tt]),zo=GD({canvasState:R,setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),Vt=WD({setCanvasState:E.setCanvasState,zoom:$t.zoom,onTransactionStart:so,onTransactionEnd:Br,isShiftPressed:je,snapGridSize:Vn}),Mt=VD({setCanvasState:E.setCanvasState,zoom:$t.zoom,onTransactionStart:so,onTransactionEnd:Br,isShiftPressed:je,snapGridSize:Vn}),ri=y.useCallback(()=>{Zt.current(),u(),ge({forceTimestamp:!0})},[u,ge]),le=ZD({getCanvasStateSnapshot:E.getCanvasStateSnapshot,setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),pe=y.useMemo(()=>{const F=e.find(fe=>fe.id===o);return F||{id:o,name:"Current Page",order:0,canvasState:R}},[e,o,R]),be=iP({canvasState:R,setCanvasState:E.setCanvasState,replaceCanvasState:X,queueHistoryEntry:E.queueHistoryEntry,onSaveTimestampUpdate:()=>Y(new Date),activePageId:o,activePage:pe,pages:e,commitCanvasSnapshot:c,onImportApplied:Bn,replaceProject:v,startTransaction:E.startTransaction,endTransaction:E.endTransaction}),[Ie,Ce]=y.useState({isOpen:!1,imageSrc:null,imageBlob:null,isGenerating:!1}),pt=y.useRef(null),Fn=y.useCallback(async()=>{if(!Ie.isGenerating){Ce({isOpen:!0,imageSrc:null,imageBlob:null,isGenerating:!0});try{const F=await be.actions.exportPNGToBlob(),fe=URL.createObjectURL(F);pt.current?.(),pt.current=()=>URL.revokeObjectURL(fe),Ce({isOpen:!0,imageSrc:fe,imageBlob:F,isGenerating:!1})}catch(F){console.error("Failed to generate print preview:",F),alert("Failed to generate print preview: "+F.message),Ce({isOpen:!1,imageSrc:null,imageBlob:null,isGenerating:!1})}}},[be.actions,Ie.isGenerating]),wt=y.useCallback(()=>{pt.current?.(),pt.current=null,Ce(F=>({...F,isOpen:!1,imageSrc:null,imageBlob:null}))},[]),Zn=y.useCallback(()=>{if(!Ie.imageSrc)return;const F=window.open(Ie.imageSrc,"_blank");F?.addEventListener("load",()=>F.print(),{once:!0})},[Ie.imageSrc]),Ht=y.useCallback(async()=>{try{await be.actions.exportPNG()}catch(F){console.error("Failed to export PNG from preview:",F),alert("Failed to export PNG: "+F.message)}},[be.actions]),rn=y.useCallback(async()=>{try{const F=Ie.imageBlob;if(!F)throw new Error("Preview image is not ready yet.");if(!navigator.clipboard||typeof navigator.clipboard.write!="function"||typeof ClipboardItem>"u")throw new Error("Clipboard copy is not supported in this browser.");const fe=new ClipboardItem({"image/png":F});await navigator.clipboard.write([fe])}catch(F){throw console.error("Failed to copy preview to clipboard:",F),alert("Failed to copy preview to clipboard: "+F.message),F}},[Ie.imageBlob]);y.useEffect(()=>()=>{pt.current?.(),pt.current=null},[]),y.useEffect(()=>{const F=fe=>{if(fe.defaultPrevented||fe.key.toLowerCase()!=="p"||!(_n?fe.metaKey:fe.ctrlKey))return;const ve=fe.target;ve&&(ve instanceof HTMLInputElement||ve instanceof HTMLTextAreaElement||ve.isContentEditable||ve.closest('[contenteditable="true"]'))||(fe.preventDefault(),fe.stopPropagation(),Fn())};return window.addEventListener("keydown",F,!0),()=>{window.removeEventListener("keydown",F,!0)}},[Fn,_n]);const Je=be.actions.importProjectJSON;y.useEffect(()=>{const F=fe=>{if(fe.defaultPrevented||fe.key.toLowerCase()!=="o"||!(_n?fe.metaKey:fe.ctrlKey))return;const ve=fe.target;ve&&(ve instanceof HTMLInputElement||ve instanceof HTMLTextAreaElement||ve.isContentEditable||ve.closest('[contenteditable="true"]'))||(fe.preventDefault(),fe.stopPropagation(),Je())};return window.addEventListener("keydown",F,!0),()=>{window.removeEventListener("keydown",F,!0)}},[Je,_n]);const ct=sP({setCanvasState:E.setCanvasState,queueHistoryEntry:E.queueHistoryEntry}),Rt=Se?0:280;y.useEffect(()=>{typeof window>"u"||_o()||window.localStorage.setItem(Gt("floating-toolbar-position"),JSON.stringify(gt))},[gt]);const Ut=R.selectedItemIds.length,Ke=R.selectedElements.length>0||R.selectedConnectors.length>0,Xt=y.useMemo(()=>R.selectedElements.length>1,[R.selectedElements.length]),Jn=y.useMemo(()=>R.selectedElements.some(F=>R.elements.find(fe=>fe.id===F&&fe.groupId)),[R.elements,R.selectedElements]),nr=y.useMemo(()=>sp(R,Vn),[R,Vn]),{singleElement:un,singleConnector:Ft}=y.useMemo(()=>{if(Ut!==1)return{singleElement:null,singleConnector:null};const F=R.selectedElements[0]??null;if(F)return{singleElement:R.elements.find(ve=>ve.id===F)??null,singleConnector:null};const fe=R.selectedConnectors[0]??null;return fe?{singleElement:null,singleConnector:R.connectors.find(ve=>ve.id===fe)??null??null}:{singleElement:null,singleConnector:null}},[R.elements,R.connectors,R.selectedElements,R.selectedConnectors,Ut]),Lr=y.useCallback((F,fe)=>{Ft&&(E.updateConnectorProperty(Ft.id,F,fe),ge({forceTimestamp:!0}))},[E,ge,Ft]),yr=y.useCallback((F,fe)=>{if(un){E.updateElementProperty(un.id,F,fe),ge({forceTimestamp:!0});return}Ft&&Lr(F,fe)},[E,Lr,ge,Ft,un]),wo=y.useCallback(()=>{if(un){Ne(IP(un));return}Ft&&Ne(_P(Ft))},[Ft,un]),Oi=y.useCallback(()=>{if(!Le)return;const F=R.selectedElements.length>0&&Zb(Le),fe=R.selectedConnectors.length>0&&Jb(Le);!F&&!fe||(F&&E.applyPropertiesToElements(R.selectedElements,Le.element),fe&&E.applyPropertiesToConnectors(R.selectedConnectors,Le.connector),ge({forceTimestamp:!0}))},[E,R.selectedConnectors.length,R.selectedElements.length,ge,Le]),Hr=y.useCallback(()=>{const F=E.getCanvasStateSnapshot();if(!sp(F,Vn))return;let fe=!1;E.startTransaction("Snap to grid"),E.setCanvasState(xe=>{const ve=PD(xe,Vn);return ve.changed?(fe=!0,ve.state):xe}),E.endTransaction(),fe&&ge({forceTimestamp:!0})},[E,ge,Vn]),fa=y.useCallback(()=>{R.selectedElements.length>1&&E.groupElements(R.selectedElements)},[E,R.selectedElements]),xr=y.useCallback(()=>{const F=R.elements.find(fe=>R.selectedElements.includes(fe.id)&&fe.groupId)?.groupId;F&&E.ungroupElements(F)},[E,R.elements,R.selectedElements]),br=y.useCallback(()=>{zo.sendToFront()},[zo]),ha=y.useCallback(()=>{zo.bringForward()},[zo]),wn=y.useCallback(()=>{zo.bringBack()},[zo]),Ao=y.useCallback(()=>{zo.sendToBack()},[zo]),ai=y.useCallback(()=>{br(),$e()},[br,$e]),pa=y.useCallback(()=>{ha(),$e()},[ha,$e]),dc=y.useCallback(()=>{wn(),$e()},[wn,$e]),Di=y.useCallback(()=>{Ao(),$e()},[Ao,$e]),ji=y.useCallback(()=>{fa(),$e()},[fa,$e]),ma=y.useCallback(()=>{xr(),$e()},[xr,$e]),ii=y.useCallback(()=>{Hr(),$e()},[Hr,$e]),Hs=y.useCallback(()=>{E.deleteSelectedElements(),$e()},[E.deleteSelectedElements,$e]),fc=y.useCallback(F=>{const fe=F.selectedElements.length>0||F.selectedConnectors.length>0,xe=F.selectedElements.length>1,ve=F.selectedElements.some(bt=>!!F.elements.find(an=>an.id===bt)?.groupId),qe=sp(F,Vn);return t_({modKeyLabel:Mn,altKeyLabel:Ue,deleteShortcutLabel:at,hasAnySelection:fe,canGroup:xe,canUngroup:ve,canSnapToGrid:qe,onBringToFront:ai,onBringForward:pa,onSendBackward:dc,onSendToBack:Di,onGroup:ji,onUngroup:ma,onSnapToGrid:ii,onDelete:Hs})},[at,Ue,pa,ai,Hs,ji,ii,dc,Di,ma,Mn]),hc=y.useCallback(()=>{tt.zoomOut(),Lt()},[tt,Lt]),pc=y.useCallback(()=>{tt.zoomIn(),Lt()},[tt,Lt]),Pi=y.useCallback(()=>{tt.resetZoom(),Lt()},[tt,Lt]),mc=y.useCallback(()=>{tt.fitToScreen(),Lt()},[tt,Lt]),gc=y.useMemo(()=>n_({zoomOutShortcutLabel:Ze,zoomInShortcutLabel:On,resetZoomShortcutLabel:vn,fitShortcutLabel:Et,onZoomOut:hc,onZoomIn:pc,onResetZoom:Pi,onFitToScreen:mc}),[Et,mc,Pi,pc,hc,vn,On,Ze]),Md=y.useCallback(F=>{if(!F){$e(),De();return}const{targetType:fe,targetId:xe,x:ve,y:qe}=F,bt=j.current;let Ct=null;fe==="element"?bt.selectedElements.includes(xe)||(Ct=()=>{E.selectElement(xe,!1)}):fe==="connector"&&(bt.selectedConnectors.includes(xe)||(Ct=()=>{E.selectConnector(xe,!1)})),Ct&&dr.flushSync(Ct),Lt(),ao();const an=E.getCanvasStateSnapshot(),Rn=fc(an);Fe({position:{x:ve,y:qe},entries:Rn,dataAttributes:{"data-item-context-menu":"true"},metadata:{targetType:fe,targetId:xe}})},[E.getCanvasStateSnapshot,E.selectConnector,E.selectElement,Lt,$e,fc,Fe,ao,De]),Rd=y.useCallback(F=>{if(!F){Lt(),ao();return}$e(),De(),bn({position:{x:F.x,y:F.y},entries:gc,dataAttributes:{"data-canvas-context-menu":"true"}})},[gc,Lt,$e,bn,ao,De]);lP({handlers:{onSelectAll:E.selectAll,onCopy:le.actions.copy,onCut:le.actions.cut,onPaste:le.actions.paste,onDelete:E.deleteSelectedElements,onSetMode:gr,onUndo:E.undo,onRedo:E.redo,onMoveSelection:E.moveSelectedElements,onToggleHistory:()=>J(F=>!F),onExportProjectJSON:be.actions.exportProjectJSON,onImportProjectJSON:be.actions.importProjectJSON,onGroup:fa,onUngroup:xr,onSnapToGrid:Hr,onBringForward:ha,onBringBack:wn,onSendToFront:br,onSendToBack:Ao,onZoomIn:tt.zoomIn,onZoomOut:tt.zoomOut,onResetZoom:tt.resetZoom,onFitToScreen:tt.fitToScreen,onCopyProperties:wo,onPasteProperties:Oi,onClearSelection:E.clearSelection},hasSelection:Ke}),y.useEffect(()=>{if(typeof window>"u")return;const F=window.__wiremeshTestHooks=window.__wiremeshTestHooks??{},fe=()=>E.getCanvasStateSnapshot();F.exportProjectJSON=be.actions.exportProjectJSON,F.importProjectJSON=be.actions.importProjectJSON,F.showNewProjectConfirm=()=>bo(!0),F.triggerNewProject=()=>io()?(bo(!0),"confirm"):(vt(),"reset"),F.openProjectImportModal=xe=>{be.testHooks.openImportModal(xe??null)},F.closeProjectImportModal=()=>{be.testHooks.closeImportModal()},F.deleteSelection=()=>{E.deleteSelectedElements()},F.selectElement=(xe,ve=!1)=>{E.selectElement(xe,ve)},F.selectConnector=(xe,ve=!1)=>{E.selectConnector(xe,ve)},F.clearSelection=()=>{E.clearSelection()},F.clipboardCopy=()=>{le.actions.copy()},F.clipboardCut=()=>{le.actions.cut()},F.clipboardPaste=()=>{le.actions.paste()},F.getClipboardSnapshot=()=>le.clipboard,F.setClipboardSnapshot=xe=>{le.testHooks.setSnapshot(xe)},F.setClipboardSnapshotByIds=(xe,ve)=>{const qe=E.getCanvasStateSnapshot(),bt=qe.elements.filter(an=>xe.includes(an.id)),Ct=qe.connectors.filter(an=>ve.includes(an.id));le.testHooks.setSnapshot({elements:bt,connectors:Ct})},F.updateElementText=(xe,ve)=>{E.updateElementText(xe,ve)},F.updateElementProperty=(xe,ve,qe)=>{E.updateElementProperty(xe,ve,qe)},F.getCanvasStateSnapshot=()=>fe(),F.getElementCount=()=>fe().elements.length,F.getElementIds=()=>fe().elements.map(xe=>xe.id),F.getElementState=xe=>fe().elements.find(qe=>qe.id===xe)??null,F.getHistoryState=()=>({canUndo:k,canRedo:I}),F.getSelectionState=()=>{const xe=fe();return{elements:[...xe.selectedElements],connectors:[...xe.selectedConnectors]}},F.getConnectorIds=()=>fe().connectors.map(xe=>xe.id),F.getConnectorState=xe=>fe().connectors.find(qe=>qe.id===xe)??null,F.getConnectorResizingState=()=>({isResizing:Mt.isResizing,resizeConnectorId:Mt.resizeConnectorId,resizeEndpoint:Mt.resizeEndpoint,hasAnchorPreview:Mt.resizeHasAnchorPreview,anchorPreview:Mt.resizeAnchorPreview,pointerOffset:Mt.pointerOffset}),F.elementResizeStart=(xe,ve,qe,bt)=>{Vt.actions.handleResizeStart(xe,ve,qe,bt)},F.elementResizeMove=xe=>{Vt.actions.handleResizeMove(xe)},F.elementResizeEnd=()=>{Vt.actions.handleResizeEnd()},F.applyElementProperties=(xe,ve)=>{E.applyPropertiesToElements(xe,ve)},F.applyConnectorProperties=(xe,ve)=>{E.applyPropertiesToConnectors(xe,ve)},F.undo=()=>{E.undo()},F.redo=()=>{E.redo()},F.startTransaction=xe=>{E.startTransaction(xe)},F.endTransaction=()=>{E.endTransaction()},F.connectorResizeStart=(xe,ve,qe,bt)=>{Mt.actions.handleResizeStart(xe,ve,qe,bt?{pointerOffset:bt}:void 0)},F.connectorResizeMove=xe=>{Mt.actions.handleResizeMove(xe)},F.connectorResizeEnd=()=>{Mt.actions.handleResizeEnd()},F.flushPendingPersistence=()=>{E.flushPendingPersistence()},F.flushPendingWork=async()=>{E.flushPendingPersistence(),F.__rafFlushers?.forEach(ve=>{try{ve()}catch(qe){console.warn("Failed to flush RAF callback",qe)}})},F.getViewportState=()=>({panX:$t.panX,panY:$t.panY,zoom:$t.zoom}),F.getTemporarySelectMode=()=>It},[E.deleteSelectedElements,E.selectElement,E.selectConnector,E.clearSelection,E.updateElementText,E.updateElementProperty,E.applyPropertiesToElements,E.applyPropertiesToConnectors,E.flushPendingPersistence,R.elements,R.connectors,R.selectedElements,R.selectedConnectors,be.actions,be.testHooks,vt,io,k,I,Mt.isResizing,Mt.resizeConnectorId,Mt.resizeEndpoint,Mt.resizeHasAnchorPreview,Mt.resizeAnchorPreview,Mt.pointerOffset,Mt.actions.handleResizeStart,Mt.actions.handleResizeMove,Mt.actions.handleResizeEnd,Vt.actions.handleResizeStart,Vt.actions.handleResizeMove,Vt.actions.handleResizeEnd,E.undo,E.redo,E.startTransaction,E.endTransaction,$t.panX,$t.panY,$t.zoom,le.actions.copy,le.actions.cut,le.actions.paste,le.clipboard,le.testHooks.setSnapshot,It]);const kd=y.useCallback(()=>{if(un){E.resetElementStyling(un.id),ge({forceTimestamp:!0});return}Ft&&(E.resetConnectorProperties([Ft.id]),ge({forceTimestamp:!0}))},[E,ge,Ft,un]),yc=y.useMemo(()=>{if(!Le)return!1;const F=R.selectedElements.length>0&&Zb(Le),fe=R.selectedConnectors.length>0&&Jb(Le);return F||fe},[R.selectedConnectors.length,R.selectedElements.length,Le]),Td=y.useCallback(F=>{F!==o&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{Zt.current(),l(F),ho(null),po({...Ai}),tt.setMode("drag")})})},[o,l,tt]),Id=y.useCallback(()=>{ht(!1),et(!0)},[et,ht]),_d=y.useCallback(F=>{ht(F?.shouldCenter??!0),et(!1)},[et,ht]),vr=y.useCallback((F,fe,xe,ve)=>{const qe=Xe.current?.getBoundingClientRect();if(!qe)return;const bt=F-qe.left-xe,Ct=fe-qe.top-ve;ot({x:bt,y:Ct})},[]),ga=y.useCallback((F,fe,xe,ve)=>{vr(F,fe,xe,ve),ht(!1),et(!1);const qe=we.current;qe&&(qe.undocked=!0)},[et,ht,vr]),Od=y.useCallback(F=>{if(F.button!==0||!Ye)return;const fe=F.currentTarget.closest('[data-floating-toolbar-docked="true"]');if(!fe)return;F.preventDefault();const xe=fe.getBoundingClientRect();we.current={pointerOffsetX:F.clientX-xe.left,pointerOffsetY:F.clientY-xe.top,startClientX:F.clientX,startClientY:F.clientY,undocked:!1};const ve=bt=>{const Ct=we.current;if(!Ct)return;const an=bt.clientX-Ct.startClientX,Rn=bt.clientY-Ct.startClientY;if(!Ct.undocked){if(Math.hypot(an,Rn)<Oe)return;ga(bt.clientX,bt.clientY,Ct.pointerOffsetX,Ct.pointerOffsetY)}Ct.undocked&&vr(bt.clientX,bt.clientY,Ct.pointerOffsetX,Ct.pointerOffsetY)},qe=bt=>{const Ct=we.current;Ct?.undocked&&vr(bt.clientX,bt.clientY,Ct.pointerOffsetX,Ct.pointerOffsetY),we.current=null,document.removeEventListener("mousemove",ve),document.removeEventListener("mouseup",qe)};document.addEventListener("mousemove",ve),document.addEventListener("mouseup",qe)},[Oe,ga,Ye,vr]),Dd=y.useCallback(F=>{if(!Ye)return;const fe=F.touches[0];if(!fe)return;const xe=F.currentTarget.closest('[data-floating-toolbar-docked="true"]');if(!xe)return;F.preventDefault();const ve=xe.getBoundingClientRect();we.current={pointerOffsetX:fe.clientX-ve.left,pointerOffsetY:fe.clientY-ve.top,startClientX:fe.clientX,startClientY:fe.clientY,undocked:!1};const qe=Ct=>{const an=Ct.touches[0],Rn=we.current;if(!an||!Rn)return;const jd=an.clientX-Rn.startClientX,Ys=an.clientY-Rn.startClientY;if(!Rn.undocked){if(Math.hypot(jd,Ys)<Oe)return;ga(an.clientX,an.clientY,Rn.pointerOffsetX,Rn.pointerOffsetY)}Rn.undocked&&vr(an.clientX,an.clientY,Rn.pointerOffsetX,Rn.pointerOffsetY)},bt=Ct=>{const an=we.current,Rn=Ct.changedTouches[0];an?.undocked&&Rn&&vr(Rn.clientX,Rn.clientY,an.pointerOffsetX,an.pointerOffsetY),we.current=null,document.removeEventListener("touchmove",qe),document.removeEventListener("touchend",bt),document.removeEventListener("touchcancel",bt)};document.addEventListener("touchmove",qe,{passive:!1}),document.addEventListener("touchend",bt),document.addEventListener("touchcancel",bt)},[Oe,ga,Ye,vr]),xc={canvasMode:$t.canvasMode,isTemporarySelectMode:!1,onSetMode:gr,onSendToBack:Ao,onBringBack:wn,onBringForward:ha,onSendToFront:br,hasSelection:Ke,onUndo:E.undo,onRedo:E.redo,canUndo:k,canRedo:I,onDelete:E.deleteSelectedElements,onGroup:fa,onUngroup:xr,canGroup:Xt,canUngroup:Jn,onShapeDragStart:(F,fe)=>ct.handleDragStart(F),onShapeDragMove:F=>ct.handleDragMove(),onShapeDragEnd:F=>ct.handleDragEnd(F),onShapeClick:ct.handleElementClick,onConnectorToolSelect:da,activeConnectorPreset:qt,position:gt,onPositionChange:ot,shouldAutoCenter:!Ae.current,onDockToolbar:Id,onUndockToolbar:_d,shouldCenterOnUndock:yt,onCenterOnUndockHandled:()=>ht(!1),onDockedMouseDown:Od,onDockedTouchStart:Dd};return b.jsxs(DE,{children:[b.jsx(yT,{onNew:()=>{if(io()){bo(!0);return}vt()},onExportPNG:be.actions.exportPNG,onExportSelectedPNG:be.actions.exportSelectedPNG,onExportPageJSON:be.actions.exportPageJSON,onImportPageJSON:be.actions.importPageJSON,onExportProjectJSON:be.actions.exportProjectJSON,onImportProjectJSON:be.actions.importProjectJSON,onToggleHistory:()=>J(F=>!F),onToggleSidebar:()=>Pe(F=>!F),onToggleRulers:()=>He(F=>!F),onToggleGrid:Nt,onOpenBugReport:Pn,onClearSelection:E.clearSelection,onSelectAll:E.selectAll,onSelectArea:()=>tt.setMode("select"),projectName:C,onProjectNameChange:on,onOpenAbout:()=>S(!0),onDuplicatePage:Bo,onDeletePage:zn,onUndo:E.undo,onRedo:E.redo,onBringToFront:br,onSendToBack:Ao,onBringForward:ha,onSendBackward:wn,onGroup:fa,onUngroup:xr,onSnapToGrid:Hr,canGroup:Xt,onPrintPreview:Fn,canUngroup:Jn,canSnapToGrid:nr,hasSelection:Ke,lastSaved:D,isHistoryOpen:W,isSidebarExpanded:!Se,areRulersVisible:Ee,isGridVisible:We,dockedToolbar:Ye?b.jsx(ub,{...xc,isDocked:!0}):void 0,canDuplicatePage:vo,canDeletePage:zr}),w&&b.jsx(MT,{onClose:()=>S(!1)}),b.jsx(OT,{isOpen:Xn,onConfirm:Jt,onCancel:ua}),b.jsx(zI,{isCollapsed:Se,onDragStart:ct.handleDragStart,onDragMove:ct.handleDragMove,onDragEnd:ct.handleDragEnd,onElementClick:ct.handleElementClick,selectedElement:un,selectedConnector:Ft,selectionCount:Ut,onPropertyChange:yr,onCopyProperties:wo,onPasteProperties:Oi,onResetProperties:kd,canPasteProperties:yc}),b.jsxs(jE,{ref:Xe,$libraryWidth:Rt,children:[!Ye&&b.jsx(ub,{...xc,isDocked:!1}),W&&b.jsx(AP,{entries:B,currentIndex:O,onClose:()=>J(!1),onSelectEntry:E.jumpToHistoryEntry,position:oe,onPositionChange:Z}),b.jsx(XO,{elements:R.elements,connectors:R.connectors,zoom:$t.zoom,panX:$t.panX,panY:$t.panY,showGrid:We,showRulers:Ee,onPanChange:tt.updatePan,onElementSelect:E.selectElement,onConnectorSelect:E.selectConnector,onElementsMoveTo:E.moveElementsTo,onConnectorsMoveTo:E.moveConnectorsTo,onElementTextEdit:E.updateElementText,onElementPropertyChange:E.updateElementProperty,onElementImageChange:E.updateElementImage,onZoomChange:tt.setZoom,onZoomAtPoint:tt.setZoomAtPoint,selectedElements:R.selectedElements,selectedConnectors:R.selectedConnectors,canvasMode:$t.canvasMode,selectionArea:$t.selectionArea,isSelecting:$t.isSelecting,onSelectionStart:tt.startSelection,onSelectionChange:tt.updateSelectionArea,onSelectionComplete:F=>{const{elementIds:fe,connectorIds:xe}=tt.completeSelection(F,R);E.setCanvasState(ve=>({...ve,selectedElements:fe,selectedConnectors:xe,selectedItemIds:sa(fe,xe)}))},onResizeStart:Vt.actions.handleResizeStart,onConnectorResizeStart:Mt.actions.handleResizeStart,isResizing:Vt.isResizing,isConnectorResizing:Mt.isResizing,resizingConnectorId:Mt.resizeConnectorId,resizeHasAnchorPreview:Mt.resizeHasAnchorPreview,resizeElementId:Vt.resizeElementId,resizeHandle:Vt.resizeHandle,resizeEndpoint:Mt.resizeEndpoint,resizeAnchorPreview:Mt.resizeAnchorPreview,connectorResizeSnapPreview:Mt.resizeSnapPreview,isShiftPressed:je,onTransactionStart:so,onTransactionEnd:Br,onTemporarySelectModeChange:St,onConnectorCreate:(F,fe,xe)=>{const ve=xo();E.queueHistoryEntry("Add connector"),E.setCanvasState(qe=>{const bt=ld(qe),Ct={id:ve,type:"line",startPoint:Re(F),endPoint:Re(fe),startAttachment:xe?.start??null,endAttachment:xe?.end??null,zIndex:bt,properties:{...oi}};return{...qe,connectors:[...qe.connectors,Ct],selectedElements:[],selectedConnectors:[ve],selectedItemIds:[ve]}}),ho(null),po({...Ai}),tt.setMode("drag")},onModeChange:gr,onItemContextMenu:Md,onCanvasContextMenu:Rd})]}),b.jsx(yS,{isOpen:Ie.isOpen,imageSrc:Ie.imageSrc,onCopy:rn,isGenerating:Ie.isGenerating,onClose:wt,onPrint:Zn,onSave:Ht}),b.jsx(T_,{isOpen:be.importModal.isOpen,pendingImportData:be.importModal.pendingImportData,onConfirm:be.importModal.onConfirm,onCancel:be.importModal.onCancel}),b.jsx(OP,{isOpen:nn,onClose:gn,onRefresh:jn}),b.jsx(I_,{isOpen:be.pagePickerModal.isOpen,pages:be.pagePickerModal.pages,onSelect:be.pagePickerModal.onSelect,onCancel:be.pagePickerModal.onCancel}),b.jsx(__,{isOpen:be.projectImportModal.isOpen,pageCount:be.projectImportModal.pageCount,onConfirm:be.projectImportModal.onConfirm,onCancel:be.projectImportModal.onCancel}),b.jsx(rd,{state:xt,closeMenu:$e,resetMenu:De}),b.jsx(rd,{state:mn,closeMenu:Lt,resetMenu:ao}),b.jsx($w,{ref:A,pages:e,activePageId:o,canAddPage:i,libraryWidth:Rt,isLibraryCollapsed:Se,onAddPage:ri,onToggleLibrary:()=>Pe(F=>!F),onDeletePage:tr,onRenamePage:hr,onDuplicatePage:Nr,onReorderPages:pr,onSwitchToPage:Td,zoom:$t.zoom,onZoomIn:tt.zoomIn,onZoomOut:tt.zoomOut,onResetZoom:tt.resetZoom,onFitToScreen:tt.fitToScreen})]})};if(typeof window<"u"){const e=()=>{try{window.sessionStorage.setItem(Tp,"true")}catch(a){console.error("Failed to set reset notice flag:",a)}window.dispatchEvent(new Event(ec))},o=()=>{if(window.location.hash!=="#reset")return;qT(),VT(),e();const a=`${window.location.pathname}${window.location.search}`;window.history.replaceState({},"",a)};window.addEventListener("hashchange",o),o()}KC.createRoot(document.getElementById("root")).render(b.jsx(Me.StrictMode,{children:b.jsx(jP,{})}));typeof document<"u"&&(document.title=xT);
